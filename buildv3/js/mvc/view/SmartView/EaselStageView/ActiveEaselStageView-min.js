App.ActiveEslStageView=App.EslStageView.extend({tagName:"div",className:"ActiveEslStageView",templateName:"active-esl-stage-view",trails:0,tmpbgColor:null,tmpwinWidth:null,raf:null,isAnimating:false,didInsertElement:function(){this._super();$(window).resize(function(b){return function(){b.resize()}}(this));isAnimating=true;var a=function(c){var b=function(e){var d=(c.get("lastRequestAnimationFrame"))?e-c.get("lastRequestAnimationFrame"):0;c.set("lastRequestAnimationFrame",e);c.reDraw(d);c.set("raf",window.requestAnimationFrame(b))};c.stage.update();return b}(this);this.set("raf",window.requestAnimationFrame(a));this.reDraw()},resize:function(){this.tmpwinWidth=$(window).width();with(this){}},reDraw:function(dur){with(this){for(var i=0;i<eslEntities.length;i++){if(eslEntities[i].override_reDraw){eslEntities[i].override_reDraw(dur)}}stage.x=-1+$canvas.attr("width")/2;stage.update()}},willDestroyElement:function(){this._super();window.cancelAnimationFrame(this.get("raf"))}});App.register("view:active-esl-stage",App.ActiveEslStageView,{singleton:false});