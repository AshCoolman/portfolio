App.ActiveEslStageView=App.EslStageView.extend({tagName:"div",className:"ActiveEslStageView",templateName:"active-esl-stage-view",trails:0,tmpbgColor:null,tmpwinWidth:null,raf:null,isAnimating:false,didInsertElement:function(){this._super();$(window).resize(function(b){return function(){b.resize()}}(this));isAnimating=true;var a=function(c){var b=function(e){var d=(c.get("lastRequestAnimationFrame"))?e-c.get("lastRequestAnimationFrame"):0;c.set("lastRequestAnimationFrame",e);c.reDraw(d);c.set("raf",window.requestAnimationFrame(b))};return b}(this);this.set("raf",window.requestAnimationFrame(a));this.resize();this.reDraw()},resize:function(){this.tmpwinWidth=$(window).width();with(this){if(tmpwinWidth>App.BREAKPOINT.WIDTH_2){width=App.BREAKPOINT.WIDTH_2;height=App.BREAKPOINT.HEIGHT_2;tmpbgColor="rgba(200, 255, 200, "+(trails?1/trails:1)+")"}else{if(tmpwinWidth>App.BREAKPOINT.WIDTH_1){width=App.BREAKPOINT.WIDTH_1;height=App.BREAKPOINT.HEIGHT_1;tmpbgColor="rgba(200, 200, 255, "+(trails?1/trails:1)+")"}else{width=App.BREAKPOINT.WIDTH_0;height=App.BREAKPOINT.HEIGHT_0;tmpbgColor="rgba(255, 200, 200, "+(trails?1/trails:1)+")"}}$canvas.attr({width:width,height:height});if(App.DEBUG){$canvas.css({"box-shadow":"inset -1px -1px "+tmpbgColor,width:width,height:height})}}},reDraw:function(dur){var eslEntities=this.eslEntities;with(this){for(var i=0;i<eslEntities.length;i++){if(!eslEntities[i].override_reDraw){}else{eslEntities[i].override_reDraw(dur)}}stage.x=-1+$canvas.attr("width")/2;stage.update()}},willDestroyElement:function(){this._super();window.cancelAnimationFrame(this.get("raf"))}});App.register("view:active-esl-stage",App.ActiveEslStageView,{singleton:false});