App.ClickAndDragScalarView=App.ScalarView.extend({templateName:"click-and-drag-scalar",COLOR:"#ff6666",MOD:2,scaleList:[{val:55,label:"wpm"},{val:67,label:"Kg"},{val:167,label:"cm"},{val:32,label:" years old"}],init:function(){this._super();this.set("eslObjSettings",$.extend(this.get("eslObjSettings"),{width:200,height:320,x:0,y:0,fromController:["x","y","width","height"]}));this.drawInstructions=this.get("drawInstructions");this.drawInstructions.smallMarks.markHeights=[4];this.drawInstructions.isMirrored=false;this.MOD=this.get("MOD");return this},didInsertElement:function(){this._super();return this},override_createEsl:function(){this.container=new createjs.Container();this.shp=new createjs.Shape();this.shp.x=0.5;this.container.addChild(this.shp);this.text=new createjs.Text("","24px Arial",this.get("COLOR"));this.text.textBaseline="alphabetic";this.container.addChild(this.text);var e="#ffffff",c=this.get("scaleList");for(var g=0;g<c.length;g++){var a=c[g],b=new createjs.Container(),d=new createjs.Shape(),f=new createjs.Text(a.val+" "+a.label,"12px Arial",e);b.addChild(d),b.addChild(f);this.container.addChild(b),verticalRise=-a.val;f.x=Math.round(a.val*this.MOD);d.graphics.clear().setStrokeStyle(1).beginStroke(e).moveTo(0,0).lineTo(f.x,0).lineTo(f.x,verticalRise).endStroke();d.x=0.5;f.y=verticalRise-20;b.alpha=0;a.esl=b}return this.container},override_draw:function(a){this._super(a);this.shp.addEventListener("tick",function(b){return function(){b.tryListenMouseMove()}}(this))},tryListenMouseMove:function(){var k=this.shp,j=this.text,i=k.graphics,b=this.drawInstructions,f=b.smallMarks,g=b.bigMarks,h=k.getStage(),c=h.canvas,e=-k.x+(h.canvas.width-k.width)/2,a=this.get("COLOR"),d;if(h){$(h.canvas).mousemove(function(l){return function(q){d=Math.round(h.mouseX-e)/l.MOD;var2d=d*l.MOD,valDir=Math.round(d/Math.abs(d));valAbs=Math.abs(d);j.x=10+var2d;j.y=-15+k.y;i.clear().setStrokeStyle(1).beginStroke(a).moveTo(0,0).lineTo(var2d,0).endStroke();1;markHeight=f.markHeights[f.markHeights.length-1];for(var p=1;p*f.unit<valAbs;p++){i.setStrokeStyle(1).beginStroke(a).moveTo(Math.round(valDir*p*f.unit,markHeight)).lineTo(Math.round(valDir*p*f.unit,-markHeight)).endStroke()}markHeight=g.markHeights[g.markHeights.length-1];for(var p=1;p*g.unit<valAbs;p++){i.beginStroke(a).moveTo(valDir*p*g.unit,markHeight).lineTo(valDir*p*g.unit,-markHeight).endStroke()}var n="",m,o=l.get("scaleList");for(var r=0;r<o.length;r++){if(Math.abs(o[r].val-d)<5){createjs.Tween.get(o[r].esl,{override:true}).to({alpha:1},180).wait(1500).to({alpha:0},700)}}j.text=n}}(this));this.shp.removeAllEventListeners("tick")}},override_reDraw:function(){},drawScale:function(a){}});