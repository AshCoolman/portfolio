var Stats=function(){var B=Date.now(),A=B,G=0,z=Infinity,y=0,F=0,x=Infinity,w=0,v=0,u=0,H=document.createElement("div");H.id="stats";H.addEventListener("mousedown",function(a){a.preventDefault();b(++u%2)},!1);H.style.cssText="width:80px;opacity:0.9;cursor:pointer";var L=document.createElement("div");L.id="fps";L.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";H.appendChild(L);var E=document.createElement("div");E.id="fpsText";E.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";E.innerHTML="FPS";L.appendChild(E);var K=document.createElement("div");K.id="fpsGraph";K.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(L.appendChild(K);74>K.children.length;){var D=document.createElement("span");D.style.cssText="width:1px;height:30px;float:left;background-color:#113";K.appendChild(D)}var J=document.createElement("div");J.id="ms";J.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";H.appendChild(J);var C=document.createElement("div");C.id="msText";C.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";C.innerHTML="MS";J.appendChild(C);var I=document.createElement("div");I.id="msGraph";I.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(J.appendChild(I);74>I.children.length;){D=document.createElement("span"),D.style.cssText="width:1px;height:30px;float:left;background-color:#131",I.appendChild(D)}var b=function(a){u=a;switch(u){case 0:L.style.display="block";J.style.display="none";break;case 1:L.style.display="none",J.style.display="block"}};return{REVISION:11,domElement:H,setMode:b,begin:function(){B=Date.now()},end:function(){var c=Date.now();G=c-B;z=Math.min(z,G);y=Math.max(y,G);C.textContent=G+" MS ("+z+"-"+y+")";var d=Math.min(30,30-30*(G/200));I.appendChild(I.firstChild).style.height=d+"px";v++;c>A+1000&&(F=Math.round(1000*v/(c-A)),x=Math.min(x,F),w=Math.max(w,F),E.textContent=F+" FPS ("+x+"-"+w+")",d=Math.min(30,30-30*(F/100)),K.appendChild(K.firstChild).style.height=d+"px",A=c,v=0);return c},update:function(){B=this.end()}}};var THREEx=THREEx||{};THREEx.RendererStats=function(){var j=100;var c=0;var b=document.createElement("div");b.style.cssText="width:80px;opacity:0.9;cursor:pointer";var g=document.createElement("div");g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#200;";b.appendChild(g);var h=document.createElement("div");h.style.cssText="color:#f00;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";h.innerHTML="WebGLRenderer";g.appendChild(h);var e=[];var f=9;for(var d=0;d<f;d++){e[d]=document.createElement("div");e[d].style.cssText="color:#f00;background-color:#311;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";g.appendChild(e[d]);e[d].innerHTML="-"}var a=Date.now();return{domElement:b,update:function(l){console.assert(l instanceof THREE.WebGLRenderer);if(Date.now()-a<1000/30){return}a=Date.now();var k=0;e[k++].textContent="== Memory =====";e[k++].textContent="Programs: "+l.info.memory.programs;e[k++].textContent="Geometries: "+l.info.memory.geometries;e[k++].textContent="Textures: "+l.info.memory.textures;e[k++].textContent="== Render =====";e[k++].textContent="Calls: "+l.info.render.calls;e[k++].textContent="Vertices: "+l.info.render.vertices;e[k++].textContent="Faces: "+l.info.render.faces;e[k++].textContent="Points: "+l.info.render.points}}};if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());/*! jQuery v@1.8.1 jquery.com | jquery.org/license */
(function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(I,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else{d=b}}return d}function K(a){var b;for(b in a){if(b==="data"&&p.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function ba(){return !1}function bb(){return !0}function bh(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function bi(a,b){do{a=a[b]}while(a&&a.nodeType!==1);return a}function bj(a,b,c){b=b||0;if(p.isFunction(b)){return p.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return p.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=p.grep(a,function(a){return a.nodeType===1});if(be.test(b)){return p.filter(b,d,!c)}b=p.filter(b,d)}return p.grep(a,function(a,d){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(b.nodeType!==1||!p.hasData(a)){return}var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;d<e;d++){p.event.add(b,c,h[c][d])}}}g.data&&(g.data=p.extend({},g.data))}function bE(a,b){var c;if(b.nodeType!==1){return}b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):c==="input"&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando)}function bF(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bY(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bW.length;while(e--){b=bW[e]+c;if(b in a){return b}}return d}function bZ(a,b){return a=b||a,p.css(a,"display")==="none"||!p.contains(a.ownerDocument,a)}function b$(a,b){var c,d,e=[],f=0,g=a.length;for(;f<g;f++){c=a[f];if(!c.style){continue}e[f]=p._data(c,"olddisplay"),b?(!e[f]&&c.style.display==="none"&&(c.style.display=""),c.style.display===""&&bZ(c)&&(e[f]=p._data(c,"olddisplay",cc(c.nodeName)))):(d=bH(c,"display"),!e[f]&&d!=="none"&&p._data(c,"olddisplay",d))}for(f=0;f<g;f++){c=a[f];if(!c.style){continue}if(!b||c.style.display==="none"||c.style.display===""){c.style.display=b?e[f]||"":"none"}}return a}function b_(a,b,c){var d=bP.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function ca(a,b,c,d){var e=c===(d?"border":"content")?4:b==="width"?1:0,f=0;for(;e<4;e+=2){c==="margin"&&(f+=p.css(a,c+bV[e],!0)),d?(c==="content"&&(f-=parseFloat(bH(a,"padding"+bV[e]))||0),c!=="margin"&&(f-=parseFloat(bH(a,"border"+bV[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bV[e]))||0,c!=="padding"&&(f+=parseFloat(bH(a,"border"+bV[e]+"Width"))||0))}return f}function cb(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&p.css(a,"boxSizing")==="border-box";if(d<=0||d==null){d=bH(a,b);if(d<0||d==null){d=a.style[b]}if(bQ.test(d)){return d}e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+ca(a,b,c||(f?"border":"content"),e)+"px"}function cc(a){if(bS[a]){return bS[a]}var b=p("<"+a+">").appendTo(e.body),c=b.css("display");b.remove();if(c==="none"||c===""){bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!bJ||!bI.createElement){bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close()}b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)}return bS[a]=c,c}function ci(a,b,c,d){var e;if(p.isArray(b)){p.each(b,function(b,e){c||ce.test(a)?d(a,e):ci(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&p.type(b)==="object"){for(e in b){ci(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function cz(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c)){for(;h<i;h++){d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}}}function cA(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h,i=a[f],j=0,k=i?i.length:0,l=a===cv;for(;j<k&&(l||!h);j++){h=i[j](c,d,e),typeof h=="string"&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cA(a,c,d,e,h,g)))}return(l||!h)&&!g["*"]&&(h=cA(a,c,d,e,"*",g)),h}function cB(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d])}e&&p.extend(!0,a,e)}function cC(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k){f in d&&(c[k[f]]=d[f])}while(j[0]==="*"){j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"))}if(e){for(f in i){if(i[f]&&i[f].test(e)){j.unshift(f);break}}}if(j[0] in d){g=j[0]}else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g){return g!==j[0]&&j.unshift(g),d[g]}}function cD(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;a.dataFilter&&(b=a.dataFilter(b,a.dataType));if(g[1]){for(c in a.converters){i[c.toLowerCase()]=a.converters[c]}}for(;e=g[++j];){if(e!=="*"){if(h!=="*"&&h!==e){c=i[h+" "+e]||i["* "+e];if(!c){for(d in i){f=d.split(" ");if(f[1]===e){c=i[h+" "+f[0]]||i["* "+f[0]];if(c){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}}}}if(c!==!0){if(c&&a["throws"]){b=c(b)}else{try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}}}h=e}}return{state:"success",data:b}}function cL(){try{return new a.XMLHttpRequest}catch(b){}}function cM(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cU(){return setTimeout(function(){cN=b},0),cN=p.now()}function cV(a,b){p.each(b,function(b,c){var d=(cT[b]||[]).concat(cT["*"]),e=0,f=d.length;for(;e<f;e++){if(d[e].call(a,b,c)){return}}})}function cW(a,b,c){var d,e=0,f=0,g=cS.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){var b=cN||cU(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;for(;e<f;e++){j.tweens[e].run(d)}return h.notifyWith(a,[j,d,c]),d<1&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cN||cU(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){var c=0,d=b?j.tweens.length:0;for(;c<d;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;cX(k,j.opts.specialEasing);for(;e<g;e++){d=cS[e].call(j,a,k,j.opts);if(d){return d}}return cV(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function cX(a,b){var c,d,e,f,g;for(c in a){d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d];if(g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function cY(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bZ(a);c.queue||(j=p._queueHooks(a,"fx"),j.unqueued==null&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),a.nodeType===1&&("height" in b||"width" in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],p.css(a,"display")==="inline"&&p.css(a,"float")==="none"&&(!p.support.inlineBlockNeedsLayout||cc(a.nodeName)==="inline"?m.display="inline-block":m.zoom=1)),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){f=b[d];if(cP.exec(f)){delete b[d];if(f===(q?"hide":"show")){continue}o.push(d)}}g=o.length;if(g){h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n){p.style(a,b,n[b])}});for(d=0;d<g;d++){e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start=e==="width"||e==="height"?1:0))}}}function cZ(a,b,c,d,e){return new cZ.prototype.init(a,b,c,d,e)}function c$(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=bV[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function da(a){return p.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):e.readyState==="complete"&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,h,i;if(!a){return this}if(a.nodeType){return this.context=this[0]=a,this.length=1,this}if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?f=[null,a,null]:f=u.exec(a);if(f&&(f[1]||!c)){if(f[1]){return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a)}g=e.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2]){return d.find(a)}this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return !c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++){if((a=arguments[i])!=null){for(c in a){d=h[c],e=a[c];if(h===e){continue}k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e)}}}return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?--p.readyWait:p.isReady){return}if(!e.body){return setTimeout(p.ready,1)}p.isReady=!0;if(a!==!0&&--p.readyWait>0){return}d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready")},isFunction:function(a){return p.type(a)==="function"},isArray:Array.isArray||function(a){return p.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):E[m.call(a)]||"object"},isPlainObject:function(a){if(!a||p.type(a)!=="object"||a.nodeType||p.isWindow(a)){return !1}try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return !a||typeof a!="string"?null:(typeof b=="boolean"&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||typeof b!="string"){return null}b=p.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(w.test(b.replace(y,"@").replace(z,"]").replace(x,""))){return(new Function("return "+b))()}p.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||typeof c!="string"){return null}try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d){if(h){for(e in a){if(c.apply(a[e],d)===!1){break}}}else{for(;f<g;){if(c.apply(a[f++],d)===!1){break}}}}else{if(h){for(e in a){if(c.call(a[e],e,a[e])===!1){break}}}else{for(;f<g;){if(c.call(a[f],f,a[f++])===!1){break}}}}return a},trim:o&&!o.call(" ")?function(a){return a==null?"":o.call(a)}:function(a){return a==null?"":a.toString().replace(t,"")},makeArray:function(a,b){var c,d=b||[];return a!=null&&(c=p.type(a),a.length==null||c==="string"||c==="function"||c==="regexp"||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l){return l.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number"){for(;f<d;f++){a[e++]=c[f]}}else{while(c[f]!==b){a[e++]=c[f++]}}return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++){d=!!b(a[f],f),c!==d&&e.push(a[f])}return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&typeof i=="number"&&(i>0&&a[0]&&a[i-1]||i===0||p.isArray(a));if(j){for(;h<i;h++){e=c(a[h],h,d),e!=null&&(g[g.length]=e)}}else{for(f in a){e=c(a[f],f,d),e!=null&&(g[g.length]=e)}}return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return typeof c=="string"&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=d==null,k=0,l=a.length;if(d&&typeof d=="object"){for(k in d){p.access(a,c,k,d[k],1,g,e)}f=1}else{if(e!==b){i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null));if(c){for(;k<l;k++){c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h)}}f=1}}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d){d=p.Deferred();if(e.readyState==="complete"){setTimeout(p.ready,1)}else{if(e.addEventListener){e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1)}else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;try{c=a.frameElement==null&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}}}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a=typeof a=="string"?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;for(;i&&h<g;h++){if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;(function d(b){p.each(b,function(b,c){var e=p.type(c);e==="function"&&(!a.unique||!l.has(c))?i.push(c):c&&c.length&&e!=="string"&&d(c)})})(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){var c;while((c=p.inArray(b,i,c))>-1){i.splice(c,1),e&&(c<=g&&g--,c<=h&&h--)}}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return !i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return !j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return !!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return typeof a=="object"?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=k.call(arguments),d=c.length,e=d!==1||a&&p.isFunction(a.promise)?d:0,f=e===1?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++){c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}}return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length||!d){return{}}f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:h.value==="on",optSelected:g.selected,getSetAttribute:n.className!=="t",enctype:!!e.createElement("form").enctype,html5Clone:e.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:e.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue=h.value==="t",h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n);if(n.attachEvent){for(k in {submit:!0,change:!0,focusin:!0}){j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l=typeof n[j]=="function"),b[k+"Bubbles"]=l}}return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];if(!i){return}c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&f[0].offsetHeight===0,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=d.offsetWidth===4,b.doesNotIncludeMarginInBodyOffset=i.offsetTop!==1,a.getComputedStyle&&(b.pixelPosition=(a.getComputedStyle(d,null)||{}).top!=="1%",b.boxSizingReliable=(a.getComputedStyle(d,null)||{width:"4px"}).width==="4px",g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),typeof d.style.zoom!="undefined"&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=d.offsetWidth===3,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=d.offsetWidth!==3,c.style.zoom=1),i.removeChild(c),c=d=f=g=null}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(!p.acceptData(a)){return}var f,g,h=p.expando,i=typeof c=="string",j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if((!l||!k[l]||!e&&!k[l].data)&&i&&d===b){return}l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop));if(typeof c=="object"||typeof c=="function"){e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c)}return f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],g==null&&(g=f[p.camelCase(c)])):g=f,g},removeData:function(a,b,c){if(!p.acceptData(a)){return}var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(!h[i]){return}if(b){d=c?h[i]:h[i].data;if(d){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,f=b.length;e<f;e++){delete d[b[e]]}if(!(c?K:p.isEmptyObject)(d)){return}}}if(!c){delete h[i].data;if(!K(h[i])){return}}g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return !b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length){k=p.data(i);if(i.nodeType===1&&!p._data(i,"parsedAttrs")){f=i.attributes;for(h=f.length;j<h;j++){g=f[j].name,g.indexOf("data-")===0&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]))}p._data(i,"parsedAttrs",!0)}}return k}return typeof a=="object"?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){if(c===b){return k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k}d[1]=c,this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;if(a){return b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]}},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.length,e=c.shift(),f=p._queueHooks(a,b),g=function(){p.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),a==="fx"&&b[0]!=="inprogress"&&p.dequeue(this,a)})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};typeof a!="string"&&(c=a,a=b),a=a||"fx";while(h--){d=p._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i))}return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a)){return this.each(function(b){p(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(s);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++){~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ")}e.className=p.trim(f)}}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a)){return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(s);for(h=0,i=this.length;h<i;h++){e=this[h];if(e.nodeType===1&&e.className){d=(" "+e.className+" ").replace(O," ");for(f=0,g=c.length;f<g;f++){while(d.indexOf(" "+c[f]+" ")>-1){d=d.replace(" "+c[f]+" "," ")}}e.className=a?p.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return p.isFunction(a)?this.each(function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=p(this),h=b,i=a.split(s);while(e=i[f++]){h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f){return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get" in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(P,""):d==null?"":d)}return}return e=p.isFunction(a),this.each(function(d){var f,g=p(this);if(this.nodeType!==1){return}e?f=a.call(this,d,g.val()):f=a,f==null?f="":typeof f=="number"?f+="":p.isArray(f)&&(f=p.map(f,function(a){return a==null?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,f,"value")===b){this.value=f}})}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0){return null}c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(p.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){b=p(e).val();if(i){return b}g.push(b)}}return i&&!g.length&&h.length?p(h[f]).val():g},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2){return}if(e&&p.isFunction(p.fn[c])){return p(a)[c](d)}if(typeof a.getAttribute=="undefined"){return p.prop(a,c,d)}h=i!==1||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L));if(d!==b){if(d===null){p.removeAttr(a,c);return}return g&&"set" in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get" in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&a.nodeType===1){d=b.split(s);for(;g<d.length;g++){e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode){p.error("type property can't be changed")}else{if(!p.support.radioValue&&b==="radio"&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){if(L&&p.nodeName(a,"button")){return L.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2){return}return g=h!==1||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set" in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get" in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(N[c]?d.value!=="":d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){if(c===""){return a.setAttribute(b,"auto"),c}}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){b===""&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){if(p.isArray(b)){return a.checked=p.inArray(p(a).val(),b)>=0}}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=p._data(a))){return}d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof p!="undefined"&&(!a||p.event.triggered!==a.type)?p.event.dispatch.apply(h.elem,arguments):b},h.elem=a),c=p.trim(_(c)).split(" ");for(j=0;j<c.length;j++){k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1){a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(!r||!(m=r.events)){return}b=p.trim(_(b||"")).split(" ");for(f=0;f<b.length;f++){g=W.exec(b[f])||[],h=i=g[1],j=g[2];if(!h){for(h in m){p.event.remove(a,h+b[f],c,d,!0)}continue}n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(l=0;l<o.length;l++){q=o[l],(e||i===q.origType)&&(!c||c.guid===q.guid)&&(!j||j.test(q.namespace))&&(!d||d===q.selector||d==="**"&&q.selector)&&(o.splice(l--,1),q.selector&&o.delegateCount--,n.remove&&n.remove.call(a,q))}o.length===0&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])}p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||f.nodeType!==3&&f.nodeType!==8){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered)){return}s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort());if((!f||p.event.customEvent[s])&&!p.event.global[s]){return}c=typeof c=="object"?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"";if(!f){h=p.cache;for(j in h){h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0)}return}c.result=b,c.target||(c.target=f),d=d!=null?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{};if(n.trigger&&n.trigger.apply(f,d)===!1){return}q=[[f,n.bindType||s]];if(!g&&!n.noBubble&&!p.isWindow(f)){r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode;for(l=f;k;k=k.parentNode){q.push([k,r]),l=k}l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++){k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault()}return c.type=s,!g&&!c.isDefaultPrevented()&&(!n._default||n._default.apply(f.ownerDocument,d)===!1)&&(s!=="click"||!p.nodeName(f,"a"))&&p.acceptData(f)&&m&&f[s]&&(s!=="focus"&&s!=="blur"||c.target.offsetWidth!==0)&&!p.isWindow(f)&&(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,l&&(f[m]=l)),c.result}return},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(p._data(this,"events")||{})[c.type]||[],o=n.delegateCount,q=[].slice.call(arguments),r=!c.exclusive&&!c.namespace,s=p.event.special[c.type]||{},t=[];q[0]=c,c.delegateTarget=this;if(s.preDispatch&&s.preDispatch.call(this,c)===!1){return}if(o&&(!c.button||c.type!=="click")){for(f=c.target;f!=this;f=f.parentNode||this){if(f.disabled!==!0||c.type!=="click"){h={},j=[];for(d=0;d<o;d++){k=n[d],l=k.selector,h[l]===b&&(h[l]=p(l,this).index(f)>=0),h[l]&&j.push(k)}j.length&&t.push({elem:f,matches:j})}}}n.length>o&&t.push({elem:this,matches:n.slice(o)});for(d=0;d<t.length&&!c.isPropagationStopped();d++){i=t[d],c.currentTarget=i.elem;for(e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++){k=i.matches[e];if(r||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace)){c.data=k.data,c.handleObj=k,g=((p.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,q),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation()))}}}return s.postDispatch&&s.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[p.expando]){return a}var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=p.Event(d);for(b=g.length;b;){c=g[--b],a[c]=d[c]}return a.target||(a.target=d.srcElement||e),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]=="undefined"&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){if(this instanceof p.Event){a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0}else{return new p.Event(a,b)}},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;if(!a){return}a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;if(!a){return}a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj,g=f.selector;if(!e||e!==d&&!p.contains(d,e)){a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b}return c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form")){return !1}p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(p.nodeName(this,"form")){return !1}p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){p.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)})}return !1}p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){return p.event.remove(this,"._change"),!V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)};p.event.special[b]={setup:function(){c++===0&&e.addEventListener(a,d,!0)},teardown:function(){--c===0&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(h in a){this.on(h,c,d,a[h],f)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=ba}else{if(!e){return this}}return f===1&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj){return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if(typeof a=="object"){for(f in a){this.off(f,c,a[f])}return this}if(c===!1||typeof c=="function"){d=c,c=b}return d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return p.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function $(a,b,c,d){c=c||[],b=b||q;var e,f,g,j,k=b.nodeType;if(k!==1&&k!==9){return[]}if(!a||typeof a!="string"){return c}g=h(b);if(!g&&!d){if(e=L.exec(a)){if(j=e[1]){if(k===9){f=b.getElementById(j);if(!f||!f.parentNode){return c}if(f.id===j){return c.push(f),c}}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(j))&&i(b,f)&&f.id===j){return c.push(f),c}}}else{if(e[2]){return u.apply(c,t.call(b.getElementsByTagName(a),0)),c}if((j=e[3])&&X&&b.getElementsByClassName){return u.apply(c,t.call(b.getElementsByClassName(j),0)),c}}}}return bk(a,b,c,d,g)}function _(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function ba(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bb(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}function bc(a,b,c,d){var e,g,h,i,j,k,l,m,n,p,r=!c&&b!==q,s=(r?"<s>":"")+a.replace(H,"$1<s>"),u=y[o][s];if(u){return d?0:t.call(u,0)}j=a,k=[],m=0,n=f.preFilter,p=f.filter;while(j){if(!e||(g=I.exec(j))){g&&(j=j.slice(g[0].length),h.selector=l),k.push(h=[]),l="",r&&(j=" "+j)}e=!1;if(g=J.exec(j)){l+=g[0],j=j.slice(g[0].length),e=h.push({part:g.pop().replace(H," "),string:g[0],captures:g})}for(i in p){(g=S[i].exec(j))&&(!n[i]||(g=n[i](g,b,c)))&&(l+=g[0],j=j.slice(g[0].length),e=h.push({part:i,string:g.shift(),captures:g}))}if(!e){break}}return l&&(h.selector=l),d?j.length:j?$.error(a):t.call(y(s,k),0)}function bd(a,b,e,f){var g=b.dir,h=s++;return a||(a=function(a){return a===e}),b.first?function(b){while(b=b[g]){if(b.nodeType===1){return a(b)&&b}}}:f?function(b){while(b=b[g]){if(b.nodeType===1&&a(b)){return b}}}:function(b){var e,f=h+"."+c,i=f+"."+d;while(b=b[g]){if(b.nodeType===1){if((e=b[o])===i){return b.sizset}if(typeof e=="string"&&e.indexOf(f)===0){if(b.sizset){return b}}else{b[o]=i;if(a(b)){return b.sizset=!0,b}b.sizset=!1}}}}}function be(a,b){return a?function(c){var d=b(c);return d&&a(d===!0?c:d)}:b}function bf(a,b,c){var d,e,g=0;for(;d=a[g];g++){f.relative[d.part]?e=bd(e,f.relative[d.part],b,c):e=be(e,f.filter[d.part].apply(null,d.captures.concat(b,c)))}return e}function bg(a){return function(b){var c,d=0;for(;c=a[d];d++){if(c(b)){return !0}}return !1}}function bh(a,b,c,d){var e=0,f=b.length;for(;e<f;e++){$(a,b[e],c,d)}}function bi(a,b,c,d,e,g){var h,i=f.setFilters[b.toLowerCase()];return i||$.error(b),(a||!(h=e))&&bh(a||"*",d,h=[],e),h.length>0?i(h,c,g):[]}function bj(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s=0,t=a.length,v=S.POS,w=new RegExp("^"+v.source+"(?!"+A+")","i"),x=function(){var a=1,c=arguments.length-2;for(;a<c;a++){arguments[a]===b&&(n[a]=b)}};for(;s<t;s++){f=a[s],g="",m=e;for(h=0,i=f.length;h<i;h++){j=f[h],k=j.string;if(j.part==="PSEUDO"){v.exec(""),l=0;while(n=v.exec(k)){o=!0,p=v.lastIndex=n.index+n[0].length;if(p>l){g+=k.slice(l,n.index),l=p,q=[c],J.test(g)&&(m&&(q=m),m=e);if(r=O.test(g)){g=g.slice(0,-5).replace(J,"$&*"),l++}n.length>1&&n[0].replace(w,x),m=bi(g,n[1],n[2],q,m,r)}g=""}}o||(g+=k),o=!1}g?J.test(g)?bh(g,m||[c],d,e):$(g,c,d,e?e.concat(m):m):u.apply(d,m)}return t===1?d:$.uniqueSort(d)}function bk(a,b,e,g,h){a=a.replace(H,"$1");var i,k,l,m,n,o,p,q,r,s,v=bc(a,b,h),w=b.nodeType;if(S.POS.test(a)){return bj(v,b,e,g)}if(g){i=t.call(g,0)}else{if(v.length===1){if((o=t.call(v[0],0)).length>2&&(p=o[0]).part==="ID"&&w===9&&!h&&f.relative[o[1].part]){b=f.find.ID(p.captures[0].replace(R,""),b,h)[0];if(!b){return e}a=a.slice(o.shift().string.length)}r=(v=N.exec(o[0].string))&&!v.index&&b.parentNode||b,q="";for(n=o.length-1;n>=0;n--){p=o[n],s=p.part,q=p.string+q;if(f.relative[s]){break}if(f.order.test(s)){i=f.find[s](p.captures[0].replace(R,""),r,h);if(i==null){continue}a=a.slice(0,a.length-q.length)+q.replace(S[s],""),a||u.apply(e,t.call(i,0));break}}}}if(a){k=j(a,b,h),c=k.dirruns++,i==null&&(i=f.find.TAG("*",N.test(a)&&b.parentNode||b));for(n=0;m=i[n];n++){d=k.runs++,k(m)&&e.push(m)}}return e}var c,d,e,f,g,h,i,j,k,l,m=!0,n="undefined",o=("sizcache"+Math.random()).replace(".",""),q=a.document,r=q.documentElement,s=0,t=[].slice,u=[].push,v=function(a,b){return a[o]=b||!0,a},w=function(){var a={},b=[];return v(function(c,d){return b.push(c)>f.cacheLength&&delete a[b.shift()],a[c]=d},a)},x=w(),y=w(),z=w(),A="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",C=B.replace("w","w#"),D="([*^$|!~]?=)",E="\\["+A+"*("+B+")"+A+"*(?:"+D+A+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+C+")|)|)"+A+"*\\]",F=":("+B+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+E+")|[^:]|\\\\.)*|.*))\\)|)",G=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",H=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g"),I=new RegExp("^"+A+"*,"+A+"*"),J=new RegExp("^"+A+"*([\\x20\\t\\r\\n\\f>+~])"+A+"*"),K=new RegExp(F),L=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,M=/^:not/,N=/[\x20\t\r\n\f]*[+~]/,O=/:not\($/,P=/h\d/i,Q=/input|select|textarea|button/i,R=/\\(?!\\)/g,S={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),POS:new RegExp(G,"ig"),needsContext:new RegExp("^"+A+"*[>+~]|"+G,"i")},T=function(a){var b=q.createElement("div");try{return a(b)}catch(c){return !1}finally{b=null}},U=T(function(a){return a.appendChild(q.createComment("")),!a.getElementsByTagName("*").length}),V=T(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==n&&a.firstChild.getAttribute("href")==="#"}),W=T(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return b!=="boolean"&&b!=="string"}),X=T(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",a.getElementsByClassName("e").length===2)}),Y=T(function(a){a.id=o+0,a.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",r.insertBefore(a,r.firstChild);var b=q.getElementsByName&&q.getElementsByName(o).length===2+q.getElementsByName(o+0).length;return e=!q.getElementById(o),r.removeChild(a),b});try{t.call(r.childNodes,0)[0].nodeType}catch(Z){t=function(a){var b,c=[];for(;b=this[a];a++){c.push(b)}return c}}$.matches=function(a,b){return $(a,null,null,b)},$.matchesSelector=function(a,b){return $(b,null,null,[a]).length>0},g=$.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(e===1||e===9||e===11){if(typeof a.textContent=="string"){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=g(a)}}else{if(e===3||e===4){return a.nodeValue}}}else{for(;b=a[d];d++){c+=g(b)}}return c},h=$.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},i=$.contains=r.contains?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&d.nodeType===1&&c.contains&&c.contains(d))}:r.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode){if(b===a){return !0}}return !1},$.attr=function(a,b){var c,d=h(a);return d||(b=b.toLowerCase()),f.attrHandle[b]?f.attrHandle[b](a):W||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?typeof a[b]=="boolean"?a[b]?b:null:c.specified?c.value:null:null)},f=$.selectors={cacheLength:50,createPseudo:v,match:S,order:new RegExp("ID|TAG"+(Y?"|NAME":"")+(X?"|CLASS":"")),attrHandle:V?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:e?function(a,b,c){if(typeof b.getElementById!==n&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==n&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==n&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:U?function(a,b){if(typeof b.getElementsByTagName!==n){return b.getElementsByTagName(a)}}:function(a,b){var c=b.getElementsByTagName(a);if(a==="*"){var d,e=[],f=0;for(;d=c[f];f++){d.nodeType===1&&e.push(d)}return e}return c},NAME:function(a,b){if(typeof b.getElementsByName!==n){return b.getElementsByName(name)}},CLASS:function(a,b,c){if(typeof b.getElementsByClassName!==n&&!c){return b.getElementsByClassName(a)}}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(R,""),a[3]=(a[4]||a[5]||"").replace(R,""),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1]==="nth"?(a[2]||$.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*(a[2]==="even"||a[2]==="odd")),a[4]=+(a[6]+a[7]||a[2]==="odd")):a[2]&&$.error(a[0]),a},PSEUDO:function(a,b,c){var d,e;if(S.CHILD.test(a[0])){return null}if(a[3]){a[2]=a[3]}else{if(d=a[4]){K.test(d)&&(e=bc(d,b,c,!0))&&(e=d.indexOf(")",d.length-e)-d.length)&&(d=d.slice(0,e),a[0]=a[0].slice(0,e)),a[2]=d}}return a.slice(0,3)}},filter:{ID:e?function(a){return a=a.replace(R,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(R,""),function(b){var c=typeof b.getAttributeNode!==n&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return a==="*"?function(){return !0}:(a=a.replace(R,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=x[o][a];return b||(b=x(a,new RegExp("(^|"+A+")"+a+"("+A+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==n&&a.getAttribute("class")||"")}},ATTR:function(a,b,c){return b?function(d){var e=$.attr(d,a),f=e+"";if(e==null){return b==="!="}switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&f.indexOf(c)===0;case"*=":return c&&f.indexOf(c)>-1;case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return(" "+f+" ").indexOf(c)>-1;case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return $.attr(b,a)!=null}},CHILD:function(a,b,c,d){if(a==="nth"){var e=s++;return function(a){var b,f,g=0,h=a;if(c===1&&d===0){return !0}b=a.parentNode;if(b&&(b[o]!==e||!a.sizset)){for(h=b.firstChild;h;h=h.nextSibling){if(h.nodeType===1){h.sizset=++g;if(h===a){break}}}b[o]=e}return f=a.sizset-d,c===0?f===0:f%c===0&&f/c>=0}}return function(b){var c=b;switch(a){case"only":case"first":while(c=c.previousSibling){if(c.nodeType===1){return !1}}if(a==="first"){return !0}c=b;case"last":while(c=c.nextSibling){if(c.nodeType===1){return !1}}return !0}}},PSEUDO:function(a,b,c,d){var e,g=f.pseudos[a]||f.pseudos[a.toLowerCase()];return g||$.error("unsupported pseudo: "+a),g[o]?g(b,c,d):g.length>1?(e=[a,a,"",b],function(a){return g(a,0,e)}):g}},pseudos:{not:v(function(a,b,c){var d=j(a.replace(H,"$1"),b,c);return function(a){return !d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return !f.pseudos.empty(a)},empty:function(a){var b;a=a.firstChild;while(a){if(a.nodeName>"@"||(b=a.nodeType)===3||b===4){return !1}a=a.nextSibling}return !0},contains:v(function(a){return function(b){return(b.textContent||b.innerText||g(b)).indexOf(a)>-1}}),has:v(function(a){return function(b){return $(a,b).length>0}}),header:function(a){return P.test(a.nodeName)},text:function(a){var b,c;return a.nodeName.toLowerCase()==="input"&&(b=a.type)==="text"&&((c=a.getAttribute("type"))==null||c.toLowerCase()===b)},radio:_("radio"),checkbox:_("checkbox"),file:_("file"),password:_("password"),image:_("image"),submit:ba("submit"),reset:ba("reset"),button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},input:function(a){return Q.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&(!!a.type||!!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){var d=[],e=c?1:0,f=a.length;for(;e<f;e=e+2){d.push(a[e])}return d},odd:function(a,b,c){var d=[],e=c?0:1,f=a.length;for(;e<f;e=e+2){d.push(a[e])}return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}},k=r.compareDocumentPosition?function(a,b){return a===b?(l=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){return l=!0,0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,h=b.parentNode,i=g;if(g===h){return bb(a,b)}if(!g){return -1}if(!h){return 1}while(i){e.unshift(i),i=i.parentNode}i=h;while(i){f.unshift(i),i=i.parentNode}c=e.length,d=f.length;for(var j=0;j<c&&j<d;j++){if(e[j]!==f[j]){return bb(e[j],f[j])}}return j===c?bb(a,f[j],-1):bb(e[j],b,1)},[0,0].sort(k),m=!l,$.uniqueSort=function(a){var b,c=1;l=m,a.sort(k);if(l){for(;b=a[c];c++){b===a[c-1]&&a.splice(c--,1)}}return a},$.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},j=$.compile=function(a,b,c){var d,e,f,g=z[o][a];if(g&&g.context===b){return g}d=bc(a,b,c);for(e=0,f=d.length;e<f;e++){d[e]=bf(d[e],b,c)}return g=z(a,bg(d)),g.context=b,g.runs=g.dirruns=0,g},q.querySelectorAll&&function(){var a,b=bk,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=r.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector||r.msMatchesSelector;T(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+A+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),T(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+A+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),bk=function(a,d,f,g,h){if(!g&&!h&&(!e||!e.test(a))){if(d.nodeType===9){try{return u.apply(f,t.call(d.querySelectorAll(a),0)),f}catch(i){}}else{if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j,k,l,m=d.getAttribute("id"),n=m||o,p=N.test(a)&&d.parentNode||d;m?n=n.replace(c,"\\$&"):d.setAttribute("id",n),j=bc(a,d,h),n="[id='"+n+"']";for(k=0,l=j.length;k<l;k++){j[k]=n+j[k].selector}try{return u.apply(f,t.call(p.querySelectorAll(j.join(",")),0)),f}catch(i){}finally{m||d.removeAttribute("id")}}}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push(S.PSEUDO.source,S.POS.source,"!=")}catch(c){}}),f=new RegExp(f.join("|")),$.matchesSelector=function(b,c){c=c.replace(d,"='$1']");if(!h(b)&&!f.test(c)&&(!e||!e.test(c))){try{var i=g.call(b,c);if(i||a||b.document&&b.document.nodeType!==11){return i}}catch(j){}}return $(c,null,null,[b]).length>0})}(),f.setFilters.nth=f.setFilters.eq,f.filters=f.pseudos,$.attr=p.attr,p.find=$,p.expr=$.selectors,p.expr[":"]=p.expr.pseudos,p.unique=$.uniqueSort,p.text=$.getText,p.isXMLDoc=$.isXML,p.contains=$.contains}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if(typeof a!="string"){return p(a).filter(function(){for(b=0,c=h.length;b<c;b++){if(p.contains(h[b],this)){return !0}}})}g=this.pushStack("","find",a);for(b=0,c=this.length;b<c;b++){d=g.length,p.find(a,this[b],g);if(b>0){for(e=d;e<g.length;e++){for(f=0;f<d;f++){if(g[f]===g[e]){g.splice(e--,1);break}}}}}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++){if(p.contains(this,c[b])){return !0}}})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=bf.test(a)||typeof a!="string"?p(a,b||this.context):0;for(;d<e;d++){c=this[d];while(c&&c.ownerDocument&&c!==b&&c.nodeType!==11){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?typeof a=="string"?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&typeof d=="string"&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!p(f).is(d))){f.nodeType===1&&e.push(f),f=f[c]}return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a)){return this.each(function(b){p(this).wrapAll(a.call(this,b))})}if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return p.isFunction(a)?this.each(function(b){p(this).wrapInner(a.call(this,b))}):this.each(function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0])){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){var c,d=0;for(;(c=this[d])!=null;d++){if(!a||p.filter(a,[c]).length){!b&&c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c)}}return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++){a.nodeType===1&&p.cleanData(a.getElementsByTagName("*"));while(a.firstChild){a.removeChild(a.firstChild)}}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(bm,""):b}if(typeof a=="string"&&!bs.test(a)&&(p.support.htmlSerialize||!bu.test(a))&&(p.support.leadingWhitespace||!bn.test(a))&&!bz[(bp.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(bo,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&typeof j=="string"&&bw.test(j)){return this.each(function(){p(this).domManip(a,c,d)})}if(p.isFunction(j)){return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)})}if(this[0]){e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,g.childNodes.length===1&&(g=f);if(f){c=c&&p.nodeName(f,"tr");for(h=e.cacheable||l-1;i<l;i++){d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0))}}g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,a.length===1&&typeof i=="string"&&i.length<512&&c===e&&i.charAt(0)==="<"&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=this.length===1&&this[0].parentNode;if((i==null||i&&i.nodeType===11&&i.childNodes.length===1)&&h===1){return g[b](this[0]),this}for(;e<h;e++){d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d)}return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild));if((!p.support.noCloneEvent||!p.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!p.isXMLDoc(a)){bE(a,g),d=bF(a),e=bF(g);for(f=0;d[f];++f){e[f]&&bE(d[f],e[f])}}if(b){bD(a,g);if(c){d=bF(a),e=bF(g);for(f=0;d[f];++f){bD(d[f],e[f])}}}return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,q,r,s=b===e&&bA,t=[];if(!b||typeof b.createDocumentFragment=="undefined"){b=e}for(f=0;(h=a[f])!=null;f++){typeof h=="number"&&(h+="");if(!h){continue}if(typeof h=="string"){if(!br.test(h)){h=b.createTextNode(h)}else{s=s||bk(b),l=b.createElement("div"),s.appendChild(l),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];while(k--){l=l.lastChild}if(!p.support.tbody){m=bq.test(h),n=i==="table"&&!m?l.firstChild&&l.firstChild.childNodes:j[1]==="<table>"&&!m?l.childNodes:[];for(g=n.length-1;g>=0;--g){p.nodeName(n[g],"tbody")&&!n[g].childNodes.length&&n[g].parentNode.removeChild(n[g])}}!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l.parentNode.removeChild(l)}}h.nodeType?t.push(h):p.merge(t,h)}l&&(h=l=s=null);if(!p.support.appendChecked){for(f=0;(h=t[f])!=null;f++){p.nodeName(h,"input")?bG(h):typeof h.getElementsByTagName!="undefined"&&p.grep(h.getElementsByTagName("input"),bG)}}if(c){q=function(a){if(!a.type||bx.test(a.type)){return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)}};for(f=0;(h=t[f])!=null;f++){if(!p.nodeName(h,"script")||!q(h)){c.appendChild(h),typeof h.getElementsByTagName!="undefined"&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[f+1,0].concat(r)),f+=r.length)}}}return t},cleanData:function(a,b){var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;for(;(e=a[g])!=null;g++){if(b||p.acceptData(e)){d=e[h],c=d&&i[d];if(c){if(c.events){for(f in c.events){k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle)}}i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^(none|table(?!-c[ea]).+)/,bO=/^margin/,bP=new RegExp("^("+q+")(.*)$","i"),bQ=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bR=new RegExp("^([-+])=("+q+")","i"),bS={},bT={position:"absolute",visibility:"hidden",display:"block"},bU={letterSpacing:0,fontWeight:400},bV=["Top","Right","Bottom","Left"],bW=["Webkit","O","Moz","ms"],bX=p.fn.toggle;p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return b$(this,!0)},hide:function(){return b$(this)},toggle:function(a,b){var c=typeof a=="boolean";return p.isFunction(a)&&p.isFunction(b)?bX.apply(this,arguments):this.each(function(){(c?a:bZ(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return c===""?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style){return}var f,g,h,i=p.camelCase(c),j=a.style;c=p.cssProps[i]||(p.cssProps[i]=bY(j,i)),h=p.cssHooks[c]||p.cssHooks[i];if(d===b){return h&&"get" in h&&(f=h.get(a,!1,e))!==b?f:j[c]}g=typeof d,g==="string"&&(f=bR.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d)){return}g==="number"&&!p.cssNumber[i]&&(d+="px");if(!h||!("set" in h)||(d=h.set(a,d,e))!==b){try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bY(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get" in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),f==="normal"&&c in bU&&(f=bU[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b){f[e]=a.style[e],a.style[e]=b[e]}d=c.call(a);for(e in b){a.style[e]=f[e]}return d}}),a.getComputedStyle?bH=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],d===""&&!p.contains(b.ownerDocument,b)&&(d=p.style(b,c)),bQ.test(d)&&bO.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return e==null&&f&&f[b]&&(e=f[b]),bQ.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),e===""?"auto":e}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth===0&&bN.test(bH(a,"display"))?p.swap(a,bT,function(){return cb(a,b,d)}):cb(a,b,d)}},set:function(a,c,d){return b_(a,c,d?ca(a,b,d,p.support.boxSizing&&p.css(a,"boxSizing")==="border-box"):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&p.trim(f.replace(bK,""))===""&&c.removeAttribute){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bK.test(f)?f.replace(bK,e):f+" "+e}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){if(b){return bH(a,"marginRight")}})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bQ.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return a.offsetWidth===0&&a.offsetHeight===0||!p.support.reliableHiddenOffsets&&(a.style&&a.style.display||bH(a,"display"))==="none"},p.expr.filters.visible=function(a){return !p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bV[d]+b]=e[d]||e[d-2]||e[0]}return f}},bO.test(a)||(p.cssHooks[a+b].set=b_)});var cd=/%20/g,ce=/\[\]$/,cf=/\r?\n/g,cg=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ch=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ch.test(this.nodeName)||cg.test(this.type))}).map(function(a,b){var c=p(this).val();return c==null?null:p.isArray(c)?p.map(c,function(a,c){return{name:b.name,value:a.replace(cf,"\r\n")}}):{name:b.name,value:c.replace(cf,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():b==null?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(a)||a.jquery&&!p.isPlainObject(a)){p.each(a,function(){f(this.name,this.value)})}else{for(d in a){ci(d,a[d],c,f)}}return e.join("&").replace(cd,"+")};var cj,ck,cl=/#.*$/,cm=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,cn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,co=/^(?:GET|HEAD)$/,cp=/^\/\//,cq=/\?/,cr=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cs=/([?&])_=[^&]*/,ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,cu=p.fn.load,cv={},cw={},cx=["*/"]+["*"];try{cj=f.href}catch(cy){cj=e.createElement("a"),cj.href="",cj=cj.href}ck=ct.exec(cj.toLowerCase())||[],p.fn.load=function(a,c,d){if(typeof a!="string"&&cu){return cu.apply(this,arguments)}if(!this.length){return this}var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):c&&typeof c=="object"&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cr,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cB(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cB(a,b),a},ajaxSettings:{url:cj,isLocal:cn.test(ck[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cx},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cz(cv),ajaxTransport:cz(cw),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;if(v===2){return}v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cC(l,x,f));if(a>=200&&a<300||a===304){l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),a===304?(y="notmodified",k=!0):(k=cD(l,u),y=k.state,s=k.data,t=k.error,k=!t)}else{t=y;if(!y||a){y="error",a<0&&(a=0)}}x.status=a,x.statusText=""+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return v===2?e:null},getResponseHeader:function(a){var c;if(v===2){if(!f){f={};while(c=cm.exec(e)){f[c[1].toLowerCase()]=c[2]}}c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(v<2){for(b in a){r[b]=[r[b],a[b]]}}else{b=a[x.status],x.always(b)}}return this},l.url=((a||l.url)+"").replace(cl,"").replace(cp,ck[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),l.crossDomain==null&&(i=ct.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==ck[1]&&i[2]==ck[2]&&(i[3]||(i[1]==="http:"?80:443))==(ck[3]||(ck[1]==="http:"?80:443)))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),cA(cv,l,c,x);if(v===2){return x}j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!co.test(l.type),j&&p.active++===0&&p.event.trigger("ajaxStart");if(!l.hasContent){l.data&&(l.url+=(cq.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url;if(l.cache===!1){var z=p.now(),A=l.url.replace(cs,"$1_="+z);l.url=A+(A===l.url?(cq.test(l.url)?"&":"?")+"_="+z:"")}}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+cx+"; q=0.01":""):l.accepts["*"]);for(k in l.headers){x.setRequestHeader(k,l.headers[k])}if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&v!==2){w="abort";for(k in {success:1,error:1,complete:1}){x[k](l[k])}g=cA(cw,l,c,x);if(!g){y(-1,"No Transport")}else{x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(v<2){y(-1,B)}else{throw B}}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var cE=[],cF=/\?/,cG=/(=)\?(?=&|$)|\?\?/,cH=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cE.pop()||p.expando+"_"+cH++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cG.test(j),m=k&&!l&&typeof i=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cG.test(i);if(c.dataTypes[0]==="jsonp"||l||m){return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cG,"$1"+f):m?c.data=i.replace(cG,"$1"+f):k&&(c.url+=(cF.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cE.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")}},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cI,cJ=a.ActiveXObject?function(){for(var a in cI){cI[a](0,1)}}:!1,cK=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&cL()||cM()}:cL,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async);if(c.xhrFields){for(h in c.xhrFields){i[h]=c.xhrFields[h]}}c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e){i.setRequestHeader(h,e[h])}}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||i.readyState===4)){d=b,g&&(i.onreadystatechange=p.noop,cJ&&delete cI[g]);if(e){i.readyState!==4&&i.abort()}else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}!h&&c.isLocal&&!c.crossDomain?h=l.text?200:404:h===1223&&(h=204)}}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?i.readyState===4?setTimeout(d,0):(g=++cK,cJ&&(cI||(cI={},p(a).unload(cJ)),cI[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cN,cO,cP=/^(?:toggle|show|hide)$/,cQ=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cR=/queueHooks$/,cS=[cY],cT={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cQ.exec(b),h=f.cur(),i=+h||0,j=1;if(g){c=+g[2],d=g[3]||(p.cssNumber[a]?"":"px");if(d!=="px"&&i){i=p.css(f.elem,a,!0)||c||1;do{e=j=j||".5",i=i/j,p.style(f.elem,a,i+d),j=f.cur()/h}while(j!==1&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cW,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++){c=a[d],cT[c]=cT[c]||[],cT[c].unshift(b)}},prefilter:function(a,b){b?cS.unshift(a):cS.push(a)}}),p.Tween=cZ,cZ.prototype={constructor:cZ,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cZ.propHooks[this.prop];return a&&a.get?a.get(this):cZ.propHooks._default.get(this)},run:function(a){var b,c=cZ.propHooks[this.prop];return this.options.duration?this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cZ.propHooks._default.set(this),this}},cZ.prototype.init.prototype=cZ.prototype,cZ.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=p.css(a.elem,a.prop,!1,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(a.elem.style[p.cssProps[a.prop]]!=null||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},cZ.propHooks.scrollTop=cZ.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return d==null||typeof d=="boolean"||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(c$(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bZ).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cW(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=p.timers,g=p._data(this);if(c){g[c]&&g[c].stop&&e(g[c])}else{for(c in g){g[c]&&g[c].stop&&cR.test(c)&&e(g[c])}}for(c=f.length;c--;){f[c].elem===this&&(a==null||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1))}(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:c$("show"),slideUp:c$("hide"),slideToggle:c$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&typeof a=="object"?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};d.duration=p.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}return d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cZ.prototype.init,p.fx.tick=function(){var a,b=p.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cO&&(cO=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cO),cO=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c_=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)})}var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(!n){return}return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=da(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");d==="static"&&(a.style.position="relative");var e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=(d==="absolute"||d==="fixed")&&p.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using" in b?b.using.call(a,j):e.css(j)}},p.fn.extend({position:function(){if(!this[0]){return}var a=this[0],b=this.offsetParent(),c=this.offset(),d=c_.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||e.body;while(a&&!c_.test(a.nodeName)&&p.css(a,"position")==="static"){a=a.offsetParent}return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=da(a);if(f===b){return g?c in g?g[c]:g.document.documentElement[e]:a[e]}g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:c.nodeType===9?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=p,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})})(window);this.Handlebars={};(function(c){c.VERSION="1.0.0-rc.3";c.COMPILER_REVISION=2;c.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"};c.helpers={};c.partials={};c.registerHelper=function(e,f,d){if(d){f.not=d}this.helpers[e]=f};c.registerPartial=function(d,e){this.partials[d]=e};c.registerHelper("helperMissing",function(d){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+d+"'")}});var a=Object.prototype.toString,b="[object Function]";c.registerHelper("blockHelperMissing",function(g,f){var d=f.inverse||function(){},i=f.fn;var e="";var h=a.call(g);if(h===b){g=g.call(this)}if(g===true){return i(this)}else{if(g===false||g==null){return d(this)}else{if(h==="[object Array]"){if(g.length>0){return c.helpers.each(g,f)}else{return d(this)}}else{return i(g)}}}});c.K=function(){};c.createFrame=Object.create||function(d){c.K.prototype=d;var e=new c.K();c.K.prototype=null;return e};c.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(f,d){if(c.logger.level<=f){var e=c.logger.methodMap[f];if(typeof console!=="undefined"&&console[e]){console[e].call(console,d)}}}};c.log=function(e,d){c.logger.log(e,d)};c.registerHelper("each",function(d,n){var l=n.fn,f=n.inverse;var h=0,k="",g;if(n.data){g=c.createFrame(n.data)}if(d&&typeof d==="object"){if(d instanceof Array){for(var e=d.length;h<e;h++){if(g){g.index=h}k=k+l(d[h],{data:g})}}else{for(var m in d){if(d.hasOwnProperty(m)){if(g){g.key=m}k=k+l(d[m],{data:g});h++}}}}if(h===0){k=f(this)}return k});c.registerHelper("if",function(e,d){var f=a.call(e);if(f===b){e=e.call(this)}if(!e||c.Utils.isEmpty(e)){return d.inverse(this)}else{return d.fn(this)}});c.registerHelper("unless",function(f,e){var g=e.fn,d=e.inverse;e.fn=d;e.inverse=g;return c.helpers["if"].call(this,f,e)});c.registerHelper("with",function(e,d){return d.fn(e)});c.registerHelper("log",function(e,d){var f=d.data&&d.data.level!=null?parseInt(d.data.level,10):1;c.log(f,e)})}(this.Handlebars));var handlebars=(function(){var g={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function b(h,k,l,o,n,j,m){var i=j.length-1;switch(n){case 1:return j[i-1];break;case 2:this.$=new o.ProgramNode([],j[i]);break;case 3:this.$=new o.ProgramNode(j[i-2],j[i]);break;case 4:this.$=new o.ProgramNode(j[i-1],[]);break;case 5:this.$=new o.ProgramNode(j[i]);break;case 6:this.$=new o.ProgramNode([],[]);break;case 7:this.$=new o.ProgramNode([]);break;case 8:this.$=[j[i]];break;case 9:j[i-1].push(j[i]);this.$=j[i-1];break;case 10:this.$=new o.BlockNode(j[i-2],j[i-1].inverse,j[i-1],j[i]);break;case 11:this.$=new o.BlockNode(j[i-2],j[i-1],j[i-1].inverse,j[i]);break;case 12:this.$=j[i];break;case 13:this.$=j[i];break;case 14:this.$=new o.ContentNode(j[i]);break;case 15:this.$=new o.CommentNode(j[i]);break;case 16:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 17:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 18:this.$=j[i-1];break;case 19:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1]);break;case 20:this.$=new o.MustacheNode(j[i-1][0],j[i-1][1],true);break;case 21:this.$=new o.PartialNode(j[i-1]);break;case 22:this.$=new o.PartialNode(j[i-2],j[i-1]);break;case 23:break;case 24:this.$=[[j[i-2]].concat(j[i-1]),j[i]];break;case 25:this.$=[[j[i-1]].concat(j[i]),null];break;case 26:this.$=[[j[i-1]],j[i]];break;case 27:this.$=[[j[i]],null];break;case 28:this.$=[[new o.DataNode(j[i])],null];break;case 29:j[i-1].push(j[i]);this.$=j[i-1];break;case 30:this.$=[j[i]];break;case 31:this.$=j[i];break;case 32:this.$=new o.StringNode(j[i]);break;case 33:this.$=new o.IntegerNode(j[i]);break;case 34:this.$=new o.BooleanNode(j[i]);break;case 35:this.$=new o.DataNode(j[i]);break;case 36:this.$=new o.HashNode(j[i]);break;case 37:j[i-1].push(j[i]);this.$=j[i-1];break;case 38:this.$=[j[i]];break;case 39:this.$=[j[i-2],j[i]];break;case 40:this.$=[j[i-2],new o.StringNode(j[i])];break;case 41:this.$=[j[i-2],new o.IntegerNode(j[i])];break;case 42:this.$=[j[i-2],new o.BooleanNode(j[i])];break;case 43:this.$=[j[i-2],new o.DataNode(j[i])];break;case 44:this.$=new o.PartialNameNode(j[i]);break;case 45:this.$=new o.IdNode(j[i]);break;case 46:j[i-2].push(j[i]);this.$=j[i-2];break;case 47:this.$=[j[i]];break}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function d(i,h){throw new Error(i)},parse:function f(s){var z=this,n=[0],I=[null],u=[],J=this.table,i="",t=0,G=0,k=0,q=2,w=1;this.lexer.setInput(s);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var j=this.lexer.yylloc;u.push(j);var l=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function y(p){n.length=n.length-2*p;I.length=I.length-p;u.length=u.length-p}function x(){var p;p=z.lexer.lex()||1;if(typeof p!=="number"){p=z.symbols_[p]||p}return p}var F,B,m,E,K,v,D={},A,H,h,o;while(true){m=n[n.length-1];if(this.defaultActions[m]){E=this.defaultActions[m]}else{if(F===null||typeof F=="undefined"){F=x()}E=J[m]&&J[m][F]}if(typeof E==="undefined"||!E.length||!E[0]){var C="";if(!k){o=[];for(A in J[m]){if(this.terminals_[A]&&A>2){o.push("'"+this.terminals_[A]+"'")}}if(this.lexer.showPosition){C="Parse error on line "+(t+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+o.join(", ")+", got '"+(this.terminals_[F]||F)+"'"}else{C="Parse error on line "+(t+1)+": Unexpected "+(F==1?"end of input":"'"+(this.terminals_[F]||F)+"'")}this.parseError(C,{text:this.lexer.match,token:this.terminals_[F]||F,line:this.lexer.yylineno,loc:j,expected:o})}}if(E[0] instanceof Array&&E.length>1){throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+F)}switch(E[0]){case 1:n.push(F);I.push(this.lexer.yytext);u.push(this.lexer.yylloc);n.push(E[1]);F=null;if(!B){G=this.lexer.yyleng;i=this.lexer.yytext;t=this.lexer.yylineno;j=this.lexer.yylloc;if(k>0){k--}}else{F=B;B=null}break;case 2:H=this.productions_[E[1]][1];D.$=I[I.length-H];D._$={first_line:u[u.length-(H||1)].first_line,last_line:u[u.length-1].last_line,first_column:u[u.length-(H||1)].first_column,last_column:u[u.length-1].last_column};if(l){D._$.range=[u[u.length-(H||1)].range[0],u[u.length-1].range[1]]}v=this.performAction.call(D,i,G,t,this.yy,E[1],I,u);if(typeof v!=="undefined"){return v}if(H){n=n.slice(0,-1*H*2);I=I.slice(0,-1*H);u=u.slice(0,-1*H)}n.push(this.productions_[E[1]][0]);I.push(D.$);u.push(D._$);h=J[n[n.length-2]][n[n.length-1]];n.push(h);break;case 3:return true}}return true}};var a=(function(){var k=({EOF:1,parseError:function m(p,o){if(this.yy.parser){this.yy.parser.parseError(p,o)}else{throw new Error(p)}},setInput:function(o){this._input=o;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var p=this._input[0];this.yytext+=p;this.yyleng++;this.offset++;this.match+=p;this.matched+=p;var o=p.match(/(?:\r\n?|\n).*/g);if(o){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return p},unput:function(q){var o=q.length;var p=q.split(/(?:\r\n?|\n)/g);this._input=q+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-o-1);this.offset-=o;var t=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(p.length-1){this.yylineno-=p.length-1}var s=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:p?(p.length===t.length?this.yylloc.first_column:0)+t[t.length-p.length].length-p[0].length:this.yylloc.first_column-o};if(this.options.ranges){this.yylloc.range=[s[0],s[0]+this.yyleng-o]}return this},more:function(){this._more=true;return this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;if(o.length<20){o+=this._input.substr(0,20-o.length)}return(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput();var p=new Array(o.length+1).join("-");return o+this.upcomingInput()+"\n"+p+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var u,s,p,r,q,o;if(!this._more){this.yytext="";this.match=""}var v=this._currentRules();for(var t=0;t<v.length;t++){p=this._input.match(this.rules[v[t]]);if(p&&(!s||p[0].length>s[0].length)){s=p;r=t;if(!this.options.flex){break}}}if(s){o=s[0].match(/(?:\r\n?|\n).*/g);if(o){this.yylineno+=o.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s[0].length};this.yytext+=s[0];this.match+=s[0];this.matches=s;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(s[0].length);this.matched+=s[0];u=this.performAction.call(this,this.yy,this,v[r],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(u){return u}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function h(){var o=this.next();if(typeof o!=="undefined"){return o}else{return this.lex()}},begin:function i(o){this.conditionStack.push(o)},popState:function n(){return this.conditionStack.pop()},_currentRules:function l(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function i(o){this.begin(o)}});k.options={};k.performAction=function j(s,p,r,o){var q=o;switch(r){case 0:if(p.yytext.slice(-1)!=="\\"){this.begin("mu")}if(p.yytext.slice(-1)==="\\"){p.yytext=p.yytext.substr(0,p.yyleng-1),this.begin("emu")}if(p.yytext){return 14}break;case 1:return 14;break;case 2:if(p.yytext.slice(-1)!=="\\"){this.popState()}if(p.yytext.slice(-1)==="\\"){p.yytext=p.yytext.substr(0,p.yyleng-1)}return 14;break;case 3:p.yytext=p.yytext.substr(0,p.yyleng-4);this.popState();return 15;break;case 4:this.begin("par");return 24;break;case 5:return 16;break;case 6:return 20;break;case 7:return 19;break;case 8:return 19;break;case 9:return 23;break;case 10:return 23;break;case 11:this.popState();this.begin("com");break;case 12:p.yytext=p.yytext.substr(3,p.yyleng-5);this.popState();return 15;break;case 13:return 22;break;case 14:return 36;break;case 15:return 35;break;case 16:return 35;break;case 17:return 39;break;case 18:break;case 19:this.popState();return 18;break;case 20:this.popState();return 18;break;case 21:p.yytext=p.yytext.substr(1,p.yyleng-2).replace(/\\"/g,'"');return 30;break;case 22:p.yytext=p.yytext.substr(1,p.yyleng-2).replace(/\\'/g,"'");return 30;break;case 23:p.yytext=p.yytext.substr(1);return 28;break;case 24:return 32;break;case 25:return 32;break;case 26:return 31;break;case 27:return 35;break;case 28:p.yytext=p.yytext.substr(1,p.yyleng-2);return 35;break;case 29:return"INVALID";break;case 30:break;case 31:this.popState();return 37;break;case 32:return 5;break}};k.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/];k.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},par:{rules:[30,31],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return k})();g.lexer=a;function e(){this.yy={}}e.prototype=g;g.Parser=e;return new e})();Handlebars.Parser=handlebars;Handlebars.parse=function(a){if(a.constructor===Handlebars.AST.ProgramNode){return a}Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b)}};Handlebars.AST.MustacheNode=function(g,d,c){this.type="mustache";this.escaped=!c;this.hash=d;var f=this.id=g[0];var e=this.params=g.slice(1);var b=this.eligibleHelper=f.isSimple;this.isHelper=b&&(e.length||d)};Handlebars.AST.PartialNode=function(b,c){this.type="partial";this.partialName=b;this.context=c};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original)}};Handlebars.AST.BlockNode=function(d,c,b,e){a(d.id,e);this.type="block";this.mustache=d;this.program=c;this.inverse=b;if(this.inverse&&!this.program){this.isInverse=true}};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(f){this.type="ID";this.original=f.join(".");var d=[],g=0;for(var e=0,b=f.length;e<b;e++){var c=f[e];if(c===".."||c==="."||c==="this"){if(d.length>0){throw new Handlebars.Exception("Invalid path: "+this.original)}else{if(c===".."){g++}else{this.isScoped=true}}}else{d.push(c)}}this.parts=d;this.string=d.join(".");this.depth=g;this.isSimple=f.length===1&&!this.isScoped&&g===0;this.stringModeValue=this.string};Handlebars.AST.PartialNameNode=function(b){this.type="PARTIAL_NAME";this.name=b};Handlebars.AST.DataNode=function(b){this.type="DATA";this.id=b};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b;this.stringModeValue=b};Handlebars.AST.IntegerNode=function(b){this.type="INTEGER";this.integer=b;this.stringModeValue=Number(b)};Handlebars.AST.BooleanNode=function(b){this.type="BOOLEAN";this.bool=b;this.stringModeValue=b==="true"};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(c){var b=Error.prototype.constructor.apply(this,arguments);for(var a=0;a<errorProps.length;a++){this[errorProps[a]]=b[errorProps[a]]}};Handlebars.Exception.prototype=new Error();Handlebars.SafeString=function(a){this.string=a};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var d=/[&<>"'`]/g;var b=/[&<>"'`]/;var a=function(e){return c[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){if(e instanceof Handlebars.SafeString){return e.toString()}else{if(e==null||e===false){return""}}if(!b.test(e)){return e}return e.replace(d,a)},isEmpty:function(e){if(!e&&e!==0){return true}else{if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===0){return true}else{return false}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(g,f){g.prototype={compiler:g,disassemble:function(){var p=this.opcodes,o,m=[],r,q;for(var n=0,h=p.length;n<h;n++){o=p[n];if(o.opcode==="DECLARE"){m.push("DECLARE "+o.name+"="+o.value)}else{r=[];for(var k=0;k<o.args.length;k++){q=o.args[k];if(typeof q==="string"){q='"'+q.replace("\n","\\n")+'"'}r.push(q)}m.push(o.opcode+" "+r.join(" "))}}return m.join("\n")},equals:function(k){var h=this.opcodes.length;if(k.opcodes.length!==h){return false}for(var n=0;n<h;n++){var o=this.opcodes[n],l=k.opcodes[n];if(o.opcode!==l.opcode||o.args.length!==l.args.length){return false}for(var m=0;m<o.args.length;m++){if(o.args[m]!==l.args[m]){return false}}}return true},guid:0,compile:function(h,j){this.children=[];this.depths={list:[]};this.options=j;var k=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(k){for(var i in k){this.options.knownHelpers[i]=k[i]}}return this.program(h)},accept:function(h){return this[h.type](h)},program:function(k){var j=k.statements,n;this.opcodes=[];for(var m=0,h=j.length;m<h;m++){n=j[m];this[n.type](n)}this.isSimple=h===1;this.depths.list=this.depths.list.sort(function(l,i){return l-i});return this},compileProgram:function(k){var h=new this.compiler().compile(k,this.options);var m=this.guid++,o;this.usePartial=this.usePartial||h.usePartial;this.children[m]=h;for(var n=0,j=h.depths.list.length;n<j;n++){o=h.depths.list[n];if(o<2){continue}else{this.addDepth(o-1)}}return m},block:function(l){var k=l.mustache,i=l.program,h=l.inverse;if(i){i=this.compileProgram(i)}if(h){h=this.compileProgram(h)}var j=this.classifyMustache(k);if(j==="helper"){this.helperMustache(k,i,h)}else{if(j==="simple"){this.simpleMustache(k);this.opcode("pushProgram",i);this.opcode("pushProgram",h);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousMustache(k,i,h);this.opcode("pushProgram",i);this.opcode("pushProgram",h);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(m){var k=m.pairs,o,n;this.opcode("pushHash");for(var j=0,h=k.length;j<h;j++){o=k[j];n=o[1];if(this.options.stringParams){this.opcode("pushStringParam",n.stringModeValue,n.type)}else{this.accept(n)}this.opcode("assignToHash",o[0])}this.opcode("popHash")},partial:function(h){var i=h.partialName;this.usePartial=true;if(h.context){this.ID(h.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",i.name);this.opcode("append")},content:function(h){this.opcode("appendContent",h.string)},mustache:function(j){var h=this.options;var i=this.classifyMustache(j);if(i==="simple"){this.simpleMustache(j)}else{if(i==="helper"){this.helperMustache(j)}else{this.ambiguousMustache(j)}}if(j.escaped&&!h.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousMustache:function(l,j,i){var m=l.id,k=m.parts[0],h=j!=null||i!=null;this.opcode("getContext",m.depth);this.opcode("pushProgram",j);this.opcode("pushProgram",i);this.opcode("invokeAmbiguous",k,h)},simpleMustache:function(h){var i=h.id;if(i.type==="DATA"){this.DATA(i)}else{if(i.parts.length){this.ID(i)}else{this.addDepth(i.depth);this.opcode("getContext",i.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperMustache:function(k,i,h){var l=this.setupFullMustacheParams(k,i,h),j=k.id.parts[0];if(this.options.knownHelpers[j]){this.opcode("invokeKnownHelper",l.length,j)}else{if(this.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+j)}else{this.opcode("invokeHelper",l.length,j)}}},ID:function(m){this.addDepth(m.depth);this.opcode("getContext",m.depth);var j=m.parts[0];if(!j){this.opcode("pushContext")}else{this.opcode("lookupOnContext",m.parts[0])}for(var k=1,h=m.parts.length;k<h;k++){this.opcode("lookup",m.parts[k])}},DATA:function(h){this.options.data=true;this.opcode("lookupData",h.id)},STRING:function(h){this.opcode("pushString",h.string)},INTEGER:function(h){this.opcode("pushLiteral",h.integer)},BOOLEAN:function(h){this.opcode("pushLiteral",h.bool)},comment:function(){},opcode:function(h){this.opcodes.push({opcode:h,args:[].slice.call(arguments,1)})},declare:function(h,i){this.opcodes.push({opcode:"DECLARE",name:h,value:i})},addDepth:function(h){if(isNaN(h)){throw new Error("EWOT")}if(h===0){return}if(!this.depths[h]){this.depths[h]=true;this.depths.list.push(h)}},classifyMustache:function(k){var j=k.isHelper;var l=k.eligibleHelper;var i=this.options;if(l&&!j){var h=k.id.parts[0];if(i.knownHelpers[h]){j=true}else{if(i.knownHelpersOnly){l=false}}}if(j){return"helper"}else{if(l){return"ambiguous"}else{return"simple"}}},pushParams:function(k){var h=k.length,j;while(h--){j=k[h];if(this.options.stringParams){if(j.depth){this.addDepth(j.depth)}this.opcode("getContext",j.depth||0);this.opcode("pushStringParam",j.stringModeValue,j.type)}else{this[j.type](j)}}},setupMustacheParams:function(h){var i=h.params;this.pushParams(i);if(h.hash){this.hash(h.hash)}else{this.opcode("emptyHash")}return i},setupFullMustacheParams:function(j,i,h){var k=j.params;this.pushParams(k);this.opcode("pushProgram",i);this.opcode("pushProgram",h);if(j.hash){this.hash(j.hash)}else{this.opcode("emptyHash")}return k}};var c=function(h){this.value=h};f.prototype={nameLookup:function(i,h){if(/^[0-9]+$/.test(h)){return i+"["+h+"]"}else{if(f.isValidJavaScriptVariableName(h)){return i+"."+h}else{return i+"['"+h+"']"}}},appendToBuffer:function(h){if(this.environment.isSimple){return"return "+h+";"}else{return{appendToBuffer:true,content:h,toString:function(){return"buffer += "+h+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(h,i,k,j){this.environment=h;this.options=i||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!k;this.context=k||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(h,i);var m=h.opcodes,l;this.i=0;for(b=m.length;this.i<b;this.i++){l=m[this.i];if(l.opcode==="DECLARE"){this[l.name]=l.value}else{this[l.opcode].apply(this,l.args)}}return this.createFunctionContext(j)},nextOpcode:function(){var h=this.environment.opcodes;return h[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var h=[];if(!this.isChild){var i=this.namespace;var j="helpers = helpers || "+i+".helpers;";if(this.environment.usePartial){j=j+" partials = partials || "+i+".partials;"}if(this.options.data){j=j+" data = data || {};"}h.push(j)}else{h.push("")}if(!this.environment.isSimple){h.push(", buffer = "+this.initializeBuffer())}else{h.push("")}this.lastContext=0;this.source=h},createFunctionContext:function(q){var k=this.stackVars.concat(this.registers.list);if(k.length>0){this.source[1]=this.source[1]+", "+k.join(", ")}if(!this.isChild){for(var p in this.context.aliases){this.source[1]=this.source[1]+", "+p+"="+this.context.aliases[p]}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var o=0,m=this.environment.depths.list.length;o<m;o++){n.push("depth"+this.environment.depths.list[o])}var h=this.mergeSource();if(!this.isChild){var r=Handlebars.COMPILER_REVISION,j=Handlebars.REVISION_CHANGES[r];h="this.compilerInfo = ["+r+",'"+j+"'];\n"+h}if(q){n.push(h);return Function.apply(this,n)}else{var s="function "+(this.name||"")+"("+n.join(",")+") {\n  "+h+"}";Handlebars.log(Handlebars.logger.DEBUG,s+"\n\n");return s}},mergeSource:function(){var m="",k;for(var l=0,h=this.source.length;l<h;l++){var j=this.source[l];if(j.appendToBuffer){if(k){k=k+"\n    + "+j.content}else{k=j.content}}else{if(k){m+="buffer += "+k+";\n  ";k=undefined}m+=j+"\n  "}}return m},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var h=["depth0"];this.setupParams(0,h);this.replaceStack(function(i){h.splice(1,0,i);return"blockHelperMissing.call("+h.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var i=["depth0"];this.setupParams(0,i);var h=this.topStack();i.splice(1,0,h);i[i.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+h+" = blockHelperMissing.call("+i.join(", ")+"); }")},appendContent:function(h){this.source.push(this.appendToBuffer(this.quotedString(h)))},append:function(){this.flushInline();var h=this.popStack();this.source.push("if("+h+" || "+h+" === 0) { "+this.appendToBuffer(h)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(h){if(this.lastContext!==h){this.lastContext=h}},lookupOnContext:function(h){this.push(this.nameLookup("depth"+this.lastContext,h,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(h){return"typeof "+h+" === functionType ? "+h+".apply(depth0) : "+h})},lookup:function(h){this.replaceStack(function(i){return i+" == null || "+i+" === false ? "+i+" : "+this.nameLookup(i,h,"context")})},lookupData:function(h){this.push(this.nameLookup("data",h,"data"))},pushStringParam:function(h,i){this.pushStackLiteral("depth"+this.lastContext);this.pushString(i);if(typeof h==="string"){this.pushString(h)}else{this.pushStackLiteral(h)}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.register("hashTypes","{}")}},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var h=this.hash;this.hash=undefined;if(this.options.stringParams){this.register("hashTypes","{"+h.types.join(",")+"}")}this.push("{\n    "+h.values.join(",\n    ")+"\n  }")},pushString:function(h){this.pushStackLiteral(this.quotedString(h))},push:function(h){this.inlineStack.push(h);return h},pushLiteral:function(h){this.pushStackLiteral(h)},pushProgram:function(h){if(h!=null){this.pushStackLiteral(this.programExpression(h))}else{this.pushStackLiteral(null)}},invokeHelper:function(j,h){this.context.aliases.helperMissing="helpers.helperMissing";var i=this.lastHelper=this.setupHelper(j,h,true);this.push(i.name);this.replaceStack(function(k){return k+" ? "+k+".call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+")"})},invokeKnownHelper:function(j,h){var i=this.setupHelper(j,h);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(h,l){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var i=this.setupHelper(0,h,l);var j=this.lastHelper=this.nameLookup("helpers",h,"helper");var m=this.nameLookup("depth"+this.lastContext,h,"context");var k=this.nextStack();this.source.push("if ("+k+" = "+j+") { "+k+" = "+k+".call("+i.callParams+"); }");this.source.push("else { "+k+" = "+m+"; "+k+" = typeof "+k+" === functionType ? "+k+".apply(depth0) : "+k+"; }")},invokePartial:function(h){var i=[this.nameLookup("partials",h,"partial"),"'"+h+"'",this.popStack(),"helpers","partials"];if(this.options.data){i.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+i.join(", ")+")")},assignToHash:function(h){var j=this.popStack(),i;if(this.options.stringParams){i=this.popStack();this.popStack()}var k=this.hash;if(i){k.types.push("'"+h+"': "+i)}k.values.push("'"+h+"': ("+j+")")},compiler:f,compileChildren:function(h,m){var o=h.children,q,p;for(var n=0,j=o.length;n<j;n++){q=o[n];p=new this.compiler();var k=this.matchExistingProgram(q);if(k==null){this.context.programs.push("");k=this.context.programs.length;q.index=k;q.name="program"+k;this.context.programs[k]=p.compile(q,m,this.context);this.context.environments[k]=q}else{q.index=k;q.name="program"+k}}},matchExistingProgram:function(l){for(var k=0,j=this.context.environments.length;k<j;k++){var h=this.context.environments[k];if(h&&h.equals(l)){return k}}},programExpression:function(j){this.context.aliases.self="this";if(j==null){return"self.noop"}var p=this.environment.children[j],o=p.depths.list,n;var m=[p.index,p.name,"data"];for(var k=0,h=o.length;k<h;k++){n=o[k];if(n===1){m.push("depth0")}else{m.push("depth"+(n-1))}}if(o.length===0){return"self.program("+m.join(", ")+")"}else{m.shift();return"self.programWithDepth("+m.join(", ")+")"}},register:function(h,i){this.useRegister(h);this.source.push(h+" = "+i+";")},useRegister:function(h){if(!this.registers[h]){this.registers[h]=true;this.registers.list.push(h)}},pushStackLiteral:function(h){return this.push(new c(h))},pushStack:function(i){this.flushInline();var h=this.incrStack();if(i){this.source.push(h+" = "+i+";")}this.compileStack.push(h);return h},replaceStack:function(n){var k="",m=this.isInline(),h;if(m){var l=this.popStack(true);if(l instanceof c){h=l.value}else{var i=this.stackSlot?this.topStackName():this.incrStack();k="("+this.push(i)+" = "+l+"),";h=this.topStack()}}else{h=this.topStack()}var j=n.call(this,h);if(m){if(this.inlineStack.length||this.compileStack.length){this.popStack()}this.push("("+k+j+")")}else{if(!/^stack/.test(h)){h=this.nextStack()}this.source.push(h+" = ("+k+j+");")}return h},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var k=this.inlineStack;if(k.length){this.inlineStack=[];for(var j=0,h=k.length;j<h;j++){var l=k[j];if(l instanceof c){this.compileStack.push(l)}else{this.pushStack(l)}}}},isInline:function(){return this.inlineStack.length},popStack:function(h){var j=this.isInline(),i=(j?this.inlineStack:this.compileStack).pop();if(!h&&(i instanceof c)){return i.value}else{if(!j){this.stackSlot--}return i}},topStack:function(i){var h=(this.isInline()?this.inlineStack:this.compileStack),j=h[h.length-1];if(!i&&(j instanceof c)){return j.value}else{return j}},quotedString:function(h){return'"'+h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(l,j,i){var k=[];this.setupParams(l,k,i);var h=this.nameLookup("helpers",j,"helper");return{params:k,name:h,callParams:["depth0"].concat(k).join(", "),helperMissingParams:i&&["depth0",this.quotedString(j)].concat(k).join(", ")}},setupParams:function(l,k,h){var r=[],p=[],q=[],j,m,o;r.push("hash:"+this.popStack());m=this.popStack();o=this.popStack();if(o||m){if(!o){this.context.aliases.self="this";o="self.noop"}if(!m){this.context.aliases.self="this";m="self.noop"}r.push("inverse:"+m);r.push("fn:"+o)}for(var n=0;n<l;n++){j=this.popStack();k.push(j);if(this.options.stringParams){q.push(this.popStack());p.push(this.popStack())}}if(this.options.stringParams){r.push("contexts:["+p.join(",")+"]");r.push("types:["+q.join(",")+"]");r.push("hashTypes:hashTypes")}if(this.options.data){r.push("data:data")}r="{"+r.join(",")+"}";if(h){this.register("options",r);k.push("options")}else{k.push(r)}return k.join(", ")}};var a=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var e=f.RESERVED_WORDS={};for(var d=0,b=a.length;d<b;d++){e[a[d]]=true}f.isValidJavaScriptVariableName=function(h){if(!f.RESERVED_WORDS[h]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(h)){return true}return false}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.precompile=function(c,d){if(!c||(typeof c!=="string"&&c.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c)}d=d||{};if(!("data" in d)){d.data=true}var b=Handlebars.parse(c);var a=new Handlebars.Compiler().compile(b,d);return new Handlebars.JavaScriptCompiler().compile(a,d)};Handlebars.compile=function(a,b){if(!a||(typeof a!=="string"&&a.constructor!==Handlebars.AST.ProgramNode)){throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a)}b=b||{};if(!("data" in b)){b.data=true}var d;function c(){var g=Handlebars.parse(a);var f=new Handlebars.Compiler().compile(g,b);var e=new Handlebars.JavaScriptCompiler().compile(f,b,undefined,true);return Handlebars.template(e)}return function(f,e){if(!d){d=c()}return d.call(this,f,e)}};Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(d,e,f){var c=this.programs[d];if(f){return Handlebars.VM.program(e,f)}else{if(c){return c}else{c=this.programs[d]=Handlebars.VM.program(e);return c}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(g,f){f=f||{};var d=a.call(b,Handlebars,g,f.helpers,f.partials,f.data);var h=b.compilerInfo||[],e=h[0]||1,j=Handlebars.COMPILER_REVISION;if(e!==j){if(e<j){var c=Handlebars.REVISION_CHANGES[j],i=Handlebars.REVISION_CHANGES[e];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+i+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+h[1]+")."}}return d}},programWithDepth:function(b,d,c){var a=Array.prototype.slice.call(arguments,2);return function(f,e){e=e||{};return b.apply(this,[f,e.data||d].concat(a))}},program:function(a,b){return function(d,c){c=c||{};return a(d,c.data||b)}},noop:function(){return""},invokePartial:function(a,c,e,f,d,g){var b={helpers:f,partials:d,data:g};if(a===undefined){throw new Handlebars.Exception("The partial "+c+" could not be found")}else{if(a instanceof Function){return a(e,b)}else{if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+c+" could not be compiled when running in runtime-only mode")}else{d[c]=Handlebars.compile(a,{data:g!==undefined});return d[c](e,b)}}}}};Handlebars.template=Handlebars.VM.template;var THREE=THREE||{REVISION:"58"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};self.Int32Array=self.Int32Array||Array;self.Float32Array=self.Float32Array||Array;String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(f,e){if(Object.keys){var d=Object.keys(e);for(var c=0,b=d.length;c<b;c++){var g=d[c];Object.defineProperty(f,g,Object.getOwnPropertyDescriptor(e,g))}}else{var a={}.hasOwnProperty;for(var g in e){if(a.call(e,g)){f[g]=e[g]}}}return f};(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(window.requestAnimationFrame===undefined){window.requestAnimationFrame=function(g){var d=Date.now(),e=Math.max(0,16-(d-b));var f=window.setTimeout(function(){g(d+e)},e);b=d+e;return f}}window.cancelAnimationFrame=window.cancelAnimationFrame||function(d){window.clearTimeout(d)}}());THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1000;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){if(a!==undefined){this.set(a)}return this};THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){if(a instanceof THREE.Color){this.copy(a)}else{if(typeof a==="number"){this.setHex(a)}else{if(typeof a==="string"){this.setStyle(a)}}}return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(d,c,a){this.r=d;this.g=c;this.b=a;return this},setHSL:function(d,c,b){if(c===0){this.r=this.g=this.b=b}else{var a=function(i,h,g){if(g<0){g+=1}if(g>1){g-=1}if(g<1/6){return i+(h-i)*6*g}if(g<1/2){return h}if(g<2/3){return i+(h-i)*6*(2/3-g)}return i};var f=b<=0.5?b*(1+c):b+c-(b*c);var e=(2*b)-f;this.r=a(e,f,d+1/3);this.g=a(e,f,d);this.b=a(e,f,d-1/3)}return this},setStyle:function(b){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(b)){var a=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(b);this.r=Math.min(255,parseInt(a[1],10))/255;this.g=Math.min(255,parseInt(a[2],10))/255;this.b=Math.min(255,parseInt(a[3],10))/255;return this}if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(b)){var a=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(b);this.r=Math.min(100,parseInt(a[1],10))/100;this.g=Math.min(100,parseInt(a[2],10))/100;this.b=Math.min(100,parseInt(a[3],10))/100;return this}if(/^\#([0-9a-f]{6})$/i.test(b)){var a=/^\#([0-9a-f]{6})$/i.exec(b);this.setHex(parseInt(a[1],16));return this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(b)){var a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(b);this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16));return this}if(/^(\w+)$/i.test(b)){this.setHex(THREE.ColorKeywords[b]);return this}},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var d=this.r,c=this.g,a=this.b;this.r=d*d;this.g=c*c;this.b=a*a;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return(this.r*255)<<16^(this.g*255)<<8^(this.b*255)<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(){var a={h:0,s:0,l:0};return function(){var c=this.r,f=this.g,i=this.b;var j=Math.max(c,f,i);var d=Math.min(c,f,i);var h,e;var l=(d+j)/2;if(d===j){h=0;e=0}else{var k=j-d;e=l<=0.5?k/(j+d):k/(2-j-d);switch(j){case c:h=(f-i)/k+(f<i?6:0);break;case f:h=(i-c)/k+2;break;case i:h=(c-f)/k+4;break}h/=6}a.h=h;a.s=e;a.l=l;return a}}(),getStyle:function(){return"rgb("+((this.r*255)|0)+","+((this.g*255)|0)+","+((this.b*255)|0)+")"},offsetHSL:function(d,c,a){var b=this.getHSL();b.h+=d;b.s+=c;b.l+=a;this.setHSL(b.h,b.s,b.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(b,a){this.r=b.r+a.r;this.g=b.g+a.g;this.b=b.b+a.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return(a.r===this.r)&&(a.g===this.g)&&(a.b===this.b)},clone:function(){return new THREE.Color().setRGB(this.r,this.g,this.b)}};THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,d,c,b){this.x=a||0;this.y=d||0;this.z=c||0;this.w=(b!==undefined)?b:1};THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(a,d,c,b){this.x=a;this.y=d;this.z=c;this.w=b;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(c,a){var h=Math.cos(c.x/2);var g=Math.cos(c.y/2);var e=Math.cos(c.z/2);var f=Math.sin(c.x/2);var d=Math.sin(c.y/2);var b=Math.sin(c.z/2);if(a===undefined||a==="XYZ"){this.x=f*g*e+h*d*b;this.y=h*d*e-f*g*b;this.z=h*g*b+f*d*e;this.w=h*g*e-f*d*b}else{if(a==="YXZ"){this.x=f*g*e+h*d*b;this.y=h*d*e-f*g*b;this.z=h*g*b-f*d*e;this.w=h*g*e+f*d*b}else{if(a==="ZXY"){this.x=f*g*e-h*d*b;this.y=h*d*e+f*g*b;this.z=h*g*b+f*d*e;this.w=h*g*e-f*d*b}else{if(a==="ZYX"){this.x=f*g*e-h*d*b;this.y=h*d*e+f*g*b;this.z=h*g*b-f*d*e;this.w=h*g*e+f*d*b}else{if(a==="YZX"){this.x=f*g*e+h*d*b;this.y=h*d*e+f*g*b;this.z=h*g*b-f*d*e;this.w=h*g*e-f*d*b}else{if(a==="XZY"){this.x=f*g*e-h*d*b;this.y=h*d*e-f*g*b;this.z=h*g*b+f*d*e;this.w=h*g*e+f*d*b}}}}}}return this},setFromAxisAngle:function(c,d){var a=d/2,b=Math.sin(a);this.x=c.x*b;this.y=c.y*b;this.z=c.z*b;this.w=Math.cos(a);return this},setFromRotationMatrix:function(e){var d=e.elements,i=d[0],h=d[4],g=d[8],c=d[1],b=d[5],a=d[9],l=d[2],k=d[6],j=d[10],f=i+b+j,n;if(f>0){n=0.5/Math.sqrt(f+1);this.w=0.25/n;this.x=(k-a)*n;this.y=(g-l)*n;this.z=(c-h)*n}else{if(i>b&&i>j){n=2*Math.sqrt(1+i-b-j);this.w=(k-a)/n;this.x=0.25*n;this.y=(h+c)/n;this.z=(g+l)/n}else{if(b>j){n=2*Math.sqrt(1+b-i-j);this.w=(g-l)/n;this.x=(h+c)/n;this.y=0.25*n;this.z=(a+k)/n}else{n=2*Math.sqrt(1+j-i-b);this.w=(c-h)/n;this.x=(g+l)/n;this.y=(a+k)/n;this.z=0.25*n}}}return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=this.length();if(a===0){this.x=0;this.y=0;this.z=0;this.w=1}else{a=1/a;this.x=this.x*a;this.y=this.y*a;this.z=this.z*a;this.w=this.w*a}return this},multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(a,b)}return this.multiplyQuaternions(this,a)},multiplyQuaternions:function(l,k){var i=l.x,h=l.y,g=l.z,j=l.w;var e=k.x,d=k.y,c=k.z,f=k.w;this.x=i*f+j*e+h*c-g*d;this.y=h*f+j*d+g*e-i*c;this.z=g*f+j*c+i*d-h*e;this.w=j*f-i*e-h*d-g*c;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(c,k){var i=this.x,h=this.y,g=this.z,j=this.w;var b=j*c.w+i*c.x+h*c.y+g*c.z;if(b<0){this.w=-c.w;this.x=-c.x;this.y=-c.y;this.z=-c.z;b=-b}else{this.copy(c)}if(b>=1){this.w=j;this.x=i;this.y=h;this.z=g;return this}var d=Math.acos(b);var a=Math.sqrt(1-b*b);if(Math.abs(a)<0.001){this.w=0.5*(j+this.w);this.x=0.5*(i+this.x);this.y=0.5*(h+this.y);this.z=0.5*(g+this.z);return this}var f=Math.sin((1-k)*d)/a,e=Math.sin(k*d)/a;this.w=(j*f+this.w*e);this.x=(i*f+this.x*e);this.y=(h*f+this.y*e);this.z=(g*f+this.z*e);return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z)&&(a.w===this.w))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}};THREE.Quaternion.slerp=function(d,c,b,a){return b.copy(d).slerp(c,a)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;return this},addVectors:function(d,c){this.x=d.x+c.x;this.y=d.y+c.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;return this},subVectors:function(d,c){this.x=d.x-c.x;this.y=d.y-c.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a}else{this.set(0,0)}return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(c){var b=this.x-c.x,a=this.y-c.y;return b*b+a*a},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y))},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,c,b){this.x=a||0;this.y=c||0;this.z=b||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,c,b){this.x=a;this.y=c;this.z=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;this.z+=b.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(d,c){this.x=d.x+c.x;this.y=d.y+c.y;this.z=d.z+c.z;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;this.z-=b.z;return this},subVectors:function(d,c){this.x=d.x-c.x;this.y=d.y-c.y;this.z=d.z-c.z;return this},multiply:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(b,a)}this.x*=b.x;this.y*=b.y;this.z*=b.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(d,c){this.x=d.x*c.x;this.y=d.y*c.y;this.z=d.z*c.z;return this},applyMatrix3:function(b){var a=this.x;var f=this.y;var d=this.z;var c=b.elements;this.x=c[0]*a+c[3]*f+c[6]*d;this.y=c[1]*a+c[4]*f+c[7]*d;this.z=c[2]*a+c[5]*f+c[8]*d;return this},applyMatrix4:function(b){var a=this.x,f=this.y,d=this.z;var c=b.elements;this.x=c[0]*a+c[4]*f+c[8]*d+c[12];this.y=c[1]*a+c[5]*f+c[9]*d+c[13];this.z=c[2]*a+c[6]*f+c[10]*d+c[14];return this},applyProjection:function(b){var a=this.x,h=this.y,g=this.z;var c=b.elements;var f=1/(c[3]*a+c[7]*h+c[11]*g+c[15]);this.x=(c[0]*a+c[4]*h+c[8]*g+c[12])*f;this.y=(c[1]*a+c[5]*h+c[9]*g+c[13])*f;this.z=(c[2]*a+c[6]*h+c[10]*g+c[14])*f;return this},applyQuaternion:function(a){var l=this.x;var k=this.y;var j=this.z;var h=a.x;var g=a.y;var f=a.z;var i=a.w;var d=i*l+g*j-f*k;var c=i*k+f*l-h*j;var b=i*j+h*k-g*l;var e=-h*l-g*k-f*j;this.x=d*i+e*-h+c*-f-b*-g;this.y=c*i+e*-g+b*-h-d*-f;this.z=b*i+e*-f+d*-g-c*-h;return this},transformDirection:function(b){var a=this.x,f=this.y,d=this.z;var c=b.elements;this.x=c[0]*a+c[4]*f+c[8]*d;this.y=c[1]*a+c[5]*f+c[9]*d;this.z=c[2]*a+c[6]*f+c[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a;this.z/=a}else{this.x=0;this.y=0;this.z=0}return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}if(this.z>a.z){this.z=a.z}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}if(this.z<a.z){this.z=a.z}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}if(this.z<b.z){this.z=b.z}else{if(this.z>a.z){this.z=a.z}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(c,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(c,b)}var a=this.x,e=this.y,d=this.z;this.x=e*c.z-d*c.y;this.y=d*c.x-a*c.z;this.z=a*c.y-e*c.x;return this},crossVectors:function(d,c){this.x=d.y*c.z-d.z*c.y;this.y=d.z*c.x-d.x*c.z;this.z=d.x*c.y-d.y*c.x;return this},angleTo:function(a){var b=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(b,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(d){var c=this.x-d.x;var b=this.y-d.y;var a=this.z-d.z;return c*c+b*b+a*a},setEulerFromRotationMatrix:function(e,f){function i(m){return Math.min(Math.max(m,-1),1)}var d=e.elements;var j=d[0],h=d[4],g=d[8];var c=d[1],b=d[5],a=d[9];var n=d[2],l=d[6],k=d[10];if(f===undefined||f==="XYZ"){this.y=Math.asin(i(g));if(Math.abs(g)<0.99999){this.x=Math.atan2(-a,k);this.z=Math.atan2(-h,j)}else{this.x=Math.atan2(l,b);this.z=0}}else{if(f==="YXZ"){this.x=Math.asin(-i(a));if(Math.abs(a)<0.99999){this.y=Math.atan2(g,k);this.z=Math.atan2(c,b)}else{this.y=Math.atan2(-n,j);this.z=0}}else{if(f==="ZXY"){this.x=Math.asin(i(l));if(Math.abs(l)<0.99999){this.y=Math.atan2(-n,k);this.z=Math.atan2(-h,b)}else{this.y=0;this.z=Math.atan2(c,j)}}else{if(f==="ZYX"){this.y=Math.asin(-i(n));if(Math.abs(n)<0.99999){this.x=Math.atan2(l,k);this.z=Math.atan2(c,j)}else{this.x=0;this.z=Math.atan2(-h,b)}}else{if(f==="YZX"){this.z=Math.asin(i(c));if(Math.abs(c)<0.99999){this.x=Math.atan2(-a,b);this.y=Math.atan2(-n,j)}else{this.x=0;this.y=Math.atan2(g,k)}}else{if(f==="XZY"){this.z=Math.asin(-i(h));if(Math.abs(h)<0.99999){this.x=Math.atan2(l,b);this.y=Math.atan2(g,j)}else{this.x=Math.atan2(-a,k);this.y=0}}}}}}}return this},setEulerFromQuaternion:function(d,a){function g(h){return Math.min(Math.max(h,-1),1)}var e=d.x*d.x;var c=d.y*d.y;var b=d.z*d.z;var f=d.w*d.w;if(a===undefined||a==="XYZ"){this.x=Math.atan2(2*(d.x*d.w-d.y*d.z),(f-e-c+b));this.y=Math.asin(g(2*(d.x*d.z+d.y*d.w)));this.z=Math.atan2(2*(d.z*d.w-d.x*d.y),(f+e-c-b))}else{if(a==="YXZ"){this.x=Math.asin(g(2*(d.x*d.w-d.y*d.z)));this.y=Math.atan2(2*(d.x*d.z+d.y*d.w),(f-e-c+b));this.z=Math.atan2(2*(d.x*d.y+d.z*d.w),(f-e+c-b))}else{if(a==="ZXY"){this.x=Math.asin(g(2*(d.x*d.w+d.y*d.z)));this.y=Math.atan2(2*(d.y*d.w-d.z*d.x),(f-e-c+b));this.z=Math.atan2(2*(d.z*d.w-d.x*d.y),(f-e+c-b))}else{if(a==="ZYX"){this.x=Math.atan2(2*(d.x*d.w+d.z*d.y),(f-e-c+b));this.y=Math.asin(g(2*(d.y*d.w-d.x*d.z)));this.z=Math.atan2(2*(d.x*d.y+d.z*d.w),(f+e-c-b))}else{if(a==="YZX"){this.x=Math.atan2(2*(d.x*d.w-d.z*d.y),(f-e+c-b));this.y=Math.atan2(2*(d.y*d.w-d.x*d.z),(f+e-c-b));this.z=Math.asin(g(2*(d.x*d.y+d.z*d.w)))}else{if(a==="XZY"){this.x=Math.atan2(2*(d.x*d.w+d.y*d.z),(f-e+c-b));this.y=Math.atan2(2*(d.x*d.z+d.y*d.w),(f+e-c-b));this.z=Math.asin(g(2*(d.z*d.w-d.x*d.y)))}}}}}}return this},getPositionFromMatrix:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},getScaleFromMatrix:function(a){var d=this.set(a.elements[0],a.elements[1],a.elements[2]).length();var c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();var b=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=d;this.y=c;this.z=b;return this},getColumnFromMatrix:function(b,a){var d=b*4;var c=a.elements;this.x=c[d];this.y=c[d+1];this.z=c[d+2];return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion();return function(b,d){var c=a.setFromEuler(b,d);this.applyQuaternion(c);return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion();return function(b,d){var c=a.setFromAxisAngle(b,d);this.applyQuaternion(c);return this}}(),projectOnVector:function(){var a=new THREE.Vector3();return function(b){a.copy(b).normalize();var c=this.dot(a);return this.copy(a).multiplyScalar(c)}}(),projectOnPlane:function(){var a=new THREE.Vector3();return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3();return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,d,c,b){this.x=a||0;this.y=d||0;this.z=c||0;this.w=(b!==undefined)?b:1};THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,d,c,b){this.x=a;this.y=d;this.z=c;this.w=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=(a.w!==undefined)?a.w:1;return this},add:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(b,a)}this.x+=b.x;this.y+=b.y;this.z+=b.z;this.w+=b.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(d,c){this.x=d.x+c.x;this.y=d.y+c.y;this.z=d.z+c.z;this.w=d.w+c.w;return this},sub:function(b,a){if(a!==undefined){console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(b,a)}this.x-=b.x;this.y-=b.y;this.z-=b.z;this.w-=b.w;return this},subVectors:function(d,c){this.x=d.x-c.x;this.y=d.y-c.y;this.z=d.z-c.z;this.w=d.w-c.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},applyMatrix4:function(b){var a=this.x;var g=this.y;var f=this.z;var c=this.w;var d=b.elements;this.x=d[0]*a+d[4]*g+d[8]*f+d[12]*c;this.y=d[1]*a+d[5]*g+d[9]*f+d[13]*c;this.z=d[2]*a+d[6]*g+d[10]*f+d[14]*c;this.w=d[3]*a+d[7]*g+d[11]*f+d[15]*c;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a;this.z/=a;this.w/=a}else{this.x=0;this.y=0;this.z=0;this.w=1}return this},setAxisAngleFromQuaternion:function(b){this.w=2*Math.acos(b.w);var a=Math.sqrt(1-b.w*b.w);if(a<0.0001){this.x=1;this.y=0;this.z=0}else{this.x=b.x/a;this.y=b.y/a;this.z=b.z/a}return this},setAxisAngleFromRotationMatrix:function(t){var u,j,i,h,C=0.01,k=0.1,g=t.elements,B=g[0],w=g[4],v=g[8],e=g[1],c=g[5],a=g[9],r=g[2],p=g[6],n=g[10];if((Math.abs(w-e)<C)&&(Math.abs(v-r)<C)&&(Math.abs(a-p)<C)){if((Math.abs(w+e)<k)&&(Math.abs(v+r)<k)&&(Math.abs(a+p)<k)&&(Math.abs(B+c+n-3)<k)){this.set(1,0,0,0);return this}u=Math.PI;var f=(B+1)/2;var q=(c+1)/2;var A=(n+1)/2;var d=(w+e)/4;var b=(v+r)/4;var o=(a+p)/4;if((f>q)&&(f>A)){if(f<C){j=0;i=0.707106781;h=0.707106781}else{j=Math.sqrt(f);i=d/j;h=b/j}}else{if(q>A){if(q<C){j=0.707106781;i=0;h=0.707106781}else{i=Math.sqrt(q);j=d/i;h=o/i}}else{if(A<C){j=0.707106781;i=0.707106781;h=0}else{h=Math.sqrt(A);j=b/h;i=o/h}}}this.set(j,i,h,u);return this}var l=Math.sqrt((p-a)*(p-a)+(v-r)*(v-r)+(e-w)*(e-w));if(Math.abs(l)<0.001){l=1}this.x=(p-a)/l;this.y=(v-r)/l;this.z=(e-w)/l;this.w=Math.acos((B+c+n-1)/2);return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}if(this.z>a.z){this.z=a.z}if(this.w>a.w){this.w=a.w}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}if(this.z<a.z){this.z=a.z}if(this.w<a.w){this.w=a.w}return this},clamp:function(b,a){if(this.x<b.x){this.x=b.x}else{if(this.x>a.x){this.x=a.x}}if(this.y<b.y){this.y=b.y}else{if(this.y>a.y){this.y=a.y}}if(this.z<b.z){this.z=b.z}else{if(this.z>a.z){this.z=a.z}}if(this.w<b.w){this.w=b.w}else{if(this.w>a.w){this.w=a.w}}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return((a.x===this.x)&&(a.y===this.y)&&(a.z===this.z)&&(a.w===this.w))},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Line3=function(b,a){this.start=(b!==undefined)?b:new THREE.Vector3();this.end=(a!==undefined)?a:new THREE.Vector3()};THREE.Line3.prototype={constructor:THREE.Line3,set:function(b,a){this.start.copy(b);this.end.copy(a);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(b){var a=b||new THREE.Vector3();return a.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(c,b){var a=b||new THREE.Vector3();return this.delta(a).multiplyScalar(c).add(this.start)},closestPointToPointParameter:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(c,g){b.subVectors(c,this.start);a.subVectors(this.end,this.start);var f=a.dot(a);var e=a.dot(b);var d=e/f;if(g){d=THREE.Math.clamp(d,0,1)}return d}}(),closestPointToPoint:function(b,e,d){var c=this.closestPointToPointParameter(b,e);var a=d||new THREE.Vector3();return this.delta(a).multiplyScalar(c).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return new THREE.Line3().copy(this)}};THREE.Box2=function(b,a){this.min=(b!==undefined)?b:new THREE.Vector2(Infinity,Infinity);this.max=(a!==undefined)?a:new THREE.Vector2(-Infinity,-Infinity)};THREE.Box2.prototype={constructor:THREE.Box2,set:function(b,a){this.min.copy(b);this.max.copy(a);return this},setFromPoints:function(d){if(d.length>0){var a=d[0];this.min.copy(a);this.max.copy(a);for(var c=1,b=d.length;c<b;c++){a=d[c];if(a.x<this.min.x){this.min.x=a.x}else{if(a.x>this.max.x){this.max.x=a.x}}if(a.y<this.min.y){this.min.y=a.y}else{if(a.y>this.max.y){this.max.y=a.y}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var a=new THREE.Vector2();return function(b,d){var c=a.copy(d).multiplyScalar(0.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)},center:function(b){var a=b||new THREE.Vector2();return a.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(b){var a=b||new THREE.Vector2();return a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){if(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y){return false}return true},containsBox:function(a){if((this.min.x<=a.min.x)&&(a.max.x<=this.max.x)&&(this.min.y<=a.min.y)&&(a.max.y<=this.max.y)){return true}return false},getParameter:function(a){return new THREE.Vector2((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){if(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y){return false}return true},clampPoint:function(b,c){var a=c||new THREE.Vector2();return a.copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2();return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return new THREE.Box2().copy(this)}};THREE.Box3=function(b,a){this.min=(b!==undefined)?b:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=(a!==undefined)?a:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};THREE.Box3.prototype={constructor:THREE.Box3,set:function(b,a){this.min.copy(b);this.max.copy(a);return this},setFromPoints:function(d){if(d.length>0){var a=d[0];this.min.copy(a);this.max.copy(a);for(var c=1,b=d.length;c<b;c++){a=d[c];if(a.x<this.min.x){this.min.x=a.x}else{if(a.x>this.max.x){this.max.x=a.x}}if(a.y<this.min.y){this.min.y=a.y}else{if(a.y>this.max.y){this.max.y=a.y}}if(a.z<this.min.z){this.min.z=a.z}else{if(a.z>this.max.z){this.max.z=a.z}}}}else{this.makeEmpty()}return this},setFromCenterAndSize:function(){var a=new THREE.Vector3();return function(b,d){var c=a.copy(d).multiplyScalar(0.5);this.min.copy(b).sub(c);this.max.copy(b).add(c);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return(this.max.x<this.min.x)||(this.max.y<this.min.y)||(this.max.z<this.min.z)},center:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(b){var a=b||new THREE.Vector3();return a.subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){if(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z){return false}return true},containsBox:function(a){if((this.min.x<=a.min.x)&&(a.max.x<=this.max.x)&&(this.min.y<=a.min.y)&&(a.max.y<=this.max.y)&&(this.min.z<=a.min.z)&&(a.max.z<=this.max.z)){return true}return false},getParameter:function(a){return new THREE.Vector3((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){if(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z){return false}return true},clampPoint:function(b,c){var a=c||new THREE.Vector3();return a.copy(b).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector3();return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3();return function(c){var b=c||new THREE.Sphere();b.center=this.center();b.radius=this.size(a).length()*0.5;return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return new THREE.Box3().copy(this)}};THREE.Matrix3=function(g,f,e,d,c,b,a,i,h){this.elements=new Float32Array(9);this.set((g!==undefined)?g:1,f||0,e||0,d||0,(c!==undefined)?c:1,b||0,a||0,i||0,(h!==undefined)?h:1)};THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(h,g,f,e,d,c,a,j,i){var b=this.elements;b[0]=h;b[3]=g;b[6]=f;b[1]=e;b[4]=d;b[7]=c;b[2]=a;b[5]=j;b[8]=i;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){var b=a.elements;this.set(b[0],b[3],b[6],b[1],b[4],b[7],b[2],b[5],b[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(){var a=new THREE.Vector3();return function(b){for(var d=0,c=b.length;d<c;d+=3){a.x=b[d];a.y=b[d+1];a.z=b[d+2];a.applyMatrix3(this);b[d]=a.x;b[d+1]=a.y;b[d+2]=a.z}return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var j=this.elements;var s=j[0],r=j[1],q=j[2],p=j[3],o=j[4],n=j[5],m=j[6],l=j[7],k=j[8];return s*o*k-s*n*l-r*p*k+r*n*m+q*p*l-q*o*m},getInverse:function(b,a){var d=b.elements;var f=this.elements;f[0]=d[10]*d[5]-d[6]*d[9];f[1]=-d[10]*d[1]+d[2]*d[9];f[2]=d[6]*d[1]-d[2]*d[5];f[3]=-d[10]*d[4]+d[6]*d[8];f[4]=d[10]*d[0]-d[2]*d[8];f[5]=-d[6]*d[0]+d[2]*d[4];f[6]=d[9]*d[4]-d[5]*d[8];f[7]=-d[9]*d[0]+d[1]*d[8];f[8]=d[5]*d[0]-d[1]*d[4];var c=d[0]*f[0]+d[1]*f[3]+d[2]*f[6];if(c===0){var e="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(a||false){throw new Error(e)}else{console.warn(e)}this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var b,a=this.elements;b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(b){var a=this.elements;b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};THREE.Matrix4=function(n,m,k,i,f,e,d,c,a,q,p,o,l,j,h,g){var b=this.elements=new Float32Array(16);b[0]=(n!==undefined)?n:1;b[4]=m||0;b[8]=k||0;b[12]=i||0;b[1]=f||0;b[5]=(e!==undefined)?e:1;b[9]=d||0;b[13]=c||0;b[2]=a||0;b[6]=q||0;b[10]=(p!==undefined)?p:1;b[14]=o||0;b[3]=l||0;b[7]=j||0;b[11]=h||0;b[15]=(g!==undefined)?g:1};THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(n,m,k,i,f,e,d,c,a,q,p,o,l,j,h,g){var b=this.elements;b[0]=n;b[4]=m;b[8]=k;b[12]=i;b[1]=f;b[5]=e;b[9]=d;b[13]=c;b[2]=a;b[6]=q;b[10]=p;b[14]=o;b[3]=l;b[7]=j;b[11]=h;b[15]=g;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){var b=a.elements;this.set(b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},copyPosition:function(a){var c=this.elements;var b=a.elements;c[12]=b[12];c[13]=b[13];c[14]=b[14];return this},extractRotation:function(){var a=new THREE.Vector3();return function(b){var g=this.elements;var f=b.elements;var e=1/a.set(f[0],f[1],f[2]).length();var d=1/a.set(f[4],f[5],f[6]).length();var c=1/a.set(f[8],f[9],f[10]).length();g[0]=f[0]*e;g[1]=f[1]*e;g[2]=f[2]*e;g[4]=f[4]*d;g[5]=f[5]*d;g[6]=f[6]*d;g[8]=f[8]*c;g[9]=f[9]*c;g[10]=f[10]*c;return this}}(),setRotationFromEuler:function(b,a){console.warn("DEPRECATED: Matrix4's .setRotationFromEuler() has been deprecated in favor of makeRotationFromEuler.  Please update your code.");return this.makeRotationFromEuler(b,a)},makeRotationFromEuler:function(o,r){var k=this.elements;var n=o.x,m=o.y,l=o.z;var H=Math.cos(n),G=Math.sin(n);var E=Math.cos(m),B=Math.sin(m);var u=Math.cos(l),s=Math.sin(l);if(r===undefined||r==="XYZ"){var A=H*u,t=H*s,h=G*u,g=G*s;k[0]=E*u;k[4]=-E*s;k[8]=B;k[1]=t+h*B;k[5]=A-g*B;k[9]=-G*E;k[2]=g-A*B;k[6]=h+t*B;k[10]=H*E}else{if(r==="YXZ"){var q=E*u,p=E*s,D=B*u,w=B*s;k[0]=q+w*G;k[4]=D*G-p;k[8]=H*B;k[1]=H*s;k[5]=H*u;k[9]=-G;k[2]=p*G-D;k[6]=w+q*G;k[10]=H*E}else{if(r==="ZXY"){var q=E*u,p=E*s,D=B*u,w=B*s;k[0]=q-w*G;k[4]=-H*s;k[8]=D+p*G;k[1]=p+D*G;k[5]=H*u;k[9]=w-q*G;k[2]=-H*B;k[6]=G;k[10]=H*E}else{if(r==="ZYX"){var A=H*u,t=H*s,h=G*u,g=G*s;k[0]=E*u;k[4]=h*B-t;k[8]=A*B+g;k[1]=E*s;k[5]=g*B+A;k[9]=t*B-h;k[2]=-B;k[6]=G*E;k[10]=H*E}else{if(r==="YZX"){var F=H*E,C=H*B,j=G*E,i=G*B;k[0]=E*u;k[4]=i-F*s;k[8]=j*s+C;k[1]=s;k[5]=H*u;k[9]=-G*u;k[2]=-B*u;k[6]=C*s+j;k[10]=F-i*s}else{if(r==="XZY"){var F=H*E,C=H*B,j=G*E,i=G*B;k[0]=E*u;k[4]=-s;k[8]=B*u;k[1]=F*s+i;k[5]=H*u;k[9]=C*s-j;k[2]=j*s-C;k[6]=G*u;k[10]=i*s+F}}}}}}k[3]=0;k[7]=0;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(l){var e=this.elements;var h=l.x,g=l.y,f=l.z,i=l.w;var n=h+h,a=g+g,j=f+f;var d=h*n,c=h*a,b=h*j;var m=g*a,k=g*j,r=f*j;var s=i*n,p=i*a,o=i*j;e[0]=1-(m+r);e[4]=c-o;e[8]=b+p;e[1]=c+o;e[5]=1-(d+r);e[9]=k-s;e[2]=b-p;e[6]=k+s;e[10]=1-(d+m);e[3]=0;e[7]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return this},lookAt:function(){var a=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Vector3();return function(e,f,d){var g=this.elements;b.subVectors(e,f).normalize();if(b.length()===0){b.z=1}a.crossVectors(d,b).normalize();if(a.length()===0){b.x+=0.0001;a.crossVectors(d,b).normalize()}c.crossVectors(b,a);g[0]=a.x;g[4]=c.x;g[8]=b.x;g[1]=a.y;g[5]=c.y;g[9]=b.y;g[2]=a.z;g[6]=c.z;g[10]=b.z;return this}}(),multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(a,b)}return this.multiplyMatrices(this,a)},multiplyMatrices:function(M,L){var s=M.elements;var K=L.elements;var c=this.elements;var p=s[0],n=s[4],m=s[8],l=s[12];var J=s[1],I=s[5],H=s[9],G=s[13];var B=s[2],A=s[6],z=s[10],y=s[14];var t=s[3],r=s[7],q=s[11],o=s[15];var i=K[0],g=K[4],e=K[8],d=K[12];var F=K[1],E=K[5],D=K[9],C=K[13];var x=K[2],w=K[6],v=K[10],u=K[14];var k=K[3],j=K[7],h=K[11],f=K[15];c[0]=p*i+n*F+m*x+l*k;c[4]=p*g+n*E+m*w+l*j;c[8]=p*e+n*D+m*v+l*h;c[12]=p*d+n*C+m*u+l*f;c[1]=J*i+I*F+H*x+G*k;c[5]=J*g+I*E+H*w+G*j;c[9]=J*e+I*D+H*v+G*h;c[13]=J*d+I*C+H*u+G*f;c[2]=B*i+A*F+z*x+y*k;c[6]=B*g+A*E+z*w+y*j;c[10]=B*e+A*D+z*v+y*h;c[14]=B*d+A*C+z*u+y*f;c[3]=t*i+r*F+q*x+o*k;c[7]=t*g+r*E+q*w+o*j;c[11]=t*e+r*D+q*v+o*h;c[15]=t*d+r*C+q*u+o*f;return this},multiplyToArray:function(d,c,e){var f=this.elements;this.multiplyMatrices(d,c);e[0]=f[0];e[1]=f[1];e[2]=f[2];e[3]=f[3];e[4]=f[4];e[5]=f[5];e[6]=f[6];e[7]=f[7];e[8]=f[8];e[9]=f[9];e[10]=f[10];e[11]=f[11];e[12]=f[12];e[13]=f[13];e[14]=f[14];e[15]=f[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3();return function(b){for(var d=0,c=b.length;d<c;d+=3){a.x=b[d];a.y=b[d+1];a.z=b[d+2];a.applyProjection(this);b[d]=a.x;b[d+1]=a.y;b[d+2]=a.z}return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var c=this.elements;var n=c[0],m=c[4],k=c[8],i=c[12];var f=c[1],e=c[5],d=c[9],b=c[13];var a=c[2],q=c[6],p=c[10],o=c[14];var l=c[3],j=c[7],h=c[11],g=c[15];return(l*(+i*d*q-k*b*q-i*e*p+m*b*p+k*e*o-m*d*o)+j*(+n*d*o-n*b*p+i*f*p-k*f*o+k*b*a-i*d*a)+h*(+n*b*q-n*e*o-i*f*q+m*f*o+i*e*a-m*b*a)+g*(-k*e*a-n*d*q+n*e*p+k*f*q-m*f*p+m*d*a))},transpose:function(){var b=this.elements;var a;a=b[1];b[1]=b[4];b[4]=a;a=b[2];b[2]=b[8];b[8]=a;a=b[6];b[6]=b[9];b[9]=a;a=b[3];b[3]=b[12];b[12]=a;a=b[7];b[7]=b[13];b[13]=a;a=b[11];b[11]=b[14];b[14]=a;return this},flattenToArray:function(b){var a=this.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},flattenToArrayOffset:function(c,b){var a=this.elements;c[b]=a[0];c[b+1]=a[1];c[b+2]=a[2];c[b+3]=a[3];c[b+4]=a[4];c[b+5]=a[5];c[b+6]=a[6];c[b+7]=a[7];c[b+8]=a[8];c[b+9]=a[9];c[b+10]=a[10];c[b+11]=a[11];c[b+12]=a[12];c[b+13]=a[13];c[b+14]=a[14];c[b+15]=a[15];return c},getPosition:function(){var a=new THREE.Vector3();return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(r,h){var g=this.elements;var w=r.elements;var p=w[0],n=w[4],k=w[8],i=w[12];var v=w[1],u=w[5],t=w[9],s=w[13];var d=w[2],c=w[6],b=w[10],a=w[14];var q=w[3],o=w[7],l=w[11],j=w[15];g[0]=t*a*o-s*b*o+s*c*l-u*a*l-t*c*j+u*b*j;g[4]=i*b*o-k*a*o-i*c*l+n*a*l+k*c*j-n*b*j;g[8]=k*s*o-i*t*o+i*u*l-n*s*l-k*u*j+n*t*j;g[12]=i*t*c-k*s*c-i*u*b+n*s*b+k*u*a-n*t*a;g[1]=s*b*q-t*a*q-s*d*l+v*a*l+t*d*j-v*b*j;g[5]=k*a*q-i*b*q+i*d*l-p*a*l-k*d*j+p*b*j;g[9]=i*t*q-k*s*q-i*v*l+p*s*l+k*v*j-p*t*j;g[13]=k*s*d-i*t*d+i*v*b-p*s*b-k*v*a+p*t*a;g[2]=u*a*q-s*c*q+s*d*o-v*a*o-u*d*j+v*c*j;g[6]=i*c*q-n*a*q-i*d*o+p*a*o+n*d*j-p*c*j;g[10]=n*s*q-i*u*q+i*v*o-p*s*o-n*v*j+p*u*j;g[14]=i*u*d-n*s*d-i*v*c+p*s*c+n*v*a-p*u*a;g[3]=t*c*q-u*b*q-t*d*o+v*b*o+u*d*l-v*c*l;g[7]=n*b*q-k*c*q+k*d*o-p*b*o-n*d*l+p*c*l;g[11]=k*u*q-n*t*q-k*v*o+p*t*o+n*v*l-p*u*l;g[15]=n*t*d-k*u*d+k*v*c-p*t*c-n*v*b+p*u*b;var e=w[0]*g[0]+w[1]*g[4]+w[2]*g[8]+w[3]*g[12];if(e==0){var f="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(h||false){throw new Error(f)}else{console.warn(f)}this.identity();return this}this.multiplyScalar(1/e);return this},translate:function(a){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(a){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(a){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(a){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(a,b){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(b){var d=this.elements;var a=b.x,e=b.y,c=b.z;d[0]*=a;d[4]*=e;d[8]*=c;d[1]*=a;d[5]*=e;d[9]*=c;d[2]*=a;d[6]*=e;d[10]*=c;d[3]*=a;d[7]*=e;d[11]*=c;return this},getMaxScaleOnAxis:function(){var c=this.elements;var d=c[0]*c[0]+c[1]*c[1]+c[2]*c[2];var b=c[4]*c[4]+c[5]*c[5]+c[6]*c[6];var a=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(d,Math.max(b,a)))},makeTranslation:function(a,c,b){this.set(1,0,0,a,0,1,0,c,0,0,1,b,0,0,0,1);return this},makeRotationX:function(a){var d=Math.cos(a),b=Math.sin(a);this.set(1,0,0,0,0,d,-b,0,0,b,d,0,0,0,0,1);return this},makeRotationY:function(a){var d=Math.cos(a),b=Math.sin(a);this.set(d,0,b,0,0,1,0,0,-b,0,d,0,0,0,0,1);return this},makeRotationZ:function(a){var d=Math.cos(a),b=Math.sin(a);this.set(d,-b,0,0,b,d,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var f=Math.cos(b);var k=Math.sin(b);var j=1-f;var i=a.x,h=a.y,g=a.z;var e=j*i,d=j*h;this.set(e*i+f,e*h-k*g,e*g+k*h,0,e*h+k*g,d*h+f,d*g-k*i,0,e*g-k*h,d*g+k*i,j*g*g+f,0,0,0,0,1);return this},makeScale:function(a,c,b){this.set(a,0,0,0,0,c,0,0,0,0,b,0,0,0,0,1);return this},compose:function(a,b,c){console.warn("DEPRECATED: Matrix4's .compose() has been deprecated in favor of makeFromPositionQuaternionScale. Please update your code.");return this.makeFromPositionQuaternionScale(a,b,c)},makeFromPositionQuaternionScale:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},makeFromPositionEulerScale:function(a,b,d,c){this.makeRotationFromEuler(b,d);this.scale(c);this.setPosition(a);return this},makeFrustum:function(g,q,e,n,i,h){var f=this.elements;var p=2*i/(q-g);var m=2*i/(n-e);var o=(q+g)/(q-g);var l=(n+e)/(n-e);var k=-(h+i)/(h-i);var j=-2*h*i/(h-i);f[0]=p;f[4]=0;f[8]=o;f[12]=0;f[1]=0;f[5]=m;f[9]=l;f[13]=0;f[2]=0;f[6]=0;f[10]=k;f[14]=j;f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(e,c,g,b){var a=g*Math.tan(THREE.Math.degToRad(e*0.5));var f=-a;var h=f*c;var d=a*c;return this.makeFrustum(h,d,f,a,g,b)},makeOrthographic:function(d,n,k,a,g,f){var c=this.elements;var m=n-d;var e=k-a;var b=f-g;var l=(n+d)/m;var j=(k+a)/e;var i=(f+g)/b;c[0]=2/m;c[4]=0;c[8]=0;c[12]=-l;c[1]=0;c[5]=2/e;c[9]=0;c[13]=-j;c[2]=0;c[6]=0;c[10]=-2/b;c[14]=-i;c[3]=0;c[7]=0;c[11]=0;c[15]=1;return this},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};THREE.extend(THREE.Matrix4.prototype,{decompose:function(){var a=new THREE.Vector3();var d=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Matrix4();return function(e,f,h){var g=this.elements;a.set(g[0],g[1],g[2]);d.set(g[4],g[5],g[6]);c.set(g[8],g[9],g[10]);e=(e instanceof THREE.Vector3)?e:new THREE.Vector3();f=(f instanceof THREE.Quaternion)?f:new THREE.Quaternion();h=(h instanceof THREE.Vector3)?h:new THREE.Vector3();h.x=a.length();h.y=d.length();h.z=c.length();e.x=g[12];e.y=g[13];e.z=g[14];b.copy(this);b.elements[0]/=h.x;b.elements[1]/=h.x;b.elements[2]/=h.x;b.elements[4]/=h.y;b.elements[5]/=h.y;b.elements[6]/=h.y;b.elements[8]/=h.z;b.elements[9]/=h.z;b.elements[10]/=h.z;f.setFromRotationMatrix(b);return[e,f,h]}}()});THREE.Ray=function(a,b){this.origin=(a!==undefined)?a:new THREE.Vector3();this.direction=(b!==undefined)?b:new THREE.Vector3()};THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(c,b){var a=b||new THREE.Vector3();return a.copy(this.direction).multiplyScalar(c).add(this.origin)},recast:function(){var a=new THREE.Vector3();return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(b,c){var a=c||new THREE.Vector3();a.subVectors(b,this.origin);var d=a.dot(this.direction);return a.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3();return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),isIntersectionSphere:function(a){return(this.distanceToPoint(a.center)<=a.radius)},isIntersectionPlane:function(a){var b=a.normal.dot(this.direction);if(b!=0){return true}if(a.distanceToPoint(this.origin)==0){return true}return false},distanceToPlane:function(a){var c=a.normal.dot(this.direction);if(c==0){if(a.distanceToPoint(this.origin)==0){return 0}return undefined}var b=-(this.origin.dot(a.normal)+a.constant)/c;return b},intersectPlane:function(a,c){var b=this.distanceToPlane(a);if(b===undefined){return undefined}return this.at(b,c)},applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return new THREE.Ray().copy(this)}};THREE.Sphere=function(b,a){this.center=(b!==undefined)?b:new THREE.Vector3();this.radius=(a!==undefined)?a:0};THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(b,a){this.center.copy(b);this.radius=a;return this},setFromCenterAndPoints:function(a,f){var b=0;for(var e=0,c=f.length;e<c;e++){var d=a.distanceToSquared(f[e]);b=Math.max(b,d)}this.center=a;this.radius=Math.sqrt(b);return this},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return(this.radius<=0)},containsPoint:function(a){return(a.distanceToSquared(this.center)<=(this.radius*this.radius))},distanceToPoint:function(a){return(a.distanceTo(this.center)-this.radius)},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=(b*b)},clampPoint:function(b,d){var c=this.center.distanceToSquared(b);var a=d||new THREE.Vector3();a.copy(b);if(c>(this.radius*this.radius)){a.sub(this.center).normalize();a.multiplyScalar(this.radius).add(this.center)}return a},getBoundingBox:function(a){var b=a||new THREE.Box3();b.set(this.center,this.center);b.expandByScalar(this.radius);return b},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius=this.radius*a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&(a.radius===this.radius)},clone:function(){return new THREE.Sphere().copy(this)}};THREE.Frustum=function(f,e,d,c,b,a){this.planes=[(f!==undefined)?f:new THREE.Plane(),(e!==undefined)?e:new THREE.Plane(),(d!==undefined)?d:new THREE.Plane(),(c!==undefined)?c:new THREE.Plane(),(b!==undefined)?b:new THREE.Plane(),(a!==undefined)?a:new THREE.Plane()]};THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(g,f,e,d,c,b){var a=this.planes;a[0].copy(g);a[1].copy(f);a[2].copy(e);a[3].copy(d);a[4].copy(c);a[5].copy(b);return this},copy:function(c){var a=this.planes;for(var b=0;b<6;b++){a[b].copy(c.planes[b])}return this},setFromMatrix:function(o){var h=this.planes;var t=o.elements;var l=t[0],j=t[1],i=t[2],g=t[3];var f=t[4],e=t[5],d=t[6],c=t[7];var b=t[8],a=t[9],s=t[10],r=t[11];var q=t[12],p=t[13],n=t[14],k=t[15];h[0].setComponents(g-l,c-f,r-b,k-q).normalize();h[1].setComponents(g+l,c+f,r+b,k+q).normalize();h[2].setComponents(g+j,c+e,r+a,k+p).normalize();h[3].setComponents(g-j,c-e,r-a,k-p).normalize();h[4].setComponents(g-i,c-d,r-s,k-n).normalize();h[5].setComponents(g+i,c+d,r+s,k+n).normalize();return this},intersectsObject:function(){var a=new THREE.Vector3();return function(e){var c=e.matrixWorld;var d=this.planes;var b=-e.geometry.boundingSphere.radius*c.getMaxScaleOnAxis();a.getPositionFromMatrix(c);for(var f=0;f<6;f++){var g=d[f].distanceToPoint(a);if(g<b){return false}}return true}}(),intersectsSphere:function(c){var d=this.planes;var a=c.center;var b=-c.radius;for(var e=0;e<6;e++){var f=d[e].distanceToPoint(a);if(f<b){return false}}return true},containsPoint:function(a){var b=this.planes;for(var c=0;c<6;c++){if(b[c].distanceToPoint(a)<0){return false}}return true},clone:function(){return new THREE.Frustum().copy(this)}};THREE.Plane=function(b,a){this.normal=(b!==undefined)?b:new THREE.Vector3(1,0,0);this.constant=(a!==undefined)?a:0};THREE.Plane.prototype={constructor:THREE.Plane,set:function(b,a){this.normal.copy(b);this.constant=a;return this},setComponents:function(a,d,c,b){this.normal.set(a,d,c);this.constant=b;return this},setFromNormalAndCoplanarPoint:function(b,a){this.normal.copy(b);this.constant=-a.dot(this.normal);return this},setFromCoplanarPoints:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(e,d,g){var f=b.subVectors(g,d).cross(a.subVectors(e,d)).normalize();this.setFromNormalAndCoplanarPoint(f,e);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(b,d){var c=this.distanceToPoint(b);var a=d||new THREE.Vector3();return a.copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var c=this.distanceToPoint(a.start);var b=this.distanceToPoint(a.end);return(c<0&&b>0)||(b<0&&c>0)},intersectLine:function(){var a=new THREE.Vector3();return function(c,e){var b=e||new THREE.Vector3();var f=c.delta(a);var g=this.normal.dot(f);if(g==0){if(this.distanceToPoint(c.start)==0){return b.copy(c.start)}return undefined}var d=-(c.start.dot(this.normal)+this.constant)/g;if(d<0||d>1){return undefined}return b.copy(f).multiplyScalar(d).add(c.start)}}(),coplanarPoint:function(b){var a=b||new THREE.Vector3();return a.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(d,e){e=e||new THREE.Matrix3().getNormalMatrix(d);var f=b.copy(this.normal).applyMatrix3(e);var c=this.coplanarPoint(a);c.applyMatrix4(d);this.setFromNormalAndCoplanarPoint(f,c);return this}}(),translate:function(a){this.constant=this.constant-a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&(a.constant==this.constant)},clone:function(){return new THREE.Plane().copy(this)}};THREE.Math={clamp:function(d,e,c){return(d<e)?e:((d>c)?c:d)},clampBottom:function(b,c){return b<c?c:b},mapLinear:function(b,c,a,e,d){return e+(b-c)*(d-e)/(a-c)},smoothstep:function(b,c,a){if(b<=c){return 0}if(b>=a){return 1}b=(b-c)/(a-c);return b*b*(3-2*b)},smootherstep:function(b,c,a){if(b<=c){return 0}if(b>=a){return 1}b=(b-c)/(a-c);return b*b*b*(b*(b*6-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},sign:function(a){return(a<0)?-1:((a>0)?1:0)},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Spline=function(n){this.points=n;var h=[],j={x:0,y:0,z:0},m,a,e,d,b,l,k,i,g;this.initFromArray=function(c){this.points=[];for(var o=0;o<c.length;o++){this.points[o]={x:c[o][0],y:c[o][1],z:c[o][2]}}};this.getPoint=function(c){m=(this.points.length-1)*c;a=Math.floor(m);e=m-a;h[0]=a===0?a:a-1;h[1]=a;h[2]=a>this.points.length-2?this.points.length-1:a+1;h[3]=a>this.points.length-3?this.points.length-1:a+2;l=this.points[h[0]];k=this.points[h[1]];i=this.points[h[2]];g=this.points[h[3]];d=e*e;b=e*d;j.x=f(l.x,k.x,i.x,g.x,e,d,b);j.y=f(l.y,k.y,i.y,g.y,e,d,b);j.z=f(l.z,k.z,i.z,g.z,e,d,b);return j};this.getControlPointsArray=function(){var o,r,c=this.points.length,q=[];for(o=0;o<c;o++){r=this.points[o];q[o]=[r.x,r.y,r.z]}return q};this.getLength=function(p){var r,t,u,s,x=0,c=0,q=0,w=new THREE.Vector3(),o=new THREE.Vector3(),v=[],y=0;v[0]=0;if(!p){p=100}u=this.points.length*p;w.copy(this.points[0]);for(r=1;r<u;r++){t=r/u;s=this.getPoint(t);o.copy(s);y+=o.distanceTo(w);w.copy(s);x=(this.points.length-1)*t;c=Math.floor(x);if(c!=q){v[c]=y;q=c}}v[v.length]=y;return{chunks:v,total:y}};this.reparametrizeByArcLength=function(p){var t,s,w,x,q,o,y,v,u,z=[],c=new THREE.Vector3(),r=this.getLength();z.push(c.copy(this.points[0]).clone());for(t=1;t<this.points.length;t++){y=r.chunks[t]-r.chunks[t-1];v=Math.ceil(p*y/r.total);x=(t-1)/(this.points.length-1);q=t/(this.points.length-1);for(s=1;s<v-1;s++){w=x+s*(1/v)*(q-x);u=this.getPoint(w);z.push(c.copy(u).clone())}z.push(c.copy(this.points[t]).clone())}this.points=z};function f(v,u,r,q,w,o,c){var s=(r-v)*0.5,p=(q-u)*0.5;return(2*(u-r)+s+p)*c+(-3*(u-r)-2*s-p)*o+s*w+u}};THREE.Triangle=function(e,d,f){this.a=(e!==undefined)?e:new THREE.Vector3();this.b=(d!==undefined)?d:new THREE.Vector3();this.c=(f!==undefined)?f:new THREE.Vector3()};THREE.Triangle.normal=function(){var a=new THREE.Vector3();return function(g,e,i,h){var d=h||new THREE.Vector3();d.subVectors(i,e);a.subVectors(g,e);d.cross(a);var f=d.lengthSq();if(f>0){return d.multiplyScalar(1/Math.sqrt(f))}return d.set(0,0,0)}}();THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3();var c=new THREE.Vector3();var b=new THREE.Vector3();return function(n,m,k,h,r){a.subVectors(h,m);c.subVectors(k,m);b.subVectors(n,m);var l=a.dot(a);var j=a.dot(c);var i=a.dot(b);var f=c.dot(c);var d=c.dot(b);var g=(l*f-j*j);var q=r||new THREE.Vector3();if(g==0){return q.set(-2,-1,-1)}var e=1/g;var p=(f*i-j*d)*e;var o=(l*d-j*i)*e;return q.set(1-p-o,o,p)}}();THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3();return function(f,g,e,h){var d=THREE.Triangle.barycoordFromPoint(f,g,e,h,a);return(d.x>=0)&&(d.y>=0)&&((d.x+d.y)<=1)}}();THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,d,f){this.a.copy(e);this.b.copy(d);this.c.copy(f);return this},setFromPointsAndIndices:function(b,d,c,a){this.a.copy(b[d]);this.b.copy(b[c]);this.c.copy(b[a]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3();var b=new THREE.Vector3();return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return a.cross(b).length()*0.5}}(),midpoint:function(b){var a=b||new THREE.Vector3();return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(b){var a=b||new THREE.Plane();return a.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},clone:function(){return new THREE.Triangle().copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(b,a){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(b,a)};THREE.Clock=function(a){this.autoStart=(a!==undefined)?a:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false};THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now();this.oldTime=this.startTime;this.running=true},stop:function(){this.getElapsedTime();this.running=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var b=0;if(this.autoStart&&!this.running){this.start()}if(this.running){var a=window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now();b=0.001*(a-this.oldTime);this.oldTime=a;this.elapsedTime+=b}return b}};THREE.EventDispatcher=function(){};THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,addEventListener:function(b,c){if(this._listeners===undefined){this._listeners={}}var a=this._listeners;if(a[b]===undefined){a[b]=[]}if(a[b].indexOf(c)===-1){a[b].push(c)}},hasEventListener:function(b,c){if(this._listeners===undefined){return false}var a=this._listeners;if(a[b]!==undefined&&a[b].indexOf(c)!==-1){return true}return false},removeEventListener:function(c,d){if(this._listeners===undefined){return}var b=this._listeners;var a=b[c].indexOf(d);if(a!==-1){b[c].splice(a,1)}},dispatchEvent:function(e){if(this._listeners===undefined){return}var d=this._listeners;var a=d[e.type];if(a!==undefined){e.target=this;for(var c=0,b=a.length;c<b;c++){a[c].call(this,e)}}}};(function(f){f.Raycaster=function(l,n,m,k){this.ray=new f.Ray(l,n);if(this.ray.direction.lengthSq()>0){this.ray.direction.normalize()}this.near=m||0;this.far=k||Infinity};var b=new f.Sphere();var c=new f.Ray();var g=new f.Plane();var i=new f.Vector3();var e=new f.Vector3();var h=new f.Matrix4();var a=function(l,k){return l.distance-k.distance};var d=function(D,u,l){if(D instanceof f.Particle){e.getPositionFromMatrix(D.matrixWorld);var o=u.ray.distanceToPoint(e);if(o>D.scale.x){return l}l.push({distance:o,point:D.position,face:null,object:D})}else{if(D instanceof f.LOD){e.getPositionFromMatrix(D.matrixWorld);var o=u.ray.origin.distanceTo(e);d(D.getObjectForDistance(o),u,l)}else{if(D instanceof f.Mesh){e.getPositionFromMatrix(D.matrixWorld);b.set(e,D.geometry.boundingSphere.radius*D.matrixWorld.getMaxScaleOnAxis());if(!u.ray.isIntersectionSphere(b)){return l}var p=D.geometry;var q=p.vertices;var n=D.material instanceof f.MeshFaceMaterial;var v=n===true?D.material.materials:null;var m=D.material.side;var C,A,z,y;var w=u.precision;h.getInverse(D.matrixWorld);c.copy(u.ray).applyMatrix4(h);for(var x=0,s=p.faces.length;x<s;x++){var r=p.faces[x];var t=n===true?v[r.materialIndex]:D.material;if(t===undefined){continue}g.setFromNormalAndCoplanarPoint(r.normal,q[r.a]);var B=c.distanceToPlane(g);if(Math.abs(B)<w){continue}if(B<0){continue}m=t.side;if(m!==f.DoubleSide){var k=c.direction.dot(g.normal);if(!(m===f.FrontSide?k<0:k>0)){continue}}if(B<u.near||B>u.far){continue}i=c.at(B,i);if(r instanceof f.Face3){C=q[r.a];A=q[r.b];z=q[r.c];if(!f.Triangle.containsPoint(i,C,A,z)){continue}}else{if(r instanceof f.Face4){C=q[r.a];A=q[r.b];z=q[r.c];y=q[r.d];if((!f.Triangle.containsPoint(i,C,A,y))&&(!f.Triangle.containsPoint(i,A,z,y))){continue}}else{throw Error("face type not supported")}}l.push({distance:B,point:u.ray.at(B),face:r,faceIndex:x,object:D})}}}}};var j=function(n,m,p){var q=n.getDescendants();for(var o=0,k=q.length;o<k;o++){d(q[o],m,p)}};f.Raycaster.prototype.precision=0.0001;f.Raycaster.prototype.set=function(k,l){this.ray.set(k,l);if(this.ray.direction.length()>0){this.ray.direction.normalize()}};f.Raycaster.prototype.intersectObject=function(l,k){var m=[];if(k===true){j(l,this,m)}d(l,this,m);m.sort(a);return m};f.Raycaster.prototype.intersectObjects=function(p,m){var o=[];for(var n=0,k=p.length;n<k;n++){d(p[n],this,o);if(m===true){j(p[n],this,o)}}o.sort(a);return o}}(THREE));THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.name="";this.parent=undefined;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3();this.rotation=new THREE.Vector3();this.eulerOrder=THREE.Object3D.defaultEulerOrder;this.scale=new THREE.Vector3(1,1,1);this.renderDepth=null;this.rotationAutoUpdate=true;this.matrix=new THREE.Matrix4();this.matrixWorld=new THREE.Matrix4();this.matrixAutoUpdate=true;this.matrixWorldNeedsUpdate=true;this.quaternion=new THREE.Quaternion();this.useQuaternion=false;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.userData={}};THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(){var a=new THREE.Matrix4();return function(b){this.matrix.multiplyMatrices(b,this.matrix);this.position.getPositionFromMatrix(this.matrix);this.scale.getScaleFromMatrix(this.matrix);a.extractRotation(this.matrix);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}(),rotateOnAxis:function(){var a=new THREE.Quaternion();var b=new THREE.Quaternion();return function(c,d){a.setFromAxisAngle(c,d);if(this.useQuaternion===true){this.quaternion.multiply(a)}else{b.setFromEuler(this.rotation,this.eulerOrder);b.multiply(a);this.rotation.setEulerFromQuaternion(b,this.eulerOrder)}return this}}(),translateOnAxis:function(){var a=new THREE.Vector3();return function(b,c){a.copy(b);if(this.useQuaternion===true){a.applyQuaternion(this.quaternion)}else{a.applyEuler(this.rotation,this.eulerOrder)}this.position.add(a.multiplyScalar(c));return this}}(),translate:function(b,a){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");return this.translateOnAxis(a,b)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4();return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new THREE.Matrix4();return function(b){a.lookAt(b,this.position,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}(),add:function(a){if(a===this){console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");return}if(a instanceof THREE.Object3D){if(a.parent!==undefined){a.parent.remove(a)}a.parent=this;this.children.push(a);var b=this;while(b.parent!==undefined){b=b.parent}if(b!==undefined&&b instanceof THREE.Scene){b.__addObject(a)}}},remove:function(b){var a=this.children.indexOf(b);if(a!==-1){b.parent=undefined;this.children.splice(a,1);var c=this;while(c.parent!==undefined){c=c.parent}if(c!==undefined&&c instanceof THREE.Scene){c.__removeObject(b)}}},traverse:function(c){c(this);for(var b=0,a=this.children.length;b<a;b++){this.children[b].traverse(c)}},getObjectById:function(e,b){for(var c=0,a=this.children.length;c<a;c++){var d=this.children[c];if(d.id===e){return d}if(b===true){d=d.getObjectById(e,b);if(d!==undefined){return d}}}return undefined},getObjectByName:function(c,b){for(var d=0,a=this.children.length;d<a;d++){var e=this.children[d];if(e.name===c){return e}if(b===true){e=e.getObjectByName(c,b);if(e!==undefined){return e}}}return undefined},getChildByName:function(b,a){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(b,a)},getDescendants:function(c){if(c===undefined){c=[]}Array.prototype.push.apply(c,this.children);for(var b=0,a=this.children.length;b<a;b++){this.children[b].getDescendants(c)}return c},updateMatrix:function(){if(this.useQuaternion===false){this.matrix.makeFromPositionEulerScale(this.position,this.rotation,this.eulerOrder,this.scale)}else{this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale)}this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(c){if(this.matrixAutoUpdate===true){this.updateMatrix()}if(this.matrixWorldNeedsUpdate===true||c===true){if(this.parent===undefined){this.matrixWorld.copy(this.matrix)}else{this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}this.matrixWorldNeedsUpdate=false;c=true}for(var b=0,a=this.children.length;b<a;b++){this.children[b].updateMatrixWorld(c)}},clone:function(a){if(a===undefined){a=new THREE.Object3D()}a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);if(a.rotation instanceof THREE.Vector3){a.rotation.copy(this.rotation)}a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.quaternion.copy(this.quaternion);a.useQuaternion=this.useQuaternion;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));for(var b=0;b<this.children.length;b++){var c=this.children[b];a.add(c.clone())}return a}};THREE.Object3D.defaultEulerOrder="XYZ",THREE.Object3DIdCount=0;THREE.Projector=function(){var V,F,M=[],n=0,z,c,e=[],b=0,j,O,L=[],i=0,q,u=[],B=0,h,S,U=[],x=0,P,p,w=[],K=0,I={objects:[],sprites:[],lights:[],elements:[]},J=new THREE.Vector3(),H=new THREE.Vector4(),t=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),W=new THREE.Box3(),R=new Array(3),Q=new Array(4),a=new THREE.Matrix4(),f=new THREE.Matrix4(),C,E=new THREE.Matrix4(),r=new THREE.Matrix3(),o=new THREE.Matrix3(),d=new THREE.Vector3(),T=new THREE.Frustum(),v=new THREE.Vector4(),g=new THREE.Vector4();this.projectVector=function(X,Y){Y.matrixWorldInverse.getInverse(Y.matrixWorld);f.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse);return X.applyProjection(f)};this.unprojectVector=function(X,Y){Y.projectionMatrixInverse.getInverse(Y.projectionMatrix);f.multiplyMatrices(Y.matrixWorld,Y.projectionMatrixInverse);return X.applyProjection(f)};this.pickingRay=function(Y,Z){Y.z=-1;var X=new THREE.Vector3(Y.x,Y.y,1);this.unprojectVector(Y,Z);this.unprojectVector(X,Z);X.sub(Y).normalize();return new THREE.Raycaster(Y,X)};var N=function(X,Y){F=0;I.objects.length=0;I.sprites.length=0;I.lights.length=0;var Z=function(ac){for(var ad=0,aa=ac.children.length;ad<aa;ad++){var ab=ac.children[ad];if(ab.visible===false){continue}if(ab instanceof THREE.Light){I.lights.push(ab)}else{if(ab instanceof THREE.Mesh||ab instanceof THREE.Line){if(ab.frustumCulled===false||T.intersectsObject(ab)===true){V=m();V.object=ab;if(ab.renderDepth!==null){V.z=ab.renderDepth}else{J.getPositionFromMatrix(ab.matrixWorld);J.applyProjection(f);V.z=J.z}I.objects.push(V)}}else{if(ab instanceof THREE.Sprite||ab instanceof THREE.Particle){V=m();V.object=ab;if(ab.renderDepth!==null){V.z=ab.renderDepth}else{J.getPositionFromMatrix(ab.matrixWorld);J.applyProjection(f);V.z=J.z}I.sprites.push(V)}else{V=m();V.object=ab;if(ab.renderDepth!==null){V.z=ab.renderDepth}else{J.getPositionFromMatrix(ab.matrixWorld);J.applyProjection(f);V.z=J.z}I.objects.push(V)}}}Z(ab)}};Z(X);if(Y===true){I.objects.sort(s)}return I};this.projectScene=function(aj,ag,am,Y){var ai=false,aw,ao,au,ae,az,al,ax,aE,aC,ak,av,ap,at,ad,X,ac,ab,Z,aq,ar,aH,aF,aD,aB,aa,ah;O=0;q=0;S=0;p=0;I.elements.length=0;if(aj.autoUpdate===true){aj.updateMatrixWorld()}if(ag.parent===undefined){ag.updateMatrixWorld()}a.copy(ag.matrixWorldInverse.getInverse(ag.matrixWorld));f.multiplyMatrices(ag.projectionMatrix,a);o.getNormalMatrix(a);T.setFromMatrix(f);I=N(aj,am);for(aw=0,ao=I.objects.length;aw<ao;aw++){at=I.objects[aw].object;C=at.matrixWorld;c=0;if(at instanceof THREE.Mesh){ad=at.geometry;X=ad.vertices;ac=ad.faces;aq=ad.faceVertexUvs;r.getNormalMatrix(C);aa=at.material instanceof THREE.MeshFaceMaterial;ah=aa===true?at.material:null;for(au=0,ae=X.length;au<ae;au++){z=y();z.positionWorld.copy(X[au]).applyMatrix4(C);z.positionScreen.copy(z.positionWorld).applyMatrix4(f);z.positionScreen.x/=z.positionScreen.w;z.positionScreen.y/=z.positionScreen.w;z.positionScreen.z/=z.positionScreen.w;z.visible=!(z.positionScreen.x<-1||z.positionScreen.x>1||z.positionScreen.y<-1||z.positionScreen.y>1||z.positionScreen.z<-1||z.positionScreen.z>1)}for(az=0,al=ac.length;az<al;az++){ab=ac[az];var ay=aa===true?ah.materials[ab.materialIndex]:at.material;if(ay===undefined){continue}var af=ay.side;if(ab instanceof THREE.Face3){aH=e[ab.a];aF=e[ab.b];aD=e[ab.c];R[0]=aH.positionScreen;R[1]=aF.positionScreen;R[2]=aD.positionScreen;if(aH.visible===true||aF.visible===true||aD.visible===true||t.isIntersectionBox(W.setFromPoints(R))){ai=((aD.positionScreen.x-aH.positionScreen.x)*(aF.positionScreen.y-aH.positionScreen.y)-(aD.positionScreen.y-aH.positionScreen.y)*(aF.positionScreen.x-aH.positionScreen.x))<0;if(af===THREE.DoubleSide||ai===(af===THREE.FrontSide)){j=l();j.v1.copy(aH);j.v2.copy(aF);j.v3.copy(aD)}else{continue}}else{continue}}else{if(ab instanceof THREE.Face4){aH=e[ab.a];aF=e[ab.b];aD=e[ab.c];aB=e[ab.d];Q[0]=aH.positionScreen;Q[1]=aF.positionScreen;Q[2]=aD.positionScreen;Q[3]=aB.positionScreen;if(aH.visible===true||aF.visible===true||aD.visible===true||aB.visible===true||t.isIntersectionBox(W.setFromPoints(Q))){ai=(aB.positionScreen.x-aH.positionScreen.x)*(aF.positionScreen.y-aH.positionScreen.y)-(aB.positionScreen.y-aH.positionScreen.y)*(aF.positionScreen.x-aH.positionScreen.x)<0||(aF.positionScreen.x-aD.positionScreen.x)*(aB.positionScreen.y-aD.positionScreen.y)-(aF.positionScreen.y-aD.positionScreen.y)*(aB.positionScreen.x-aD.positionScreen.x)<0;if(af===THREE.DoubleSide||ai===(af===THREE.FrontSide)){j=k();j.v1.copy(aH);j.v2.copy(aF);j.v3.copy(aD);j.v4.copy(aB)}else{continue}}else{continue}}}j.normalModel.copy(ab.normal);if(ai===false&&(af===THREE.BackSide||af===THREE.DoubleSide)){j.normalModel.negate()}j.normalModel.applyMatrix3(r).normalize();j.normalModelView.copy(j.normalModel).applyMatrix3(o);j.centroidModel.copy(ab.centroid).applyMatrix4(C);Z=ab.vertexNormals;for(ax=0,aE=Z.length;ax<aE;ax++){var aG=j.vertexNormalsModel[ax];aG.copy(Z[ax]);if(ai===false&&(af===THREE.BackSide||af===THREE.DoubleSide)){aG.negate()}aG.applyMatrix3(r).normalize();var aA=j.vertexNormalsModelView[ax];aA.copy(aG).applyMatrix3(o)}j.vertexNormalsLength=Z.length;for(aC=0,ak=aq.length;aC<ak;aC++){ar=aq[aC][az];if(ar===undefined){continue}for(av=0,ap=ar.length;av<ap;av++){j.uvs[aC][av]=ar[av]}}j.color=ab.color;j.material=ay;d.copy(j.centroidModel).applyProjection(f);j.z=d.z;I.elements.push(j)}}else{if(at instanceof THREE.Line){E.multiplyMatrices(f,C);X=at.geometry.vertices;aH=y();aH.positionScreen.copy(X[0]).applyMatrix4(E);var an=at.type===THREE.LinePieces?2:1;for(au=1,ae=X.length;au<ae;au++){aH=y();aH.positionScreen.copy(X[au]).applyMatrix4(E);if((au+1)%an>0){continue}aF=e[c-2];v.copy(aH.positionScreen);g.copy(aF.positionScreen);if(A(v,g)===true){v.multiplyScalar(1/v.w);g.multiplyScalar(1/g.w);h=G();h.v1.positionScreen.copy(v);h.v2.positionScreen.copy(g);h.z=Math.max(v.z,g.z);h.material=at.material;if(at.material.vertexColors===THREE.VertexColors){h.vertexColors[0].copy(at.geometry.colors[au]);h.vertexColors[1].copy(at.geometry.colors[au-1])}I.elements.push(h)}}}}}for(aw=0,ao=I.sprites.length;aw<ao;aw++){at=I.sprites[aw].object;C=at.matrixWorld;if(at instanceof THREE.Particle){H.set(C.elements[12],C.elements[13],C.elements[14],1);H.applyMatrix4(f);H.z/=H.w;if(H.z>0&&H.z<1){P=D();P.object=at;P.x=H.x/H.w;P.y=H.y/H.w;P.z=H.z;P.rotation=at.rotation.z;P.scale.x=at.scale.x*Math.abs(P.x-(H.x+ag.projectionMatrix.elements[0])/(H.w+ag.projectionMatrix.elements[12]));P.scale.y=at.scale.y*Math.abs(P.y-(H.y+ag.projectionMatrix.elements[5])/(H.w+ag.projectionMatrix.elements[13]));P.material=at.material;I.elements.push(P)}}}if(Y===true){I.elements.sort(s)}return I};function m(){if(F===n){var X=new THREE.RenderableObject();M.push(X);n++;F++;return X}return M[F++]}function y(){if(c===b){var X=new THREE.RenderableVertex();e.push(X);b++;c++;return X}return e[c++]}function l(){if(O===i){var X=new THREE.RenderableFace3();L.push(X);i++;O++;return X}return L[O++]}function k(){if(q===B){var X=new THREE.RenderableFace4();u.push(X);B++;q++;return X}return u[q++]}function G(){if(S===x){var X=new THREE.RenderableLine();U.push(X);x++;S++;return X}return U[S++]}function D(){if(p===K){var X=new THREE.RenderableParticle();w.push(X);K++;p++;return X}return w[p++]}function s(Y,X){return X.z-Y.z}function A(ab,aa){var Z=0,ae=1,ac=ab.z+ab.w,Y=aa.z+aa.w,X=-ab.z+ab.w,ad=-aa.z+aa.w;if(ac>=0&&Y>=0&&X>=0&&ad>=0){return true}else{if((ac<0&&Y<0)||(X<0&&ad<0)){return false}else{if(ac<0){Z=Math.max(Z,ac/(ac-Y))}else{if(Y<0){ae=Math.min(ae,ac/(ac-Y))}}if(X<0){Z=Math.max(Z,X/(X-ad))}else{if(ad<0){ae=Math.min(ae,X/(X-ad))}}if(ae<Z){return false}else{ab.lerp(aa,Z);aa.lerp(ab,1-ae);return true}}}}};THREE.Face3=function(f,e,i,h,g,d){this.a=f;this.b=e;this.c=i;this.normal=h instanceof THREE.Vector3?h:new THREE.Vector3();this.vertexNormals=h instanceof Array?h:[];this.color=g instanceof THREE.Color?g:new THREE.Color();this.vertexColors=g instanceof Array?g:[];this.vertexTangents=[];this.materialIndex=d!==undefined?d:0;this.centroid=new THREE.Vector3()};THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var c=new THREE.Face3(this.a,this.b,this.c);c.normal.copy(this.normal);c.color.copy(this.color);c.centroid.copy(this.centroid);c.materialIndex=this.materialIndex;var b,a;for(b=0,a=this.vertexNormals.length;b<a;b++){c.vertexNormals[b]=this.vertexNormals[b].clone()}for(b=0,a=this.vertexColors.length;b<a;b++){c.vertexColors[b]=this.vertexColors[b].clone()}for(b=0,a=this.vertexTangents.length;b<a;b++){c.vertexTangents[b]=this.vertexTangents[b].clone()}return c}};THREE.Face4=function(g,f,k,j,i,h,e){this.a=g;this.b=f;this.c=k;this.d=j;this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3();this.vertexNormals=i instanceof Array?i:[];this.color=h instanceof THREE.Color?h:new THREE.Color();this.vertexColors=h instanceof Array?h:[];this.vertexTangents=[];this.materialIndex=e!==undefined?e:0;this.centroid=new THREE.Vector3()};THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var c=new THREE.Face4(this.a,this.b,this.c,this.d);c.normal.copy(this.normal);c.color.copy(this.color);c.centroid.copy(this.centroid);c.materialIndex=this.materialIndex;var b,a;for(b=0,a=this.vertexNormals.length;b<a;b++){c.vertexNormals[b]=this.vertexNormals[b].clone()}for(b=0,a=this.vertexColors.length;b<a;b++){c.vertexColors[b]=this.vertexColors[b].clone()}for(b=0,a=this.vertexTangents.length;b<a;b++){c.vertexTangents[b]=this.vertexTangents[b].clone()}return c}};THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.name="";this.vertices=[];this.colors=[];this.normals=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.dynamic=true;this.verticesNeedUpdate=false;this.elementsNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.tangentsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.buffersNeedUpdate=false};THREE.Geometry.prototype={constructor:THREE.Geometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(b){var h=new THREE.Matrix3().getNormalMatrix(b);for(var e=0,a=this.vertices.length;e<a;e++){var g=this.vertices[e];g.applyMatrix4(b)}for(var e=0,a=this.faces.length;e<a;e++){var f=this.faces[e];f.normal.applyMatrix3(h).normalize();for(var c=0,d=f.vertexNormals.length;c<d;c++){f.vertexNormals[c].applyMatrix3(h).normalize()}f.centroid.applyMatrix4(b)}},computeCentroids:function(){var c,b,a;for(c=0,b=this.faces.length;c<b;c++){a=this.faces[c];a.centroid.set(0,0,0);if(a instanceof THREE.Face3){a.centroid.add(this.vertices[a.a]);a.centroid.add(this.vertices[a.b]);a.centroid.add(this.vertices[a.c]);a.centroid.divideScalar(3)}else{if(a instanceof THREE.Face4){a.centroid.add(this.vertices[a.a]);a.centroid.add(this.vertices[a.b]);a.centroid.add(this.vertices[a.c]);a.centroid.add(this.vertices[a.d]);a.centroid.divideScalar(4)}}}},computeFaceNormals:function(){var a=new THREE.Vector3(),i=new THREE.Vector3();for(var h=0,g=this.faces.length;h<g;h++){var e=this.faces[h];var d=this.vertices[e.a];var c=this.vertices[e.b];var b=this.vertices[e.c];a.subVectors(b,c);i.subVectors(d,c);a.cross(i);a.normalize();e.normal.copy(a)}},computeVertexNormals:function(g){var m,d,h,l,k,j;if(this.__tmpVertices===undefined){this.__tmpVertices=new Array(this.vertices.length);j=this.__tmpVertices;for(m=0,d=this.vertices.length;m<d;m++){j[m]=new THREE.Vector3()}for(h=0,l=this.faces.length;h<l;h++){k=this.faces[h];if(k instanceof THREE.Face3){k.vertexNormals=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()]}else{if(k instanceof THREE.Face4){k.vertexNormals=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()]}}}}else{j=this.__tmpVertices;for(m=0,d=this.vertices.length;m<d;m++){j[m].set(0,0,0)}}if(g){var c,b,a,q;var e=new THREE.Vector3(),p=new THREE.Vector3(),o=new THREE.Vector3(),n=new THREE.Vector3(),i=new THREE.Vector3();for(h=0,l=this.faces.length;h<l;h++){k=this.faces[h];if(k instanceof THREE.Face3){c=this.vertices[k.a];b=this.vertices[k.b];a=this.vertices[k.c];e.subVectors(a,b);p.subVectors(c,b);e.cross(p);j[k.a].add(e);j[k.b].add(e);j[k.c].add(e)}else{if(k instanceof THREE.Face4){c=this.vertices[k.a];b=this.vertices[k.b];a=this.vertices[k.c];q=this.vertices[k.d];o.subVectors(q,b);p.subVectors(c,b);o.cross(p);j[k.a].add(o);j[k.b].add(o);j[k.d].add(o);n.subVectors(q,a);i.subVectors(b,a);n.cross(i);j[k.b].add(n);j[k.c].add(n);j[k.d].add(n)}}}}else{for(h=0,l=this.faces.length;h<l;h++){k=this.faces[h];if(k instanceof THREE.Face3){j[k.a].add(k.normal);j[k.b].add(k.normal);j[k.c].add(k.normal)}else{if(k instanceof THREE.Face4){j[k.a].add(k.normal);j[k.b].add(k.normal);j[k.c].add(k.normal);j[k.d].add(k.normal)}}}}for(m=0,d=this.vertices.length;m<d;m++){j[m].normalize()}for(h=0,l=this.faces.length;h<l;h++){k=this.faces[h];if(k instanceof THREE.Face3){k.vertexNormals[0].copy(j[k.a]);k.vertexNormals[1].copy(j[k.b]);k.vertexNormals[2].copy(j[k.c])}else{if(k instanceof THREE.Face4){k.vertexNormals[0].copy(j[k.a]);k.vertexNormals[1].copy(j[k.b]);k.vertexNormals[2].copy(j[k.c]);k.vertexNormals[3].copy(j[k.d])}}}},computeMorphNormals:function(){var e,l,g,m,h;for(g=0,m=this.faces.length;g<m;g++){h=this.faces[g];if(!h.__originalFaceNormal){h.__originalFaceNormal=h.normal.clone()}else{h.__originalFaceNormal.copy(h.normal)}if(!h.__originalVertexNormals){h.__originalVertexNormals=[]}for(e=0,l=h.vertexNormals.length;e<l;e++){if(!h.__originalVertexNormals[e]){h.__originalVertexNormals[e]=h.vertexNormals[e].clone()}else{h.__originalVertexNormals[e].copy(h.vertexNormals[e])}}}var c=new THREE.Geometry();c.faces=this.faces;for(e=0,l=this.morphTargets.length;e<l;e++){if(!this.morphNormals[e]){this.morphNormals[e]={};this.morphNormals[e].faceNormals=[];this.morphNormals[e].vertexNormals=[];var d=this.morphNormals[e].faceNormals;var a=this.morphNormals[e].vertexNormals;var k,b;for(g=0,m=this.faces.length;g<m;g++){h=this.faces[g];k=new THREE.Vector3();if(h instanceof THREE.Face3){b={a:new THREE.Vector3(),b:new THREE.Vector3(),c:new THREE.Vector3()}}else{b={a:new THREE.Vector3(),b:new THREE.Vector3(),c:new THREE.Vector3(),d:new THREE.Vector3()}}d.push(k);a.push(b)}}var j=this.morphNormals[e];c.vertices=this.morphTargets[e].vertices;c.computeFaceNormals();c.computeVertexNormals();var k,b;for(g=0,m=this.faces.length;g<m;g++){h=this.faces[g];k=j.faceNormals[g];b=j.vertexNormals[g];k.copy(h.normal);if(h instanceof THREE.Face3){b.a.copy(h.vertexNormals[0]);b.b.copy(h.vertexNormals[1]);b.c.copy(h.vertexNormals[2])}else{b.a.copy(h.vertexNormals[0]);b.b.copy(h.vertexNormals[1]);b.c.copy(h.vertexNormals[2]);b.d.copy(h.vertexNormals[3])}}}for(g=0,m=this.faces.length;g<m;g++){h=this.faces[g];h.normal=h.__originalFaceNormal;h.vertexNormals=h.__originalVertexNormals}},computeTangents:function(){var L,m,B,k,K,p,z,g,o,H,E,D,e,d,c,j,h,S,R,x,u,O,N,s,q,F,C,b,Q=[],P=[],a=new THREE.Vector3(),l=new THREE.Vector3(),I=new THREE.Vector3(),M=new THREE.Vector3(),J=new THREE.Vector3(),A;for(B=0,k=this.vertices.length;B<k;B++){Q[B]=new THREE.Vector3();P[B]=new THREE.Vector3()}function y(v,i,f,w,t,r,n){H=v.vertices[i];E=v.vertices[f];D=v.vertices[w];e=o[t];d=o[r];c=o[n];j=E.x-H.x;h=D.x-H.x;S=E.y-H.y;R=D.y-H.y;x=E.z-H.z;u=D.z-H.z;O=d.x-e.x;N=c.x-e.x;s=d.y-e.y;q=c.y-e.y;F=1/(O*q-N*s);a.set((q*j-s*h)*F,(q*S-s*R)*F,(q*x-s*u)*F);l.set((O*h-N*j)*F,(O*R-N*S)*F,(O*u-N*x)*F);Q[i].add(a);Q[f].add(a);Q[w].add(a);P[i].add(l);P[f].add(l);P[w].add(l)}for(L=0,m=this.faces.length;L<m;L++){g=this.faces[L];o=this.faceVertexUvs[0][L];if(g instanceof THREE.Face3){y(this,g.a,g.b,g.c,0,1,2)}else{if(g instanceof THREE.Face4){y(this,g.a,g.b,g.d,0,1,3);y(this,g.b,g.c,g.d,1,2,3)}}}var G=["a","b","c","d"];for(L=0,m=this.faces.length;L<m;L++){g=this.faces[L];for(K=0;K<g.vertexNormals.length;K++){J.copy(g.vertexNormals[K]);z=g[G[K]];C=Q[z];I.copy(C);I.sub(J.multiplyScalar(J.dot(C))).normalize();M.crossVectors(g.vertexNormals[K],C);b=M.dot(P[z]);A=(b<0)?-1:1;g.vertexTangents[K]=new THREE.Vector4(I.x,I.y,I.z,A)}}this.hasTangents=true},computeLineDistances:function(){var e=0;var b=this.vertices;for(var c=0,a=b.length;c<a;c++){if(c>0){e+=b[c].distanceTo(b[c-1])}this.lineDistances[c]=e}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3()}this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere()}this.boundingSphere.setFromCenterAndPoints(this.boundingSphere.center,this.vertices)},mergeVertices:function(){var b={};var a=[],y=[];var f,z;var h=4;var w=Math.pow(10,h);var s,e,d;var c,q,r,t,g;this.__tmpVertices=undefined;for(s=0,e=this.vertices.length;s<e;s++){f=this.vertices[s];z=[Math.round(f.x*w),Math.round(f.y*w),Math.round(f.z*w)].join("_");if(b[z]===undefined){b[z]=s;a.push(this.vertices[s]);y[s]=a.length-1}else{y[s]=y[b[z]]}}var m=[];for(s=0,e=this.faces.length;s<e;s++){d=this.faces[s];if(d instanceof THREE.Face3){d.a=y[d.a];d.b=y[d.b];d.c=y[d.c];c=[d.a,d.b,d.c];var p=-1;for(var o=0;o<3;o++){if(c[o]==c[(o+1)%3]){p=o;m.push(s);break}}}else{if(d instanceof THREE.Face4){d.a=y[d.a];d.b=y[d.b];d.c=y[d.c];d.d=y[d.d];c=[d.a,d.b,d.c,d.d];var p=-1;for(var o=0;o<4;o++){if(c[o]==c[(o+1)%4]){if(p>=0){m.push(s)}p=o}}if(p>=0){c.splice(p,1);var x=new THREE.Face3(c[0],c[1],c[2],d.normal,d.color,d.materialIndex);for(r=0,t=this.faceVertexUvs.length;r<t;r++){g=this.faceVertexUvs[r][s];if(g){g.splice(p,1)}}if(d.vertexNormals&&d.vertexNormals.length>0){x.vertexNormals=d.vertexNormals;x.vertexNormals.splice(p,1)}if(d.vertexColors&&d.vertexColors.length>0){x.vertexColors=d.vertexColors;x.vertexColors.splice(p,1)}this.faces[s]=x}}}}for(s=m.length-1;s>=0;s--){this.faces.splice(s,1);for(r=0,t=this.faceVertexUvs.length;r<t;r++){this.faceVertexUvs[r].splice(s,1)}}var l=this.vertices.length-a.length;this.vertices=a;return l},clone:function(){var k=new THREE.Geometry();var h=this.vertices;for(var g=0,l=h.length;g<l;g++){k.vertices.push(h[g].clone())}var c=this.faces;for(var g=0,l=c.length;g<l;g++){k.faces.push(c[g].clone())}var e=this.faceVertexUvs[0];for(var g=0,l=e.length;g<l;g++){var b=e[g],a=[];for(var d=0,f=b.length;d<f;d++){a.push(new THREE.Vector2(b[d].x,b[d].y))}k.faceVertexUvs[0].push(a)}return k},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.GeometryIdCount=0;THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.attributes={};this.dynamic=false;this.offsets=[];this.boundingBox=null;this.boundingSphere=null;this.hasTangents=false;this.morphTargets=[]};THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(b){var a;var c;if(this.attributes.position){a=this.attributes.position.array}if(this.attributes.normal){c=this.attributes.normal.array}if(a!==undefined){b.multiplyVector3Array(a);this.verticesNeedUpdate=true}if(c!==undefined){var d=new THREE.Matrix3().getNormalMatrix(b);d.multiplyVector3Array(c);this.normalizeNormals();this.normalsNeedUpdate=true}},computeBoundingBox:function(){if(this.boundingBox===null){this.boundingBox=new THREE.Box3()}var b=this.attributes.position.array;if(b){var f=this.boundingBox;var a,g,e;if(b.length>=3){f.min.x=f.max.x=b[0];f.min.y=f.max.y=b[1];f.min.z=f.max.z=b[2]}for(var d=3,c=b.length;d<c;d+=3){a=b[d];g=b[d+1];e=b[d+2];if(a<f.min.x){f.min.x=a}else{if(a>f.max.x){f.max.x=a}}if(g<f.min.y){f.min.y=g}else{if(g>f.max.y){f.max.y=g}}if(e<f.min.z){f.min.z=e}else{if(e>f.max.z){f.max.z=e}}}}if(b===undefined||b.length===0){this.boundingBox.min.set(0,0,0);this.boundingBox.max.set(0,0,0)}},computeBoundingSphere:function(){if(this.boundingSphere===null){this.boundingSphere=new THREE.Sphere()}var c=this.attributes.position.array;if(c){var e,b=0;var a,h,g;for(var f=0,d=c.length;f<d;f+=3){a=c[f];h=c[f+1];g=c[f+2];e=a*a+h*h+g*g;if(e>b){b=e}}this.boundingSphere.radius=Math.sqrt(b)}},computeVertexNormals:function(){if(this.attributes.position){var t,k;var q,v;var A=this.attributes.position.array.length;if(this.attributes.normal===undefined){this.attributes.normal={itemSize:3,array:new Float32Array(A),numItems:A}}else{for(t=0,k=this.attributes.normal.array.length;t<k;t++){this.attributes.normal.array[t]=0}}var f=this.attributes.position.array;var m=this.attributes.normal.array;var w,u,s,l,h,g,r=new THREE.Vector3(),p=new THREE.Vector3(),o=new THREE.Vector3(),n=new THREE.Vector3(),B=new THREE.Vector3();if(this.attributes.index){var c=this.attributes.index.array;var b=this.offsets;for(q=0,v=b.length;q<v;++q){var a=b[q].start;var e=b[q].count;var d=b[q].index;for(t=a,k=a+e;t<k;t+=3){w=d+c[t];u=d+c[t+1];s=d+c[t+2];l=f[w*3];h=f[w*3+1];g=f[w*3+2];r.set(l,h,g);l=f[u*3];h=f[u*3+1];g=f[u*3+2];p.set(l,h,g);l=f[s*3];h=f[s*3+1];g=f[s*3+2];o.set(l,h,g);n.subVectors(o,p);B.subVectors(r,p);n.cross(B);m[w*3]+=n.x;m[w*3+1]+=n.y;m[w*3+2]+=n.z;m[u*3]+=n.x;m[u*3+1]+=n.y;m[u*3+2]+=n.z;m[s*3]+=n.x;m[s*3+1]+=n.y;m[s*3+2]+=n.z}}}else{for(t=0,k=f.length;t<k;t+=9){l=f[t];h=f[t+1];g=f[t+2];r.set(l,h,g);l=f[t+3];h=f[t+4];g=f[t+5];p.set(l,h,g);l=f[t+6];h=f[t+7];g=f[t+8];o.set(l,h,g);n.subVectors(o,p);B.subVectors(r,p);n.cross(B);m[t]=n.x;m[t+1]=n.y;m[t+2]=n.z;m[t+3]=n.x;m[t+4]=n.y;m[t+5]=n.z;m[t+6]=n.x;m[t+7]=n.y;m[t+8]=n.z}}this.normalizeNormals();this.normalsNeedUpdate=true}},normalizeNormals:function(){var d=this.attributes.normal.array;var a,g,e,f;for(var c=0,b=d.length;c<b;c+=3){a=d[c];g=d[c+1];e=d[c+2];f=1/Math.sqrt(a*a+g*g+e*e);d[c]*=f;d[c+1]*=f;d[c+2]*=f}},computeTangents:function(){if(this.attributes.index===undefined||this.attributes.position===undefined||this.attributes.normal===undefined||this.attributes.uv===undefined){console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");return}var f=this.attributes.index.array;var s=this.attributes.position.array;var y=this.attributes.normal.array;var Q=this.attributes.uv.array;var x=s.length/3;if(this.attributes.tangent===undefined){var z=4*x;this.attributes.tangent={itemSize:4,array:new Float32Array(z),numItems:z}}var G=this.attributes.tangent.array;var ak=[],aj=[];for(var ad=0;ad<x;ad++){ak[ad]=new THREE.Vector3();aj[ad]=new THREE.Vector3()}var m,ab,F,l,aa,E,h,Y,C,g,X,e,V,d,T,v,u,am,al,O,N,ai,ah,M,L,U;var o=new THREE.Vector3(),I=new THREE.Vector3();function P(j,i,k){m=s[j*3];ab=s[j*3+1];F=s[j*3+2];l=s[i*3];aa=s[i*3+1];E=s[i*3+2];h=s[k*3];Y=s[k*3+1];C=s[k*3+2];g=Q[j*2];X=Q[j*2+1];e=Q[i*2];V=Q[i*2+1];d=Q[k*2];T=Q[k*2+1];v=l-m;u=h-m;am=aa-ab;al=Y-ab;O=E-F;N=C-F;ai=e-g;ah=d-g;M=V-X;L=T-X;U=1/(ai*L-ah*M);o.set((L*v-M*u)*U,(L*am-M*al)*U,(L*O-M*N)*U);I.set((ai*u-ah*v)*U,(ai*al-ah*am)*U,(ai*N-ah*O)*U);ak[j].add(o);ak[i].add(o);ak[k].add(o);aj[j].add(I);aj[i].add(I);aj[k].add(I)}var af,J;var ae,q;var c,b,a;var B=this.offsets;for(ae=0,q=B.length;ae<q;++ae){var D=B[ae].start;var W=B[ae].count;var K=B[ae].index;for(af=D,J=D+W;af<J;af+=3){c=K+f[af];b=K+f[af+1];a=K+f[af+2];P(c,b,a)}}var Z=new THREE.Vector3(),ag=new THREE.Vector3();var ac=new THREE.Vector3(),H=new THREE.Vector3();var R,S,p;function A(i){ac.x=y[i*3];ac.y=y[i*3+1];ac.z=y[i*3+2];H.copy(ac);S=ak[i];Z.copy(S);Z.sub(ac.multiplyScalar(ac.dot(S))).normalize();ag.crossVectors(H,S);p=ag.dot(aj[i]);R=(p<0)?-1:1;G[i*4]=Z.x;G[i*4+1]=Z.y;G[i*4+2]=Z.z;G[i*4+3]=R}for(ae=0,q=B.length;ae<q;++ae){var D=B[ae].start;var W=B[ae].count;var K=B[ae].index;for(af=D,J=D+W;af<J;af+=3){c=K+f[af];b=K+f[af+1];a=K+f[af+2];A(c);A(b);A(a)}}this.hasTangents=true;this.tangentsNeedUpdate=true},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4();this.projectionMatrix=new THREE.Matrix4();this.projectionMatrixInverse=new THREE.Matrix4()};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4();return function(b){a.lookAt(this.position,b,this.up);if(this.useQuaternion===true){this.quaternion.setFromRotationMatrix(a)}else{this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}}();THREE.OrthographicCamera=function(f,c,e,b,d,a){THREE.Camera.call(this);this.left=f;this.right=c;this.top=e;this.bottom=b;this.near=(d!==undefined)?d:0.1;this.far=(a!==undefined)?a:2000;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};THREE.PerspectiveCamera=function(c,b,d,a){THREE.Camera.call(this);this.fov=c!==undefined?c:50;this.aspect=b!==undefined?b:1;this.near=d!==undefined?d:0.1;this.far=a!==undefined?a:2000;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(b,a){if(a===undefined){a=24}this.fov=2*THREE.Math.radToDeg(Math.atan(a/(b*2)));this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.setViewOffset=function(e,c,b,f,d,a){this.fullWidth=e;this.fullHeight=c;this.x=b;this.y=f;this.width=d;this.height=a;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var c=this.fullWidth/this.fullHeight;var g=Math.tan(THREE.Math.degToRad(this.fov*0.5))*this.near;var b=-g;var f=c*b;var d=c*g;var e=Math.abs(d-f);var a=Math.abs(g-b);this.projectionMatrix.makeFrustum(f+this.x*e/this.fullWidth,f+(this.x+this.width)*e/this.fullWidth,g-(this.y+this.height)*a/this.fullHeight,g-this.y*a/this.fullHeight,this.near,this.far)}else{this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)}};THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){if(a===undefined){a=new THREE.Light()}THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight();THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(b,a){THREE.Light.call(this,b);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=(a!==undefined)?a:1;this.width=1;this.height=1;this.constantAttenuation=1.5;this.linearAttenuation=0.5;this.quadraticAttenuation=0.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight=function(b,a){THREE.Light.call(this,b);this.position.set(0,1,0);this.target=new THREE.Object3D();this.intensity=(a!==undefined)?a:1;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5000;this.shadowCameraLeft=-500;this.shadowCameraRight=500;this.shadowCameraTop=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowCascade=false;this.shadowCascadeOffset=new THREE.Vector3(0,0,-1000);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,0.99,0.998];this.shadowCascadeFarZ=[0.99,0.998,1];this.shadowCascadeArray=[];this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight();THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(b,c,a){THREE.Light.call(this,b);this.position.set(0,100,0);this.groundColor=new THREE.Color(c);this.intensity=(a!==undefined)?a:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.PointLight();THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(b,a,c){THREE.Light.call(this,b);this.intensity=(a!==undefined)?a:1;this.distance=(c!==undefined)?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight();THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};THREE.SpotLight=function(b,a,e,d,c){THREE.Light.call(this,b);this.position.set(0,1,0);this.target=new THREE.Object3D();this.intensity=(a!==undefined)?a:1;this.distance=(e!==undefined)?e:0;this.angle=(d!==undefined)?d:Math.PI/3;this.exponent=(c!==undefined)?c:10;this.castShadow=false;this.onlyShadow=false;this.shadowCameraNear=50;this.shadowCameraFar=5000;this.shadowCameraFov=50;this.shadowCameraVisible=false;this.shadowBias=0;this.shadowDarkness=0.5;this.shadowMapWidth=512;this.shadowMapHeight=512;this.shadowMap=null;this.shadowMapSize=null;this.shadowCamera=null;this.shadowMatrix=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight();THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.Loader=function(a){this.showStatus=a;this.statusDomElement=a?THREE.Loader.prototype.addStatusElement():null;this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}};THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:"anonymous",addStatusElement:function(){var a=document.createElement("div");a.style.position="absolute";a.style.right="0px";a.style.top="0px";a.style.fontSize="0.8em";a.style.textAlign="left";a.style.background="rgba(0,0,0,0.25)";a.style.color="#fff";a.style.width="120px";a.style.padding="0.5em 0.5em 0.5em 0.5em";a.style.zIndex=1000;a.innerHTML="Loading ...";return a},updateProgress:function(a){var b="Loaded ";if(a.total){b+=(100*a.loaded/a.total).toFixed(0)+"%"}else{b+=(a.loaded/1000).toFixed(2)+" KB"}this.statusDomElement.innerHTML=b},extractUrlBase:function(a){var b=a.split("/");b.pop();return(b.length<1?".":b.join("/"))+"/"},initMaterials:function(a,c){var d=[];for(var b=0;b<a.length;++b){d[b]=THREE.Loader.prototype.createMaterial(a[b],c)}return d},needsTangents:function(b){for(var d=0,c=b.length;d<c;d++){var a=b[d];if(a instanceof THREE.ShaderMaterial){return true}}return false},createMaterial:function(f,c){var h=this;function e(q){var m=Math.log(q)/Math.LN2;return Math.floor(m)==m}function a(q){var m=Math.log(q)/Math.LN2;return Math.pow(2,Math.round(m))}function n(q,m){var r=new Image();r.onload=function(){if(!e(this.width)||!e(this.height)){var t=a(this.width);var s=a(this.height);q.image.width=t;q.image.height=s;q.image.getContext("2d").drawImage(this,0,0,t,s)}else{q.image=this}q.needsUpdate=true};r.crossOrigin=h.crossOrigin;r.src=m}function j(x,q,v,r,w,s,m){var u=/\.dds$/i.test(v);var t=c+"/"+v;if(u){var y=THREE.ImageUtils.loadCompressedTexture(t);x[q]=y}else{var y=document.createElement("canvas");x[q]=new THREE.Texture(y)}x[q].sourceFile=v;if(r){x[q].repeat.set(r[0],r[1]);if(r[0]!==1){x[q].wrapS=THREE.RepeatWrapping}if(r[1]!==1){x[q].wrapT=THREE.RepeatWrapping}}if(w){x[q].offset.set(w[0],w[1])}if(s){var z={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};if(z[s[0]]!==undefined){x[q].wrapS=z[s[0]]}if(z[s[1]]!==undefined){x[q].wrapT=z[s[1]]}}if(m){x[q].anisotropy=m}if(!u){n(x[q],t)}}function b(m){return(m[0]*255<<16)+(m[1]*255<<8)+m[2]*255}var d="MeshLambertMaterial";var l={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:false};if(f.shading){var k=f.shading.toLowerCase();if(k==="phong"){d="MeshPhongMaterial"}else{if(k==="basic"){d="MeshBasicMaterial"}}}if(f.blending!==undefined&&THREE[f.blending]!==undefined){l.blending=THREE[f.blending]}if(f.transparent!==undefined||f.opacity<1){l.transparent=f.transparent}if(f.depthTest!==undefined){l.depthTest=f.depthTest}if(f.depthWrite!==undefined){l.depthWrite=f.depthWrite}if(f.visible!==undefined){l.visible=f.visible}if(f.flipSided!==undefined){l.side=THREE.BackSide}if(f.doubleSided!==undefined){l.side=THREE.DoubleSide}if(f.wireframe!==undefined){l.wireframe=f.wireframe}if(f.vertexColors!==undefined){if(f.vertexColors==="face"){l.vertexColors=THREE.FaceColors}else{if(f.vertexColors){l.vertexColors=THREE.VertexColors}}}if(f.colorDiffuse){l.color=b(f.colorDiffuse)}else{if(f.DbgColor){l.color=f.DbgColor}}if(f.colorSpecular){l.specular=b(f.colorSpecular)}if(f.colorAmbient){l.ambient=b(f.colorAmbient)}if(f.transparency){l.opacity=f.transparency}if(f.specularCoef){l.shininess=f.specularCoef}if(f.mapDiffuse&&c){j(l,"map",f.mapDiffuse,f.mapDiffuseRepeat,f.mapDiffuseOffset,f.mapDiffuseWrap,f.mapDiffuseAnisotropy)}if(f.mapLight&&c){j(l,"lightMap",f.mapLight,f.mapLightRepeat,f.mapLightOffset,f.mapLightWrap,f.mapLightAnisotropy)}if(f.mapBump&&c){j(l,"bumpMap",f.mapBump,f.mapBumpRepeat,f.mapBumpOffset,f.mapBumpWrap,f.mapBumpAnisotropy)}if(f.mapNormal&&c){j(l,"normalMap",f.mapNormal,f.mapNormalRepeat,f.mapNormalOffset,f.mapNormalWrap,f.mapNormalAnisotropy)}if(f.mapSpecular&&c){j(l,"specularMap",f.mapSpecular,f.mapSpecularRepeat,f.mapSpecularOffset,f.mapSpecularWrap,f.mapSpecularAnisotropy)}if(f.mapBumpScale){l.bumpScale=f.mapBumpScale}if(f.mapNormal){var g=THREE.ShaderLib.normalmap;var o=THREE.UniformsUtils.clone(g.uniforms);o.tNormal.value=l.normalMap;if(f.mapNormalFactor){o.uNormalScale.value.set(f.mapNormalFactor,f.mapNormalFactor)}if(l.map){o.tDiffuse.value=l.map;o.enableDiffuse.value=true}if(l.specularMap){o.tSpecular.value=l.specularMap;o.enableSpecular.value=true}if(l.lightMap){o.tAO.value=l.lightMap;o.enableAO.value=true}o.uDiffuseColor.value.setHex(l.color);o.uSpecularColor.value.setHex(l.specular);o.uAmbientColor.value.setHex(l.ambient);o.uShininess.value=l.shininess;if(l.opacity!==undefined){o.uOpacity.value=l.opacity}var p={fragmentShader:g.fragmentShader,vertexShader:g.vertexShader,uniforms:o,lights:true,fog:true};var i=new THREE.ShaderMaterial(p);if(l.transparent){i.transparent=true}}else{var i=new THREE[d](l)}if(f.DbgName!==undefined){i.name=f.DbgName}return i}};THREE.ImageLoader=function(){this.crossOrigin=null};THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,load:function(a,c){var b=this;if(c===undefined){c=new Image()}c.addEventListener("load",function(){b.dispatchEvent({type:"load",content:c})},false);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},false);if(b.crossOrigin){c.crossOrigin=b.crossOrigin}c.src=a}};THREE.JSONLoader=function(a){THREE.Loader.call(this,a);this.withCredentials=false};THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype);THREE.JSONLoader.prototype.load=function(a,d,c){var b=this;c=c&&(typeof c==="string")?c:this.extractUrlBase(a);this.onLoadStart();this.loadAjaxJSON(this,a,d,c)};THREE.JSONLoader.prototype.loadAjaxJSON=function(b,a,g,e,d){var f=new XMLHttpRequest();var c=0;f.onreadystatechange=function(){if(f.readyState===f.DONE){if(f.status===200||f.status===0){if(f.responseText){var i=JSON.parse(f.responseText);var h=b.parse(i,e);g(h.geometry,h.materials)}else{console.warn("THREE.JSONLoader: ["+a+"] seems to be unreachable or file there is empty")}b.onLoadComplete()}else{console.error("THREE.JSONLoader: Couldn't load ["+a+"] ["+f.status+"]")}}else{if(f.readyState===f.LOADING){if(d){if(c===0){c=f.getResponseHeader("Content-Length")}d({total:c,loaded:f.responseText.length})}}else{if(f.readyState===f.HEADERS_RECEIVED){if(d!==undefined){c=f.getResponseHeader("Content-Length")}}}}};f.open("GET",a,true);f.withCredentials=this.withCredentials;f.send(null)};THREE.JSONLoader.prototype.parse=function(i,c){var h=this,e=new THREE.Geometry(),d=(i.scale!==undefined)?1/i.scale:1;a(d);f();b(d);e.computeCentroids();e.computeFaceNormals();function a(S){function s(u,j){return u&(1<<j)}var M,L,A,q,p,K,o,P,D,t,m,B,E,Q,k,O,J,H,F,N,w,I,R,n,y,C,z,l=i.faces,r=i.vertices,G=i.normals,x=i.colors,T=0;for(M=0;M<i.uvs.length;M++){if(i.uvs[M].length){T++}}for(M=0;M<T;M++){e.faceUvs[M]=[];e.faceVertexUvs[M]=[]}q=0;p=r.length;while(q<p){N=new THREE.Vector3();N.x=r[q++]*S;N.y=r[q++]*S;N.z=r[q++]*S;e.vertices.push(N)}q=0;p=l.length;while(q<p){m=l[q++];B=s(m,0);E=s(m,1);Q=s(m,2);k=s(m,3);O=s(m,4);J=s(m,5);H=s(m,6);F=s(m,7);if(B){w=new THREE.Face4();w.a=l[q++];w.b=l[q++];w.c=l[q++];w.d=l[q++];K=4}else{w=new THREE.Face3();w.a=l[q++];w.b=l[q++];w.c=l[q++];K=3}if(E){t=l[q++];w.materialIndex=t}A=e.faces.length;if(Q){for(M=0;M<T;M++){n=i.uvs[M];D=l[q++];C=n[D*2];z=n[D*2+1];e.faceUvs[M][A]=new THREE.Vector2(C,z)}}if(k){for(M=0;M<T;M++){n=i.uvs[M];y=[];for(L=0;L<K;L++){D=l[q++];C=n[D*2];z=n[D*2+1];y[L]=new THREE.Vector2(C,z)}e.faceVertexUvs[M][A]=y}}if(O){P=l[q++]*3;R=new THREE.Vector3();R.x=G[P++];R.y=G[P++];R.z=G[P];w.normal=R}if(J){for(M=0;M<K;M++){P=l[q++]*3;R=new THREE.Vector3();R.x=G[P++];R.y=G[P++];R.z=G[P];w.vertexNormals.push(R)}}if(H){o=l[q++];I=new THREE.Color(x[o]);w.color=I}if(F){for(M=0;M<K;M++){o=l[q++];I=new THREE.Color(x[o]);w.vertexColors.push(I)}}e.faces.push(w)}}function f(){var k,j,s,p,o,t,r,q,n,m;if(i.skinWeights){for(k=0,j=i.skinWeights.length;k<j;k+=2){s=i.skinWeights[k];p=i.skinWeights[k+1];o=0;t=0;e.skinWeights.push(new THREE.Vector4(s,p,o,t))}}if(i.skinIndices){for(k=0,j=i.skinIndices.length;k<j;k+=2){r=i.skinIndices[k];q=i.skinIndices[k+1];n=0;m=0;e.skinIndices.push(new THREE.Vector4(r,q,n,m))}}e.bones=i.bones;e.animation=i.animation}function b(m){if(i.morphTargets!==undefined){var p,n,w,k,r,x;for(p=0,n=i.morphTargets.length;p<n;p++){e.morphTargets[p]={};e.morphTargets[p].name=i.morphTargets[p].name;e.morphTargets[p].vertices=[];r=e.morphTargets[p].vertices;x=i.morphTargets[p].vertices;for(w=0,k=x.length;w<k;w+=3){var q=new THREE.Vector3();q.x=x[w]*m;q.y=x[w+1]*m;q.z=x[w+2]*m;r.push(q)}}}if(i.morphColors!==undefined){var p,n,s,u,t,j,o;for(p=0,n=i.morphColors.length;p<n;p++){e.morphColors[p]={};e.morphColors[p].name=i.morphColors[p].name;e.morphColors[p].colors=[];t=e.morphColors[p].colors;j=i.morphColors[p].colors;for(s=0,u=j.length;s<u;s+=3){o=new THREE.Color(16755200);o.setRGB(j[s],j[s+1],j[s+2]);t.push(o)}}}}if(i.materials===undefined){return{geometry:e}}else{var g=this.initMaterials(i.materials,c);if(this.needsTangents(g)){e.computeTangents()}return{geometry:e,materials:g}}};THREE.LoadingMonitor=function(){var c=this;var a=0;var d=0;var b=function(e){a++;c.dispatchEvent({type:"progress",loaded:a,total:d});if(a===d){c.dispatchEvent({type:"load"})}};this.add=function(e){d++;e.addEventListener("load",b,false)}};THREE.LoadingMonitor.prototype={constructor:THREE.LoadingMonitor,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent};THREE.GeometryLoader=function(){};THREE.GeometryLoader.prototype={constructor:THREE.GeometryLoader,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,load:function(a){var b=this;var c=new XMLHttpRequest();c.addEventListener("load",function(e){var d=b.parse(JSON.parse(e.target.responseText));b.dispatchEvent({type:"load",content:d})},false);c.addEventListener("progress",function(d){b.dispatchEvent({type:"progress",loaded:d.loaded,total:d.total})},false);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},false);c.open("GET",a,true);c.send(null)},parse:function(a){}};THREE.MaterialLoader=function(){};THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,load:function(a){var b=this;var c=new XMLHttpRequest();c.addEventListener("load",function(e){var d=b.parse(JSON.parse(e.target.responseText));b.dispatchEvent({type:"load",content:d})},false);c.addEventListener("progress",function(d){b.dispatchEvent({type:"progress",loaded:d.loaded,total:d.total})},false);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},false);c.open("GET",a,true);c.send(null)},parse:function(a){var b;switch(a.type){case"MeshBasicMaterial":b=new THREE.MeshBasicMaterial({color:a.color,opacity:a.opacity,transparent:a.transparent,wireframe:a.wireframe});break;case"MeshLambertMaterial":b=new THREE.MeshLambertMaterial({color:a.color,ambient:a.ambient,emissive:a.emissive,opacity:a.opacity,transparent:a.transparent,wireframe:a.wireframe});break;case"MeshPhongMaterial":b=new THREE.MeshPhongMaterial({color:a.color,ambient:a.ambient,emissive:a.emissive,specular:a.specular,shininess:a.shininess,opacity:a.opacity,transparent:a.transparent,wireframe:a.wireframe});break;case"MeshNormalMaterial":b=new THREE.MeshNormalMaterial({opacity:a.opacity,transparent:a.transparent,wireframe:a.wireframe});break;case"MeshDepthMaterial":b=new THREE.MeshDepthMaterial({opacity:a.opacity,transparent:a.transparent,wireframe:a.wireframe});break}return b}};THREE.SceneLoader=function(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.callbackSync=function(){};this.callbackProgress=function(){};this.geometryHandlerMap={};this.hierarchyHandlerMap={};this.addGeometryHandler("ascii",THREE.JSONLoader)};THREE.SceneLoader.prototype.constructor=THREE.SceneLoader;THREE.SceneLoader.prototype.load=function(b,a){var c=this;var d=new XMLHttpRequest();d.onreadystatechange=function(){if(d.readyState===4){if(d.status===200||d.status===0){var e=JSON.parse(d.responseText);c.parse(e,a,b)}else{console.error("THREE.SceneLoader: Couldn't load ["+b+"] ["+d.status+"]")}}};d.open("GET",b,true);d.send(null)};THREE.SceneLoader.prototype.addGeometryHandler=function(a,b){this.geometryHandlerMap[a]={loaderClass:b}};THREE.SceneLoader.prototype.addHierarchyHandler=function(a,b){this.hierarchyHandlerMap[a]={loaderClass:b}};THREE.SceneLoader.prototype.parse=function(U,a,A){var ah=this;var d=THREE.Loader.prototype.extractUrlBase(A);var ai,ax,aq,x,al,p,y,af,ag,f,e,at,t,N,ay;var ab=[];var v=U;for(var ar in this.geometryHandlerMap){var g=this.geometryHandlerMap[ar]["loaderClass"];this.geometryHandlerMap[ar]["loaderObject"]=new g()}for(var ar in this.hierarchyHandlerMap){var g=this.hierarchyHandlerMap[ar]["loaderClass"];this.hierarchyHandlerMap[ar]["loaderObject"]=new g()}e=0;at=0;ay={scene:new THREE.Scene(),geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}};if(v.transform){var aj=v.transform.position,J=v.transform.rotation,ao=v.transform.scale;if(aj){ay.scene.position.set(aj[0],aj[1],aj[2])}if(J){ay.scene.rotation.set(J[0],J[1],J[2])}if(ao){ay.scene.scale.set(ao[0],ao[1],ao[2])}if(aj||J||ao){ay.scene.updateMatrix();ay.scene.updateMatrixWorld()}}function E(i,n){if(n=="relativeToHTML"){return i}else{return d+"/"+i}}function av(){ad(ay.scene,v.objects)}function ad(aL,aE){var aP,aS,aG,aJ,n,aB;for(var aC in aE){if(ay.objects[aC]===undefined){var aH=aE[aC];var aQ=null;if(aH.type&&(aH.type in ah.hierarchyHandlerMap)){if(aH.loading===undefined){var aD={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1};var aK={};for(var aI in aH){if(!(aI in aD)){aK[aI]=aH[aI]}}ax=ay.materials[aH.material];aH.loading=true;var aM=ah.hierarchyHandlerMap[aH.type]["loaderObject"];if(aM.options){aM.load(E(aH.url,v.urlBaseType),O(aC,aL,ax,aH))}else{aM.load(E(aH.url,v.urlBaseType),O(aC,aL,ax,aH),aK)}}}else{if(aH.geometry!==undefined){ai=ay.geometries[aH.geometry];if(ai){var aF=false;ax=ay.materials[aH.material];aF=ax instanceof THREE.ShaderMaterial;aG=aH.position;aJ=aH.rotation;n=aH.scale;aP=aH.matrix;aB=aH.quaternion;if(!aH.material){ax=new THREE.MeshFaceMaterial(ay.face_materials[aH.geometry])}if((ax instanceof THREE.MeshFaceMaterial)&&ax.materials.length===0){ax=new THREE.MeshFaceMaterial(ay.face_materials[aH.geometry])}if(ax instanceof THREE.MeshFaceMaterial){for(var aO=0;aO<ax.materials.length;aO++){aF=aF||(ax.materials[aO] instanceof THREE.ShaderMaterial)}}if(aF){ai.computeTangents()}if(aH.skin){aQ=new THREE.SkinnedMesh(ai,ax)}else{if(aH.morph){aQ=new THREE.MorphAnimMesh(ai,ax);if(aH.duration!==undefined){aQ.duration=aH.duration}if(aH.time!==undefined){aQ.time=aH.time}if(aH.mirroredLoop!==undefined){aQ.mirroredLoop=aH.mirroredLoop}if(ax.morphNormals){ai.computeMorphNormals()}}else{aQ=new THREE.Mesh(ai,ax)}}aQ.name=aC;if(aP){aQ.matrixAutoUpdate=false;aQ.matrix.set(aP[0],aP[1],aP[2],aP[3],aP[4],aP[5],aP[6],aP[7],aP[8],aP[9],aP[10],aP[11],aP[12],aP[13],aP[14],aP[15])}else{aQ.position.set(aG[0],aG[1],aG[2]);if(aB){aQ.quaternion.set(aB[0],aB[1],aB[2],aB[3]);aQ.useQuaternion=true}else{aQ.rotation.set(aJ[0],aJ[1],aJ[2])}aQ.scale.set(n[0],n[1],n[2])}aQ.visible=aH.visible;aQ.castShadow=aH.castShadow;aQ.receiveShadow=aH.receiveShadow;aL.add(aQ);ay.objects[aC]=aQ}}else{if(aH.type==="DirectionalLight"||aH.type==="PointLight"||aH.type==="AmbientLight"){ag=(aH.color!==undefined)?aH.color:16777215;f=(aH.intensity!==undefined)?aH.intensity:1;if(aH.type==="DirectionalLight"){aG=aH.direction;af=new THREE.DirectionalLight(ag,f);af.position.set(aG[0],aG[1],aG[2]);if(aH.target){ab.push({object:af,targetName:aH.target});af.target=null}}else{if(aH.type==="PointLight"){aG=aH.position;aS=aH.distance;af=new THREE.PointLight(ag,f,aS);af.position.set(aG[0],aG[1],aG[2])}else{if(aH.type==="AmbientLight"){af=new THREE.AmbientLight(ag)}}}aL.add(af);af.name=aC;ay.lights[aC]=af;ay.objects[aC]=af}else{if(aH.type==="PerspectiveCamera"||aH.type==="OrthographicCamera"){aG=aH.position;aJ=aH.rotation;aB=aH.quaternion;if(aH.type==="PerspectiveCamera"){aq=new THREE.PerspectiveCamera(aH.fov,aH.aspect,aH.near,aH.far)}else{if(aH.type==="OrthographicCamera"){aq=new THREE.OrthographicCamera(aH.left,aH.right,aH.top,aH.bottom,aH.near,aH.far)}}aq.name=aC;aq.position.set(aG[0],aG[1],aG[2]);if(aB!==undefined){aq.quaternion.set(aB[0],aB[1],aB[2],aB[3]);aq.useQuaternion=true}else{if(aJ!==undefined){aq.rotation.set(aJ[0],aJ[1],aJ[2])}}aL.add(aq);ay.cameras[aC]=aq;ay.objects[aC]=aq}else{aG=aH.position;aJ=aH.rotation;n=aH.scale;aB=aH.quaternion;aQ=new THREE.Object3D();aQ.name=aC;aQ.position.set(aG[0],aG[1],aG[2]);if(aB){aQ.quaternion.set(aB[0],aB[1],aB[2],aB[3]);aQ.useQuaternion=true}else{aQ.rotation.set(aJ[0],aJ[1],aJ[2])}aQ.scale.set(n[0],n[1],n[2]);aQ.visible=(aH.visible!==undefined)?aH.visible:false;aL.add(aQ);ay.objects[aC]=aQ;ay.empties[aC]=aQ}}}}if(aQ){if(aH.userData!==undefined){for(var aR in aH.userData){var aN=aH.userData[aR];aQ.userData[aR]=aN}}if(aH.groups!==undefined){for(var aO=0;aO<aH.groups.length;aO++){var aA=aH.groups[aO];if(ay.groups[aA]===undefined){ay.groups[aA]=[]}ay.groups[aA].push(aC)}}if(aH.children!==undefined){ad(aQ,aH.children)}}}}}function ae(n,i,aA){ay.geometries[aA]=n;ay.face_materials[aA]=i;av()}function Z(aD,aA,aG,aF,aE){var aB=aE.position;var i=aE.rotation;var n=aE.quaternion;var aH=aE.scale;aD.position.set(aB[0],aB[1],aB[2]);if(n){aD.quaternion.set(n[0],n[1],n[2],n[3]);aD.useQuaternion=true}else{aD.rotation.set(i[0],i[1],i[2])}aD.scale.set(aH[0],aH[1],aH[2]);if(aF){aD.traverse(function(aI){aI.material=aF})}var aC=(aE.visible!==undefined)?aE.visible:true;aD.traverse(function(aI){aI.visible=aC});aG.add(aD);aD.name=aA;ay.objects[aA]=aD;av()}function k(i){return function(aA,n){aA.name=i;ae(aA,n,i);e-=1;ah.onLoadComplete();T()}}function O(aB,n,i,aA){return function(aD){var aC;if(aD.content){aC=aD.content}else{if(aD.dae){aC=aD.scene}else{aC=aD}}Z(aC,aB,n,i,aA);e-=1;ah.onLoadComplete();T()}}function D(i){return function(aA,n){aA.name=i;ay.geometries[i]=aA;ay.face_materials[i]=n}}function T(){var i={totalModels:t,totalTextures:N,loadedModels:t-e,loadedTextures:N-at};ah.callbackProgress(i,ay);ah.onLoadProgress();if(e===0&&at===0){az();a(ay)}}function az(){for(var aA=0;aA<ab.length;aA++){var n=ab[aA];var aB=ay.objects[n.targetName];if(aB){n.object.target=aB}else{n.object.target=new THREE.Object3D();ay.scene.add(n.object.target)}n.object.target.userData.targetInverse=n.object}}var ac=function(i){at-=i;T();ah.onLoadComplete()};var r=function(i){return function(){ac(i)}};var z,ap;for(z in v.fogs){ap=v.fogs[z];if(ap.type==="linear"){x=new THREE.Fog(0,ap.near,ap.far)}else{if(ap.type==="exp2"){x=new THREE.FogExp2(0,ap.density)}}y=ap.color;x.color.setRGB(y[0],y[1],y[2]);ay.fogs[z]=x}var S,Y;for(S in v.geometries){Y=v.geometries[S];if(Y.type in this.geometryHandlerMap){e+=1;ah.onLoadStart()}}var j,V;for(j in v.objects){V=v.objects[j];if(V.type&&(V.type in this.hierarchyHandlerMap)){e+=1;ah.onLoadStart()}}t=e;for(S in v.geometries){Y=v.geometries[S];if(Y.type==="cube"){ai=new THREE.CubeGeometry(Y.width,Y.height,Y.depth,Y.widthSegments,Y.heightSegments,Y.depthSegments);ai.name=S;ay.geometries[S]=ai}else{if(Y.type==="plane"){ai=new THREE.PlaneGeometry(Y.width,Y.height,Y.widthSegments,Y.heightSegments);ai.name=S;ay.geometries[S]=ai}else{if(Y.type==="sphere"){ai=new THREE.SphereGeometry(Y.radius,Y.widthSegments,Y.heightSegments);ai.name=S;ay.geometries[S]=ai}else{if(Y.type==="cylinder"){ai=new THREE.CylinderGeometry(Y.topRad,Y.botRad,Y.height,Y.radSegs,Y.heightSegs);ai.name=S;ay.geometries[S]=ai}else{if(Y.type==="torus"){ai=new THREE.TorusGeometry(Y.radius,Y.tube,Y.segmentsR,Y.segmentsT);ai.name=S;ay.geometries[S]=ai}else{if(Y.type==="icosahedron"){ai=new THREE.IcosahedronGeometry(Y.radius,Y.subdivisions);ai.name=S;ay.geometries[S]=ai}else{if(Y.type in this.geometryHandlerMap){var Q={};for(var H in Y){if(H!=="type"&&H!=="url"){Q[H]=Y[H]}}var F=this.geometryHandlerMap[Y.type]["loaderObject"];F.load(E(Y.url,v.urlBaseType),k(S),Q)}else{if(Y.type==="embedded"){var m=v.embeds[Y.id],b="";m.metadata=v.metadata;if(m){var L=this.geometryHandlerMap.ascii["loaderObject"];var B=L.parse(m,b);D(S)(B.geometry,B.materials)}}}}}}}}}}var ak,X;for(ak in v.textures){X=v.textures[ak];if(X.url instanceof Array){at+=X.url.length;for(var K=0;K<X.url.length;K++){ah.onLoadStart()}}else{at+=1;ah.onLoadStart()}}N=at;for(ak in v.textures){X=v.textures[ak];if(X.mapping!==undefined&&THREE[X.mapping]!==undefined){X.mapping=new THREE[X.mapping]()}if(X.url instanceof Array){var h=X.url.length;var I=[];for(var M=0;M<h;M++){I[M]=E(X.url[M],v.urlBaseType)}var l=/\.dds$/i.test(I[0]);if(l){al=THREE.ImageUtils.loadCompressedTextureCube(I,X.mapping,r(h))}else{al=THREE.ImageUtils.loadTextureCube(I,X.mapping,r(h))}}else{var l=/\.dds$/i.test(X.url);var an=E(X.url,v.urlBaseType);var aw=r(1);if(l){al=THREE.ImageUtils.loadCompressedTexture(an,X.mapping,aw)}else{al=THREE.ImageUtils.loadTexture(an,X.mapping,aw)}if(THREE[X.minFilter]!==undefined){al.minFilter=THREE[X.minFilter]}if(THREE[X.magFilter]!==undefined){al.magFilter=THREE[X.magFilter]}if(X.anisotropy){al.anisotropy=X.anisotropy}if(X.repeat){al.repeat.set(X.repeat[0],X.repeat[1]);if(X.repeat[0]!==1){al.wrapS=THREE.RepeatWrapping}if(X.repeat[1]!==1){al.wrapT=THREE.RepeatWrapping}}if(X.offset){al.offset.set(X.offset[0],X.offset[1])}if(X.wrap){var P={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};if(P[X.wrap[0]]!==undefined){al.wrapS=P[X.wrap[0]]}if(P[X.wrap[1]]!==undefined){al.wrapT=P[X.wrap[1]]}}}ay.textures[ak]=al}var s,au;var aa;for(s in v.materials){au=v.materials[s];for(aa in au.parameters){if(aa==="envMap"||aa==="map"||aa==="lightMap"||aa==="bumpMap"){au.parameters[aa]=ay.textures[au.parameters[aa]]}else{if(aa==="shading"){au.parameters[aa]=(au.parameters[aa]==="flat")?THREE.FlatShading:THREE.SmoothShading}else{if(aa==="side"){if(au.parameters[aa]=="double"){au.parameters[aa]=THREE.DoubleSide}else{if(au.parameters[aa]=="back"){au.parameters[aa]=THREE.BackSide}else{au.parameters[aa]=THREE.FrontSide}}}else{if(aa==="blending"){au.parameters[aa]=au.parameters[aa] in THREE?THREE[au.parameters[aa]]:THREE.NormalBlending}else{if(aa==="combine"){au.parameters[aa]=au.parameters[aa] in THREE?THREE[au.parameters[aa]]:THREE.MultiplyOperation}else{if(aa==="vertexColors"){if(au.parameters[aa]=="face"){au.parameters[aa]=THREE.FaceColors}else{if(au.parameters[aa]){au.parameters[aa]=THREE.VertexColors}}}else{if(aa==="wrapRGB"){var W=au.parameters[aa];au.parameters[aa]=new THREE.Vector3(W[0],W[1],W[2])}}}}}}}}if(au.parameters.opacity!==undefined&&au.parameters.opacity<1){au.parameters.transparent=true}if(au.parameters.normalMap){var am=THREE.ShaderLib.normalmap;var u=THREE.UniformsUtils.clone(am.uniforms);var o=au.parameters.color;var c=au.parameters.specular;var G=au.parameters.ambient;var R=au.parameters.shininess;u.tNormal.value=ay.textures[au.parameters.normalMap];if(au.parameters.normalScale){u.uNormalScale.value.set(au.parameters.normalScale[0],au.parameters.normalScale[1])}if(au.parameters.map){u.tDiffuse.value=au.parameters.map;u.enableDiffuse.value=true}if(au.parameters.envMap){u.tCube.value=au.parameters.envMap;u.enableReflection.value=true;u.uReflectivity.value=au.parameters.reflectivity}if(au.parameters.lightMap){u.tAO.value=au.parameters.lightMap;u.enableAO.value=true}if(au.parameters.specularMap){u.tSpecular.value=ay.textures[au.parameters.specularMap];u.enableSpecular.value=true}if(au.parameters.displacementMap){u.tDisplacement.value=ay.textures[au.parameters.displacementMap];u.enableDisplacement.value=true;u.uDisplacementBias.value=au.parameters.displacementBias;u.uDisplacementScale.value=au.parameters.displacementScale}u.uDiffuseColor.value.setHex(o);u.uSpecularColor.value.setHex(c);u.uAmbientColor.value.setHex(G);u.uShininess.value=R;if(au.parameters.opacity){u.uOpacity.value=au.parameters.opacity}var C={fragmentShader:am.fragmentShader,vertexShader:am.vertexShader,uniforms:u,lights:true,fog:true};ax=new THREE.ShaderMaterial(C)}else{ax=new THREE[au.type](au.parameters)}ax.name=s;ay.materials[s]=ax}for(s in v.materials){au=v.materials[s];if(au.parameters.materials){var w=[];for(var M=0;M<au.parameters.materials.length;M++){var q=au.parameters.materials[M];w.push(ay.materials[q])}ay.materials[s].materials=w}}av();if(ay.cameras&&v.defaults.camera){ay.currentCamera=ay.cameras[v.defaults.camera]}if(ay.fogs&&v.defaults.fog){ay.scene.fog=ay.fogs[v.defaults.fog]}ah.callbackSync(ay);T()};THREE.TextureLoader=function(){this.crossOrigin=null};THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,load:function(a){var b=this;var c=new Image();c.addEventListener("load",function(){var d=new THREE.Texture(c);d.needsUpdate=true;b.dispatchEvent({type:"load",content:d})},false);c.addEventListener("error",function(){b.dispatchEvent({type:"error",message:"Couldn't load URL ["+a+"]"})},false);if(b.crossOrigin){c.crossOrigin=b.crossOrigin}c.src=a}};THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=false;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthTest=true;this.depthWrite=true;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.alphaTest=0;this.overdraw=false;this.visible=true;this.needsUpdate=true};THREE.Material.prototype={constructor:THREE.Material,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,setValues:function(a){if(a===undefined){return}for(var b in a){var d=a[b];if(d===undefined){console.warn("THREE.Material: '"+b+"' parameter is undefined.",a);continue}if(b in this){var c=this[b];if(c instanceof THREE.Color){c.set(d)}else{if(c instanceof THREE.Vector3&&d instanceof THREE.Vector3){c.copy(d)}else{this[b]=d}}}}},clone:function(a){if(a===undefined){a=new THREE.Material()}a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.scale=1;this.dashSize=3;this.gapSize=1;this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.lightMap=null;this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.setValues(a)};THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=false;this.perPixel=true;this.wrapAround=false;this.wrapRGB=new THREE.Vector3(1,1,1);this.map=null;this.lightMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.specularMap=null;this.envMap=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=0.98;this.fog=true;this.shading=THREE.SmoothShading;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=false;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial();THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=false;this.wireframeLinewidth=1;this.morphTargets=false;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial();THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial(this.materials.slice(0))};THREE.ParticleBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.vertexColors=false;this.fog=true;this.setValues(a)};THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ParticleBasicMaterial.prototype.clone=function(){var a=new THREE.ParticleBasicMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.ParticleCanvasMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.program=function(c,b){};this.setValues(a)};THREE.ParticleCanvasMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ParticleCanvasMaterial.prototype.clone=function(){var a=new THREE.ParticleCanvasMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.program=this.program;return a};THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.fragmentShader="void main() {}";this.vertexShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.vertexColors=THREE.NoColors;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial();THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=new THREE.Texture();this.useScreenCoordinates=true;this.depthTest=!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.scaleByViewport=!this.sizeAttenuation;this.alignment=THREE.SpriteAlignment.center.clone();this.fog=false;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a);a=a||{};if(a.depthTest===undefined){this.depthTest=!this.useScreenCoordinates}if(a.sizeAttenuation===undefined){this.sizeAttenuation=!this.useScreenCoordinates}if(a.scaleByViewport===undefined){this.scaleByViewport=!this.sizeAttenuation}};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial();THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.useScreenCoordinates=this.useScreenCoordinates;a.sizeAttenuation=this.sizeAttenuation;a.scaleByViewport=this.scaleByViewport;a.alignment.copy(this.alignment);a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteAlignment={};THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1);THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1);THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1);THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0);THREE.SpriteAlignment.center=new THREE.Vector2(0,0);THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0);THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1);THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1);THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1);THREE.Texture=function(d,b,f,e,i,c,h,g,a){this.id=THREE.TextureIdCount++;this.name="";this.image=d;this.mipmaps=[];this.mapping=b!==undefined?b:new THREE.UVMapping();this.wrapS=f!==undefined?f:THREE.ClampToEdgeWrapping;this.wrapT=e!==undefined?e:THREE.ClampToEdgeWrapping;this.magFilter=i!==undefined?i:THREE.LinearFilter;this.minFilter=c!==undefined?c:THREE.LinearMipMapLinearFilter;this.anisotropy=a!==undefined?a:1;this.format=h!==undefined?h:THREE.RGBAFormat;this.type=g!==undefined?g:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.needsUpdate=false;this.onUpdate=null};THREE.Texture.prototype={constructor:THREE.Texture,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(a){if(a===undefined){a=new THREE.Texture()}a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.TextureIdCount=0;THREE.CompressedTexture=function(e,d,k,i,h,b,g,f,j,c,a){THREE.Texture.call(this,null,b,g,f,j,c,i,h,a);this.image={width:d,height:k};this.mipmaps=e;this.generateMipmaps=false};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture();THREE.Texture.prototype.clone.call(this,a);return a};THREE.DataTexture=function(f,d,k,i,h,b,g,e,j,c,a){THREE.Texture.call(this,null,b,g,e,j,c,i,h,a);this.image={data:f,width:d,height:k}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture();THREE.Texture.prototype.clone.call(this,a);return a};THREE.Particle=function(a){THREE.Object3D.call(this);this.material=a};THREE.Particle.prototype=Object.create(THREE.Object3D.prototype);THREE.Particle.prototype.clone=function(a){if(a===undefined){a=new THREE.Particle(this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(b,a){THREE.Object3D.call(this);this.geometry=b;this.material=(a!==undefined)?a:new THREE.ParticleBasicMaterial({color:Math.random()*16777215});this.sortParticles=false;if(this.geometry){if(this.geometry.boundingSphere===null){this.geometry.computeBoundingSphere()}}this.frustumCulled=false};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);THREE.ParticleSystem.prototype.clone=function(a){if(a===undefined){a=new THREE.ParticleSystem(this.geometry,this.material)}a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(c,b,a){THREE.Object3D.call(this);this.geometry=c;this.material=(b!==undefined)?b:new THREE.LineBasicMaterial({color:Math.random()*16777215});this.type=(a!==undefined)?a:THREE.LineStrip;if(this.geometry){if(!this.geometry.boundingSphere){this.geometry.computeBoundingSphere()}}};THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){if(a===undefined){a=new THREE.Line(this.geometry,this.material,this.type)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(b,a){THREE.Object3D.call(this);this.geometry=null;this.material=null;this.setGeometry(b);this.setMaterial(a)};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);THREE.Mesh.prototype.setGeometry=function(a){if(a!==undefined){this.geometry=a;if(this.geometry.boundingSphere===null){this.geometry.computeBoundingSphere()}this.updateMorphTargets()}};THREE.Mesh.prototype.setMaterial=function(a){if(a!==undefined){this.material=a}else{this.material=new THREE.MeshBasicMaterial({color:Math.random()*16777215,wireframe:true})}};THREE.Mesh.prototype.updateMorphTargets=function(){if(this.geometry.morphTargets.length>0){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++){this.morphTargetInfluences.push(0);this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}}};THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(this.morphTargetDictionary[a]!==undefined){return this.morphTargetDictionary[a]}console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){if(a===undefined){a=new THREE.Mesh(this.geometry,this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4()};THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(d,b){if(this.matrixAutoUpdate){b|=this.updateMatrix()}if(b||this.matrixWorldNeedsUpdate){if(d){this.skinMatrix.multiplyMatrices(d,this.matrix)}else{this.skinMatrix.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;b=true}var e,c,a=this.children.length;for(c=0;c<a;c++){this.children[c].update(this.skinMatrix,b)}};THREE.SkinnedMesh=function(f,e,d){THREE.Mesh.call(this,f,e);this.useVertexTexture=d!==undefined?d:true;this.identityMatrix=new THREE.Matrix4();this.bones=[];this.boneMatrices=[];var g,i,j,c,a,l;if(this.geometry&&this.geometry.bones!==undefined){for(g=0;g<this.geometry.bones.length;g++){j=this.geometry.bones[g];c=j.pos;a=j.rotq;l=j.scl;i=this.addBone();i.name=j.name;i.position.set(c[0],c[1],c[2]);i.quaternion.set(a[0],a[1],a[2],a[3]);i.useQuaternion=true;if(l!==undefined){i.scale.set(l[0],l[1],l[2])}else{i.scale.set(1,1,1)}}for(g=0;g<this.bones.length;g++){j=this.geometry.bones[g];i=this.bones[g];if(j.parent===-1){this.add(i)}else{this.bones[j.parent].add(i)}}var h=this.bones.length;if(this.useVertexTexture){var k;if(h>256){k=64}else{if(h>64){k=32}else{if(h>16){k=16}else{k=8}}}this.boneTextureWidth=k;this.boneTextureHeight=k;this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4);this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType);this.boneTexture.minFilter=THREE.NearestFilter;this.boneTexture.magFilter=THREE.NearestFilter;this.boneTexture.generateMipmaps=false;this.boneTexture.flipY=false}else{this.boneMatrices=new Float32Array(16*h)}this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){if(a===undefined){a=new THREE.Bone(this)}this.bones.push(a);return a};THREE.SkinnedMesh.prototype.updateMatrixWorld=function(f){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||f){if(this.parent){this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)}else{this.matrixWorld.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;f=true}for(var e=0,d=this.children.length;e<d;e++){var h=this.children[e];if(h instanceof THREE.Bone){h.update(this.identityMatrix,false)}else{h.updateMatrixWorld(true)}}if(this.boneInverses==undefined){this.boneInverses=[];for(var a=0,g=this.bones.length;a<g;a++){var c=new THREE.Matrix4();c.getInverse(this.bones[a].skinMatrix);this.boneInverses.push(c)}}for(var a=0,g=this.bones.length;a<g;a++){THREE.SkinnedMesh.offsetMatrix.multiplyMatrices(this.bones[a].skinMatrix,this.boneInverses[a]);THREE.SkinnedMesh.offsetMatrix.flattenToArrayOffset(this.boneMatrices,a*16)}if(this.useVertexTexture){this.boneTexture.needsUpdate=true}};THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(true);for(var b=0;b<this.geometry.skinIndices.length;b++){var a=this.geometry.skinWeights[b];var c=1/a.lengthManhattan();if(c!==Infinity){a.multiplyScalar(c)}else{a.set(1)}}};THREE.SkinnedMesh.prototype.clone=function(a){if(a===undefined){a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)}THREE.Mesh.prototype.clone.call(this,a);return a};THREE.SkinnedMesh.offsetMatrix=new THREE.Matrix4();THREE.MorphAnimMesh=function(b,a){THREE.Mesh.call(this,b,a);this.duration=1000;this.mirroredLoop=false;this.time=0;this.lastKeyframe=0;this.currentKeyframe=0;this.direction=1;this.directionBackwards=false;this.setFrameRange(0,this.geometry.morphTargets.length-1)};THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphAnimMesh.prototype.setFrameRange=function(b,a){this.startKeyframe=b;this.endKeyframe=a;this.length=this.endKeyframe-this.startKeyframe+1};THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1;this.directionBackwards=false};THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1;this.directionBackwards=true};THREE.MorphAnimMesh.prototype.parseAnimations=function(){var g=this.geometry;if(!g.animations){g.animations={}}var a,l=g.animations;var f=/([a-z]+)(\d+)/;for(var d=0,j=g.morphTargets.length;d<j;d++){var k=g.morphTargets[d];var c=k.name.match(f);if(c&&c.length>1){var h=c[1];var e=c[2];if(!l[h]){l[h]={start:Infinity,end:-Infinity}}var b=l[h];if(d<b.start){b.start=d}if(d>b.end){b.end=d}if(!a){a=h}}}g.firstAnimation=a};THREE.MorphAnimMesh.prototype.setAnimationLabel=function(b,c,a){if(!this.geometry.animations){this.geometry.animations={}}this.geometry.animations[b]={start:c,end:a}};THREE.MorphAnimMesh.prototype.playAnimation=function(a,c){var b=this.geometry.animations[a];if(b){this.setFrameRange(b.start,b.end);this.duration=1000*((b.end-b.start)/c);this.time=0}else{console.warn("animation["+a+"] undefined")}};THREE.MorphAnimMesh.prototype.updateAnimation=function(d){var c=this.duration/this.length;this.time+=this.direction*d;if(this.mirroredLoop){if(this.time>this.duration||this.time<0){this.direction*=-1;if(this.time>this.duration){this.time=this.duration;this.directionBackwards=true}if(this.time<0){this.time=0;this.directionBackwards=false}}}else{this.time=this.time%this.duration;if(this.time<0){this.time+=this.duration}}var a=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/c),0,this.length-1);if(a!==this.currentKeyframe){this.morphTargetInfluences[this.lastKeyframe]=0;this.morphTargetInfluences[this.currentKeyframe]=1;this.morphTargetInfluences[a]=0;this.lastKeyframe=this.currentKeyframe;this.currentKeyframe=a}var b=(this.time%c)/c;if(this.directionBackwards){b=1-b}this.morphTargetInfluences[this.currentKeyframe]=b;this.morphTargetInfluences[this.lastKeyframe]=1-b};THREE.MorphAnimMesh.prototype.clone=function(a){if(a===undefined){a=new THREE.MorphAnimMesh(this.geometry,this.material)}a.duration=this.duration;a.mirroredLoop=this.mirroredLoop;a.time=this.time;a.lastKeyframe=this.lastKeyframe;a.currentKeyframe=this.currentKeyframe;a.direction=this.direction;a.directionBackwards=this.directionBackwards;THREE.Mesh.prototype.clone.call(this,a);return a};THREE.Ribbon=function(b,a){THREE.Object3D.call(this);this.geometry=b;this.material=a};THREE.Ribbon.prototype=Object.create(THREE.Object3D.prototype);THREE.Ribbon.prototype.clone=function(a){if(a===undefined){a=new THREE.Ribbon(this.geometry,this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);THREE.LOD.prototype.addLevel=function(b,c){if(c===undefined){c=0}c=Math.abs(c);for(var a=0;a<this.objects.length;a++){if(c<this.objects[a].distance){break}}this.objects.splice(a,0,{distance:c,object:b});this.add(b)};THREE.LOD.prototype.getObjectForDistance=function(c){for(var b=1,a=this.objects.length;b<a;b++){if(c<this.objects[b].distance){break}}return this.objects[b-1].object};THREE.LOD.prototype.update=function(){var b=new THREE.Vector3();var a=new THREE.Vector3();return function(e){if(this.objects.length>1){b.getPositionFromMatrix(e.matrixWorld);a.getPositionFromMatrix(this.matrixWorld);var f=b.distanceTo(a);this.objects[0].object.visible=true;for(var d=1,c=this.objects.length;d<c;d++){if(f>=this.objects[d].distance){this.objects[d-1].object.visible=false;this.objects[d].object.visible=true}else{break}}for(;d<c;d++){this.objects[d].object.visible=false}}}}();THREE.LOD.prototype.clone=function(){};THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=(a!==undefined)?a:new THREE.SpriteMaterial();this.rotation3d=this.rotation;this.rotation=0};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.rotation3d.set(0,0,this.rotation);this.quaternion.setFromEuler(this.rotation3d,this.eulerOrder);this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true};THREE.Sprite.prototype.clone=function(a){if(a===undefined){a=new THREE.Sprite(this.material)}THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Scene=function(){THREE.Object3D.call(this);this.fog=null;this.overrideMaterial=null;this.autoUpdate=true;this.matrixAutoUpdate=false;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light){if(this.__lights.indexOf(a)===-1){this.__lights.push(a)}if(a.target&&a.target.parent===undefined){this.add(a.target)}}else{if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)){if(this.__objects.indexOf(a)===-1){this.__objects.push(a);this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);if(b!==-1){this.__objectsRemoved.splice(b,1)}}}}for(var d=0;d<a.children.length;d++){this.__addObject(a.children[d])}};THREE.Scene.prototype.__removeObject=function(b){if(b instanceof THREE.Light){var d=this.__lights.indexOf(b);if(d!==-1){this.__lights.splice(d,1)}}else{if(!(b instanceof THREE.Camera)){var d=this.__objects.indexOf(b);if(d!==-1){this.__objects.splice(d,1);this.__objectsRemoved.push(b);var a=this.__objectsAdded.indexOf(b);if(a!==-1){this.__objectsAdded.splice(a,1)}}}}for(var e=0;e<b.children.length;e++){this.__removeObject(b.children[e])}};THREE.Fog=function(c,b,a){this.name="";this.color=new THREE.Color(c);this.near=(b!==undefined)?b:1;this.far=(a!==undefined)?a:1000};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(b,a){this.name="";this.color=new THREE.Color(b);this.density=(a!==undefined)?a:0.00025};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};THREE.CanvasRenderer=function(A){console.log("THREE.CanvasRenderer",THREE.REVISION);var av=THREE.Math.smoothstep;A=A||{};var t=this,x,B,k,a=new THREE.Projector(),f=A.canvas!==undefined?A.canvas:document.createElement("canvas"),v,au,af,E,d=f.getContext("2d"),C=new THREE.Color(0),ap=0,aw=1,ar=0,u=null,aq=null,H=null,i=null,am=null,F=null,ai=0,ae,ac,aa,Z,Y=new THREE.RenderableVertex(),W=new THREE.RenderableVertex(),s,r,c,b,aD,aA,ao,an,S,Q,K,J,e=new THREE.Color(),o=new THREE.Color(),n=new THREE.Color(),m=new THREE.Color(),l=new THREE.Color(),U=new THREE.Color(),p=new THREE.Color(),ak=new THREE.Color(),D={},O={},N,aG,V,h,aC,ay,al,aj,R,P,aF=new THREE.Box2(),q=new THREE.Box2(),w=new THREE.Box2(),ax=new THREE.Color(),z=new THREE.Color(),ab=new THREE.Color(),j=new THREE.Vector3(),aB,g,aE,M,I,L,ad=16;aB=document.createElement("canvas");aB.width=aB.height=2;g=aB.getContext("2d");g.fillStyle="rgba(0,0,0,1)";g.fillRect(0,0,2,2);aE=g.getImageData(0,0,2,2);M=aE.data;I=document.createElement("canvas");I.width=I.height=ad;L=I.getContext("2d");L.translate(-ad/2,-ad/2);L.scale(ad,ad);ad--;if(d.setLineDash===undefined){if(d.mozDash!==undefined){d.setLineDash=function(aH){d.mozDash=aH[0]!==null?aH:null}}else{d.setLineDash=function(){}}}this.domElement=f;this.devicePixelRatio=A.devicePixelRatio!==undefined?A.devicePixelRatio:window.devicePixelRatio!==undefined?window.devicePixelRatio:1;this.autoClear=true;this.sortObjects=true;this.sortElements=true;this.info={render:{vertices:0,faces:0}};this.supportsVertexTextures=function(){};this.setFaceCulling=function(){};this.setSize=function(aI,aH,aJ){v=aI*this.devicePixelRatio;au=aH*this.devicePixelRatio;af=Math.floor(v/2);E=Math.floor(au/2);f.width=v;f.height=au;if(this.devicePixelRatio!==1&&aJ!==false){f.style.width=aI+"px";f.style.height=aH+"px"}aF.set(new THREE.Vector2(-af,-E),new THREE.Vector2(af,E));q.set(new THREE.Vector2(-af,-E),new THREE.Vector2(af,E));aw=1;ar=0;u=null;aq=null;H=null;i=null;am=null};this.setClearColor=function(aH,aI){C.set(aH);ap=aI!==undefined?aI:1;q.set(new THREE.Vector2(-af,-E),new THREE.Vector2(af,E))};this.setClearColorHex=function(aH,aI){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(aH,aI)};this.getMaxAnisotropy=function(){return 0};this.clear=function(){d.setTransform(1,0,0,-1,af,E);if(q.empty()===false){q.intersect(aF);q.expandByScalar(2);if(ap<1){d.clearRect(q.min.x|0,q.min.y|0,(q.max.x-q.min.x)|0,(q.max.y-q.min.y)|0)}if(ap>0){ah(THREE.NormalBlending);y(1);ag("rgba("+Math.floor(C.r*255)+","+Math.floor(C.g*255)+","+Math.floor(C.b*255)+","+ap+")");d.fillRect(q.min.x|0,q.min.y|0,(q.max.x-q.min.x)|0,(q.max.y-q.min.y)|0)}q.makeEmpty()}};this.render=function(aX,aU){if(aU instanceof THREE.Camera===false){console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.");return}if(this.autoClear===true){this.clear()}d.setTransform(1,0,0,-1,af,E);t.info.render.vertices=0;t.info.render.faces=0;x=a.projectScene(aX,aU,this.sortObjects,this.sortElements);B=x.elements;k=x.lights;aN();for(var aW=0,aK=B.length;aW<aK;aW++){var aL=B[aW];var aQ=aL.material;if(aQ===undefined||aQ.visible===false){continue}w.makeEmpty();if(aL instanceof THREE.RenderableParticle){ae=aL;ae.x*=af;ae.y*=E;aP(ae,aL,aQ)}else{if(aL instanceof THREE.RenderableLine){ae=aL.v1;ac=aL.v2;ae.positionScreen.x*=af;ae.positionScreen.y*=E;ac.positionScreen.x*=af;ac.positionScreen.y*=E;w.setFromPoints([ae.positionScreen,ac.positionScreen]);if(aF.isIntersectionBox(w)===true){aJ(ae,ac,aL,aQ)}}else{if(aL instanceof THREE.RenderableFace3){ae=aL.v1;ac=aL.v2;aa=aL.v3;if(ae.positionScreen.z<-1||ae.positionScreen.z>1){continue}if(ac.positionScreen.z<-1||ac.positionScreen.z>1){continue}if(aa.positionScreen.z<-1||aa.positionScreen.z>1){continue}ae.positionScreen.x*=af;ae.positionScreen.y*=E;ac.positionScreen.x*=af;ac.positionScreen.y*=E;aa.positionScreen.x*=af;aa.positionScreen.y*=E;if(aQ.overdraw===true){aH(ae.positionScreen,ac.positionScreen);aH(ac.positionScreen,aa.positionScreen);aH(aa.positionScreen,ae.positionScreen)}w.setFromPoints([ae.positionScreen,ac.positionScreen,aa.positionScreen]);if(aF.isIntersectionBox(w)===true){aO(ae,ac,aa,0,1,2,aL,aQ)}}else{if(aL instanceof THREE.RenderableFace4){ae=aL.v1;ac=aL.v2;aa=aL.v3;Z=aL.v4;if(ae.positionScreen.z<-1||ae.positionScreen.z>1){continue}if(ac.positionScreen.z<-1||ac.positionScreen.z>1){continue}if(aa.positionScreen.z<-1||aa.positionScreen.z>1){continue}if(Z.positionScreen.z<-1||Z.positionScreen.z>1){continue}ae.positionScreen.x*=af;ae.positionScreen.y*=E;ac.positionScreen.x*=af;ac.positionScreen.y*=E;aa.positionScreen.x*=af;aa.positionScreen.y*=E;Z.positionScreen.x*=af;Z.positionScreen.y*=E;Y.positionScreen.copy(ac.positionScreen);W.positionScreen.copy(Z.positionScreen);if(aQ.overdraw===true){aH(ae.positionScreen,ac.positionScreen);aH(ac.positionScreen,Z.positionScreen);aH(Z.positionScreen,ae.positionScreen);aH(aa.positionScreen,Y.positionScreen);aH(aa.positionScreen,W.positionScreen)}w.setFromPoints([ae.positionScreen,ac.positionScreen,aa.positionScreen,Z.positionScreen]);if(aF.isIntersectionBox(w)===true){aM(ae,ac,aa,Z,Y,W,aL,aQ)}}}}}q.union(w)}d.setTransform(1,0,0,1,0,0);function aN(){ax.setRGB(0,0,0);z.setRGB(0,0,0);ab.setRGB(0,0,0);for(var a3=0,a4=k.length;a3<a4;a3++){var a2=k[a3];var a1=a2.color;if(a2 instanceof THREE.AmbientLight){ax.add(a1)}else{if(a2 instanceof THREE.DirectionalLight){z.add(a1)}else{if(a2 instanceof THREE.PointLight){ab.add(a1)}}}}}function aS(a1,a8,a5){for(var a4=0,a7=k.length;a4<a7;a4++){var a3=k[a4];ak.copy(a3.color);if(a3 instanceof THREE.DirectionalLight){var a2=j.getPositionFromMatrix(a3.matrixWorld).normalize();var a6=a8.dot(a2);if(a6<=0){continue}a6*=a3.intensity;a5.add(ak.multiplyScalar(a6))}else{if(a3 instanceof THREE.PointLight){var a2=j.getPositionFromMatrix(a3.matrixWorld);var a6=a8.dot(j.subVectors(a2,a1).normalize());if(a6<=0){continue}a6*=a3.distance==0?1:1-Math.min(a1.distanceTo(a2)/a3.distance,1);if(a6==0){continue}a6*=a3.intensity;a5.add(ak.multiplyScalar(a6))}}}}function aP(a6,a3,a4){y(a4.opacity);ah(a4.blending);var a1,ba,a8,a7,a5,a9,a2;if(a4 instanceof THREE.ParticleBasicMaterial){if(a4.map===null){a8=a3.object.scale.x;a7=a3.object.scale.y;a8*=a3.scale.x*af;a7*=a3.scale.y*E;w.min.set(a6.x-a8,a6.y-a7);w.max.set(a6.x+a8,a6.y+a7);if(aF.isIntersectionBox(w)===false){w.makeEmpty();return}ag(a4.color.getStyle());d.save();d.translate(a6.x,a6.y);d.rotate(-a3.rotation);d.scale(a8,a7);d.fillRect(-1,-1,2,2);d.restore()}else{a5=a4.map.image;a9=a5.width>>1;a2=a5.height>>1;a8=a3.scale.x*af;a7=a3.scale.y*E;a1=a8*a9;ba=a7*a2;w.min.set(a6.x-a1,a6.y-ba);w.max.set(a6.x+a1,a6.y+ba);if(aF.isIntersectionBox(w)===false){w.makeEmpty();return}d.save();d.translate(a6.x,a6.y);d.rotate(-a3.rotation);d.scale(a8,-a7);d.translate(-a9,-a2);d.drawImage(a5,0,0);d.restore()}}else{if(a4 instanceof THREE.ParticleCanvasMaterial){a1=a3.scale.x*af;ba=a3.scale.y*E;w.min.set(a6.x-a1,a6.y-ba);w.max.set(a6.x+a1,a6.y+ba);if(aF.isIntersectionBox(w)===false){w.makeEmpty();return}at(a4.color.getStyle());ag(a4.color.getStyle());d.save();d.translate(a6.x,a6.y);d.rotate(-a3.rotation);d.scale(a1,ba);a4.program(d);d.restore()}}}function aJ(a8,a6,a4,a5){y(a5.opacity);ah(a5.blending);d.beginPath();d.moveTo(a8.positionScreen.x,a8.positionScreen.y);d.lineTo(a6.positionScreen.x,a6.positionScreen.y);if(a5 instanceof THREE.LineBasicMaterial){G(a5.linewidth);X(a5.linecap);az(a5.linejoin);if(a5.vertexColors!==THREE.VertexColors){at(a5.color.getStyle())}else{var a3=a4.vertexColors[0].getStyle();var a1=a4.vertexColors[1].getStyle();if(a3===a1){at(a3)}else{try{var a7=d.createLinearGradient(a8.positionScreen.x,a8.positionScreen.y,a6.positionScreen.x,a6.positionScreen.y);a7.addColorStop(0,a3);a7.addColorStop(1,a1)}catch(a2){a7=a3}at(a7)}}d.stroke();w.expandByScalar(a5.linewidth*2)}else{if(a5 instanceof THREE.LineDashedMaterial){G(a5.linewidth);X(a5.linecap);az(a5.linejoin);at(a5.color.getStyle());T(a5.dashSize,a5.gapSize);d.stroke();w.expandByScalar(a5.linewidth*2);T(null,null)}}}function aO(a9,a8,a7,a3,a2,a1,a4,a6){t.info.render.vertices+=3;t.info.render.faces++;y(a6.opacity);ah(a6.blending);s=a9.positionScreen.x;r=a9.positionScreen.y;c=a8.positionScreen.x;b=a8.positionScreen.y;aD=a7.positionScreen.x;aA=a7.positionScreen.y;aT(s,r,c,b,aD,aA);if((a6 instanceof THREE.MeshLambertMaterial||a6 instanceof THREE.MeshPhongMaterial)&&a6.map===null){U.copy(a6.color);p.copy(a6.emissive);if(a6.vertexColors===THREE.FaceColors){U.multiply(a4.color)}if(a6.wireframe===false&&a6.shading==THREE.SmoothShading&&a4.vertexNormalsLength==3){o.copy(ax);n.copy(ax);m.copy(ax);aS(a4.v1.positionWorld,a4.vertexNormalsModel[0],o);aS(a4.v2.positionWorld,a4.vertexNormalsModel[1],n);aS(a4.v3.positionWorld,a4.vertexNormalsModel[2],m);o.multiply(U).add(p);n.multiply(U).add(p);m.multiply(U).add(p);l.addColors(n,m).multiplyScalar(0.5);V=a0(o,n,m,l);aV(s,r,c,b,aD,aA,0,0,1,0,0,1,V)}else{e.copy(ax);aS(a4.centroidModel,a4.normalModel,e);e.multiply(U).add(p);a6.wireframe===true?aZ(e,a6.wireframeLinewidth,a6.wireframeLinecap,a6.wireframeLinejoin):aY(e)}}else{if(a6 instanceof THREE.MeshBasicMaterial||a6 instanceof THREE.MeshLambertMaterial||a6 instanceof THREE.MeshPhongMaterial){if(a6.map!==null){if(a6.map.mapping instanceof THREE.UVMapping){h=a4.uvs[0];aI(s,r,c,b,aD,aA,h[a3].x,h[a3].y,h[a2].x,h[a2].y,h[a1].x,h[a1].y,a6.map)}}else{if(a6.envMap!==null){if(a6.envMap.mapping instanceof THREE.SphericalReflectionMapping){j.copy(a4.vertexNormalsModelView[a3]);aC=0.5*j.x+0.5;ay=0.5*j.y+0.5;j.copy(a4.vertexNormalsModelView[a2]);al=0.5*j.x+0.5;aj=0.5*j.y+0.5;j.copy(a4.vertexNormalsModelView[a1]);R=0.5*j.x+0.5;P=0.5*j.y+0.5;aI(s,r,c,b,aD,aA,aC,ay,al,aj,R,P,a6.envMap)}}else{e.copy(a6.color);if(a6.vertexColors===THREE.FaceColors){e.multiply(a4.color)}a6.wireframe===true?aZ(e,a6.wireframeLinewidth,a6.wireframeLinecap,a6.wireframeLinejoin):aY(e)}}}else{if(a6 instanceof THREE.MeshDepthMaterial){N=aU.near;aG=aU.far;o.r=o.g=o.b=1-av(a9.positionScreen.z*a9.positionScreen.w,N,aG);n.r=n.g=n.b=1-av(a8.positionScreen.z*a8.positionScreen.w,N,aG);m.r=m.g=m.b=1-av(a7.positionScreen.z*a7.positionScreen.w,N,aG);l.addColors(n,m).multiplyScalar(0.5);V=a0(o,n,m,l);aV(s,r,c,b,aD,aA,0,0,1,0,0,1,V)}else{if(a6 instanceof THREE.MeshNormalMaterial){var a5;if(a6.shading==THREE.FlatShading){a5=a4.normalModelView;e.setRGB(a5.x,a5.y,a5.z).multiplyScalar(0.5).addScalar(0.5);a6.wireframe===true?aZ(e,a6.wireframeLinewidth,a6.wireframeLinecap,a6.wireframeLinejoin):aY(e)}else{if(a6.shading==THREE.SmoothShading){a5=a4.vertexNormalsModelView[a3];o.setRGB(a5.x,a5.y,a5.z).multiplyScalar(0.5).addScalar(0.5);a5=a4.vertexNormalsModelView[a2];n.setRGB(a5.x,a5.y,a5.z).multiplyScalar(0.5).addScalar(0.5);a5=a4.vertexNormalsModelView[a1];m.setRGB(a5.x,a5.y,a5.z).multiplyScalar(0.5).addScalar(0.5);l.addColors(n,m).multiplyScalar(0.5);V=a0(o,n,m,l);aV(s,r,c,b,aD,aA,0,0,1,0,0,1,V)}}}}}}}function aM(a9,a8,a7,a6,a5,a3,a1,a4){t.info.render.vertices+=4;t.info.render.faces++;y(a4.opacity);ah(a4.blending);if((a4.map!==undefined&&a4.map!==null)||(a4.envMap!==undefined&&a4.envMap!==null)){aO(a9,a8,a6,0,1,3,a1,a4);aO(a5,a7,a3,1,2,3,a1,a4);return}s=a9.positionScreen.x;r=a9.positionScreen.y;c=a8.positionScreen.x;b=a8.positionScreen.y;aD=a7.positionScreen.x;aA=a7.positionScreen.y;ao=a6.positionScreen.x;an=a6.positionScreen.y;S=a5.positionScreen.x;Q=a5.positionScreen.y;K=a3.positionScreen.x;J=a3.positionScreen.y;if(a4 instanceof THREE.MeshLambertMaterial||a4 instanceof THREE.MeshPhongMaterial){U.copy(a4.color);p.copy(a4.emissive);if(a4.vertexColors===THREE.FaceColors){U.multiply(a1.color)}if(a4.wireframe===false&&a4.shading==THREE.SmoothShading&&a1.vertexNormalsLength==4){o.copy(ax);n.copy(ax);m.copy(ax);l.copy(ax);aS(a1.v1.positionWorld,a1.vertexNormalsModel[0],o);aS(a1.v2.positionWorld,a1.vertexNormalsModel[1],n);aS(a1.v4.positionWorld,a1.vertexNormalsModel[3],m);aS(a1.v3.positionWorld,a1.vertexNormalsModel[2],l);o.multiply(U).add(p);n.multiply(U).add(p);m.multiply(U).add(p);l.multiply(U).add(p);V=a0(o,n,m,l);aT(s,r,c,b,ao,an);aV(s,r,c,b,ao,an,0,0,1,0,0,1,V);aT(S,Q,aD,aA,K,J);aV(S,Q,aD,aA,K,J,1,0,1,1,0,1,V)}else{e.copy(ax);aS(a1.centroidModel,a1.normalModel,e);e.multiply(U).add(p);aR(s,r,c,b,aD,aA,ao,an);a4.wireframe===true?aZ(e,a4.wireframeLinewidth,a4.wireframeLinecap,a4.wireframeLinejoin):aY(e)}}else{if(a4 instanceof THREE.MeshBasicMaterial){e.copy(a4.color);if(a4.vertexColors===THREE.FaceColors){e.multiply(a1.color)}aR(s,r,c,b,aD,aA,ao,an);a4.wireframe===true?aZ(e,a4.wireframeLinewidth,a4.wireframeLinecap,a4.wireframeLinejoin):aY(e)}else{if(a4 instanceof THREE.MeshNormalMaterial){var a2;if(a4.shading==THREE.FlatShading){a2=a1.normalModelView;e.setRGB(a2.x,a2.y,a2.z).multiplyScalar(0.5).addScalar(0.5);aR(s,r,c,b,aD,aA,ao,an);a4.wireframe===true?aZ(e,a4.wireframeLinewidth,a4.wireframeLinecap,a4.wireframeLinejoin):aY(e)}else{if(a4.shading==THREE.SmoothShading){a2=a1.vertexNormalsModelView[0];o.setRGB(a2.x,a2.y,a2.z).multiplyScalar(0.5).addScalar(0.5);a2=a1.vertexNormalsModelView[1];n.setRGB(a2.x,a2.y,a2.z).multiplyScalar(0.5).addScalar(0.5);a2=a1.vertexNormalsModelView[3];m.setRGB(a2.x,a2.y,a2.z).multiplyScalar(0.5).addScalar(0.5);a2=a1.vertexNormalsModelView[2];l.setRGB(a2.x,a2.y,a2.z).multiplyScalar(0.5).addScalar(0.5);V=a0(o,n,m,l);aT(s,r,c,b,ao,an);aV(s,r,c,b,ao,an,0,0,1,0,0,1,V);aT(S,Q,aD,aA,K,J);aV(S,Q,aD,aA,K,J,1,0,1,1,0,1,V)}}}else{if(a4 instanceof THREE.MeshDepthMaterial){N=aU.near;aG=aU.far;o.r=o.g=o.b=1-av(a9.positionScreen.z*a9.positionScreen.w,N,aG);n.r=n.g=n.b=1-av(a8.positionScreen.z*a8.positionScreen.w,N,aG);m.r=m.g=m.b=1-av(a6.positionScreen.z*a6.positionScreen.w,N,aG);l.r=l.g=l.b=1-av(a7.positionScreen.z*a7.positionScreen.w,N,aG);V=a0(o,n,m,l);aT(s,r,c,b,ao,an);aV(s,r,c,b,ao,an,0,0,1,0,0,1,V);aT(S,Q,aD,aA,K,J);aV(S,Q,aD,aA,K,J,1,0,1,1,0,1,V)}}}}}function aT(a4,a6,a2,a5,a1,a3){d.beginPath();d.moveTo(a4,a6);d.lineTo(a2,a5);d.lineTo(a1,a3);d.closePath()}function aR(a6,a8,a4,a7,a2,a5,a1,a3){d.beginPath();d.moveTo(a6,a8);d.lineTo(a4,a7);d.lineTo(a2,a5);d.lineTo(a1,a3);d.closePath()}function aZ(a1,a4,a3,a2){G(a4);X(a3);az(a2);at(a1.getStyle());d.stroke();w.expandByScalar(a4*2)}function aY(a1){ag(a1.getStyle());d.fill()}function aI(bl,a8,bi,a6,bg,a4,bh,a5,bf,a3,be,a1,bb){if(bb instanceof THREE.DataTexture||bb.image===undefined||bb.image.width==0){return}if(bb.needsUpdate===true){var bt=bb.wrapS==THREE.RepeatWrapping;var br=bb.wrapT==THREE.RepeatWrapping;D[bb.id]=d.createPattern(bb.image,bt===true&&br===true?"repeat":bt===true&&br===false?"repeat-x":bt===false&&br===true?"repeat-y":"no-repeat");bb.needsUpdate=false}D[bb.id]===undefined?ag("rgba(0,0,0,1)"):ag(D[bb.id]);var bu,bs,bq,bp,bn,bk,a9,bo,bm=bb.offset.x/bb.repeat.x,bj=bb.offset.y/bb.repeat.y,bd=bb.image.width*bb.repeat.x,bc=bb.image.height*bb.repeat.y;bh=(bh+bm)*bd;a5=(1-a5+bj)*bc;bf=(bf+bm)*bd;a3=(1-a3+bj)*bc;be=(be+bm)*bd;a1=(1-a1+bj)*bc;bi-=bl;a6-=a8;bg-=bl;a4-=a8;bf-=bh;a3-=a5;be-=bh;a1-=a5;a9=bf*a1-be*a3;if(a9===0){if(O[bb.id]===undefined){var a7=document.createElement("canvas");a7.width=bb.image.width;a7.height=bb.image.height;var a2=a7.getContext("2d");a2.drawImage(bb.image,0,0);O[bb.id]=a2.getImageData(0,0,bb.image.width,bb.image.height).data}var bv=O[bb.id];var ba=(Math.floor(bh)+Math.floor(a5)*bb.image.width)*4;e.setRGB(bv[ba]/255,bv[ba+1]/255,bv[ba+2]/255);aY(e);return}bo=1/a9;bu=(a1*bi-a3*bg)*bo;bs=(a1*a6-a3*a4)*bo;bq=(bf*bg-be*bi)*bo;bp=(bf*a4-be*a6)*bo;bn=bl-bu*bh-bq*a5;bk=a8-bs*bh-bp*a5;d.save();d.transform(bu,bs,bq,bp,bn,bk);d.fill();d.restore()}function aV(bh,a6,bf,a5,bd,a3,be,a4,bc,a2,bb,a1,a9){var bn,bm,bl,bk,bi,bg,a7,bj,ba=a9.width-1,a8=a9.height-1;be*=ba;a4*=a8;bc*=ba;a2*=a8;bb*=ba;a1*=a8;bf-=bh;a5-=a6;bd-=bh;a3-=a6;bc-=be;a2-=a4;bb-=be;a1-=a4;a7=bc*a1-bb*a2;bj=1/a7;bn=(a1*bf-a2*bd)*bj;bm=(a1*a5-a2*a3)*bj;bl=(bc*bd-bb*bf)*bj;bk=(bc*a3-bb*a5)*bj;bi=bh-bn*be-bl*a4;bg=a6-bm*be-bk*a4;d.save();d.transform(bn,bm,bl,bk,bi,bg);d.clip();d.drawImage(a9,0,0);d.restore()}function a0(a2,a1,a4,a3){M[0]=(a2.r*255)|0;M[1]=(a2.g*255)|0;M[2]=(a2.b*255)|0;M[4]=(a1.r*255)|0;M[5]=(a1.g*255)|0;M[6]=(a1.b*255)|0;M[8]=(a4.r*255)|0;M[9]=(a4.g*255)|0;M[10]=(a4.b*255)|0;M[12]=(a3.r*255)|0;M[13]=(a3.g*255)|0;M[14]=(a3.b*255)|0;g.putImageData(aE,0,0);L.drawImage(aB,0,0);return I}function aH(a6,a4){var a1=a4.x-a6.x,a5=a4.y-a6.y,a2=a1*a1+a5*a5,a3;if(a2===0){return}a3=1/Math.sqrt(a2);a1*=a3;a5*=a3;a4.x+=a1;a4.y+=a5;a6.x-=a1;a6.y-=a5}};function y(aH){if(aw!==aH){d.globalAlpha=aH;aw=aH}}function ah(aH){if(ar!==aH){if(aH===THREE.NormalBlending){d.globalCompositeOperation="source-over"}else{if(aH===THREE.AdditiveBlending){d.globalCompositeOperation="lighter"}else{if(aH===THREE.SubtractiveBlending){d.globalCompositeOperation="darker"}}}ar=aH}}function G(aH){if(H!==aH){d.lineWidth=aH;H=aH}}function X(aH){if(i!==aH){d.lineCap=aH;i=aH}}function az(aH){if(am!==aH){d.lineJoin=aH;am=aH}}function at(aH){if(u!==aH){d.strokeStyle=aH;u=aH}}function ag(aH){if(aq!==aH){d.fillStyle=aH;aq=aH}}function T(aH,aI){if(F!==aH||ai!==aI){d.setLineDash([aH,aI]);F=aH;ai=aI}}};THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","uniform vec3 fogColor;","#ifdef FOG_EXP2","uniform float fogDensity;","#else","uniform float fogNear;","uniform float fogFar;","#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","float depth = gl_FragCoord.z / gl_FragCoord.w;","#ifdef FOG_EXP2","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","#else","float fogFactor = smoothstep( fogNear, fogFar, depth );","#endif","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","uniform bool useRefract;","uniform float refractionRatio;","#else","varying vec3 vReflect;","#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","vec3 reflectVec;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );","}","#else","reflectVec = vReflect;","#endif","#ifdef DOUBLE_SIDED","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#else","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#endif","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","} else if ( combine == 2 ) {","gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","} else {","gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","varying vec3 vReflect;","uniform float refractionRatio;","uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","#ifdef USE_SKINNING","vec4 worldPosition = modelMatrix * skinned;","#endif","#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","#endif","#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","worldNormal = normalize( worldNormal );","vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, worldNormal );","}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","#endif","#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","vec4 texelColor = texture2D( map, vUv );","#ifdef GAMMA_INPUT","texelColor.xyz *= texelColor.xyz;","#endif","gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );","}","vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );","}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );","}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","#else","specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","#ifdef DOUBLE_SIDED","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","#ifdef DOUBLE_SIDED","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","#ifdef DOUBLE_SIDED","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_HEMI_LIGHTS > 0","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","#ifdef DOUBLE_SIDED","vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","#endif","}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),lights_phong_pars_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#ifndef PHONG_PER_PIXEL","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","vPointLight[ i ] = vec4( lVector, lDistance );","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","vSpotLight[ i ] = vec4( lVector, lDistance );","}","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#else","varying vec4 vPointLight[ MAX_POINT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#ifdef PHONG_PER_PIXEL","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#else","varying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];","#endif","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vPointLight[ i ].xyz );","float lDistance = vPointLight[ i ].w;","#endif","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dotProduct, 0.0 );","#endif","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","#else","pointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","#ifdef PHONG_PER_PIXEL","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","#else","vec3 lVector = normalize( vSpotLight[ i ].xyz );","float lDistance = vSpotLight[ i ].w;","#endif","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dotProduct, 0.0 );","#endif","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","#else","spotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, dirVector );","#ifdef WRAP_AROUND","float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dotProduct, 0.0 );","#endif","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","gl_FragColor = gl_FragColor * vec4( vColor, opacity );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","#ifdef GAMMA_INPUT","vColor = color * color;","#else","vColor = color;","#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;","mat4 getBoneMatrix( const in float i ) {","float j = i * 4.0;","float x = mod( j, N_BONE_PIXEL_X );","float y = floor( j / N_BONE_PIXEL_X );","const float dx = 1.0 / N_BONE_PIXEL_X;","const float dy = 1.0 / N_BONE_PIXEL_Y;","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );","return bone;","}","#else","uniform mat4 boneGlobalMatrices[ MAX_BONES ];","mat4 getBoneMatrix( const in float i ) {","mat4 bone = boneGlobalMatrices[ int(i) ];","return bone;","}","#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","#ifdef USE_MORPHTARGETS","vec4 skinVertex = vec4( morphed, 1.0 );","#else","vec4 skinVertex = vec4( position, 1.0 );","#endif","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","#ifndef USE_MORPHNORMALS","uniform float morphTargetInfluences[ 8 ];","#else","uniform float morphTargetInfluences[ 4 ];","#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","#ifndef USE_MORPHNORMALS","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","#endif","morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix 	+= skinWeight.y * boneMatY;","#ifdef USE_MORPHNORMALS","vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","#else","vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;","#endif","#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];","varying vec4 vShadowCoord[ MAX_SHADOWS ];","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","#ifdef SHADOWMAP_DEBUG","vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","#endif","#ifdef SHADOWMAP_CASCADE","int inFrustumCount = 0;","#endif","float fDepth;","vec3 shadowColor = vec3( 1.0 );","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );","#ifdef SHADOWMAP_CASCADE","inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","#else","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","#endif","bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#if defined( SHADOWMAP_TYPE_PCF )","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","float shadow = 0.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.0 * xPixelOffset;","float dy0 = -1.0 * yPixelOffset;","float dx1 = 1.0 * xPixelOffset;","float dy1 = 1.0 * yPixelOffset;","mat3 shadowKernel;","mat3 depthKernel;","depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","vec3 shadowZ = vec3( shadowCoord.z );","shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","shadowKernel[0] *= vec3(0.25);","shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","shadowKernel[1] *= vec3(0.25);","shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","shadowKernel[2] *= vec3(0.25);","vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","vec4 shadowValues;","shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","shadow = dot( shadowValues, vec4( 1.0 ) );","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#else","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","#endif","}","#ifdef SHADOWMAP_DEBUG","#ifdef SHADOWMAP_CASCADE","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","#else","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","#endif","#endif","}","#ifdef GAMMA_OUTPUT","shadowColor *= shadowColor;","#endif","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","varying vec4 vShadowCoord[ MAX_SHADOWS ];","uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n")};THREE.UniformsUtils={merge:function(b){var c,e,d,a={};for(c=0;c<b.length;c++){d=this.clone(b[c]);for(e in d){a[e]=d[e]}}return a},clone:function(a){var d,e,f,c,b={};for(d in a){b[d]={};for(e in a[d]){c=a[d][e];if(c instanceof THREE.Color||c instanceof THREE.Vector2||c instanceof THREE.Vector3||c instanceof THREE.Vector4||c instanceof THREE.Matrix4||c instanceof THREE.Texture){b[d][e]=c.clone()}else{if(c instanceof Array){b[d][e]=c.slice()}else{b[d][e]=c}}}}return b}};THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:0.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:0.00025},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2000},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED","if ( gl_FrontFacing )","gl_FragColor.xyz *= vLightFront;","else","gl_FragColor.xyz *= vLightBack;","#else","gl_FragColor.xyz *= vLightFront;","#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;","#endif","gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {","gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","if ( mod( vLineDistance, totalSize ) > dashSize ) {","discard;","}","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2000},opacity:{type:"f",value:1}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;","void main() {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;","void main() {","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );","}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",value:30},uOpacity:{type:"f",value:1},useRefract:{type:"i",value:0},uRefractionRatio:{type:"f",value:0.98},uReflectivity:{type:"f",value:0.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;","uniform vec3 uDiffuseColor;","uniform vec3 uSpecularColor;","uniform float uShininess;","uniform float uOpacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float uRefractionRatio;","uniform float uReflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","gl_FragColor = vec4( vec3( 1.0 ), uOpacity );","vec3 specularTex = vec3( 1.0 );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse ) {","#ifdef GAMMA_INPUT","vec4 texelColor = texture2D( tDiffuse, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;","#else","gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","#endif","}","if( enableAO ) {","#ifdef GAMMA_INPUT","vec4 aoColor = texture2D( tAO, vUv );","aoColor.xyz *= aoColor.xyz;","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","#else","gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","#endif","}","if( enableSpecular )","specularTex = texture2D( tSpecular, vUv ).xyz;","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","vec3 finalNormal = tsb * normalTex;","#ifdef FLIP_SIDED","finalNormal = -finalNormal;","#endif","vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","float pointDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","pointVector = normalize( pointVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","#endif","pointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;","vec3 pointHalfVector = normalize( pointVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","#else","pointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","float spotDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","spotVector = normalize( spotVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","#endif","spotDiffuse += spotDistance * spotLightColor[ i ] * uDiffuseColor * spotDiffuseWeight * spotEffect;","vec3 spotHalfVector = normalize( spotVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","#else","spotSpecular += spotDistance * spotLightColor[ i ] * uSpecularColor * spotSpecularWeight * spotDiffuseWeight * spotEffect;","#endif","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","#ifdef WRAP_AROUND","float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","#endif","dirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","#else","dirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;","#endif","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += uDiffuseColor * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, uShininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, uShininess ), 0.0 );","#ifdef PHYSICALLY_BASED_SHADING","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( uShininess + 2.0001 ) / 8.0;","vec3 schlickSky = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","#else","hemiSpecular += uSpecularColor * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;","#endif","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor ) + totalSpecular;","#endif","if ( enableReflection ) {","vec3 vReflect;","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, normal, uRefractionRatio );","} else {","vReflect = reflect( cameraToVertex, normal );","}","vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );","}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING","vNormal = normalize( normalMatrix * skinnedNormal.xyz );","vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","vTangent = normalize( normalMatrix * skinnedTangent.xyz );","#else","vNormal = normalize( normalMatrix * normal );","vTangent = normalize( normalMatrix * tangent.xyz );","#endif","vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","vUv = uv * uRepeat + uOffset;","vec3 displacedPosition;","#ifdef VERTEX_TEXTURES","if ( enableDisplacement ) {","vec3 dv = texture2D( tDisplacement, uv ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","displacedPosition = position + normalize( normal ) * df;","} else {","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","}","#else","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","#endif","vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","gl_Position = projectionMatrix * mvPosition;","vWorldPosition = worldPosition.xyz;","vViewPosition = -mvPosition.xyz;","#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;","void main() {","gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );","}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;","}","void main() {","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","}"].join("\n")}};THREE.WebGLRenderer=function(aK){aK=aK||{};var aV=aK.canvas!==undefined?aK.canvas:document.createElement("canvas"),j=aK.precision!==undefined?aK.precision:"highp",bA=aK.alpha!==undefined?aK.alpha:true,aY=aK.premultipliedAlpha!==undefined?aK.premultipliedAlpha:true,bW=aK.antialias!==undefined?aK.antialias:false,e=aK.stencil!==undefined?aK.stencil:true,T=aK.preserveDrawingBuffer!==undefined?aK.preserveDrawingBuffer:false,bp=new THREE.Color(0),S=0;if(aK.clearColor!==undefined){console.warn("DEPRECATED: clearColor in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead.");bp.setHex(aK.clearColor)}if(aK.clearAlpha!==undefined){console.warn("DEPRECATED: clearAlpha in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead.");S=aK.clearAlpha}this.domElement=aV;this.context=null;this.devicePixelRatio=aK.devicePixelRatio!==undefined?aK.devicePixelRatio:window.devicePixelRatio!==undefined?window.devicePixelRatio:1;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.autoUpdateObjects=true;this.gammaInput=false;this.gammaOutput=false;this.physicallyBasedShading=false;this.shadowMapEnabled=false;this.shadowMapAutoUpdate=true;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapDebug=false;this.shadowMapCascade=false;this.maxMorphTargets=8;this.maxMorphNormals=4;this.autoScaleCubemaps=true;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var aL=this,bB=[],ay=0,aj=null,bD=null,aZ=-1,z=null,aI=null,Q=0,bc=0,bi=-1,k=-1,i=-1,ag=-1,bN=-1,aq=-1,a=-1,bw=-1,aH=null,bL=null,a8=null,bk=null,a1=0,a0=0,bP=0,aS=0,x=0,aR=0,H={},bq=new THREE.Frustum(),aX=new THREE.Matrix4(),A=new THREE.Matrix4(),R=new THREE.Vector3(),aJ=new THREE.Vector3(),bX=true,bn={ambient:[0,0,0],directional:{length:0,colors:new Array(),positions:new Array()},point:{length:0,colors:new Array(),positions:new Array(),distances:new Array()},spot:{length:0,colors:new Array(),positions:new Array(),distances:new Array(),directions:new Array(),anglesCos:new Array(),exponents:new Array()},hemi:{length:0,skyColors:new Array(),groundColors:new Array(),positions:new Array()}};var c;var m;var bb;var p;var aC;bo();ba();this.context=c;var bG=c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS);var b=c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var w=c.getParameter(c.MAX_TEXTURE_SIZE);var al=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE);var bz=p?c.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0;var aT=(b>0);var U=aT&&m;var bx=aC?c.getParameter(c.COMPRESSED_TEXTURE_FORMATS):[];var bu=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT);var bO=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT);var bK=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT);var ak=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT);var bC=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT);var aw=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT);var l=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT);var aD=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT);var K=c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT);var bs=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT);var s=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT);var bh=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT);var bQ=bu.precision>0&&ak.precision>0;var bg=bO.precision>0&&bC.precision>0;if(j==="highp"&&!bQ){if(bg){j="mediump";console.warn("WebGLRenderer: highp not supported, using mediump")}else{j="lowp";console.warn("WebGLRenderer: highp and mediump not supported, using lowp")}}if(j==="mediump"&&!bg){j="lowp";console.warn("WebGLRenderer: mediump not supported, using lowp")}this.getContext=function(){return c};this.supportsVertexTextures=function(){return aT};this.supportsFloatTextures=function(){return m};this.supportsStandardDerivatives=function(){return bb};this.supportsCompressedTextureS3TC=function(){return aC};this.getMaxAnisotropy=function(){return bz};this.getPrecision=function(){return j};this.setSize=function(bZ,bY,b0){aV.width=bZ*this.devicePixelRatio;aV.height=bY*this.devicePixelRatio;if(this.devicePixelRatio!==1&&b0!==false){aV.style.width=bZ+"px";aV.style.height=bY+"px"}this.setViewport(0,0,aV.width,aV.height)};this.setViewport=function(bZ,b1,b0,bY){a1=bZ!==undefined?bZ:0;a0=b1!==undefined?b1:0;bP=b0!==undefined?b0:aV.width;aS=bY!==undefined?bY:aV.height;c.viewport(a1,a0,bP,aS)};this.setScissor=function(bZ,b1,b0,bY){c.scissor(bZ,b1,b0,bY)};this.enableScissorTest=function(bY){bY?c.enable(c.SCISSOR_TEST):c.disable(c.SCISSOR_TEST)};this.setClearColor=function(bY,bZ){bp.set(bY);S=bZ!==undefined?bZ:1;c.clearColor(bp.r,bp.g,bp.b,S)};this.setClearColorHex=function(bY,bZ){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(bY,bZ)};this.getClearColor=function(){return bp};this.getClearAlpha=function(){return S};this.clear=function(bY,b1,bZ){var b0=0;if(bY===undefined||bY){b0|=c.COLOR_BUFFER_BIT}if(b1===undefined||b1){b0|=c.DEPTH_BUFFER_BIT}if(bZ===undefined||bZ){b0|=c.STENCIL_BUFFER_BIT}c.clear(b0)};this.clearTarget=function(b0,bY,b1,bZ){this.setRenderTarget(b0);this.clear(bY,b1,bZ)};this.addPostPlugin=function(bY){bY.init(this);this.renderPluginsPost.push(bY)};this.addPrePlugin=function(bY){bY.init(this);this.renderPluginsPre.push(bY)};this.updateShadowMap=function(bZ,bY){aj=null;i=-1;a=-1;bw=-1;z=-1;aZ=-1;bX=true;bi=-1;k=-1;this.shadowMapPlugin.update(bZ,bY)};function B(bY){bY.__webglVertexBuffer=c.createBuffer();bY.__webglColorBuffer=c.createBuffer();aL.info.memory.geometries++}function ab(bY){bY.__webglVertexBuffer=c.createBuffer();bY.__webglColorBuffer=c.createBuffer();bY.__webglLineDistanceBuffer=c.createBuffer();aL.info.memory.geometries++}function aa(bY){bY.__webglVertexBuffer=c.createBuffer();bY.__webglColorBuffer=c.createBuffer();bY.__webglNormalBuffer=c.createBuffer();aL.info.memory.geometries++}function aB(bZ){bZ.__webglVertexBuffer=c.createBuffer();bZ.__webglNormalBuffer=c.createBuffer();bZ.__webglTangentBuffer=c.createBuffer();bZ.__webglColorBuffer=c.createBuffer();bZ.__webglUVBuffer=c.createBuffer();bZ.__webglUV2Buffer=c.createBuffer();bZ.__webglSkinIndicesBuffer=c.createBuffer();bZ.__webglSkinWeightsBuffer=c.createBuffer();bZ.__webglFaceBuffer=c.createBuffer();bZ.__webglLineBuffer=c.createBuffer();var bY,b0;if(bZ.numMorphTargets){bZ.__webglMorphTargetsBuffers=[];for(bY=0,b0=bZ.numMorphTargets;bY<b0;bY++){bZ.__webglMorphTargetsBuffers.push(c.createBuffer())}}if(bZ.numMorphNormals){bZ.__webglMorphNormalsBuffers=[];for(bY=0,b0=bZ.numMorphNormals;bY<b0;bY++){bZ.__webglMorphNormalsBuffers.push(c.createBuffer())}}aL.info.memory.geometries++}var aW=function(bY){var bZ=bY.target;bZ.removeEventListener("dispose",aW);bS(bZ);aL.info.memory.geometries--};var ae=function(bZ){var bY=bZ.target;bY.removeEventListener("dispose",ae);D(bY);aL.info.memory.textures--};var N=function(bY){var bZ=bY.target;bZ.removeEventListener("dispose",N);az(bZ);aL.info.memory.textures--};var bf=function(bZ){var bY=bZ.target;bY.removeEventListener("dispose",bf);M(bY)};var bS=function(b1){b1.__webglInit=undefined;if(b1.__webglVertexBuffer!==undefined){c.deleteBuffer(b1.__webglVertexBuffer)}if(b1.__webglNormalBuffer!==undefined){c.deleteBuffer(b1.__webglNormalBuffer)}if(b1.__webglTangentBuffer!==undefined){c.deleteBuffer(b1.__webglTangentBuffer)}if(b1.__webglColorBuffer!==undefined){c.deleteBuffer(b1.__webglColorBuffer)}if(b1.__webglUVBuffer!==undefined){c.deleteBuffer(b1.__webglUVBuffer)}if(b1.__webglUV2Buffer!==undefined){c.deleteBuffer(b1.__webglUV2Buffer)}if(b1.__webglSkinIndicesBuffer!==undefined){c.deleteBuffer(b1.__webglSkinIndicesBuffer)}if(b1.__webglSkinWeightsBuffer!==undefined){c.deleteBuffer(b1.__webglSkinWeightsBuffer)}if(b1.__webglFaceBuffer!==undefined){c.deleteBuffer(b1.__webglFaceBuffer)}if(b1.__webglLineBuffer!==undefined){c.deleteBuffer(b1.__webglLineBuffer)}if(b1.__webglLineDistanceBuffer!==undefined){c.deleteBuffer(b1.__webglLineDistanceBuffer)}if(b1.geometryGroups!==undefined){for(var b0 in b1.geometryGroups){var bZ=b1.geometryGroups[b0];if(bZ.numMorphTargets!==undefined){for(var bY=0,b2=bZ.numMorphTargets;bY<b2;bY++){c.deleteBuffer(bZ.__webglMorphTargetsBuffers[bY])}}if(bZ.numMorphNormals!==undefined){for(var bY=0,b2=bZ.numMorphNormals;bY<b2;bY++){c.deleteBuffer(bZ.__webglMorphNormalsBuffers[bY])}}Z(bZ)}}Z(b1)};var D=function(bY){if(bY.image&&bY.image.__webglTextureCube){c.deleteTexture(bY.image.__webglTextureCube)}else{if(!bY.__webglInit){return}bY.__webglInit=false;c.deleteTexture(bY.__webglTexture)}};var az=function(bZ){if(!bZ||!bZ.__webglTexture){return}c.deleteTexture(bZ.__webglTexture);if(bZ instanceof THREE.WebGLRenderTargetCube){for(var bY=0;bY<6;bY++){c.deleteFramebuffer(bZ.__webglFramebuffer[bY]);c.deleteRenderbuffer(bZ.__webglRenderbuffer[bY])}}else{c.deleteFramebuffer(bZ.__webglFramebuffer);c.deleteRenderbuffer(bZ.__webglRenderbuffer)}};var M=function(b4){var b0=b4.program;if(b0===undefined){return}b4.program=undefined;var b1,bZ,b3;var b2=false;for(b1=0,bZ=bB.length;b1<bZ;b1++){b3=bB[b1];if(b3.program===b0){b3.usedTimes--;if(b3.usedTimes===0){b2=true}break}}if(b2===true){var bY=[];for(b1=0,bZ=bB.length;b1<bZ;b1++){b3=bB[b1];if(b3.program!==b0){bY.push(b3)}}bB=bY;c.deleteProgram(b0);aL.info.memory.programs--}};function Z(bY){if(bY.__webglCustomAttributesList){for(var bZ in bY.__webglCustomAttributesList){c.deleteBuffer(bY.__webglCustomAttributesList[bZ].buffer)}}}function bT(b4,bZ){var b1=b4.vertices.length;var b2=bZ.material;if(b2.attributes){if(b4.__webglCustomAttributesList===undefined){b4.__webglCustomAttributesList=[]}for(var bY in b2.attributes){var b3=b2.attributes[bY];if(!b3.__webglInitialized||b3.createUniqueBuffers){b3.__webglInitialized=true;var b0=1;if(b3.type==="v2"){b0=2}else{if(b3.type==="v3"){b0=3}else{if(b3.type==="v4"){b0=4}else{if(b3.type==="c"){b0=3}}}}b3.size=b0;b3.array=new Float32Array(b1*b0);b3.buffer=c.createBuffer();b3.buffer.belongsToAttribute=bY;b3.needsUpdate=true}b4.__webglCustomAttributesList.push(b3)}}}function bH(b0,bY){var bZ=b0.vertices.length;b0.__vertexArray=new Float32Array(bZ*3);b0.__colorArray=new Float32Array(bZ*3);b0.__sortArray=[];b0.__webglParticleCount=bZ;bT(b0,bY)}function E(b0,bY){var bZ=b0.vertices.length;b0.__vertexArray=new Float32Array(bZ*3);b0.__colorArray=new Float32Array(bZ*3);b0.__lineDistanceArray=new Float32Array(bZ*1);b0.__webglLineCount=bZ;bT(b0,bY)}function bR(b0,bY){var bZ=b0.vertices.length;b0.__vertexArray=new Float32Array(bZ*3);b0.__colorArray=new Float32Array(bZ*3);b0.__normalArray=new Float32Array(bZ*3);b0.__webglVertexCount=bZ;bT(b0,bY)}function ai(b6,cf){if(!F(cf,b6)){console.log("!",b6,bY,cf)}var bY=cf.geometry,cg=b6.faces3,ce=b6.faces4,b9=cg.length*3+ce.length*4,b1=cg.length*1+ce.length*2,b3=cg.length*3+ce.length*4,b0=F(cf,b6),b5=br(b0),b7=aO(b0),cc=bJ(b0);b6.__vertexArray=new Float32Array(b9*3);if(b7){b6.__normalArray=new Float32Array(b9*3)}if(bY.hasTangents){b6.__tangentArray=new Float32Array(b9*4)}if(cc){b6.__colorArray=new Float32Array(b9*3)}if(b5){if(bY.faceUvs.length>0||bY.faceVertexUvs.length>0){b6.__uvArray=new Float32Array(b9*2)}if(bY.faceUvs.length>1||bY.faceVertexUvs.length>1){b6.__uv2Array=new Float32Array(b9*2)}}if(cf.geometry.skinWeights.length&&cf.geometry.skinIndices.length){b6.__skinIndexArray=new Float32Array(b9*4);b6.__skinWeightArray=new Float32Array(b9*4)}b6.__faceArray=new Uint16Array(b1*3);b6.__lineArray=new Uint16Array(b3*2);var b8,cb;if(b6.numMorphTargets){b6.__morphTargetsArrays=[];for(b8=0,cb=b6.numMorphTargets;b8<cb;b8++){b6.__morphTargetsArrays.push(new Float32Array(b9*3))}}if(b6.numMorphNormals){b6.__morphNormalsArrays=[];for(b8=0,cb=b6.numMorphNormals;b8<cb;b8++){b6.__morphNormalsArrays.push(new Float32Array(b9*3))}}b6.__webglFaceCount=b1*3;b6.__webglLineCount=b3*2;if(b0.attributes){if(b6.__webglCustomAttributesList===undefined){b6.__webglCustomAttributesList=[]}for(var cd in b0.attributes){var ca=b0.attributes[cd];var b2={};for(var bZ in ca){b2[bZ]=ca[bZ]}if(!b2.__webglInitialized||b2.createUniqueBuffers){b2.__webglInitialized=true;var b4=1;if(b2.type==="v2"){b4=2}else{if(b2.type==="v3"){b4=3}else{if(b2.type==="v4"){b4=4}else{if(b2.type==="c"){b4=3}}}}b2.size=b4;b2.array=new Float32Array(b9*b4);b2.buffer=c.createBuffer();b2.buffer.belongsToAttribute=cd;ca.needsUpdate=true;b2.__original=ca}b6.__webglCustomAttributesList.push(b2)}}b6.__inittedArrays=true}function F(bZ,bY){return bZ.material instanceof THREE.MeshFaceMaterial?bZ.material.materials[bY.materialIndex]:bZ.material}function by(bY){return bY&&bY.shading!==undefined&&bY.shading===THREE.SmoothShading}function aO(bY){if((bY instanceof THREE.MeshBasicMaterial&&!bY.envMap)||bY instanceof THREE.MeshDepthMaterial){return false}if(by(bY)){return THREE.SmoothShading}else{return THREE.FlatShading}}function bJ(bY){if(bY.vertexColors){return bY.vertexColors}return false}function br(bY){try{if(bY.map||bY.lightMap||bY.bumpMap||bY.normalMap||bY.specularMap||bY instanceof THREE.ShaderMaterial){return true}}catch(bZ){console.log("bufferGuessUVType messed up",bY)}return false}function y(b1){var bY,b0,bZ;for(bY in b1.attributes){if(bY==="index"){bZ=c.ELEMENT_ARRAY_BUFFER}else{bZ=c.ARRAY_BUFFER}b0=b1.attributes[bY];b0.buffer=c.createBuffer();c.bindBuffer(bZ,b0.buffer);c.bufferData(bZ,b0.array,c.STATIC_DRAW)}}function a4(bZ,cc,cq){var b9,co,cm,b1,b4,ci,b2=bZ.vertices,cn=b2.length,b6=bZ.colors,b5=b6.length,cb=bZ.__vertexArray,bY=bZ.__colorArray,b0=bZ.__sortArray,cg=bZ.verticesNeedUpdate,b3=bZ.elementsNeedUpdate,cd=bZ.colorsNeedUpdate,cf=bZ.__webglCustomAttributesList,cj,b7,cp,ce,b8,ch,ck;if(cq.sortParticles){A.copy(aX);A.multiply(cq.matrixWorld);for(b9=0;b9<cn;b9++){cm=b2[b9];R.copy(cm);R.applyProjection(A);b0[b9]=[R.z,b9]}b0.sort(X);for(b9=0;b9<cn;b9++){cm=b2[b0[b9][1]];b1=b9*3;cb[b1]=cm.x;cb[b1+1]=cm.y;cb[b1+2]=cm.z}for(co=0;co<b5;co++){b1=co*3;ci=b6[b0[co][1]];bY[b1]=ci.r;bY[b1+1]=ci.g;bY[b1+2]=ci.b}if(cf){for(cj=0,b7=cf.length;cj<b7;cj++){ck=cf[cj];if(!(ck.boundTo===undefined||ck.boundTo==="vertices")){continue}b1=0;b8=ck.value.length;if(ck.size===1){for(ce=0;ce<b8;ce++){b4=b0[ce][1];ck.array[ce]=ck.value[b4]}}else{if(ck.size===2){for(ce=0;ce<b8;ce++){b4=b0[ce][1];ch=ck.value[b4];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;b1+=2}}else{if(ck.size===3){if(ck.type==="c"){for(ce=0;ce<b8;ce++){b4=b0[ce][1];ch=ck.value[b4];ck.array[b1]=ch.r;ck.array[b1+1]=ch.g;ck.array[b1+2]=ch.b;b1+=3}}else{for(ce=0;ce<b8;ce++){b4=b0[ce][1];ch=ck.value[b4];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;ck.array[b1+2]=ch.z;b1+=3}}}else{if(ck.size===4){for(ce=0;ce<b8;ce++){b4=b0[ce][1];ch=ck.value[b4];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;ck.array[b1+2]=ch.z;ck.array[b1+3]=ch.w;b1+=4}}}}}}}}else{if(cg){for(b9=0;b9<cn;b9++){cm=b2[b9];b1=b9*3;cb[b1]=cm.x;cb[b1+1]=cm.y;cb[b1+2]=cm.z}}if(cd){for(co=0;co<b5;co++){ci=b6[co];b1=co*3;bY[b1]=ci.r;bY[b1+1]=ci.g;bY[b1+2]=ci.b}}if(cf){for(cj=0,b7=cf.length;cj<b7;cj++){ck=cf[cj];if(ck.needsUpdate&&(ck.boundTo===undefined||ck.boundTo==="vertices")){b8=ck.value.length;b1=0;if(ck.size===1){for(ce=0;ce<b8;ce++){ck.array[ce]=ck.value[ce]}}else{if(ck.size===2){for(ce=0;ce<b8;ce++){ch=ck.value[ce];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;b1+=2}}else{if(ck.size===3){if(ck.type==="c"){for(ce=0;ce<b8;ce++){ch=ck.value[ce];ck.array[b1]=ch.r;ck.array[b1+1]=ch.g;ck.array[b1+2]=ch.b;b1+=3}}else{for(ce=0;ce<b8;ce++){ch=ck.value[ce];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;ck.array[b1+2]=ch.z;b1+=3}}}else{if(ck.size===4){for(ce=0;ce<b8;ce++){ch=ck.value[ce];ck.array[b1]=ch.x;ck.array[b1+1]=ch.y;ck.array[b1+2]=ch.z;ck.array[b1+3]=ch.w;b1+=4}}}}}}}}}if(cg||cq.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,bZ.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,cb,cc)}if(cd||cq.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,bZ.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,bY,cc)}if(cf){for(cj=0,b7=cf.length;cj<b7;cj++){ck=cf[cj];if(ck.needsUpdate||cq.sortParticles){c.bindBuffer(c.ARRAY_BUFFER,ck.buffer);c.bufferData(c.ARRAY_BUFFER,ck.array,cc)}}}}function bl(b1,cc){var b8,cq,co,cn,b2,ci,b3=b1.vertices,b5=b1.colors,cb=b1.lineDistances,cp=b3.length,b4=b5.length,cj=cb.length,b9=b1.__vertexArray,b0=b1.__colorArray,bY=b1.__lineDistanceArray,cg=b1.verticesNeedUpdate,cd=b1.colorsNeedUpdate,bZ=b1.lineDistancesNeedUpdate,cf=b1.__webglCustomAttributesList,ck,b6,cr,ce,b7,ch,cm;if(cg){for(b8=0;b8<cp;b8++){cn=b3[b8];b2=b8*3;b9[b2]=cn.x;b9[b2+1]=cn.y;b9[b2+2]=cn.z}c.bindBuffer(c.ARRAY_BUFFER,b1.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,b9,cc)}if(cd){for(cq=0;cq<b4;cq++){ci=b5[cq];b2=cq*3;b0[b2]=ci.r;b0[b2+1]=ci.g;b0[b2+2]=ci.b}c.bindBuffer(c.ARRAY_BUFFER,b1.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,b0,cc)}if(bZ){for(co=0;co<cj;co++){bY[co]=cb[co]}c.bindBuffer(c.ARRAY_BUFFER,b1.__webglLineDistanceBuffer);c.bufferData(c.ARRAY_BUFFER,bY,cc)}if(cf){for(ck=0,b6=cf.length;ck<b6;ck++){cm=cf[ck];if(cm.needsUpdate&&(cm.boundTo===undefined||cm.boundTo==="vertices")){b2=0;b7=cm.value.length;if(cm.size===1){for(ce=0;ce<b7;ce++){cm.array[ce]=cm.value[ce]}}else{if(cm.size===2){for(ce=0;ce<b7;ce++){ch=cm.value[ce];cm.array[b2]=ch.x;cm.array[b2+1]=ch.y;b2+=2}}else{if(cm.size===3){if(cm.type==="c"){for(ce=0;ce<b7;ce++){ch=cm.value[ce];cm.array[b2]=ch.r;cm.array[b2+1]=ch.g;cm.array[b2+2]=ch.b;b2+=3}}else{for(ce=0;ce<b7;ce++){ch=cm.value[ce];cm.array[b2]=ch.x;cm.array[b2+1]=ch.y;cm.array[b2+2]=ch.z;b2+=3}}}else{if(cm.size===4){for(ce=0;ce<b7;ce++){ch=cm.value[ce];cm.array[b2]=ch.x;cm.array[b2+1]=ch.y;cm.array[b2+2]=ch.z;cm.array[b2+3]=ch.w;b2+=4}}}}}c.bindBuffer(c.ARRAY_BUFFER,cm.buffer);c.bufferData(c.ARRAY_BUFFER,cm.array,cc)}}}}function P(b0,cb){var b8,cq,ch,cm,b1,cj,cr,ck,b6,cg,b9,cn,ci,b2=b0.vertices,b5=b0.colors,cd=b0.normals,cp=b2.length,b4=b5.length,bY=cd.length,b7=b0.__vertexArray,bZ=b0.__colorArray,co=b0.__normalArray,cf=b0.verticesNeedUpdate,cc=b0.colorsNeedUpdate,b3=b0.normalsNeedUpdate,ce=b0.__webglCustomAttributesList;if(cf){for(b8=0;b8<cp;b8++){cm=b2[b8];b1=b8*3;b7[b1]=cm.x;b7[b1+1]=cm.y;b7[b1+2]=cm.z}c.bindBuffer(c.ARRAY_BUFFER,b0.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,b7,cb)}if(cc){for(cq=0;cq<b4;cq++){cj=b5[cq];b1=cq*3;bZ[b1]=cj.r;bZ[b1+1]=cj.g;bZ[b1+2]=cj.b}c.bindBuffer(c.ARRAY_BUFFER,b0.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,bZ,cb)}if(b3){for(ch=0;ch<bY;ch++){cr=cd[ch];b1=ch*3;co[b1]=cr.x;co[b1+1]=cr.y;co[b1+2]=cr.z}c.bindBuffer(c.ARRAY_BUFFER,b0.__webglNormalBuffer);c.bufferData(c.ARRAY_BUFFER,co,cb)}if(ce){for(ck=0,b6=ce.length;ck<b6;ck++){cn=ce[ck];if(cn.needsUpdate&&(cn.boundTo===undefined||cn.boundTo==="vertices")){b1=0;b9=cn.value.length;if(cn.size===1){for(cg=0;cg<b9;cg++){cn.array[cg]=cn.value[cg]}}else{if(cn.size===2){for(cg=0;cg<b9;cg++){ci=cn.value[cg];cn.array[b1]=ci.x;cn.array[b1+1]=ci.y;b1+=2}}else{if(cn.size===3){if(cn.type==="c"){for(cg=0;cg<b9;cg++){ci=cn.value[cg];cn.array[b1]=ci.r;cn.array[b1+1]=ci.g;cn.array[b1+2]=ci.b;b1+=3}}else{for(cg=0;cg<b9;cg++){ci=cn.value[cg];cn.array[b1]=ci.x;cn.array[b1+1]=ci.y;cn.array[b1+2]=ci.z;b1+=3}}}else{if(cn.size===4){for(cg=0;cg<b9;cg++){ci=cn.value[cg];cn.array[b1]=ci.x;cn.array[b1+1]=ci.y;cn.array[b1+2]=ci.z;cn.array[b1+3]=ci.w;b1+=4}}}}}c.bindBuffer(c.ARRAY_BUFFER,cn.buffer);c.bufferData(c.ARRAY_BUFFER,cn.array,cb)}}}}function n(di,dp,dS,cc,dQ){if(!di.__inittedArrays){return}var cK=aO(dQ),b9=bJ(dQ),dh=br(dQ),cz=(cK===THREE.SmoothShading);var cQ,dB,dH,bZ,cg,b4,cV,ch,cJ,b0,cI,dN,c8,c7,c6,c5,dO,dM,dK,dI,dG,dD,dC,dA,df,de,dc,db,dw,dv,ds,dr,b8,b7,b6,b5,cF,cD,cC,cB,cn,cl,cj,ci,cM,dl,cP,cH,cs,da,dg,ct,cA,cL,dd,cR,c9,cU,cp=0,ce=0,dk=0,dL=0,cN=0,cy=0,cf=0,c0=0,cd=0,cO=0,bY=0,ca=0,ck=0,cE,b3=di.__vertexArray,cx=di.__uvArray,cb=di.__uv2Array,dq=di.__normalArray,du=di.__tangentArray,cX=di.__colorArray,dn=di.__skinIndexArray,dF=di.__skinWeightArray,dE=di.__morphTargetsArrays,cu=di.__morphNormalsArrays,cw=di.__webglCustomAttributesList,b2,dJ=di.__faceArray,cT=di.__lineArray,dj=dp.geometry,cr=dj.verticesNeedUpdate,cS=dj.elementsNeedUpdate,cY=dj.uvsNeedUpdate,b1=dj.normalsNeedUpdate,dP=dj.tangentsNeedUpdate,dt=dj.colorsNeedUpdate,dT=dj.morphTargetsNeedUpdate,cZ=dj.vertices,co=di.faces3,cm=di.faces4,dx=dj.faces,cW=dj.faceVertexUvs[0],cv=dj.faceVertexUvs[1],dy=dj.colors,cG=dj.skinIndices,dz=dj.skinWeights,dR=dj.morphTargets,dm=dj.morphNormals;if(cr){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];c8=cZ[bZ.a];c7=cZ[bZ.b];c6=cZ[bZ.c];b3[ce]=c8.x;b3[ce+1]=c8.y;b3[ce+2]=c8.z;b3[ce+3]=c7.x;b3[ce+4]=c7.y;b3[ce+5]=c7.z;b3[ce+6]=c6.x;b3[ce+7]=c6.y;b3[ce+8]=c6.z;ce+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];c8=cZ[bZ.a];c7=cZ[bZ.b];c6=cZ[bZ.c];c5=cZ[bZ.d];b3[ce]=c8.x;b3[ce+1]=c8.y;b3[ce+2]=c8.z;b3[ce+3]=c7.x;b3[ce+4]=c7.y;b3[ce+5]=c7.z;b3[ce+6]=c6.x;b3[ce+7]=c6.y;b3[ce+8]=c6.z;b3[ce+9]=c5.x;b3[ce+10]=c5.y;b3[ce+11]=c5.z;ce+=12}c.bindBuffer(c.ARRAY_BUFFER,di.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,b3,dS)}if(dT){for(ct=0,cA=dR.length;ct<cA;ct++){bY=0;for(cQ=0,dB=co.length;cQ<dB;cQ++){cR=co[cQ];bZ=dx[cR];c8=dR[ct].vertices[bZ.a];c7=dR[ct].vertices[bZ.b];c6=dR[ct].vertices[bZ.c];cL=dE[ct];cL[bY]=c8.x;cL[bY+1]=c8.y;cL[bY+2]=c8.z;cL[bY+3]=c7.x;cL[bY+4]=c7.y;cL[bY+5]=c7.z;cL[bY+6]=c6.x;cL[bY+7]=c6.y;cL[bY+8]=c6.z;if(dQ.morphNormals){if(cz){c9=dm[ct].vertexNormals[cR];dG=c9.a;dD=c9.b;dC=c9.c}else{dG=dm[ct].faceNormals[cR];dD=dG;dC=dG}dd=cu[ct];dd[bY]=dG.x;dd[bY+1]=dG.y;dd[bY+2]=dG.z;dd[bY+3]=dD.x;dd[bY+4]=dD.y;dd[bY+5]=dD.z;dd[bY+6]=dC.x;dd[bY+7]=dC.y;dd[bY+8]=dC.z}bY+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cR=cm[cQ];bZ=dx[cR];c8=dR[ct].vertices[bZ.a];c7=dR[ct].vertices[bZ.b];c6=dR[ct].vertices[bZ.c];c5=dR[ct].vertices[bZ.d];cL=dE[ct];cL[bY]=c8.x;cL[bY+1]=c8.y;cL[bY+2]=c8.z;cL[bY+3]=c7.x;cL[bY+4]=c7.y;cL[bY+5]=c7.z;cL[bY+6]=c6.x;cL[bY+7]=c6.y;cL[bY+8]=c6.z;cL[bY+9]=c5.x;cL[bY+10]=c5.y;cL[bY+11]=c5.z;if(dQ.morphNormals){if(cz){c9=dm[ct].vertexNormals[cR];dG=c9.a;dD=c9.b;dC=c9.c;dA=c9.d}else{dG=dm[ct].faceNormals[cR];dD=dG;dC=dG;dA=dG}dd=cu[ct];dd[bY]=dG.x;dd[bY+1]=dG.y;dd[bY+2]=dG.z;dd[bY+3]=dD.x;dd[bY+4]=dD.y;dd[bY+5]=dD.z;dd[bY+6]=dC.x;dd[bY+7]=dC.y;dd[bY+8]=dC.z;dd[bY+9]=dA.x;dd[bY+10]=dA.y;dd[bY+11]=dA.z}bY+=12}c.bindBuffer(c.ARRAY_BUFFER,di.__webglMorphTargetsBuffers[ct]);c.bufferData(c.ARRAY_BUFFER,dE[ct],dS);if(dQ.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,di.__webglMorphNormalsBuffers[ct]);c.bufferData(c.ARRAY_BUFFER,cu[ct],dS)}}}if(dz.length){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];dw=dz[bZ.a];dv=dz[bZ.b];ds=dz[bZ.c];dF[cO]=dw.x;dF[cO+1]=dw.y;dF[cO+2]=dw.z;dF[cO+3]=dw.w;dF[cO+4]=dv.x;dF[cO+5]=dv.y;dF[cO+6]=dv.z;dF[cO+7]=dv.w;dF[cO+8]=ds.x;dF[cO+9]=ds.y;dF[cO+10]=ds.z;dF[cO+11]=ds.w;b8=cG[bZ.a];b7=cG[bZ.b];b6=cG[bZ.c];dn[cO]=b8.x;dn[cO+1]=b8.y;dn[cO+2]=b8.z;dn[cO+3]=b8.w;dn[cO+4]=b7.x;dn[cO+5]=b7.y;dn[cO+6]=b7.z;dn[cO+7]=b7.w;dn[cO+8]=b6.x;dn[cO+9]=b6.y;dn[cO+10]=b6.z;dn[cO+11]=b6.w;cO+=12}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];dw=dz[bZ.a];dv=dz[bZ.b];ds=dz[bZ.c];dr=dz[bZ.d];dF[cO]=dw.x;dF[cO+1]=dw.y;dF[cO+2]=dw.z;dF[cO+3]=dw.w;dF[cO+4]=dv.x;dF[cO+5]=dv.y;dF[cO+6]=dv.z;dF[cO+7]=dv.w;dF[cO+8]=ds.x;dF[cO+9]=ds.y;dF[cO+10]=ds.z;dF[cO+11]=ds.w;dF[cO+12]=dr.x;dF[cO+13]=dr.y;dF[cO+14]=dr.z;dF[cO+15]=dr.w;b8=cG[bZ.a];b7=cG[bZ.b];b6=cG[bZ.c];b5=cG[bZ.d];dn[cO]=b8.x;dn[cO+1]=b8.y;dn[cO+2]=b8.z;dn[cO+3]=b8.w;dn[cO+4]=b7.x;dn[cO+5]=b7.y;dn[cO+6]=b7.z;dn[cO+7]=b7.w;dn[cO+8]=b6.x;dn[cO+9]=b6.y;dn[cO+10]=b6.z;dn[cO+11]=b6.w;dn[cO+12]=b5.x;dn[cO+13]=b5.y;dn[cO+14]=b5.z;dn[cO+15]=b5.w;cO+=16}if(cO>0){c.bindBuffer(c.ARRAY_BUFFER,di.__webglSkinIndicesBuffer);c.bufferData(c.ARRAY_BUFFER,dn,dS);c.bindBuffer(c.ARRAY_BUFFER,di.__webglSkinWeightsBuffer);c.bufferData(c.ARRAY_BUFFER,dF,dS)}}if(dt&&b9){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];ch=bZ.vertexColors;cJ=bZ.color;if(ch.length===3&&b9===THREE.VertexColors){df=ch[0];de=ch[1];dc=ch[2]}else{df=cJ;de=cJ;dc=cJ}cX[cd]=df.r;cX[cd+1]=df.g;cX[cd+2]=df.b;cX[cd+3]=de.r;cX[cd+4]=de.g;cX[cd+5]=de.b;cX[cd+6]=dc.r;cX[cd+7]=dc.g;cX[cd+8]=dc.b;cd+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];ch=bZ.vertexColors;cJ=bZ.color;if(ch.length===4&&b9===THREE.VertexColors){df=ch[0];de=ch[1];dc=ch[2];db=ch[3]}else{df=cJ;de=cJ;dc=cJ;db=cJ}cX[cd]=df.r;cX[cd+1]=df.g;cX[cd+2]=df.b;cX[cd+3]=de.r;cX[cd+4]=de.g;cX[cd+5]=de.b;cX[cd+6]=dc.r;cX[cd+7]=dc.g;cX[cd+8]=dc.b;cX[cd+9]=db.r;cX[cd+10]=db.g;cX[cd+11]=db.b;cd+=12}if(cd>0){c.bindBuffer(c.ARRAY_BUFFER,di.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,cX,dS)}}if(dP&&dj.hasTangents){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];b0=bZ.vertexTangents;dO=b0[0];dM=b0[1];dK=b0[2];du[cf]=dO.x;du[cf+1]=dO.y;du[cf+2]=dO.z;du[cf+3]=dO.w;du[cf+4]=dM.x;du[cf+5]=dM.y;du[cf+6]=dM.z;du[cf+7]=dM.w;du[cf+8]=dK.x;du[cf+9]=dK.y;du[cf+10]=dK.z;du[cf+11]=dK.w;cf+=12}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];b0=bZ.vertexTangents;dO=b0[0];dM=b0[1];dK=b0[2];dI=b0[3];du[cf]=dO.x;du[cf+1]=dO.y;du[cf+2]=dO.z;du[cf+3]=dO.w;du[cf+4]=dM.x;du[cf+5]=dM.y;du[cf+6]=dM.z;du[cf+7]=dM.w;du[cf+8]=dK.x;du[cf+9]=dK.y;du[cf+10]=dK.z;du[cf+11]=dK.w;du[cf+12]=dI.x;du[cf+13]=dI.y;du[cf+14]=dI.z;du[cf+15]=dI.w;cf+=16}c.bindBuffer(c.ARRAY_BUFFER,di.__webglTangentBuffer);c.bufferData(c.ARRAY_BUFFER,du,dS)}if(b1&&cK){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];cg=bZ.vertexNormals;b4=bZ.normal;if(cg.length===3&&cz){for(cP=0;cP<3;cP++){cs=cg[cP];dq[cy]=cs.x;dq[cy+1]=cs.y;dq[cy+2]=cs.z;cy+=3}}else{for(cP=0;cP<3;cP++){dq[cy]=b4.x;dq[cy+1]=b4.y;dq[cy+2]=b4.z;cy+=3}}}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];cg=bZ.vertexNormals;b4=bZ.normal;if(cg.length===4&&cz){for(cP=0;cP<4;cP++){cs=cg[cP];dq[cy]=cs.x;dq[cy+1]=cs.y;dq[cy+2]=cs.z;cy+=3}}else{for(cP=0;cP<4;cP++){dq[cy]=b4.x;dq[cy+1]=b4.y;dq[cy+2]=b4.z;cy+=3}}}c.bindBuffer(c.ARRAY_BUFFER,di.__webglNormalBuffer);c.bufferData(c.ARRAY_BUFFER,dq,dS)}if(cY&&cW&&dh){for(cQ=0,dB=co.length;cQ<dB;cQ++){dH=co[cQ];cI=cW[dH];if(cI===undefined){continue}for(cP=0;cP<3;cP++){da=cI[cP];cx[dk]=da.x;cx[dk+1]=da.y;dk+=2}}for(cQ=0,dB=cm.length;cQ<dB;cQ++){dH=cm[cQ];cI=cW[dH];if(cI===undefined){continue}for(cP=0;cP<4;cP++){da=cI[cP];cx[dk]=da.x;cx[dk+1]=da.y;dk+=2}}if(dk>0){c.bindBuffer(c.ARRAY_BUFFER,di.__webglUVBuffer);c.bufferData(c.ARRAY_BUFFER,cx,dS)}}if(cY&&cv&&dh){for(cQ=0,dB=co.length;cQ<dB;cQ++){dH=co[cQ];dN=cv[dH];if(dN===undefined){continue}for(cP=0;cP<3;cP++){dg=dN[cP];cb[dL]=dg.x;cb[dL+1]=dg.y;dL+=2}}for(cQ=0,dB=cm.length;cQ<dB;cQ++){dH=cm[cQ];dN=cv[dH];if(dN===undefined){continue}for(cP=0;cP<4;cP++){dg=dN[cP];cb[dL]=dg.x;cb[dL+1]=dg.y;dL+=2}}if(dL>0){c.bindBuffer(c.ARRAY_BUFFER,di.__webglUV2Buffer);c.bufferData(c.ARRAY_BUFFER,cb,dS)}}if(cS){for(cQ=0,dB=co.length;cQ<dB;cQ++){dJ[cN]=cp;dJ[cN+1]=cp+1;dJ[cN+2]=cp+2;cN+=3;cT[c0]=cp;cT[c0+1]=cp+1;cT[c0+2]=cp;cT[c0+3]=cp+2;cT[c0+4]=cp+1;cT[c0+5]=cp+2;c0+=6;cp+=3}for(cQ=0,dB=cm.length;cQ<dB;cQ++){dJ[cN]=cp;dJ[cN+1]=cp+1;dJ[cN+2]=cp+3;dJ[cN+3]=cp+1;dJ[cN+4]=cp+2;dJ[cN+5]=cp+3;cN+=6;cT[c0]=cp;cT[c0+1]=cp+1;cT[c0+2]=cp;cT[c0+3]=cp+3;cT[c0+4]=cp+1;cT[c0+5]=cp+2;cT[c0+6]=cp+2;cT[c0+7]=cp+3;c0+=8;cp+=4}c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,di.__webglFaceBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,dJ,dS);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,di.__webglLineBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,cT,dS)}if(cw){for(cP=0,cH=cw.length;cP<cH;cP++){b2=cw[cP];if(!b2.__original.needsUpdate){continue}ca=0;ck=0;if(b2.size===1){if(b2.boundTo===undefined||b2.boundTo==="vertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];b2.array[ca]=b2.value[bZ.a];b2.array[ca+1]=b2.value[bZ.b];b2.array[ca+2]=b2.value[bZ.c];ca+=3}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];b2.array[ca]=b2.value[bZ.a];b2.array[ca+1]=b2.value[bZ.b];b2.array[ca+2]=b2.value[bZ.c];b2.array[ca+3]=b2.value[bZ.d];ca+=4}}else{if(b2.boundTo==="faces"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];b2.array[ca]=cE;b2.array[ca+1]=cE;b2.array[ca+2]=cE;ca+=3}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];b2.array[ca]=cE;b2.array[ca+1]=cE;b2.array[ca+2]=cE;b2.array[ca+3]=cE;ca+=4}}}}else{if(b2.size===2){if(b2.boundTo===undefined||b2.boundTo==="vertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c7.x;b2.array[ca+3]=c7.y;b2.array[ca+4]=c6.x;b2.array[ca+5]=c6.y;ca+=6}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];c5=b2.value[bZ.d];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c7.x;b2.array[ca+3]=c7.y;b2.array[ca+4]=c6.x;b2.array[ca+5]=c6.y;b2.array[ca+6]=c5.x;b2.array[ca+7]=c5.y;ca+=8}}else{if(b2.boundTo==="faces"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];c8=cE;c7=cE;c6=cE;b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c7.x;b2.array[ca+3]=c7.y;b2.array[ca+4]=c6.x;b2.array[ca+5]=c6.y;ca+=6}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];c8=cE;c7=cE;c6=cE;c5=cE;b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c7.x;b2.array[ca+3]=c7.y;b2.array[ca+4]=c6.x;b2.array[ca+5]=c6.y;b2.array[ca+6]=c5.x;b2.array[ca+7]=c5.y;ca+=8}}}}else{if(b2.size===3){var cq;if(b2.type==="c"){cq=["r","g","b"]}else{cq=["x","y","z"]}if(b2.boundTo===undefined||b2.boundTo==="vertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];ca+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];c5=b2.value[bZ.d];b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];b2.array[ca+9]=c5[cq[0]];b2.array[ca+10]=c5[cq[1]];b2.array[ca+11]=c5[cq[2]];ca+=12}}else{if(b2.boundTo==="faces"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];c8=cE;c7=cE;c6=cE;b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];ca+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];c8=cE;c7=cE;c6=cE;c5=cE;b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];b2.array[ca+9]=c5[cq[0]];b2.array[ca+10]=c5[cq[1]];b2.array[ca+11]=c5[cq[2]];ca+=12}}else{if(b2.boundTo==="faceVertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];c8=cE[0];c7=cE[1];c6=cE[2];b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];ca+=9}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];c8=cE[0];c7=cE[1];c6=cE[2];c5=cE[3];b2.array[ca]=c8[cq[0]];b2.array[ca+1]=c8[cq[1]];b2.array[ca+2]=c8[cq[2]];b2.array[ca+3]=c7[cq[0]];b2.array[ca+4]=c7[cq[1]];b2.array[ca+5]=c7[cq[2]];b2.array[ca+6]=c6[cq[0]];b2.array[ca+7]=c6[cq[1]];b2.array[ca+8]=c6[cq[2]];b2.array[ca+9]=c5[cq[0]];b2.array[ca+10]=c5[cq[1]];b2.array[ca+11]=c5[cq[2]];ca+=12}}}}}else{if(b2.size===4){if(b2.boundTo===undefined||b2.boundTo==="vertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){bZ=dx[co[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;ca+=12}for(cQ=0,dB=cm.length;cQ<dB;cQ++){bZ=dx[cm[cQ]];c8=b2.value[bZ.a];c7=b2.value[bZ.b];c6=b2.value[bZ.c];c5=b2.value[bZ.d];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;b2.array[ca+12]=c5.x;b2.array[ca+13]=c5.y;b2.array[ca+14]=c5.z;b2.array[ca+15]=c5.w;ca+=16}}else{if(b2.boundTo==="faces"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];c8=cE;c7=cE;c6=cE;b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;ca+=12}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];c8=cE;c7=cE;c6=cE;c5=cE;b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;b2.array[ca+12]=c5.x;b2.array[ca+13]=c5.y;b2.array[ca+14]=c5.z;b2.array[ca+15]=c5.w;ca+=16}}else{if(b2.boundTo==="faceVertices"){for(cQ=0,dB=co.length;cQ<dB;cQ++){cE=b2.value[co[cQ]];c8=cE[0];c7=cE[1];c6=cE[2];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;ca+=12}for(cQ=0,dB=cm.length;cQ<dB;cQ++){cE=b2.value[cm[cQ]];c8=cE[0];c7=cE[1];c6=cE[2];c5=cE[3];b2.array[ca]=c8.x;b2.array[ca+1]=c8.y;b2.array[ca+2]=c8.z;b2.array[ca+3]=c8.w;b2.array[ca+4]=c7.x;b2.array[ca+5]=c7.y;b2.array[ca+6]=c7.z;b2.array[ca+7]=c7.w;b2.array[ca+8]=c6.x;b2.array[ca+9]=c6.y;b2.array[ca+10]=c6.z;b2.array[ca+11]=c6.w;b2.array[ca+12]=c5.x;b2.array[ca+13]=c5.y;b2.array[ca+14]=c5.z;b2.array[ca+15]=c5.w;ca+=16}}}}}}}}c.bindBuffer(c.ARRAY_BUFFER,b2.buffer);c.bufferData(c.ARRAY_BUFFER,b2.array,dS)}}if(cc){delete di.__inittedArrays;delete di.__colorArray;delete di.__normalArray;delete di.__tangentArray;delete di.__uvArray;delete di.__uv2Array;delete di.__faceArray;delete di.__vertexArray;delete di.__lineArray;delete di.__skinIndexArray;delete di.__skinWeightArray}}function au(b3,b2,b1){var bY=b3.attributes;var bZ,b0;for(bZ in bY){b0=bY[bZ];if(b0.needsUpdate){if(bZ==="index"){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b0.buffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,b0.array,b2)}else{c.bindBuffer(c.ARRAY_BUFFER,b0.buffer);c.bufferData(c.ARRAY_BUFFER,b0.array,b2)}b0.needsUpdate=false}if(b1&&!b0.dynamic){delete b0.array}}}this.renderBufferImmediate=function(cd,b1,b3){if(cd.hasPositions&&!cd.__webglVertexBuffer){cd.__webglVertexBuffer=c.createBuffer()}if(cd.hasNormals&&!cd.__webglNormalBuffer){cd.__webglNormalBuffer=c.createBuffer()}if(cd.hasUvs&&!cd.__webglUvBuffer){cd.__webglUvBuffer=c.createBuffer()}if(cd.hasColors&&!cd.__webglColorBuffer){cd.__webglColorBuffer=c.createBuffer()}if(cd.hasPositions){c.bindBuffer(c.ARRAY_BUFFER,cd.__webglVertexBuffer);c.bufferData(c.ARRAY_BUFFER,cd.positionArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b1.attributes.position);c.vertexAttribPointer(b1.attributes.position,3,c.FLOAT,false,0,0)}if(cd.hasNormals){c.bindBuffer(c.ARRAY_BUFFER,cd.__webglNormalBuffer);if(b3.shading===THREE.FlatShading){var cb,ca,b8,b0,b6,cf,bZ,b5,ce,bY,b4,cc,b9,b7,b2=cd.count*3;for(b7=0;b7<b2;b7+=9){b9=cd.normalArray;b0=b9[b7];bZ=b9[b7+1];bY=b9[b7+2];b6=b9[b7+3];b5=b9[b7+4];b4=b9[b7+5];cf=b9[b7+6];ce=b9[b7+7];cc=b9[b7+8];cb=(b0+b6+cf)/3;ca=(bZ+b5+ce)/3;b8=(bY+b4+cc)/3;b9[b7]=cb;b9[b7+1]=ca;b9[b7+2]=b8;b9[b7+3]=cb;b9[b7+4]=ca;b9[b7+5]=b8;b9[b7+6]=cb;b9[b7+7]=ca;b9[b7+8]=b8}}c.bufferData(c.ARRAY_BUFFER,cd.normalArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b1.attributes.normal);c.vertexAttribPointer(b1.attributes.normal,3,c.FLOAT,false,0,0)}if(cd.hasUvs&&b3.map){c.bindBuffer(c.ARRAY_BUFFER,cd.__webglUvBuffer);c.bufferData(c.ARRAY_BUFFER,cd.uvArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b1.attributes.uv);c.vertexAttribPointer(b1.attributes.uv,2,c.FLOAT,false,0,0)}if(cd.hasColors&&b3.vertexColors!==THREE.NoColors){c.bindBuffer(c.ARRAY_BUFFER,cd.__webglColorBuffer);c.bufferData(c.ARRAY_BUFFER,cd.colorArray,c.DYNAMIC_DRAW);c.enableVertexAttribArray(b1.attributes.color);c.vertexAttribPointer(b1.attributes.color,3,c.FLOAT,false,0,0)}c.drawArrays(c.TRIANGLES,0,cd.count);cd.count=0};this.renderBufferDirect=function(cg,cl,bY,b8,b1,cn){if(b8.visible===false){return}var b5,ci,cf,ch,ck,b9,b3;var b7,ca,cb,bZ;b5=aN(cg,cl,bY,b8,cn);ci=b5.attributes;b3=b1.attributes;var cc=false,ce=b8.wireframe?1:0,cj=(b1.id*16777215)+(b5.id*2)+ce;if(cj!==z){z=cj;cc=true}if(cc){bv()}if(cn instanceof THREE.Mesh){var b4=b3.index;if(b4){var b2=b1.offsets;if(b2.length>1){cc=true}for(var cd=0,b6=b2.length;cd<b6;cd++){var b0=b2[cd].index;if(cc){for(ca in b3){if(ca==="index"){continue}cb=ci[ca];b7=b3[ca];bZ=b7.itemSize;if(cb>=0){c.bindBuffer(c.ARRAY_BUFFER,b7.buffer);af(cb);c.vertexAttribPointer(cb,bZ,c.FLOAT,false,0,b0*bZ*4)}}c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b4.buffer)}c.drawElements(c.TRIANGLES,b2[cd].count,c.UNSIGNED_SHORT,b2[cd].start*2);aL.info.render.calls++;aL.info.render.vertices+=b2[cd].count;aL.info.render.faces+=b2[cd].count/3}}else{if(cc){for(ca in b3){if(ca==="index"){continue}cb=ci[ca];b7=b3[ca];bZ=b7.itemSize;if(cb>=0){c.bindBuffer(c.ARRAY_BUFFER,b7.buffer);af(cb);c.vertexAttribPointer(cb,bZ,c.FLOAT,false,0,0)}}}var cm=b1.attributes.position;c.drawArrays(c.TRIANGLES,0,cm.numItems/3);aL.info.render.calls++;aL.info.render.vertices+=cm.numItems/3;aL.info.render.faces+=cm.numItems/3/3}}else{if(cn instanceof THREE.ParticleSystem){if(cc){for(ca in b3){cb=ci[ca];b7=b3[ca];bZ=b7.itemSize;if(cb>=0){c.bindBuffer(c.ARRAY_BUFFER,b7.buffer);af(cb);c.vertexAttribPointer(cb,bZ,c.FLOAT,false,0,0)}}var cm=b3.position;c.drawArrays(c.POINTS,0,cm.numItems/3);aL.info.render.calls++;aL.info.render.points+=cm.numItems/3}}else{if(cn instanceof THREE.Line){if(cc){for(ca in b3){cb=ci[ca];b7=b3[ca];bZ=b7.itemSize;if(cb>=0){c.bindBuffer(c.ARRAY_BUFFER,b7.buffer);af(cb);c.vertexAttribPointer(cb,bZ,c.FLOAT,false,0,0)}}aF(b8.linewidth);var cm=b3.position;c.drawArrays(c.LINE_STRIP,0,cm.numItems/3);aL.info.render.calls++;aL.info.render.points+=cm.numItems}}}}};this.renderBuffer=function(b8,b4,bY,b9,b2,b1){if(b9.visible===false){return}var b7,b5,cb,ce,cd,bZ,b6,cc;b7=aN(b8,b4,bY,b9,b1);b5=b7.attributes;var b0=false,ca=b9.wireframe?1:0,b3=(b2.id*16777215)+(b7.id*2)+ca;if(b3!==z){z=b3;b0=true}if(b0){bv()}if(!b9.morphTargets&&b5.position>=0){if(b0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglVertexBuffer);af(b5.position);c.vertexAttribPointer(b5.position,3,c.FLOAT,false,0,0)}}else{if(b1.morphTargetBase){u(b9,b2,b1)}}if(b0){if(b2.__webglCustomAttributesList){for(b6=0,cc=b2.__webglCustomAttributesList.length;b6<cc;b6++){bZ=b2.__webglCustomAttributesList[b6];if(b5[bZ.buffer.belongsToAttribute]>=0){c.bindBuffer(c.ARRAY_BUFFER,bZ.buffer);af(b5[bZ.buffer.belongsToAttribute]);c.vertexAttribPointer(b5[bZ.buffer.belongsToAttribute],bZ.size,c.FLOAT,false,0,0)}}}if(b5.color>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglColorBuffer);af(b5.color);c.vertexAttribPointer(b5.color,3,c.FLOAT,false,0,0)}if(b5.normal>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglNormalBuffer);af(b5.normal);c.vertexAttribPointer(b5.normal,3,c.FLOAT,false,0,0)}if(b5.tangent>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglTangentBuffer);af(b5.tangent);c.vertexAttribPointer(b5.tangent,4,c.FLOAT,false,0,0)}if(b5.uv>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglUVBuffer);af(b5.uv);c.vertexAttribPointer(b5.uv,2,c.FLOAT,false,0,0)}if(b5.uv2>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglUV2Buffer);af(b5.uv2);c.vertexAttribPointer(b5.uv2,2,c.FLOAT,false,0,0)}if(b9.skinning&&b5.skinIndex>=0&&b5.skinWeight>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglSkinIndicesBuffer);af(b5.skinIndex);c.vertexAttribPointer(b5.skinIndex,4,c.FLOAT,false,0,0);c.bindBuffer(c.ARRAY_BUFFER,b2.__webglSkinWeightsBuffer);af(b5.skinWeight);c.vertexAttribPointer(b5.skinWeight,4,c.FLOAT,false,0,0)}if(b5.lineDistance>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglLineDistanceBuffer);af(b5.lineDistance);c.vertexAttribPointer(b5.lineDistance,1,c.FLOAT,false,0,0)}}if(b1 instanceof THREE.Mesh){if(b9.wireframe){aF(b9.wireframeLinewidth);if(b0){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b2.__webglLineBuffer)}c.drawElements(c.LINES,b2.__webglLineCount,c.UNSIGNED_SHORT,0)}else{if(b0){c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b2.__webglFaceBuffer)}c.drawElements(c.TRIANGLES,b2.__webglFaceCount,c.UNSIGNED_SHORT,0)}aL.info.render.calls++;aL.info.render.vertices+=b2.__webglFaceCount;aL.info.render.faces+=b2.__webglFaceCount/3}else{if(b1 instanceof THREE.Line){ce=(b1.type===THREE.LineStrip)?c.LINE_STRIP:c.LINES;aF(b9.linewidth);c.drawArrays(ce,0,b2.__webglLineCount);aL.info.render.calls++}else{if(b1 instanceof THREE.ParticleSystem){c.drawArrays(c.POINTS,0,b2.__webglParticleCount);aL.info.render.calls++;aL.info.render.points+=b2.__webglParticleCount}else{if(b1 instanceof THREE.Ribbon){c.drawArrays(c.TRIANGLE_STRIP,0,b2.__webglVertexCount);aL.info.render.calls++}}}}};function af(bY){if(!H[bY]){c.enableVertexAttribArray(bY);H[bY]=true}}function bv(){for(var bY in H){if(H[bY]){c.disableVertexAttribArray(bY);H[bY]=false}}}function u(b6,b2,b1){var b4=b6.program.attributes;if(b1.morphTargetBase!==-1&&b4.position>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglMorphTargetsBuffers[b1.morphTargetBase]);af(b4.position);c.vertexAttribPointer(b4.position,3,c.FLOAT,false,0,0)}else{if(b4.position>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglVertexBuffer);af(b4.position);c.vertexAttribPointer(b4.position,3,c.FLOAT,false,0,0)}}if(b1.morphTargetForcedOrder.length){var bY=0;var bZ=b1.morphTargetForcedOrder;var b8=b1.morphTargetInfluences;while(bY<b6.numSupportedMorphTargets&&bY<bZ.length){if(b4["morphTarget"+bY]>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglMorphTargetsBuffers[bZ[bY]]);af(b4["morphTarget"+bY]);c.vertexAttribPointer(b4["morphTarget"+bY],3,c.FLOAT,false,0,0)}if(b4["morphNormal"+bY]>=0&&b6.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglMorphNormalsBuffers[bZ[bY]]);af(b4["morphNormal"+bY]);c.vertexAttribPointer(b4["morphNormal"+bY],3,c.FLOAT,false,0,0)}b1.__webglMorphTargetInfluences[bY]=b8[bZ[bY]];bY++}}else{var b7,b0=[];var b8=b1.morphTargetInfluences;var b5,b9=b8.length;for(b5=0;b5<b9;b5++){b7=b8[b5];if(b7>0){b0.push([b7,b5])}}if(b0.length>b6.numSupportedMorphTargets){b0.sort(X);b0.length=b6.numSupportedMorphTargets}else{if(b0.length>b6.numSupportedMorphNormals){b0.sort(X)}else{if(b0.length===0){b0.push([0,0])}}}var b3,bY=0;while(bY<b6.numSupportedMorphTargets){if(b0[bY]){b3=b0[bY][1];if(b4["morphTarget"+bY]>=0){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglMorphTargetsBuffers[b3]);af(b4["morphTarget"+bY]);c.vertexAttribPointer(b4["morphTarget"+bY],3,c.FLOAT,false,0,0)}if(b4["morphNormal"+bY]>=0&&b6.morphNormals){c.bindBuffer(c.ARRAY_BUFFER,b2.__webglMorphNormalsBuffers[b3]);af(b4["morphNormal"+bY]);c.vertexAttribPointer(b4["morphNormal"+bY],3,c.FLOAT,false,0,0)}b1.__webglMorphTargetInfluences[bY]=b8[b3]}else{b1.__webglMorphTargetInfluences[bY]=0}bY++}}if(b6.program.uniforms.morphTargetInfluences!==null){c.uniform1fv(b6.program.uniforms.morphTargetInfluences,b1.__webglMorphTargetInfluences)}}function aE(bZ,bY){if(bZ.z!==bY.z){return bY.z-bZ.z}else{return bZ.id-bY.id}}function X(bZ,bY){return bY[0]-bZ[0]}this.render=function(b4,b8,b5,b6){if(b8 instanceof THREE.Camera===false){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}var b2,b9,b3,b0,bY,b1=b4.__lights,bZ=b4.fog;aZ=-1;bX=true;if(b4.autoUpdate===true){b4.updateMatrixWorld()}if(b8.parent===undefined){b8.updateMatrixWorld()}b8.matrixWorldInverse.getInverse(b8.matrixWorld);aX.multiplyMatrices(b8.projectionMatrix,b8.matrixWorldInverse);bq.setFromMatrix(aX);if(this.autoUpdateObjects){this.initWebGLObjects(b4)}o(this.renderPluginsPre,b4,b8);aL.info.render.calls=0;aL.info.render.vertices=0;aL.info.render.faces=0;aL.info.render.points=0;this.setRenderTarget(b5);if(this.autoClear||b6){this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil)}bY=b4.__webglObjects;for(b2=0,b9=bY.length;b2<b9;b2++){b3=bY[b2];b0=b3.object;b3.id=b2;b3.render=false;if(b0.visible){if(!(b0 instanceof THREE.Mesh||b0 instanceof THREE.ParticleSystem)||!(b0.frustumCulled)||bq.intersectsObject(b0)){be(b0,b8);am(b3);b3.render=true;if(this.sortObjects===true){if(b0.renderDepth!==null){b3.z=b0.renderDepth}else{R.getPositionFromMatrix(b0.matrixWorld);R.applyProjection(aX);b3.z=R.z}}}}}if(this.sortObjects){bY.sort(aE)}bY=b4.__webglObjectsImmediate;for(b2=0,b9=bY.length;b2<b9;b2++){b3=bY[b2];b0=b3.object;if(b0.visible){be(b0,b8);aP(b3)}}if(b4.overrideMaterial){var b7=b4.overrideMaterial;this.setBlending(b7.blending,b7.blendEquation,b7.blendSrc,b7.blendDst);this.setDepthTest(b7.depthTest);this.setDepthWrite(b7.depthWrite);bU(b7.polygonOffset,b7.polygonOffsetFactor,b7.polygonOffsetUnits);bt(b4.__webglObjects,false,"",b8,b1,bZ,true,b7);bI(b4.__webglObjectsImmediate,"",b8,b1,bZ,false,b7)}else{var b7=null;this.setBlending(THREE.NoBlending);bt(b4.__webglObjects,true,"opaque",b8,b1,bZ,false,b7);bI(b4.__webglObjectsImmediate,"opaque",b8,b1,bZ,false,b7);bt(b4.__webglObjects,false,"transparent",b8,b1,bZ,true,b7);bI(b4.__webglObjectsImmediate,"transparent",b8,b1,bZ,true,b7)}o(this.renderPluginsPost,b4,b8);if(b5&&b5.generateMipmaps&&b5.minFilter!==THREE.NearestFilter&&b5.minFilter!==THREE.LinearFilter){aU(b5)}this.setDepthTest(true);this.setDepthWrite(true)};function o(bY,b2,b1){if(!bY.length){return}for(var b0=0,bZ=bY.length;b0<bZ;b0++){aj=null;aI=null;i=-1;a=-1;bw=-1;bi=-1;k=-1;z=-1;aZ=-1;bX=true;bY[b0].render(b2,b1,x,aR);aj=null;aI=null;i=-1;a=-1;bw=-1;bi=-1;k=-1;z=-1;aZ=-1;bX=true}}function bt(bY,cb,b7,ca,b4,bZ,b8,cc){var b6,b2,b3,b9,b0,b1,cd;if(cb){b0=bY.length-1;b1=-1;cd=-1}else{b0=0;b1=bY.length;cd=1}for(var b5=b0;b5!==b1;b5+=cd){b6=bY[b5];if(b6.render){b2=b6.object;b3=b6.buffer;if(cc){b9=cc}else{b9=b6[b7];if(!b9){continue}if(b8){aL.setBlending(b9.blending,b9.blendEquation,b9.blendSrc,b9.blendDst)}aL.setDepthTest(b9.depthTest);aL.setDepthWrite(b9.depthWrite);bU(b9.polygonOffset,b9.polygonOffsetFactor,b9.polygonOffsetUnits)}aL.setMaterialFaces(b9);if(b3 instanceof THREE.BufferGeometry){aL.renderBufferDirect(ca,b4,bZ,b9,b3,b2)}else{aL.renderBuffer(ca,b4,bZ,b9,b3,b2)}}}}function bI(bY,b5,b8,b1,bZ,b6,b9){var b4,b0,b7,b3;for(var b2=0,ca=bY.length;b2<ca;b2++){b4=bY[b2];b0=b4.object;if(b0.visible){if(b9){b7=b9}else{b7=b4[b5];if(!b7){continue}if(b6){aL.setBlending(b7.blending,b7.blendEquation,b7.blendSrc,b7.blendDst)}aL.setDepthTest(b7.depthTest);aL.setDepthWrite(b7.depthWrite);bU(b7.polygonOffset,b7.polygonOffsetFactor,b7.polygonOffsetUnits)}aL.renderImmediateObject(b8,b1,bZ,b7,b0)}}}this.renderImmediateObject=function(b2,b0,b3,b1,bZ){var bY=aN(b2,b0,b3,b1,bZ);z=-1;aL.setMaterialFaces(b1);if(bZ.immediateRenderCallback){bZ.immediateRenderCallback(bY,c,bq)}else{bZ.render(function(b4){aL.renderBufferImmediate(b4,bY,b1)})}};function aP(b0){var bY=b0.object,bZ=bY.material;if(bZ.transparent){b0.transparent=bZ;b0.opaque=null}else{b0.opaque=bZ;b0.transparent=null}}function am(b3){var b1=b3.object,b0=b3.buffer,b2,bZ,bY;bY=b1.material;if(bY instanceof THREE.MeshFaceMaterial){bZ=b0.materialIndex;b2=bY.materials[bZ];if(b2.transparent){b3.transparent=b2;b3.opaque=null}else{b3.opaque=b2;b3.transparent=null}}else{b2=bY;if(b2){if(b2.transparent){b3.transparent=b2;b3.opaque=null}else{b3.opaque=b2;b3.transparent=null}}}}function av(b6,b3){var b1,b8,b5,b9,b4,bZ,b2={};var b7=b6.morphTargets.length;var bY=b6.morphNormals.length;var ca=b3 instanceof THREE.MeshFaceMaterial;b6.geometryGroups={};for(b1=0,b8=b6.faces.length;b1<b8;b1++){b5=b6.faces[b1];b9=ca?b5.materialIndex:0;if(b2[b9]===undefined){b2[b9]={hash:b9,counter:0}}bZ=b2[b9].hash+"_"+b2[b9].counter;if(b6.geometryGroups[bZ]===undefined){b6.geometryGroups[bZ]={faces3:[],faces4:[],materialIndex:b9,vertices:0,numMorphTargets:b7,numMorphNormals:bY}}b4=b5 instanceof THREE.Face3?3:4;if(b6.geometryGroups[bZ].vertices+b4>65535){b2[b9].counter+=1;bZ=b2[b9].hash+"_"+b2[b9].counter;if(b6.geometryGroups[bZ]===undefined){b6.geometryGroups[bZ]={faces3:[],faces4:[],materialIndex:b9,vertices:0,numMorphTargets:b7,numMorphNormals:bY}}}if(b5 instanceof THREE.Face3){b6.geometryGroups[bZ].faces3.push(b1)}else{b6.geometryGroups[bZ].faces4.push(b1)}b6.geometryGroups[bZ].vertices+=b4}b6.geometryGroupsList=[];for(var b0 in b6.geometryGroups){b6.geometryGroups[b0].id=Q++;b6.geometryGroupsList.push(b6.geometryGroups[b0])}}this.initWebGLObjects=function(b0){if(!b0.__webglObjects){b0.__webglObjects=[];b0.__webglObjectsImmediate=[];b0.__webglSprites=[];b0.__webglFlares=[]}while(b0.__objectsAdded.length){ap(b0.__objectsAdded[0],b0);b0.__objectsAdded.splice(0,1)}while(b0.__objectsRemoved.length){I(b0.__objectsRemoved[0],b0);b0.__objectsRemoved.splice(0,1)}for(var b1=0,bZ=b0.__webglObjects.length;b1<bZ;b1++){var bY=b0.__webglObjects[b1].object;if(bY.__webglInit===undefined){if(bY.__webglActive!==undefined){I(bY,b0)}ap(bY,b0)}G(bY)}};function ap(bZ,b2){var b1,b3,b0,bY;if(bZ.__webglInit===undefined){bZ.__webglInit=true;bZ._modelViewMatrix=new THREE.Matrix4();bZ._normalMatrix=new THREE.Matrix3();if(bZ.geometry!==undefined&&bZ.geometry.__webglInit===undefined){bZ.geometry.__webglInit=true;bZ.geometry.addEventListener("dispose",aW)}b3=bZ.geometry;if(b3===undefined){}else{if(b3 instanceof THREE.BufferGeometry){y(b3)}else{if(bZ instanceof THREE.Mesh){b0=bZ.material;if(b3.geometryGroups===undefined){av(b3,b0)}for(b1 in b3.geometryGroups){bY=b3.geometryGroups[b1];if(!bY.__webglVertexBuffer){aB(bY);ai(bY,bZ);b3.verticesNeedUpdate=true;b3.morphTargetsNeedUpdate=true;b3.elementsNeedUpdate=true;b3.uvsNeedUpdate=true;b3.normalsNeedUpdate=true;b3.tangentsNeedUpdate=true;b3.colorsNeedUpdate=true}}}else{if(bZ instanceof THREE.Ribbon){if(!b3.__webglVertexBuffer){aa(b3);bR(b3,bZ);b3.verticesNeedUpdate=true;b3.colorsNeedUpdate=true;b3.normalsNeedUpdate=true}}else{if(bZ instanceof THREE.Line){if(!b3.__webglVertexBuffer){ab(b3);E(b3,bZ);b3.verticesNeedUpdate=true;b3.colorsNeedUpdate=true;b3.lineDistancesNeedUpdate=true}}else{if(bZ instanceof THREE.ParticleSystem){if(!b3.__webglVertexBuffer){B(b3);bH(b3,bZ);b3.verticesNeedUpdate=true;b3.colorsNeedUpdate=true}}}}}}}}if(bZ.__webglActive===undefined){if(bZ instanceof THREE.Mesh){b3=bZ.geometry;if(b3 instanceof THREE.BufferGeometry){C(b2.__webglObjects,b3,bZ)}else{if(b3 instanceof THREE.Geometry){for(b1 in b3.geometryGroups){bY=b3.geometryGroups[b1];C(b2.__webglObjects,bY,bZ)}}}}else{if(bZ instanceof THREE.Ribbon||bZ instanceof THREE.Line||bZ instanceof THREE.ParticleSystem){b3=bZ.geometry;C(b2.__webglObjects,b3,bZ)}else{if(bZ instanceof THREE.ImmediateRenderObject||bZ.immediateRenderCallback){aA(b2.__webglObjectsImmediate,bZ)}else{if(bZ instanceof THREE.Sprite){b2.__webglSprites.push(bZ)}else{if(bZ instanceof THREE.LensFlare){b2.__webglFlares.push(bZ)}}}}}bZ.__webglActive=true}}function C(b0,bY,bZ){b0.push({buffer:bY,object:bZ,opaque:null,transparent:null})}function aA(bZ,bY){bZ.push({object:bY,opaque:null,transparent:null})}function G(b0){var b4=b0.geometry,bY,b2,b3;if(b4 instanceof THREE.BufferGeometry){au(b4,c.DYNAMIC_DRAW,!b4.dynamic)}else{if(b0 instanceof THREE.Mesh){for(var b1=0,bZ=b4.geometryGroupsList.length;b1<bZ;b1++){bY=b4.geometryGroupsList[b1];b3=F(b0,bY);if(b4.buffersNeedUpdate){ai(bY,b0)}b2=b3.attributes&&h(b3);if(b4.verticesNeedUpdate||b4.morphTargetsNeedUpdate||b4.elementsNeedUpdate||b4.uvsNeedUpdate||b4.normalsNeedUpdate||b4.colorsNeedUpdate||b4.tangentsNeedUpdate||b2){n(bY,b0,c.DYNAMIC_DRAW,!b4.dynamic,b3)}}b4.verticesNeedUpdate=false;b4.morphTargetsNeedUpdate=false;b4.elementsNeedUpdate=false;b4.uvsNeedUpdate=false;b4.normalsNeedUpdate=false;b4.colorsNeedUpdate=false;b4.tangentsNeedUpdate=false;b4.buffersNeedUpdate=false;b3.attributes&&ar(b3)}else{if(b0 instanceof THREE.Ribbon){b3=F(b0,b4);b2=b3.attributes&&h(b3);if(b4.verticesNeedUpdate||b4.colorsNeedUpdate||b4.normalsNeedUpdate||b2){P(b4,c.DYNAMIC_DRAW)}b4.verticesNeedUpdate=false;b4.colorsNeedUpdate=false;b4.normalsNeedUpdate=false;b3.attributes&&ar(b3)}else{if(b0 instanceof THREE.Line){b3=F(b0,b4);b2=b3.attributes&&h(b3);if(b4.verticesNeedUpdate||b4.colorsNeedUpdate||b4.lineDistancesNeedUpdate||b2){bl(b4,c.DYNAMIC_DRAW)}b4.verticesNeedUpdate=false;b4.colorsNeedUpdate=false;b4.lineDistancesNeedUpdate=false;b3.attributes&&ar(b3)}else{if(b0 instanceof THREE.ParticleSystem){b3=F(b0,b4);b2=b3.attributes&&h(b3);if(b4.verticesNeedUpdate||b4.colorsNeedUpdate||b0.sortParticles||b2){a4(b4,c.DYNAMIC_DRAW,b0)}b4.verticesNeedUpdate=false;b4.colorsNeedUpdate=false;b3.attributes&&ar(b3)}}}}}}function h(bZ){for(var bY in bZ.attributes){if(bZ.attributes[bY].needsUpdate){return true}}return false}function ar(bZ){for(var bY in bZ.attributes){bZ.attributes[bY].needsUpdate=false}}function I(bY,bZ){if(bY instanceof THREE.Mesh||bY instanceof THREE.ParticleSystem||bY instanceof THREE.Ribbon||bY instanceof THREE.Line){bV(bZ.__webglObjects,bY)}else{if(bY instanceof THREE.Sprite){ax(bZ.__webglSprites,bY)}else{if(bY instanceof THREE.LensFlare){ax(bZ.__webglFlares,bY)}else{if(bY instanceof THREE.ImmediateRenderObject||bY.immediateRenderCallback){bV(bZ.__webglObjectsImmediate,bY)}}}}delete bY.__webglActive}function bV(bZ,bY){for(var b0=bZ.length-1;b0>=0;b0--){if(bZ[b0].object===bY){bZ.splice(b0,1)}}}function ax(bZ,bY){for(var b0=bZ.length-1;b0>=0;b0--){if(bZ[b0]===bY){bZ.splice(b0,1)}}}this.initMaterial=function(b8,b6,bZ,b4){b8.addEventListener("dispose",bf);var cd,ca,b9,b7,cc,b2,bY,b3,cb;if(b8 instanceof THREE.MeshDepthMaterial){cb="depth"}else{if(b8 instanceof THREE.MeshNormalMaterial){cb="normal"}else{if(b8 instanceof THREE.MeshBasicMaterial){cb="basic"}else{if(b8 instanceof THREE.MeshLambertMaterial){cb="lambert"}else{if(b8 instanceof THREE.MeshPhongMaterial){cb="phong"}else{if(b8 instanceof THREE.LineBasicMaterial){cb="basic"}else{if(b8 instanceof THREE.LineDashedMaterial){cb="dashed"}else{if(b8 instanceof THREE.ParticleBasicMaterial){cb="particle_basic"}}}}}}}}if(cb){an(b8,THREE.ShaderLib[cb])}b2=bd(b6);b3=V(b6);bY=aG(b4);cc={map:!!b8.map,envMap:!!b8.envMap,lightMap:!!b8.lightMap,bumpMap:!!b8.bumpMap,normalMap:!!b8.normalMap,specularMap:!!b8.specularMap,vertexColors:b8.vertexColors,fog:bZ,useFog:b8.fog,fogExp:bZ instanceof THREE.FogExp2,sizeAttenuation:b8.sizeAttenuation,skinning:b8.skinning,maxBones:bY,useVertexTexture:U&&b4&&b4.useVertexTexture,boneTextureWidth:b4&&b4.boneTextureWidth,boneTextureHeight:b4&&b4.boneTextureHeight,morphTargets:b8.morphTargets,morphNormals:b8.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:b2.directional,maxPointLights:b2.point,maxSpotLights:b2.spot,maxHemiLights:b2.hemi,maxShadows:b3,shadowMapEnabled:this.shadowMapEnabled&&b4.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:b8.alphaTest,metal:b8.metal,perPixel:b8.perPixel,wrapAround:b8.wrapAround,doubleSided:b8.side===THREE.DoubleSide,flipSided:b8.side===THREE.BackSide};b8.program=g(cb,b8.fragmentShader,b8.vertexShader,b8.uniforms,b8.attributes,b8.defines,cc);var b5=b8.program.attributes;if(b8.morphTargets){b8.numSupportedMorphTargets=0;var b1,b0="morphTarget";for(b7=0;b7<this.maxMorphTargets;b7++){b1=b0+b7;if(b5[b1]>=0){b8.numSupportedMorphTargets++}}}if(b8.morphNormals){b8.numSupportedMorphNormals=0;var b1,b0="morphNormal";for(b7=0;b7<this.maxMorphNormals;b7++){b1=b0+b7;if(b5[b1]>=0){b8.numSupportedMorphNormals++}}}b8.uniformsList=[];for(cd in b8.uniforms){b8.uniformsList.push([b8.uniforms[cd],cd])}};function an(bZ,bY){bZ.uniforms=THREE.UniformsUtils.clone(bY.uniforms);bZ.vertexShader=bY.vertexShader;bZ.fragmentShader=bY.fragmentShader}function aN(b3,b0,bY,b4,bZ){bc=0;if(b4.needsUpdate){if(b4.program){M(b4)}aL.initMaterial(b4,b0,bY,bZ);b4.needsUpdate=false}if(b4.morphTargets){if(!bZ.__webglMorphTargetInfluences){bZ.__webglMorphTargetInfluences=new Float32Array(aL.maxMorphTargets)}}var b2=false;var b1=b4.program,b7=b1.uniforms,b5=b4.uniforms;if(b1!==aj){c.useProgram(b1);aj=b1;b2=true}if(b4.id!==aZ){aZ=b4.id;b2=true}if(b2||b3!==aI){c.uniformMatrix4fv(b7.projectionMatrix,false,b3.projectionMatrix.elements);if(b3!==aI){aI=b3}}if(b4.skinning){if(U&&bZ.useVertexTexture){if(b7.boneTexture!==null){var b6=at();c.uniform1i(b7.boneTexture,b6);aL.setTexture(bZ.boneTexture,b6)}}else{if(b7.boneGlobalMatrices!==null){c.uniformMatrix4fv(b7.boneGlobalMatrices,false,bZ.boneMatrices)}}}if(b2){if(bY&&b4.fog){W(b5,bY)}if(b4 instanceof THREE.MeshPhongMaterial||b4 instanceof THREE.MeshLambertMaterial||b4.lights){if(bX){f(b1,b0);bX=false}a9(b5,bn)}if(b4 instanceof THREE.MeshBasicMaterial||b4 instanceof THREE.MeshLambertMaterial||b4 instanceof THREE.MeshPhongMaterial){bE(b5,b4)}if(b4 instanceof THREE.LineBasicMaterial){ao(b5,b4)}else{if(b4 instanceof THREE.LineDashedMaterial){ao(b5,b4);ad(b5,b4)}else{if(b4 instanceof THREE.ParticleBasicMaterial){bm(b5,b4)}else{if(b4 instanceof THREE.MeshPhongMaterial){J(b5,b4)}else{if(b4 instanceof THREE.MeshLambertMaterial){bF(b5,b4)}else{if(b4 instanceof THREE.MeshDepthMaterial){b5.mNear.value=b3.near;b5.mFar.value=b3.far;b5.opacity.value=b4.opacity}else{if(b4 instanceof THREE.MeshNormalMaterial){b5.opacity.value=b4.opacity}}}}}}}if(bZ.receiveShadow&&!b4._shadowPass){bM(b5,b0)}O(b1,b4.uniformsList);if(b4 instanceof THREE.ShaderMaterial||b4 instanceof THREE.MeshPhongMaterial||b4.envMap){if(b7.cameraPosition!==null){R.getPositionFromMatrix(b3.matrixWorld);c.uniform3f(b7.cameraPosition,R.x,R.y,R.z)}}if(b4 instanceof THREE.MeshPhongMaterial||b4 instanceof THREE.MeshLambertMaterial||b4 instanceof THREE.ShaderMaterial||b4.skinning){if(b7.viewMatrix!==null){c.uniformMatrix4fv(b7.viewMatrix,false,b3.matrixWorldInverse.elements)}}}t(b7,bZ);if(b7.modelMatrix!==null){c.uniformMatrix4fv(b7.modelMatrix,false,bZ.matrixWorld.elements)}return b1}function bE(bZ,b0){bZ.opacity.value=b0.opacity;if(aL.gammaInput){bZ.diffuse.value.copyGammaToLinear(b0.color)}else{bZ.diffuse.value=b0.color}bZ.map.value=b0.map;bZ.lightMap.value=b0.lightMap;bZ.specularMap.value=b0.specularMap;if(b0.bumpMap){bZ.bumpMap.value=b0.bumpMap;bZ.bumpScale.value=b0.bumpScale}if(b0.normalMap){bZ.normalMap.value=b0.normalMap;bZ.normalScale.value.copy(b0.normalScale)}var bY;if(b0.map){bY=b0.map}else{if(b0.specularMap){bY=b0.specularMap}else{if(b0.normalMap){bY=b0.normalMap}else{if(b0.bumpMap){bY=b0.bumpMap}}}}if(bY!==undefined){var b2=bY.offset;var b1=bY.repeat;bZ.offsetRepeat.value.set(b2.x,b2.y,b1.x,b1.y)}bZ.envMap.value=b0.envMap;bZ.flipEnvMap.value=(b0.envMap instanceof THREE.WebGLRenderTargetCube)?1:-1;if(aL.gammaInput){bZ.reflectivity.value=b0.reflectivity}else{bZ.reflectivity.value=b0.reflectivity}bZ.refractionRatio.value=b0.refractionRatio;bZ.combine.value=b0.combine;bZ.useRefract.value=b0.envMap&&b0.envMap.mapping instanceof THREE.CubeRefractionMapping}function ao(bY,bZ){bY.diffuse.value=bZ.color;bY.opacity.value=bZ.opacity}function ad(bY,bZ){bY.dashSize.value=bZ.dashSize;bY.totalSize.value=bZ.dashSize+bZ.gapSize;bY.scale.value=bZ.scale}function bm(bY,bZ){bY.psColor.value=bZ.color;bY.opacity.value=bZ.opacity;bY.size.value=bZ.size;bY.scale.value=aV.height/2;bY.map.value=bZ.map}function W(bY,bZ){bY.fogColor.value=bZ.color;if(bZ instanceof THREE.Fog){bY.fogNear.value=bZ.near;bY.fogFar.value=bZ.far}else{if(bZ instanceof THREE.FogExp2){bY.fogDensity.value=bZ.density}}}function J(bY,bZ){bY.shininess.value=bZ.shininess;if(aL.gammaInput){bY.ambient.value.copyGammaToLinear(bZ.ambient);bY.emissive.value.copyGammaToLinear(bZ.emissive);bY.specular.value.copyGammaToLinear(bZ.specular)}else{bY.ambient.value=bZ.ambient;bY.emissive.value=bZ.emissive;bY.specular.value=bZ.specular}if(bZ.wrapAround){bY.wrapRGB.value.copy(bZ.wrapRGB)}}function bF(bY,bZ){if(aL.gammaInput){bY.ambient.value.copyGammaToLinear(bZ.ambient);bY.emissive.value.copyGammaToLinear(bZ.emissive)}else{bY.ambient.value=bZ.ambient;bY.emissive.value=bZ.emissive}if(bZ.wrapAround){bY.wrapRGB.value.copy(bZ.wrapRGB)}}function a9(bY,bZ){bY.ambientLightColor.value=bZ.ambient;bY.directionalLightColor.value=bZ.directional.colors;bY.directionalLightDirection.value=bZ.directional.positions;bY.pointLightColor.value=bZ.point.colors;bY.pointLightPosition.value=bZ.point.positions;bY.pointLightDistance.value=bZ.point.distances;bY.spotLightColor.value=bZ.spot.colors;bY.spotLightPosition.value=bZ.spot.positions;bY.spotLightDistance.value=bZ.spot.distances;bY.spotLightDirection.value=bZ.spot.directions;bY.spotLightAngleCos.value=bZ.spot.anglesCos;bY.spotLightExponent.value=bZ.spot.exponents;bY.hemisphereLightSkyColor.value=bZ.hemi.skyColors;bY.hemisphereLightGroundColor.value=bZ.hemi.groundColors;bY.hemisphereLightDirection.value=bZ.hemi.positions}function bM(bY,b2){if(bY.shadowMatrix){var b1=0;for(var b3=0,b0=b2.length;b3<b0;b3++){var bZ=b2[b3];if(!bZ.castShadow){continue}if(bZ instanceof THREE.SpotLight||(bZ instanceof THREE.DirectionalLight&&!bZ.shadowCascade)){bY.shadowMap.value[b1]=bZ.shadowMap;bY.shadowMapSize.value[b1]=bZ.shadowMapSize;bY.shadowMatrix.value[b1]=bZ.shadowMatrix;bY.shadowDarkness.value[b1]=bZ.shadowDarkness;bY.shadowBias.value[b1]=bZ.shadowBias;b1++}}}}function t(bY,bZ){c.uniformMatrix4fv(bY.modelViewMatrix,false,bZ._modelViewMatrix.elements);if(bY.normalMatrix){c.uniformMatrix3fv(bY.normalMatrix,false,bZ._normalMatrix.elements)}}function at(){var bY=bc;if(bY>=bG){console.warn("WebGLRenderer: trying to use "+bY+" texture units while this GPU supports only "+bG)}bc+=1;return bY}function O(b3,b9){var bY,b7,b5,b8,b4,ca,b2,b6,b0,b1,bZ;for(b0=0,b1=b9.length;b0<b1;b0++){b8=b3.uniforms[b9[b0][1]];if(!b8){continue}bY=b9[b0][0];b5=bY.type;b7=bY.value;if(b5==="i"){c.uniform1i(b8,b7)}else{if(b5==="f"){c.uniform1f(b8,b7)}else{if(b5==="v2"){c.uniform2f(b8,b7.x,b7.y)}else{if(b5==="v3"){c.uniform3f(b8,b7.x,b7.y,b7.z)}else{if(b5==="v4"){c.uniform4f(b8,b7.x,b7.y,b7.z,b7.w)}else{if(b5==="c"){c.uniform3f(b8,b7.r,b7.g,b7.b)}else{if(b5==="iv1"){c.uniform1iv(b8,b7)}else{if(b5==="iv"){c.uniform3iv(b8,b7)}else{if(b5==="fv1"){c.uniform1fv(b8,b7)}else{if(b5==="fv"){c.uniform3fv(b8,b7)}else{if(b5==="v2v"){if(bY._array===undefined){bY._array=new Float32Array(2*b7.length)}for(b2=0,b6=b7.length;b2<b6;b2++){bZ=b2*2;bY._array[bZ]=b7[b2].x;bY._array[bZ+1]=b7[b2].y}c.uniform2fv(b8,bY._array)}else{if(b5==="v3v"){if(bY._array===undefined){bY._array=new Float32Array(3*b7.length)}for(b2=0,b6=b7.length;b2<b6;b2++){bZ=b2*3;bY._array[bZ]=b7[b2].x;bY._array[bZ+1]=b7[b2].y;bY._array[bZ+2]=b7[b2].z}c.uniform3fv(b8,bY._array)}else{if(b5==="v4v"){if(bY._array===undefined){bY._array=new Float32Array(4*b7.length)}for(b2=0,b6=b7.length;b2<b6;b2++){bZ=b2*4;bY._array[bZ]=b7[b2].x;bY._array[bZ+1]=b7[b2].y;bY._array[bZ+2]=b7[b2].z;bY._array[bZ+3]=b7[b2].w}c.uniform4fv(b8,bY._array)}else{if(b5==="m4"){if(bY._array===undefined){bY._array=new Float32Array(16)}b7.flattenToArray(bY._array);c.uniformMatrix4fv(b8,false,bY._array)}else{if(b5==="m4v"){if(bY._array===undefined){bY._array=new Float32Array(16*b7.length)}for(b2=0,b6=b7.length;b2<b6;b2++){b7[b2].flattenToArrayOffset(bY._array,b2*16)}c.uniformMatrix4fv(b8,false,bY._array)}else{if(b5==="t"){b4=b7;ca=at();c.uniform1i(b8,ca);if(!b4){continue}if(b4.image instanceof Array&&b4.image.length===6){bj(b4,ca)}else{if(b4 instanceof THREE.WebGLRenderTargetCube){a7(b4,ca)}else{aL.setTexture(b4,ca)}}}else{if(b5==="tv"){if(bY._array===undefined){bY._array=[]}for(b2=0,b6=bY.value.length;b2<b6;b2++){bY._array[b2]=at()}c.uniform1iv(b8,bY._array);for(b2=0,b6=bY.value.length;b2<b6;b2++){b4=bY.value[b2];ca=bY._array[b2];if(!b4){continue}aL.setTexture(b4,ca)}}}}}}}}}}}}}}}}}}}}function be(bY,bZ){bY._modelViewMatrix.multiplyMatrices(bZ.matrixWorldInverse,bY.matrixWorld);bY._normalMatrix.getNormalMatrix(bY._modelViewMatrix)}function a2(b1,b0,bY,bZ){b1[b0]=bY.r*bY.r*bZ;b1[b0+1]=bY.g*bY.g*bZ;b1[b0+2]=bY.b*bY.b*bZ}function a3(b1,b0,bZ,bY){b1[b0]=bZ.r*bY;b1[b0+1]=bZ.g*bY;b1[b0+2]=bZ.b*bY}function f(bY,b3){var cB,cp,cg,cx,cs=0,cC=0,cD=0,cn,b0,b7,co,b6,cr,ce,ck=bn,cc=ck.directional.colors,b1=ck.directional.positions,cy=ck.point.colors,cu=ck.point.positions,cm=ck.point.distances,cz=ck.spot.colors,b2=ck.spot.positions,cv=ck.spot.distances,cb=ck.spot.directions,b4=ck.spot.anglesCos,cd=ck.spot.exponents,bZ=ck.hemi.skyColors,cA=ck.hemi.groundColors,ca=ck.hemi.positions,cE=0,cj=0,cf=0,b8=0,cl=0,ci=0,ch=0,b5=0,b9=0,cw=0,ct=0,cq=0;for(cB=0,cp=b3.length;cB<cp;cB++){cg=b3[cB];if(cg.onlyShadow){continue}cn=cg.color;co=cg.intensity;ce=cg.distance;if(cg instanceof THREE.AmbientLight){if(!cg.visible){continue}if(aL.gammaInput){cs+=cn.r*cn.r;cC+=cn.g*cn.g;cD+=cn.b*cn.b}else{cs+=cn.r;cC+=cn.g;cD+=cn.b}}else{if(cg instanceof THREE.DirectionalLight){cl+=1;if(!cg.visible){continue}aJ.getPositionFromMatrix(cg.matrixWorld);R.getPositionFromMatrix(cg.target.matrixWorld);aJ.sub(R);aJ.normalize();if(aJ.x===0&&aJ.y===0&&aJ.z===0){continue}b9=cE*3;b1[b9]=aJ.x;b1[b9+1]=aJ.y;b1[b9+2]=aJ.z;if(aL.gammaInput){a2(cc,b9,cn,co*co)}else{a3(cc,b9,cn,co)}cE+=1}else{if(cg instanceof THREE.PointLight){ci+=1;if(!cg.visible){continue}cw=cj*3;if(aL.gammaInput){a2(cy,cw,cn,co*co)}else{a3(cy,cw,cn,co)}R.getPositionFromMatrix(cg.matrixWorld);cu[cw]=R.x;cu[cw+1]=R.y;cu[cw+2]=R.z;cm[cj]=ce;cj+=1}else{if(cg instanceof THREE.SpotLight){ch+=1;if(!cg.visible){continue}ct=cf*3;if(aL.gammaInput){a2(cz,ct,cn,co*co)}else{a3(cz,ct,cn,co)}R.getPositionFromMatrix(cg.matrixWorld);b2[ct]=R.x;b2[ct+1]=R.y;b2[ct+2]=R.z;cv[cf]=ce;aJ.copy(R);R.getPositionFromMatrix(cg.target.matrixWorld);aJ.sub(R);aJ.normalize();cb[ct]=aJ.x;cb[ct+1]=aJ.y;cb[ct+2]=aJ.z;b4[cf]=Math.cos(cg.angle);cd[cf]=cg.exponent;cf+=1}else{if(cg instanceof THREE.HemisphereLight){b5+=1;if(!cg.visible){continue}aJ.getPositionFromMatrix(cg.matrixWorld);aJ.normalize();if(aJ.x===0&&aJ.y===0&&aJ.z===0){continue}cq=b8*3;ca[cq]=aJ.x;ca[cq+1]=aJ.y;ca[cq+2]=aJ.z;b0=cg.color;b7=cg.groundColor;if(aL.gammaInput){b6=co*co;a2(bZ,cq,b0,b6);a2(cA,cq,b7,b6)}else{a3(bZ,cq,b0,co);a3(cA,cq,b7,co)}b8+=1}}}}}}for(cB=cE*3,cp=Math.max(cc.length,cl*3);cB<cp;cB++){cc[cB]=0}for(cB=cj*3,cp=Math.max(cy.length,ci*3);cB<cp;cB++){cy[cB]=0}for(cB=cf*3,cp=Math.max(cz.length,ch*3);cB<cp;cB++){cz[cB]=0}for(cB=b8*3,cp=Math.max(bZ.length,b5*3);cB<cp;cB++){bZ[cB]=0}for(cB=b8*3,cp=Math.max(cA.length,b5*3);cB<cp;cB++){cA[cB]=0}ck.directional.length=cE;ck.point.length=cj;ck.spot.length=cf;ck.hemi.length=b8;ck.ambient[0]=cs;ck.ambient[1]=cC;ck.ambient[2]=cD}this.setFaceCulling=function(bZ,bY){if(bZ===THREE.CullFaceNone){c.disable(c.CULL_FACE)}else{if(bY===THREE.FrontFaceDirectionCW){c.frontFace(c.CW)}else{c.frontFace(c.CCW)}if(bZ===THREE.CullFaceBack){c.cullFace(c.BACK)}else{if(bZ===THREE.CullFaceFront){c.cullFace(c.FRONT)}else{c.cullFace(c.FRONT_AND_BACK)}}c.enable(c.CULL_FACE)}};this.setMaterialFaces=function(b0){var bY=b0.side===THREE.DoubleSide;var bZ=b0.side===THREE.BackSide;if(bi!==bY){if(bY){c.disable(c.CULL_FACE)}else{c.enable(c.CULL_FACE)}bi=bY}if(k!==bZ){if(bZ){c.frontFace(c.CW)}else{c.frontFace(c.CCW)}k=bZ}};this.setDepthTest=function(bY){if(a!==bY){if(bY){c.enable(c.DEPTH_TEST)}else{c.disable(c.DEPTH_TEST)}a=bY}};this.setDepthWrite=function(bY){if(bw!==bY){c.depthMask(bY);bw=bY}};function aF(bY){if(bY!==bk){c.lineWidth(bY);bk=bY}}function bU(b0,bZ,bY){if(aH!==b0){if(b0){c.enable(c.POLYGON_OFFSET_FILL)}else{c.disable(c.POLYGON_OFFSET_FILL)}aH=b0}if(b0&&(bL!==bZ||a8!==bY)){c.polygonOffset(bZ,bY);bL=bZ;a8=bY}}this.setBlending=function(bZ,bY,b0,b1){if(bZ!==i){if(bZ===THREE.NoBlending){c.disable(c.BLEND)}else{if(bZ===THREE.AdditiveBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.SRC_ALPHA,c.ONE)}else{if(bZ===THREE.SubtractiveBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.ZERO,c.ONE_MINUS_SRC_COLOR)}else{if(bZ===THREE.MultiplyBlending){c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.ZERO,c.SRC_COLOR)}else{if(bZ===THREE.CustomBlending){c.enable(c.BLEND)}else{c.enable(c.BLEND);c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}}}}}i=bZ}if(bZ===THREE.CustomBlending){if(bY!==ag){c.blendEquation(aQ(bY));ag=bY}if(b0!==bN||b1!==aq){c.blendFunc(aQ(b0),aQ(b1));bN=b0;aq=b1}}else{ag=null;bN=null;aq=null}};function L(bZ){var b0,bY,b2=[];for(var b1 in bZ){b0=bZ[b1];if(b0===false){continue}bY="#define "+b1+" "+b0;b2.push(bY)}return b2.join("\n")}function g(b7,bY,b3,ck,cb,ch,b9){var ce,ci,cj,ca,bZ;var cd=[];if(b7){cd.push(b7)}else{cd.push(bY);cd.push(b3)}for(cj in ch){cd.push(cj);cd.push(ch[cj])}for(ce in b9){cd.push(ce);cd.push(b9[ce])}bZ=cd.join();for(ce=0,ci=bB.length;ce<ci;ce++){var b6=bB[ce];if(b6.code===bZ){b6.usedTimes++;return b6.program}}var b0="SHADOWMAP_TYPE_BASIC";if(b9.shadowMapType===THREE.PCFShadowMap){b0="SHADOWMAP_TYPE_PCF"}else{if(b9.shadowMapType===THREE.PCFSoftShadowMap){b0="SHADOWMAP_TYPE_PCF_SOFT"}}var b2=L(ch);ca=c.createProgram();var b1=["precision "+j+" float;",b2,aT?"#define VERTEX_TEXTURES":"",aL.gammaInput?"#define GAMMA_INPUT":"",aL.gammaOutput?"#define GAMMA_OUTPUT":"",aL.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+b9.maxDirLights,"#define MAX_POINT_LIGHTS "+b9.maxPointLights,"#define MAX_SPOT_LIGHTS "+b9.maxSpotLights,"#define MAX_HEMI_LIGHTS "+b9.maxHemiLights,"#define MAX_SHADOWS "+b9.maxShadows,"#define MAX_BONES "+b9.maxBones,b9.map?"#define USE_MAP":"",b9.envMap?"#define USE_ENVMAP":"",b9.lightMap?"#define USE_LIGHTMAP":"",b9.bumpMap?"#define USE_BUMPMAP":"",b9.normalMap?"#define USE_NORMALMAP":"",b9.specularMap?"#define USE_SPECULARMAP":"",b9.vertexColors?"#define USE_COLOR":"",b9.skinning?"#define USE_SKINNING":"",b9.useVertexTexture?"#define BONE_TEXTURE":"",b9.boneTextureWidth?"#define N_BONE_PIXEL_X "+b9.boneTextureWidth.toFixed(1):"",b9.boneTextureHeight?"#define N_BONE_PIXEL_Y "+b9.boneTextureHeight.toFixed(1):"",b9.morphTargets?"#define USE_MORPHTARGETS":"",b9.morphNormals?"#define USE_MORPHNORMALS":"",b9.perPixel?"#define PHONG_PER_PIXEL":"",b9.wrapAround?"#define WRAP_AROUND":"",b9.doubleSided?"#define DOUBLE_SIDED":"",b9.flipSided?"#define FLIP_SIDED":"",b9.shadowMapEnabled?"#define USE_SHADOWMAP":"",b9.shadowMapEnabled?"#define "+b0:"",b9.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",b9.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",b9.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;","#endif","#endif","#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;","#endif",""].join("\n");var b5=["precision "+j+" float;",(b9.bumpMap||b9.normalMap)?"#extension GL_OES_standard_derivatives : enable":"",b2,"#define MAX_DIR_LIGHTS "+b9.maxDirLights,"#define MAX_POINT_LIGHTS "+b9.maxPointLights,"#define MAX_SPOT_LIGHTS "+b9.maxSpotLights,"#define MAX_HEMI_LIGHTS "+b9.maxHemiLights,"#define MAX_SHADOWS "+b9.maxShadows,b9.alphaTest?"#define ALPHATEST "+b9.alphaTest:"",aL.gammaInput?"#define GAMMA_INPUT":"",aL.gammaOutput?"#define GAMMA_OUTPUT":"",aL.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",(b9.useFog&&b9.fog)?"#define USE_FOG":"",(b9.useFog&&b9.fogExp)?"#define FOG_EXP2":"",b9.map?"#define USE_MAP":"",b9.envMap?"#define USE_ENVMAP":"",b9.lightMap?"#define USE_LIGHTMAP":"",b9.bumpMap?"#define USE_BUMPMAP":"",b9.normalMap?"#define USE_NORMALMAP":"",b9.specularMap?"#define USE_SPECULARMAP":"",b9.vertexColors?"#define USE_COLOR":"",b9.metal?"#define METAL":"",b9.perPixel?"#define PHONG_PER_PIXEL":"",b9.wrapAround?"#define WRAP_AROUND":"",b9.doubleSided?"#define DOUBLE_SIDED":"",b9.flipSided?"#define FLIP_SIDED":"",b9.shadowMapEnabled?"#define USE_SHADOWMAP":"",b9.shadowMapEnabled?"#define "+b0:"",b9.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",b9.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n");var b4=d("vertex",b1+b3);var cf=d("fragment",b5+bY);c.attachShader(ca,b4);c.attachShader(ca,cf);c.linkProgram(ca);if(!c.getProgramParameter(ca,c.LINK_STATUS)){console.error("Could not initialise shader\nVALIDATE_STATUS: "+c.getProgramParameter(ca,c.VALIDATE_STATUS)+", gl error ["+c.getError()+"]")}c.deleteShader(cf);c.deleteShader(b4);ca.uniforms={};ca.attributes={};var b8,cc,cl,cg;b8=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"];if(b9.useVertexTexture){b8.push("boneTexture")}else{b8.push("boneGlobalMatrices")}for(cc in ck){b8.push(cc)}ac(ca,b8);b8=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"];for(cg=0;cg<b9.maxMorphTargets;cg++){b8.push("morphTarget"+cg)}for(cg=0;cg<b9.maxMorphNormals;cg++){b8.push("morphNormal"+cg)}for(cl in cb){b8.push(cl)}v(ca,b8);ca.id=ay++;bB.push({program:ca,code:bZ,usedTimes:1});aL.info.memory.programs=bB.length;return ca}function ac(b0,bY){var b1,bZ,b2;for(b1=0,bZ=bY.length;b1<bZ;b1++){b2=bY[b1];b0.uniforms[b2]=c.getUniformLocation(b0,b2)}}function v(b0,bY){var b1,bZ,b2;for(b1=0,bZ=bY.length;b1<bZ;b1++){b2=bY[b1];b0.attributes[b2]=c.getAttribLocation(b0,b2)}}function Y(bZ){var b1=bZ.split("\n");for(var b0=0,bY=b1.length;b0<bY;b0++){b1[b0]=(b0+1)+": "+b1[b0]}return b1.join("\n")}function d(bZ,bY){var b0;if(bZ==="fragment"){b0=c.createShader(c.FRAGMENT_SHADER)}else{if(bZ==="vertex"){b0=c.createShader(c.VERTEX_SHADER)}}c.shaderSource(b0,bY);c.compileShader(b0);if(!c.getShaderParameter(b0,c.COMPILE_STATUS)){console.error(c.getShaderInfoLog(b0));console.error(Y(bY));return null}return b0}function a5(bY){return(bY&(bY-1))===0}function ah(bY,bZ,b0){if(b0){c.texParameteri(bY,c.TEXTURE_WRAP_S,aQ(bZ.wrapS));c.texParameteri(bY,c.TEXTURE_WRAP_T,aQ(bZ.wrapT));c.texParameteri(bY,c.TEXTURE_MAG_FILTER,aQ(bZ.magFilter));c.texParameteri(bY,c.TEXTURE_MIN_FILTER,aQ(bZ.minFilter))}else{c.texParameteri(bY,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(bY,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(bY,c.TEXTURE_MAG_FILTER,aM(bZ.magFilter));c.texParameteri(bY,c.TEXTURE_MIN_FILTER,aM(bZ.minFilter))}if(p&&bZ.type!==THREE.FloatType){if(bZ.anisotropy>1||bZ.__oldAnisotropy){c.texParameterf(bY,p.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(bZ.anisotropy,bz));bZ.__oldAnisotropy=bZ.anisotropy}}}this.setTexture=function(b5,b7){if(b5.needsUpdate){if(!b5.__webglInit){b5.__webglInit=true;b5.addEventListener("dispose",ae);b5.__webglTexture=c.createTexture();aL.info.memory.textures++}c.activeTexture(c.TEXTURE0+b7);c.bindTexture(c.TEXTURE_2D,b5.__webglTexture);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b5.flipY);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b5.premultiplyAlpha);c.pixelStorei(c.UNPACK_ALIGNMENT,b5.unpackAlignment);var b1=b5.image,b4=a5(b1.width)&&a5(b1.height),bY=aQ(b5.format),b0=aQ(b5.type);ah(c.TEXTURE_2D,b5,b4);var bZ,b2=b5.mipmaps;if(b5 instanceof THREE.DataTexture){if(b2.length>0&&b4){for(var b3=0,b6=b2.length;b3<b6;b3++){bZ=b2[b3];c.texImage2D(c.TEXTURE_2D,b3,bY,bZ.width,bZ.height,0,bY,b0,bZ.data)}b5.generateMipmaps=false}else{c.texImage2D(c.TEXTURE_2D,0,bY,b1.width,b1.height,0,bY,b0,b1.data)}}else{if(b5 instanceof THREE.CompressedTexture){for(var b3=0,b6=b2.length;b3<b6;b3++){bZ=b2[b3];c.compressedTexImage2D(c.TEXTURE_2D,b3,bY,bZ.width,bZ.height,0,bZ.data)}}else{if(b2.length>0&&b4){for(var b3=0,b6=b2.length;b3<b6;b3++){bZ=b2[b3];c.texImage2D(c.TEXTURE_2D,b3,bY,bY,b0,bZ)}b5.generateMipmaps=false}else{c.texImage2D(c.TEXTURE_2D,0,bY,bY,b0,b5.image)}}}if(b5.generateMipmaps&&b4){c.generateMipmap(c.TEXTURE_2D)}b5.needsUpdate=false;if(b5.onUpdate){b5.onUpdate()}}else{c.activeTexture(c.TEXTURE0+b7);c.bindTexture(c.TEXTURE_2D,b5.__webglTexture)}};function r(b3,b4){if(b3.width<=b4&&b3.height<=b4){return b3}var b2=Math.max(b3.width,b3.height);var b1=Math.floor(b3.width*b4/b2);var bZ=Math.floor(b3.height*b4/b2);var b0=document.createElement("canvas");b0.width=b1;b0.height=bZ;var bY=b0.getContext("2d");bY.drawImage(b3,0,0,b3.width,b3.height,0,0,b1,bZ);return b0}function bj(b9,ca){if(b9.image.length===6){if(b9.needsUpdate){if(!b9.image.__webglTextureCube){b9.image.__webglTextureCube=c.createTexture();aL.info.memory.textures++}c.activeTexture(c.TEXTURE0+ca);c.bindTexture(c.TEXTURE_CUBE_MAP,b9.image.__webglTextureCube);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,b9.flipY);var b1=b9 instanceof THREE.CompressedTexture;var bY=[];for(var b7=0;b7<6;b7++){if(aL.autoScaleCubemaps&&!b1){bY[b7]=r(b9.image[b7],al)}else{bY[b7]=b9.image[b7]}}var b4=bY[0],b8=a5(b4.width)&&a5(b4.height),bZ=aQ(b9.format),b2=aQ(b9.type);ah(c.TEXTURE_CUBE_MAP,b9,b8);for(var b7=0;b7<6;b7++){if(b1){var b0,b3=bY[b7].mipmaps;for(var b5=0,b6=b3.length;b5<b6;b5++){b0=b3[b5];c.compressedTexImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+b7,b5,bZ,b0.width,b0.height,0,b0.data)}}else{c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+b7,0,bZ,bZ,b2,bY[b7])}}if(b9.generateMipmaps&&b8){c.generateMipmap(c.TEXTURE_CUBE_MAP)}b9.needsUpdate=false;if(b9.onUpdate){b9.onUpdate()}}else{c.activeTexture(c.TEXTURE0+ca);c.bindTexture(c.TEXTURE_CUBE_MAP,b9.image.__webglTextureCube)}}}function a7(bY,bZ){c.activeTexture(c.TEXTURE0+bZ);c.bindTexture(c.TEXTURE_CUBE_MAP,bY.__webglTexture)}function a6(b0,bZ,bY){c.bindFramebuffer(c.FRAMEBUFFER,b0);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,bY,bZ.__webglTexture,0)}function q(bY,bZ){c.bindRenderbuffer(c.RENDERBUFFER,bY);if(bZ.depthBuffer&&!bZ.stencilBuffer){c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,bZ.width,bZ.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,bY)}else{if(bZ.depthBuffer&&bZ.stencilBuffer){c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,bZ.width,bZ.height);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,bY)}else{c.renderbufferStorage(c.RENDERBUFFER,c.RGBA4,bZ.width,bZ.height)}}}this.setRenderTarget=function(b2){var b4=(b2 instanceof THREE.WebGLRenderTargetCube);if(b2&&!b2.__webglFramebuffer){if(b2.depthBuffer===undefined){b2.depthBuffer=true}if(b2.stencilBuffer===undefined){b2.stencilBuffer=true}b2.addEventListener("dispose",N);b2.__webglTexture=c.createTexture();aL.info.memory.textures++;var b5=a5(b2.width)&&a5(b2.height),bY=aQ(b2.format),b0=aQ(b2.type);if(b4){b2.__webglFramebuffer=[];b2.__webglRenderbuffer=[];c.bindTexture(c.TEXTURE_CUBE_MAP,b2.__webglTexture);ah(c.TEXTURE_CUBE_MAP,b2,b5);for(var b1=0;b1<6;b1++){b2.__webglFramebuffer[b1]=c.createFramebuffer();b2.__webglRenderbuffer[b1]=c.createRenderbuffer();c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+b1,0,bY,b2.width,b2.height,0,bY,b0,null);a6(b2.__webglFramebuffer[b1],b2,c.TEXTURE_CUBE_MAP_POSITIVE_X+b1);q(b2.__webglRenderbuffer[b1],b2)}if(b5){c.generateMipmap(c.TEXTURE_CUBE_MAP)}}else{b2.__webglFramebuffer=c.createFramebuffer();if(b2.shareDepthFrom){b2.__webglRenderbuffer=b2.shareDepthFrom.__webglRenderbuffer}else{b2.__webglRenderbuffer=c.createRenderbuffer()}c.bindTexture(c.TEXTURE_2D,b2.__webglTexture);ah(c.TEXTURE_2D,b2,b5);c.texImage2D(c.TEXTURE_2D,0,bY,b2.width,b2.height,0,bY,b0,null);a6(b2.__webglFramebuffer,b2,c.TEXTURE_2D);if(b2.shareDepthFrom){if(b2.depthBuffer&&!b2.stencilBuffer){c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,b2.__webglRenderbuffer)}else{if(b2.depthBuffer&&b2.stencilBuffer){c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,b2.__webglRenderbuffer)}}}else{q(b2.__webglRenderbuffer,b2)}if(b5){c.generateMipmap(c.TEXTURE_2D)}}if(b4){c.bindTexture(c.TEXTURE_CUBE_MAP,null)}else{c.bindTexture(c.TEXTURE_2D,null)}c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null)}var b7,bZ,b8,b6,b3;if(b2){if(b4){b7=b2.__webglFramebuffer[b2.activeCubeFace]}else{b7=b2.__webglFramebuffer}bZ=b2.width;b8=b2.height;b6=0;b3=0}else{b7=null;bZ=bP;b8=aS;b6=a1;b3=a0}if(b7!==bD){c.bindFramebuffer(c.FRAMEBUFFER,b7);c.viewport(b6,b3,bZ,b8);bD=b7}x=bZ;aR=b8};function aU(bY){if(bY instanceof THREE.WebGLRenderTargetCube){c.bindTexture(c.TEXTURE_CUBE_MAP,bY.__webglTexture);c.generateMipmap(c.TEXTURE_CUBE_MAP);c.bindTexture(c.TEXTURE_CUBE_MAP,null)}else{c.bindTexture(c.TEXTURE_2D,bY.__webglTexture);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)}}function aM(bY){if(bY===THREE.NearestFilter||bY===THREE.NearestMipMapNearestFilter||bY===THREE.NearestMipMapLinearFilter){return c.NEAREST}return c.LINEAR}function aQ(bY){if(bY===THREE.RepeatWrapping){return c.REPEAT}if(bY===THREE.ClampToEdgeWrapping){return c.CLAMP_TO_EDGE}if(bY===THREE.MirroredRepeatWrapping){return c.MIRRORED_REPEAT}if(bY===THREE.NearestFilter){return c.NEAREST}if(bY===THREE.NearestMipMapNearestFilter){return c.NEAREST_MIPMAP_NEAREST}if(bY===THREE.NearestMipMapLinearFilter){return c.NEAREST_MIPMAP_LINEAR}if(bY===THREE.LinearFilter){return c.LINEAR}if(bY===THREE.LinearMipMapNearestFilter){return c.LINEAR_MIPMAP_NEAREST}if(bY===THREE.LinearMipMapLinearFilter){return c.LINEAR_MIPMAP_LINEAR}if(bY===THREE.UnsignedByteType){return c.UNSIGNED_BYTE}if(bY===THREE.UnsignedShort4444Type){return c.UNSIGNED_SHORT_4_4_4_4}if(bY===THREE.UnsignedShort5551Type){return c.UNSIGNED_SHORT_5_5_5_1}if(bY===THREE.UnsignedShort565Type){return c.UNSIGNED_SHORT_5_6_5}if(bY===THREE.ByteType){return c.BYTE}if(bY===THREE.ShortType){return c.SHORT}if(bY===THREE.UnsignedShortType){return c.UNSIGNED_SHORT}if(bY===THREE.IntType){return c.INT}if(bY===THREE.UnsignedIntType){return c.UNSIGNED_INT}if(bY===THREE.FloatType){return c.FLOAT}if(bY===THREE.AlphaFormat){return c.ALPHA}if(bY===THREE.RGBFormat){return c.RGB}if(bY===THREE.RGBAFormat){return c.RGBA}if(bY===THREE.LuminanceFormat){return c.LUMINANCE}if(bY===THREE.LuminanceAlphaFormat){return c.LUMINANCE_ALPHA}if(bY===THREE.AddEquation){return c.FUNC_ADD}if(bY===THREE.SubtractEquation){return c.FUNC_SUBTRACT}if(bY===THREE.ReverseSubtractEquation){return c.FUNC_REVERSE_SUBTRACT}if(bY===THREE.ZeroFactor){return c.ZERO}if(bY===THREE.OneFactor){return c.ONE}if(bY===THREE.SrcColorFactor){return c.SRC_COLOR}if(bY===THREE.OneMinusSrcColorFactor){return c.ONE_MINUS_SRC_COLOR}if(bY===THREE.SrcAlphaFactor){return c.SRC_ALPHA}if(bY===THREE.OneMinusSrcAlphaFactor){return c.ONE_MINUS_SRC_ALPHA}if(bY===THREE.DstAlphaFactor){return c.DST_ALPHA}if(bY===THREE.OneMinusDstAlphaFactor){return c.ONE_MINUS_DST_ALPHA}if(bY===THREE.DstColorFactor){return c.DST_COLOR}if(bY===THREE.OneMinusDstColorFactor){return c.ONE_MINUS_DST_COLOR}if(bY===THREE.SrcAlphaSaturateFactor){return c.SRC_ALPHA_SATURATE}if(aC!==undefined){if(bY===THREE.RGB_S3TC_DXT1_Format){return aC.COMPRESSED_RGB_S3TC_DXT1_EXT}if(bY===THREE.RGBA_S3TC_DXT1_Format){return aC.COMPRESSED_RGBA_S3TC_DXT1_EXT}if(bY===THREE.RGBA_S3TC_DXT3_Format){return aC.COMPRESSED_RGBA_S3TC_DXT3_EXT}if(bY===THREE.RGBA_S3TC_DXT5_Format){return aC.COMPRESSED_RGBA_S3TC_DXT5_EXT}}return 0}function aG(b1){if(U&&b1&&b1.useVertexTexture){return 1024}else{var bZ=c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS);var b0=Math.floor((bZ-20)/4);var bY=b0;if(b1!==undefined&&b1 instanceof THREE.SkinnedMesh){bY=Math.min(b1.bones.length,bY);if(bY<b1.bones.length){console.warn("WebGLRenderer: too many bones - "+b1.bones.length+", this GPU supports just "+bY+" (try OpenGL instead of ANGLE)")}}return bY}}function bd(b0){var bZ,b3,bY,b1,b5,b2,b4;b1=b5=b2=b4=0;for(bZ=0,b3=b0.length;bZ<b3;bZ++){bY=b0[bZ];if(bY.onlyShadow){continue}if(bY instanceof THREE.DirectionalLight){b1++}if(bY instanceof THREE.PointLight){b5++}if(bY instanceof THREE.SpotLight){b2++}if(bY instanceof THREE.HemisphereLight){b4++}}return{directional:b1,point:b5,spot:b2,hemi:b4}}function V(b0){var bZ,b2,bY,b1=0;for(bZ=0,b2=b0.length;bZ<b2;bZ++){bY=b0[bZ];if(!bY.castShadow){continue}if(bY instanceof THREE.SpotLight){b1++}if(bY instanceof THREE.DirectionalLight&&!bY.shadowCascade){b1++}}return b1}function bo(){try{if(!(c=aV.getContext("experimental-webgl",{alpha:bA,premultipliedAlpha:aY,antialias:bW,stencil:e,preserveDrawingBuffer:T}))){throw"Error creating WebGL context."}}catch(bY){console.error(bY)}m=c.getExtension("OES_texture_float");bb=c.getExtension("OES_standard_derivatives");p=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");aC=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");if(!m){console.log("THREE.WebGLRenderer: Float textures not supported.")}if(!bb){console.log("THREE.WebGLRenderer: Standard derivatives not supported.")}if(!p){console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.")}if(!aC){console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.")}if(c.getShaderPrecisionFormat===undefined){c.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}}function ba(){c.clearColor(0,0,0,1);c.clearDepth(1);c.clearStencil(0);c.enable(c.DEPTH_TEST);c.depthFunc(c.LEQUAL);c.frontFace(c.CCW);c.cullFace(c.BACK);c.enable(c.CULL_FACE);c.enable(c.BLEND);c.blendEquation(c.FUNC_ADD);c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA);c.clearColor(bp.r,bp.g,bp.b,S)}this.shadowMapPlugin=new THREE.ShadowMapPlugin();this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin());this.addPostPlugin(new THREE.LensFlarePlugin())};THREE.WebGLRenderTarget=function(c,a,b){this.width=c;this.height=a;b=b||{};this.wrapS=b.wrapS!==undefined?b.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=b.wrapT!==undefined?b.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=b.magFilter!==undefined?b.magFilter:THREE.LinearFilter;this.minFilter=b.minFilter!==undefined?b.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=b.anisotropy!==undefined?b.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=b.format!==undefined?b.format:THREE.RGBAFormat;this.type=b.type!==undefined?b.type:THREE.UnsignedByteType;this.depthBuffer=b.depthBuffer!==undefined?b.depthBuffer:true;this.stencilBuffer=b.stencilBuffer!==undefined?b.stencilBuffer:true;this.generateMipmaps=true;this.shareDepthFrom=null};THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.WebGLRenderTargetCube=function(c,a,b){THREE.WebGLRenderTarget.call(this,c,a,b);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3();this.positionScreen=new THREE.Vector4();this.visible=true};THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld);this.positionScreen.copy(a.positionScreen)};THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex();this.v2=new THREE.RenderableVertex();this.v3=new THREE.RenderableVertex();this.centroidModel=new THREE.Vector3();this.normalModel=new THREE.Vector3();this.normalModelView=new THREE.Vector3();this.vertexNormalsLength=0;this.vertexNormalsModel=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];this.vertexNormalsModelView=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];this.color=null;this.material=null;this.uvs=[[]];this.z=null};THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex();this.v2=new THREE.RenderableVertex();this.v3=new THREE.RenderableVertex();this.v4=new THREE.RenderableVertex();this.centroidModel=new THREE.Vector3();this.normalModel=new THREE.Vector3();this.normalModelView=new THREE.Vector3();this.vertexNormalsLength=0;this.vertexNormalsModel=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];this.vertexNormalsModelView=[new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3(),new THREE.Vector3()];this.color=null;this.material=null;this.uvs=[[]];this.z=null};THREE.RenderableObject=function(){this.object=null;this.z=null};THREE.RenderableParticle=function(){this.object=null;this.x=null;this.y=null;this.z=null;this.rotation=null;this.scale=new THREE.Vector2();this.material=null};THREE.RenderableLine=function(){this.z=null;this.v1=new THREE.RenderableVertex();this.v2=new THREE.RenderableVertex();this.vertexColors=[new THREE.Color(),new THREE.Color()];this.material=null};THREE.GeometryUtils={merge:function(o,k,D){var v,h,n=o.vertices.length,s=o.faceVertexUvs[0].length,m=k instanceof THREE.Mesh?k.geometry:k,d=o.vertices,c=m.vertices,b=o.faces,a=m.faces,A=o.faceVertexUvs[0],z=m.faceVertexUvs[0];if(D===undefined){D=0}if(k instanceof THREE.Mesh){k.matrixAutoUpdate&&k.updateMatrix();v=k.matrix;h=new THREE.Matrix3().getNormalMatrix(v)}for(var w=0,l=c.length;w<l;w++){var B=c[w];var r=B.clone();if(v){r.applyMatrix4(v)}d.push(r)}for(w=0,l=a.length;w<l;w++){var g=a[w],q,C,t,p=g.vertexNormals,y=g.vertexColors;if(g instanceof THREE.Face3){q=new THREE.Face3(g.a+n,g.b+n,g.c+n)}else{if(g instanceof THREE.Face4){q=new THREE.Face4(g.a+n,g.b+n,g.c+n,g.d+n)}}q.normal.copy(g.normal);if(h){q.normal.applyMatrix3(h).normalize()}for(var u=0,x=p.length;u<x;u++){C=p[u].clone();if(h){C.applyMatrix3(h).normalize()}q.vertexNormals.push(C)}q.color.copy(g.color);for(var u=0,x=y.length;u<x;u++){t=y[u];q.vertexColors.push(t.clone())}q.materialIndex=g.materialIndex+D;q.centroid.copy(g.centroid);if(v){q.centroid.applyMatrix4(v)}b.push(q)}for(w=0,l=z.length;w<l;w++){var f=z[w],e=[];for(var u=0,x=f.length;u<x;u++){e.push(new THREE.Vector2(f[u].x,f[u].y))}A.push(e)}},removeMaterials:function(f,g){var a={};for(var d=0,c=g.length;d<c;d++){a[g[d]]=true}var e,b=[];for(var d=0,c=f.faces.length;d<c;d++){e=f.faces[d];if(!(e.materialIndex in a)){b.push(e)}}f.faces=b},randomPointInTriangle:function(h,f,k){var g,e,j,d=new THREE.Vector3(),i=THREE.GeometryUtils.__v1;g=THREE.GeometryUtils.random();e=THREE.GeometryUtils.random();if((g+e)>1){g=1-g;e=1-e}j=1-g-e;d.copy(h);d.multiplyScalar(g);i.copy(f);i.multiplyScalar(e);d.add(i);i.copy(k);i.multiplyScalar(j);d.add(i);return d},randomPointInFace:function(f,g,e){var d,c,b,j;if(f instanceof THREE.Face3){d=g.vertices[f.a];c=g.vertices[f.b];b=g.vertices[f.c];return THREE.GeometryUtils.randomPointInTriangle(d,c,b)}else{if(f instanceof THREE.Face4){d=g.vertices[f.a];c=g.vertices[f.b];b=g.vertices[f.c];j=g.vertices[f.d];var i,h;if(e){if(f._area1&&f._area2){i=f._area1;h=f._area2}else{i=THREE.GeometryUtils.triangleArea(d,c,j);h=THREE.GeometryUtils.triangleArea(c,b,j);f._area1=i;f._area2=h}}else{i=THREE.GeometryUtils.triangleArea(d,c,j),h=THREE.GeometryUtils.triangleArea(c,b,j)}var a=THREE.GeometryUtils.random()*(i+h);if(a<i){return THREE.GeometryUtils.randomPointInTriangle(d,c,j)}else{return THREE.GeometryUtils.randomPointInTriangle(c,b,j)}}}},randomPointsInGeometry:function(b,k){var e,o,a=b.faces,c=b.vertices,f=a.length,q=0,t=[],s,p,m,l;for(o=0;o<f;o++){e=a[o];if(e instanceof THREE.Face3){s=c[e.a];p=c[e.b];m=c[e.c];e._area=THREE.GeometryUtils.triangleArea(s,p,m)}else{if(e instanceof THREE.Face4){s=c[e.a];p=c[e.b];m=c[e.c];l=c[e.d];e._area1=THREE.GeometryUtils.triangleArea(s,p,l);e._area2=THREE.GeometryUtils.triangleArea(p,m,l);e._area=e._area1+e._area2}}q+=e._area;t[o]=q}function h(n){function r(x,v){if(v<x){return x}var w=x+Math.floor((v-x)/2);if(t[w]>n){return r(x,w-1)}else{if(t[w]<n){return r(w+1,v)}else{return w}}}var i=r(0,t.length-1);return i}var j,d,g=[];var u={};for(o=0;o<k;o++){j=THREE.GeometryUtils.random()*q;d=h(j);g[o]=THREE.GeometryUtils.randomPointInFace(a[d],b,true);if(!u[d]){u[d]=1}else{u[d]+=1}}return g},triangleArea:function(b,a,e){var d=THREE.GeometryUtils.__v1,c=THREE.GeometryUtils.__v2;d.subVectors(a,b);c.subVectors(e,b);d.cross(c);return 0.5*d.length()},center:function(c){c.computeBoundingBox();var b=c.boundingBox;var a=new THREE.Vector3();a.addVectors(b.min,b.max);a.multiplyScalar(-0.5);c.applyMatrix(new THREE.Matrix4().makeTranslation(a.x,a.y,a.z));c.computeBoundingBox();return a},normalizeUVs:function(g){var b=g.faceVertexUvs[0];for(var f=0,a=b.length;f<a;f++){var e=b[f];for(var c=0,d=e.length;c<d;c++){if(e[c].x!==1){e[c].x=e[c].x-Math.floor(e[c].x)}if(e[c].y!==1){e[c].y=e[c].y-Math.floor(e[c].y)}}}},triangulateQuads:function(g){var u,m,t,v;var e=[];var f=[];var w=[];for(u=0,m=g.faceUvs.length;u<m;u++){f[u]=[]}for(u=0,m=g.faceVertexUvs.length;u<m;u++){w[u]=[]}for(u=0,m=g.faces.length;u<m;u++){var k=g.faces[u];if(k instanceof THREE.Face4){var C=k.a;var B=k.b;var A=k.c;var z=k.d;var s=new THREE.Face3();var r=new THREE.Face3();s.color.copy(k.color);r.color.copy(k.color);s.materialIndex=k.materialIndex;r.materialIndex=k.materialIndex;s.a=C;s.b=B;s.c=z;r.a=B;r.b=A;r.c=z;if(k.vertexColors.length===4){s.vertexColors[0]=k.vertexColors[0].clone();s.vertexColors[1]=k.vertexColors[1].clone();s.vertexColors[2]=k.vertexColors[3].clone();r.vertexColors[0]=k.vertexColors[1].clone();r.vertexColors[1]=k.vertexColors[2].clone();r.vertexColors[2]=k.vertexColors[3].clone()}e.push(s,r);for(t=0,v=g.faceVertexUvs.length;t<v;t++){if(g.faceVertexUvs[t].length){var n=g.faceVertexUvs[t][u];var q=n[0];var p=n[1];var o=n[2];var l=n[3];var y=[q.clone(),p.clone(),l.clone()];var x=[p.clone(),o.clone(),l.clone()];w[t].push(y,x)}}for(t=0,v=g.faceUvs.length;t<v;t++){if(g.faceUvs[t].length){var h=g.faceUvs[t][u];f[t].push(h,h)}}}else{e.push(k);for(t=0,v=g.faceUvs.length;t<v;t++){f[t].push(g.faceUvs[t][u])}for(t=0,v=g.faceVertexUvs.length;t<v;t++){w[t].push(g.faceVertexUvs[t][u])}}}g.faces=e;g.faceUvs=f;g.faceVertexUvs=w;g.computeCentroids();g.computeFaceNormals();g.computeVertexNormals();if(g.hasTangents){g.computeTangents()}},setMaterialIndex:function(g,d,f,c){var a=g.faces;var h=f||0;var b=c||a.length-1;for(var e=h;e<=b;e++){a[e].materialIndex=d}}};THREE.GeometryUtils.random=THREE.Math.random16;THREE.GeometryUtils.__v1=new THREE.Vector3();THREE.GeometryUtils.__v2=new THREE.Vector3();THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(c,b,d,f){var g=new Image();var e=new THREE.Texture(g,b);var a=new THREE.ImageLoader();a.addEventListener("load",function(h){e.image=h.content;e.needsUpdate=true;if(d){d(e)}});a.addEventListener("error",function(h){if(f){f(h.message)}});a.crossOrigin=this.crossOrigin;a.load(c,g);e.sourceFile=c;return e},loadCompressedTexture:function(b,a,c,f){var e=new THREE.CompressedTexture();e.mapping=a;var d=new XMLHttpRequest();d.onload=function(){var g=d.response;var h=THREE.ImageUtils.parseDDS(g,true);e.format=h.format;e.mipmaps=h.mipmaps;e.image.width=h.width;e.image.height=h.height;e.generateMipmaps=false;e.needsUpdate=true;if(c){c(e)}};d.onerror=f;d.open("GET",b,true);d.responseType="arraybuffer";d.send(null);return e},loadTextureCube:function(e,b,g,d){var h=[];h.loadCount=0;var f=new THREE.Texture();f.image=h;if(b!==undefined){f.mapping=b}f.flipY=false;for(var c=0,j=e.length;c<j;++c){var a=new Image();h[c]=a;a.onload=function(){h.loadCount+=1;if(h.loadCount===6){f.needsUpdate=true;if(g){g(f)}}};a.onerror=d;a.crossOrigin=this.crossOrigin;a.src=e[c]}return f},loadCompressedTextureCube:function(h,b,k,g){var l=[];l.loadCount=0;var j=new THREE.CompressedTexture();j.image=l;if(b!==undefined){j.mapping=b}j.flipY=false;j.generateMipmaps=false;var d=function(n,i){return function(){var o=n.response;var p=THREE.ImageUtils.parseDDS(o,true);i.format=p.format;i.mipmaps=p.mipmaps;i.width=p.width;i.height=p.height;l.loadCount+=1;if(l.loadCount===6){j.format=p.format;j.needsUpdate=true;if(k){k(j)}}}};if(h instanceof Array){for(var f=0,m=h.length;f<m;++f){var a={};l[f]=a;var e=new XMLHttpRequest();e.onload=d(e,a);e.onerror=g;var c=h[f];e.open("GET",c,true);e.responseType="arraybuffer";e.send(null)}}else{var c=h;var e=new XMLHttpRequest();e.onload=function(){var o=e.response;var p=THREE.ImageUtils.parseDDS(o,true);if(p.isCubemap){var n=p.mipmaps.length/p.mipmapCount;for(var r=0;r<n;r++){l[r]={mipmaps:[]};for(var q=0;q<p.mipmapCount;q++){l[r].mipmaps.push(p.mipmaps[r*p.mipmapCount+q]);l[r].format=p.format;l[r].width=p.width;l[r].height=p.height}}j.format=p.format;j.needsUpdate=true;if(k){k(j)}}};e.onerror=g;e.open("GET",c,true);e.responseType="arraybuffer";e.send(null)}return j},parseDDS:function(E,ac){var N={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};var D=542327876;var R=1,C=2,ae=4,F=8,T=4096,P=131072,y=524288,f=8388608;var W=8,m=4194304,l=4096;var V=512,O=1024,aa=2048,M=4096,Z=8192,L=16384,X=32768,q=2097152;var B=1,G=2,ah=4,t=64,U=512,z=131072;function ag(i){return i.charCodeAt(0)+(i.charCodeAt(1)<<8)+(i.charCodeAt(2)<<16)+(i.charCodeAt(3)<<24)}function x(i){return String.fromCharCode(i&255,(i>>8)&255,(i>>16)&255,(i>>24)&255)}var k=ag("DXT1");var j=ag("DXT3");var g=ag("DXT5");var b=31;var A=0;var Y=1;var af=2;var ab=3;var K=4;var p=7;var Q=20;var d=21;var o=27;var s=28;var r=29;var n=30;var h=new Int32Array(E,0,b);if(h[A]!==D){console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header");return N}if(!h[Q]&ah){console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code");return N}var I;var H=h[d];switch(H){case k:I=8;N.format=THREE.RGB_S3TC_DXT1_Format;break;case j:I=16;N.format=THREE.RGBA_S3TC_DXT3_Format;break;case g:I=16;N.format=THREE.RGBA_S3TC_DXT5_Format;break;default:console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",x(H));return N}N.mipmapCount=1;if(h[af]&P&&ac!==false){N.mipmapCount=Math.max(1,h[p])}N.isCubemap=h[s]&V?true:false;N.width=h[K];N.height=h[ab];var S=h[Y]+4;var a=N.width;var e=N.height;var w=N.isCubemap?6:1;for(var v=0;v<w;v++){for(var ad=0;ad<N.mipmapCount;ad++){var u=Math.max(4,a)/4*Math.max(4,e)/4*I;var J=new Uint8Array(E,S,u);var c={data:J,width:a,height:e};N.mipmaps.push(c);S+=u;a=Math.max(a*0.5,1);e=Math.max(e*0.5,1)}a=N.width;e=N.height}return N},getNormalMap:function(q,C){var d=function(x,i){return[x[1]*i[2]-x[2]*i[1],x[2]*i[0]-x[0]*i[2],x[0]*i[1]-x[1]*i[0]]};var v=function(x,i){return[x[0]-i[0],x[1]-i[1],x[2]-i[2]]};var s=function(x){var i=Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2]);return[x[0]/i,x[1]/i,x[2]/i]};C=C|1;var r=q.width;var p=q.height;var e=document.createElement("canvas");e.width=r;e.height=p;var c=e.getContext("2d");c.drawImage(q,0,0);var D=c.getImageData(0,0,r,p).data;var w=c.createImageData(r,p);var k=w.data;for(var m=0;m<r;m++){for(var l=0;l<p;l++){var f=l-1<0?0:l-1;var h=l+1>p-1?p-1:l+1;var g=m-1<0?0:m-1;var j=m+1>r-1?r-1:m+1;var u=[];var B=[0,0,D[(l*r+m)*4]/255*C];u.push([-1,0,D[(l*r+g)*4]/255*C]);u.push([-1,-1,D[(f*r+g)*4]/255*C]);u.push([0,-1,D[(f*r+m)*4]/255*C]);u.push([1,-1,D[(f*r+j)*4]/255*C]);u.push([1,0,D[(l*r+j)*4]/255*C]);u.push([1,1,D[(h*r+j)*4]/255*C]);u.push([0,1,D[(h*r+m)*4]/255*C]);u.push([-1,1,D[(h*r+g)*4]/255*C]);var o=[];var z=u.length;for(var t=0;t<z;t++){var b=u[t];var a=u[(t+1)%z];b=v(b,B);a=v(a,B);o.push(s(d(b,a)))}var A=[0,0,0];for(var t=0;t<o.length;t++){A[0]+=o[t][0];A[1]+=o[t][1];A[2]+=o[t][2]}A[0]/=o.length;A[1]/=o.length;A[2]/=o.length;var n=(l*r+m)*4;k[n]=((A[0]+1)/2*255)|0;k[n+1]=((A[1]+1)/2*255)|0;k[n+2]=(A[2]*255)|0;k[n+3]=255}}c.putImageData(w,0,0);return e},generateDataTexture:function(c,l,d){var m=c*l;var f=new Uint8Array(3*m);var a=Math.floor(d.r*255);var h=Math.floor(d.g*255);var k=Math.floor(d.b*255);for(var e=0;e<m;e++){f[e*3]=a;f[e*3+1]=h;f[e*3+2]=k}var j=new THREE.DataTexture(f,c,l,THREE.RGBFormat);j.needsUpdate=true;return j}};THREE.SceneUtils={createMultiMaterialObject:function(e,b){var d=new THREE.Object3D();for(var c=0,a=b.length;c<a;c++){d.add(new THREE.Mesh(e,b[c]))}return d},detach:function(c,a,b){c.applyMatrix(a.matrixWorld);a.remove(c);b.add(c)},attach:function(d,c,a){var b=new THREE.Matrix4();b.getInverse(a.matrixWorld);d.applyMatrix(b);c.remove(d);a.add(d)}};THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(d){var a=d.familyName.toLowerCase();var b=this;b.faces[a]=b.faces[a]||{};b.faces[a][d.cssFontWeight]=b.faces[a][d.cssFontWeight]||{};b.faces[a][d.cssFontWeight][d.cssFontStyle]=d;var c=b.faces[a][d.cssFontWeight][d.cssFontStyle]=d;return d},drawText:function(n){var a=[],e=[];var j,c,l=this.getFace(),g=this.size/l.resolution,h=0,m=String(n).split(""),d=m.length;var f=[];for(j=0;j<d;j++){var o=new THREE.Path();var k=this.extractGlyphPoints(m[j],l,g,h,o);h+=k.offset;f.push(k.path)}var b=h/2;return{paths:f,offset:b}},extractGlyphPoints:function(C,j,G,f,r){var H=[];var v,s,d,e,u,b,E,B,l,k,h,g,q,A,o,z,n,w,a,m=j.glyphs[C]||j.glyphs["?"];if(!m){return}if(m.o){e=m._cachedOutline||(m._cachedOutline=m.o.split(" "));b=e.length;E=G;B=G;for(v=0;v<b;){u=e[v++];switch(u){case"m":l=e[v++]*E+f;k=e[v++]*B;r.moveTo(l,k);break;case"l":l=e[v++]*E+f;k=e[v++]*B;r.lineTo(l,k);break;case"q":h=e[v++]*E+f;g=e[v++]*B;o=e[v++]*E+f;z=e[v++]*B;r.quadraticCurveTo(o,z,h,g);a=H[H.length-1];if(a){q=a.x;A=a.y;for(s=1,d=this.divisions;s<=d;s++){var p=s/d;var F=THREE.Shape.Utils.b2(p,q,o,h);var D=THREE.Shape.Utils.b2(p,A,z,g)}}break;case"b":h=e[v++]*E+f;g=e[v++]*B;o=e[v++]*E+f;z=e[v++]*-B;n=e[v++]*E+f;w=e[v++]*-B;r.bezierCurveTo(h,g,o,z,n,w);a=H[H.length-1];if(a){q=a.x;A=a.y;for(s=1,d=this.divisions;s<=d;s++){var p=s/d;var F=THREE.Shape.Utils.b3(p,q,o,n,h);var D=THREE.Shape.Utils.b3(p,A,z,w,g)}}break}}}return{offset:m.ha*G,path:r}}};THREE.FontUtils.generateShapes=function(i,j){j=j||{};var l=j.size!==undefined?j.size:100;var h=j.curveSegments!==undefined?j.curveSegments:4;var d=j.font!==undefined?j.font:"helvetiker";var g=j.weight!==undefined?j.weight:"normal";var a=j.style!==undefined?j.style:"normal";THREE.FontUtils.size=l;THREE.FontUtils.divisions=h;THREE.FontUtils.face=d;THREE.FontUtils.weight=g;THREE.FontUtils.style=a;var f=THREE.FontUtils.drawText(i);var k=f.paths;var c=[];for(var b=0,e=k.length;b<e;b++){Array.prototype.push.apply(c,k[b].toShapes())}return c};(function(c){var b=1e-10;var e=function(g,r){var f=g.length;if(f<3){return null}var A=[],p=[],j=[];var x,q,o;if(d(g)>0){for(q=0;q<f;q++){p[q]=q}}else{for(q=0;q<f;q++){p[q]=(f-1)-q}}var i=f;var h=2*i;for(q=i-1;i>2;){if((h--)<=0){console.log("Warning, unable to triangulate polygon!");if(r){return j}return A}x=q;if(i<=x){x=0}q=x+1;if(i<=q){q=0}o=q+1;if(i<=o){o=0}if(a(g,x,q,o,i,p)){var m,l,k,z,y;m=p[x];l=p[q];k=p[o];A.push([g[m],g[l],g[k]]);j.push([p[x],p[q],p[o]]);for(z=q,y=q+1;y<i;z++,y++){p[z]=p[y]}i--;h=2*i}}if(r){return j}return A};var d=function(g){var j=g.length;var f=0;for(var i=j-1,h=0;h<j;i=h++){f+=g[i].x*g[h].y-g[h].x*g[i].y}return f*0.5};var a=function(G,A,z,t,F,N){var E;var x,r,L,J;var i,g,D,C;x=G[N[A]].x;r=G[N[A]].y;L=G[N[z]].x;J=G[N[z]].y;i=G[N[t]].x;g=G[N[t]].y;if(b>(((L-x)*(g-r))-((J-r)*(i-x)))){return false}var h,f,y,s,M,K;var l,k,I,H,o,m;var j,q,B;h=i-L;f=g-J;y=x-i;s=r-g;M=L-x;K=J-r;for(E=0;E<F;E++){if((E===A)||(E===z)||(E===t)){continue}D=G[N[E]].x;C=G[N[E]].y;l=D-x;k=C-r;I=D-L;H=C-J;o=D-i;m=C-g;B=h*H-f*I;j=M*k-K*l;q=y*m-s*o;if((B>=0)&&(q>=0)&&(j>=0)){return false}}return true};c.Triangulate=e;c.Triangulate.area=d;return c})(THREE.FontUtils);self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace};THREE.typeface_js=self._typeface_js;THREE.Curve=function(){};THREE.Curve.prototype.getPoint=function(a){console.log("Warning, getPoint() not implemented!");return null};THREE.Curve.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)};THREE.Curve.prototype.getPoints=function(a){if(!a){a=5}var c,b=[];for(c=0;c<=a;c++){b.push(this.getPoint(c/a))}return b};THREE.Curve.prototype.getSpacedPoints=function(a){if(!a){a=5}var c,b=[];for(c=0;c<=a;c++){b.push(this.getPointAt(c/a))}return b};THREE.Curve.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]};THREE.Curve.prototype.getLengths=function(b){if(!b){b=(this.__arcLengthDivisions)?(this.__arcLengthDivisions):200}if(this.cacheArcLengths&&(this.cacheArcLengths.length==b+1)&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=false;var a=[];var f,d=this.getPoint(0);var e,c=0;a.push(0);for(e=1;e<=b;e++){f=this.getPoint(e/b);c+=f.distanceTo(d);a.push(c);d=f}this.cacheArcLengths=a;return a};THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=true;this.getLengths()};THREE.Curve.prototype.getUtoTmapping=function(m,a){var b=this.getLengths();var e=0,j=b.length;var k;if(a){k=a}else{k=m*b[j-1]}var h=0,d=j-1,l;while(h<=d){e=Math.floor(h+(d-h)/2);l=b[e]-k;if(l<0){h=e+1;continue}else{if(l>0){d=e-1;continue}else{d=e;break}}}e=d;if(b[e]==k){var o=e/(j-1);return o}var f=b[e];var n=b[e+1];var c=n-f;var g=(k-f)/c;var o=(e+g)/(j-1);return o};THREE.Curve.prototype.getTangent=function(b){var g=0.0001;var d=b-g;var c=b+g;if(d<0){d=0}if(c>1){c=1}var f=this.getPoint(d);var e=this.getPoint(c);var a=e.clone().sub(f);return a.normalize()};THREE.Curve.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)};THREE.LineCurve=function(b,a){this.v1=b;this.v2=a};THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.LineCurve.prototype.getPoint=function(b){var a=this.v2.clone().sub(this.v1);a.multiplyScalar(b).add(this.v1);return a};THREE.LineCurve.prototype.getPointAt=function(a){return this.getPoint(a)};THREE.LineCurve.prototype.getTangent=function(a){var b=this.v2.clone().sub(this.v1);return b.normalize()};THREE.QuadraticBezierCurve=function(a,c,b){this.v0=a;this.v1=c;this.v2=b};THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.QuadraticBezierCurve.prototype.getPoint=function(c){var b,a;b=THREE.Shape.Utils.b2(c,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(c,this.v0.y,this.v1.y,this.v2.y);return new THREE.Vector2(b,a)};THREE.QuadraticBezierCurve.prototype.getTangent=function(c){var b,a;b=THREE.Curve.Utils.tangentQuadraticBezier(c,this.v0.x,this.v1.x,this.v2.x);a=THREE.Curve.Utils.tangentQuadraticBezier(c,this.v0.y,this.v1.y,this.v2.y);var d=new THREE.Vector2(b,a);d.normalize();return d};THREE.CubicBezierCurve=function(a,d,c,b){this.v0=a;this.v1=d;this.v2=c;this.v3=b};THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype);THREE.CubicBezierCurve.prototype.getPoint=function(c){var b,a;b=THREE.Shape.Utils.b3(c,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(c,this.v0.y,this.v1.y,this.v2.y,this.v3.y);return new THREE.Vector2(b,a)};THREE.CubicBezierCurve.prototype.getTangent=function(c){var b,a;b=THREE.Curve.Utils.tangentCubicBezier(c,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Curve.Utils.tangentCubicBezier(c,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var d=new THREE.Vector2(b,a);d.normalize();return d};THREE.SplineCurve=function(a){this.points=(a==undefined)?[]:a};THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype);THREE.SplineCurve.prototype.getPoint=function(d){var b=new THREE.Vector2();var h=[];var e=this.points,a,g,f;a=(e.length-1)*d;g=Math.floor(a);f=a-g;h[0]=g==0?g:g-1;h[1]=g;h[2]=g>e.length-2?e.length-1:g+1;h[3]=g>e.length-3?e.length-1:g+2;b.x=THREE.Curve.Utils.interpolate(e[h[0]].x,e[h[1]].x,e[h[2]].x,e[h[3]].x,f);b.y=THREE.Curve.Utils.interpolate(e[h[0]].y,e[h[1]].y,e[h[2]].y,e[h[3]].y,f);return b};THREE.EllipseCurve=function(f,e,g,a,d,c,b){this.aX=f;this.aY=e;this.xRadius=g;this.yRadius=a;this.aStartAngle=d;this.aEndAngle=c;this.aClockwise=b};THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype);THREE.EllipseCurve.prototype.getPoint=function(c){var e=this.aEndAngle-this.aStartAngle;if(!this.aClockwise){c=1-c}var d=this.aStartAngle+c*e;var b=this.aX+this.xRadius*Math.cos(d);var a=this.aY+this.yRadius*Math.sin(d);return new THREE.Vector2(b,a)};THREE.ArcCurve=function(e,d,f,c,b,a){THREE.EllipseCurve.call(this,e,d,f,f,c,b,a)};THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype);THREE.Curve.Utils={tangentQuadraticBezier:function(a,d,c,b){return 2*(1-a)*(c-d)+2*a*(b-c)},tangentCubicBezier:function(a,e,d,c,b){return -3*e*(1-a)*(1-a)+3*d*(1-a)*(1-a)-6*a*d*(1-a)+6*a*c*(1-a)-3*a*a*c+3*a*a*b},tangentSpline:function(i,h,g,f,d){var e=6*i*i-6*i;var b=3*i*i-4*i+1;var c=-6*i*i+6*i;var a=3*i*i-2*i;return e+b+c+a},interpolate:function(h,g,e,d,i){var f=(e-h)*0.5;var c=(d-g)*0.5;var b=i*i;var a=i*b;return(2*g-2*e+f+c)*a+(-3*g+3*e-2*f-c)*b+f*i+g}};THREE.Curve.create=function(a,b){a.prototype=Object.create(THREE.Curve.prototype);a.prototype.getPoint=b;return a};THREE.LineCurve3=THREE.Curve.create(function(b,a){this.v1=b;this.v2=a},function(a){var b=new THREE.Vector3();b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b});THREE.QuadraticBezierCurve3=THREE.Curve.create(function(a,c,b){this.v0=a;this.v1=c;this.v2=b},function(c){var b,a,d;b=THREE.Shape.Utils.b2(c,this.v0.x,this.v1.x,this.v2.x);a=THREE.Shape.Utils.b2(c,this.v0.y,this.v1.y,this.v2.y);d=THREE.Shape.Utils.b2(c,this.v0.z,this.v1.z,this.v2.z);return new THREE.Vector3(b,a,d)});THREE.CubicBezierCurve3=THREE.Curve.create(function(a,d,c,b){this.v0=a;this.v1=d;this.v2=c;this.v3=b},function(c){var b,a,d;b=THREE.Shape.Utils.b3(c,this.v0.x,this.v1.x,this.v2.x,this.v3.x);a=THREE.Shape.Utils.b3(c,this.v0.y,this.v1.y,this.v2.y,this.v3.y);d=THREE.Shape.Utils.b3(c,this.v0.z,this.v1.z,this.v2.z,this.v3.z);return new THREE.Vector3(b,a,d)});THREE.SplineCurve3=THREE.Curve.create(function(a){this.points=(a==undefined)?[]:a},function(l){var j=new THREE.Vector3();var d=[];var i=this.points,g,a,b;g=(i.length-1)*l;a=Math.floor(g);b=g-a;d[0]=a==0?a:a-1;d[1]=a;d[2]=a>i.length-2?i.length-1:a+1;d[3]=a>i.length-3?i.length-1:a+2;var k=i[d[0]],h=i[d[1]],f=i[d[2]],e=i[d[3]];j.x=THREE.Curve.Utils.interpolate(k.x,h.x,f.x,e.x,b);j.y=THREE.Curve.Utils.interpolate(k.y,h.y,f.y,e.y,b);j.z=THREE.Curve.Utils.interpolate(k.z,h.z,f.z,e.z,b);return j});THREE.ClosedSplineCurve3=THREE.Curve.create(function(a){this.points=(a==undefined)?[]:a},function(d){var b=new THREE.Vector3();var h=[];var e=this.points,a,g,f;a=(e.length-0)*d;g=Math.floor(a);f=a-g;g+=g>0?0:(Math.floor(Math.abs(g)/e.length)+1)*e.length;h[0]=(g-1)%e.length;h[1]=(g)%e.length;h[2]=(g+1)%e.length;h[3]=(g+2)%e.length;b.x=THREE.Curve.Utils.interpolate(e[h[0]].x,e[h[1]].x,e[h[2]].x,e[h[3]].x,f);b.y=THREE.Curve.Utils.interpolate(e[h[0]].y,e[h[1]].y,e[h[2]].y,e[h[3]].y,f);b.z=THREE.Curve.Utils.interpolate(e[h[0]].z,e[h[1]].z,e[h[2]].z,e[h[3]].z,f);return b});THREE.CurvePath=function(){this.curves=[];this.bends=[];this.autoClose=false};THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype);THREE.CurvePath.prototype.add=function(a){this.curves.push(a)};THREE.CurvePath.prototype.checkConnection=function(){};THREE.CurvePath.prototype.closePath=function(){var b=this.curves[0].getPoint(0);var a=this.curves[this.curves.length-1].getPoint(1);if(!b.equals(a)){this.curves.push(new THREE.LineCurve(a,b))}};THREE.CurvePath.prototype.getPoint=function(c){var h=c*this.getLength();var g=this.getCurveLengths();var b=0,e,f;while(b<g.length){if(g[b]>=h){e=g[b]-h;f=this.curves[b];var a=1-e/f.getLength();return f.getPointAt(a);break}b++}return null};THREE.CurvePath.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-1]};THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length){return this.cacheLengths}var d=[],c=0;var b,a=this.curves.length;for(b=0;b<a;b++){c+=this.curves[b].getLength();d.push(c)}this.cacheLengths=d;return d};THREE.CurvePath.prototype.getBoundingBox=function(){var m=this.getPoints();var b,a,n;var f,e,d;b=a=Number.NEGATIVE_INFINITY;f=e=Number.POSITIVE_INFINITY;var c,g,l,h;var k=m[0] instanceof THREE.Vector3;h=k?new THREE.Vector3():new THREE.Vector2();for(g=0,l=m.length;g<l;g++){c=m[g];if(c.x>b){b=c.x}else{if(c.x<f){f=c.x}}if(c.y>a){a=c.y}else{if(c.y<e){e=c.y}}if(k){if(c.z>n){n=c.z}else{if(c.z<d){d=c.z}}}h.add(c)}var j={minX:f,minY:e,maxX:b,maxY:a,centroid:h.divideScalar(l)};if(k){j.maxZ=n;j.minZ=d}return j};THREE.CurvePath.prototype.createPointsGeometry=function(a){var b=this.getPoints(a,true);return this.createGeometry(b)};THREE.CurvePath.prototype.createSpacedPointsGeometry=function(a){var b=this.getSpacedPoints(a,true);return this.createGeometry(b)};THREE.CurvePath.prototype.createGeometry=function(b){var c=new THREE.Geometry();for(var a=0;a<b.length;a++){c.vertices.push(new THREE.Vector3(b[a].x,b[a].y,b[a].z||0))}return c};THREE.CurvePath.prototype.addWrapPath=function(a){this.bends.push(a)};THREE.CurvePath.prototype.getTransformedPoints=function(c,e){var b=this.getPoints(c);var d,a;if(!e){e=this.bends}for(d=0,a=e.length;d<a;d++){b=this.getWrapPoints(b,e[d])}return b};THREE.CurvePath.prototype.getTransformedSpacedPoints=function(c,e){var b=this.getSpacedPoints(c);var d,a;if(!e){e=this.bends}for(d=0,a=e.length;d<a;d++){b=this.getWrapPoints(b,e[d])}return b};THREE.CurvePath.prototype.getWrapPoints=function(f,l){var a=this.getBoundingBox();var d,g,b,j,h,k;for(d=0,g=f.length;d<g;d++){b=f[d];j=b.x;h=b.y;k=j/a.maxX;k=l.getUtoTmapping(k,j);var c=l.getPoint(k);var e=l.getNormalVector(k).multiplyScalar(h);b.x=c.x+e.x;b.y=c.y+e.y}return f};THREE.Gyroscope=function(){THREE.Object3D.call(this)};THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype);THREE.Gyroscope.prototype.updateMatrixWorld=function(c){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||c){if(this.parent){this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorld.decompose(this.translationWorld,this.rotationWorld,this.scaleWorld);this.matrix.decompose(this.translationObject,this.rotationObject,this.scaleObject);this.matrixWorld.makeFromPositionQuaternionScale(this.translationWorld,this.rotationObject,this.scaleWorld)}else{this.matrixWorld.copy(this.matrix)}this.matrixWorldNeedsUpdate=false;c=true}for(var b=0,a=this.children.length;b<a;b++){this.children[b].updateMatrixWorld(c)}};THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3();THREE.Gyroscope.prototype.translationObject=new THREE.Vector3();THREE.Gyroscope.prototype.rotationWorld=new THREE.Quaternion();THREE.Gyroscope.prototype.rotationObject=new THREE.Quaternion();THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3();THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3();THREE.Path=function(a){THREE.CurvePath.call(this);this.actions=[];if(a){this.fromPoints(a)}};THREE.Path.prototype=Object.create(THREE.CurvePath.prototype);THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"};THREE.Path.prototype.fromPoints=function(b){this.moveTo(b[0].x,b[0].y);for(var a=1,c=b.length;a<c;a++){this.lineTo(b[a].x,b[a].y)}};THREE.Path.prototype.moveTo=function(a,c){var b=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:b})};THREE.Path.prototype.lineTo=function(a,g){var b=Array.prototype.slice.call(arguments);var e=this.actions[this.actions.length-1].args;var c=e[e.length-2];var d=e[e.length-1];var f=new THREE.LineCurve(new THREE.Vector2(c,d),new THREE.Vector2(a,g));this.curves.push(f);this.actions.push({action:THREE.PathActions.LINE_TO,args:b})};THREE.Path.prototype.quadraticCurveTo=function(e,b,g,f){var h=Array.prototype.slice.call(arguments);var a=this.actions[this.actions.length-1].args;var c=a[a.length-2];var i=a[a.length-1];var d=new THREE.QuadraticBezierCurve(new THREE.Vector2(c,i),new THREE.Vector2(e,b),new THREE.Vector2(g,f));this.curves.push(d);this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:h})};THREE.Path.prototype.bezierCurveTo=function(e,c,k,j,g,f){var h=Array.prototype.slice.call(arguments);var a=this.actions[this.actions.length-1].args;var b=a[a.length-2];var i=a[a.length-1];var d=new THREE.CubicBezierCurve(new THREE.Vector2(b,i),new THREE.Vector2(e,c),new THREE.Vector2(k,j),new THREE.Vector2(g,f));this.curves.push(d);this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:h})};THREE.Path.prototype.splineThru=function(g){var a=Array.prototype.slice.call(arguments);var d=this.actions[this.actions.length-1].args;var b=d[d.length-2];var c=d[d.length-1];var f=[new THREE.Vector2(b,c)];Array.prototype.push.apply(f,g);var e=new THREE.SplineCurve(f);this.curves.push(e);this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:a})};THREE.Path.prototype.arc=function(h,f,g,d,a,b){var c=this.actions[this.actions.length-1].args;var e=c[c.length-2];var i=c[c.length-1];this.absarc(h+e,f+i,g,d,a,b)};THREE.Path.prototype.absarc=function(e,d,f,c,b,a){this.absellipse(e,d,f,f,c,b,a)};THREE.Path.prototype.ellipse=function(g,f,i,h,d,a,b){var c=this.actions[this.actions.length-1].args;var e=c[c.length-2];var j=c[c.length-1];this.absellipse(g+e,f+j,i,h,d,a,b)};THREE.Path.prototype.absellipse=function(f,e,j,g,c,a,b){var h=Array.prototype.slice.call(arguments);var d=new THREE.EllipseCurve(f,e,j,g,c,a,b);this.curves.push(d);var i=d.getPoint(b?1:0);h.push(i.x);h.push(i.y);this.actions.push({action:THREE.PathActions.ELLIPSE,args:h})};THREE.Path.prototype.getSpacedPoints=function(b,d){if(!b){b=40}var c=[];for(var a=0;a<b;a++){c.push(this.getPoint(a/b))}return c};THREE.Path.prototype.getPoints=function(O,M){if(this.useSpacedPoints){console.log("tata");return this.getSpacedPoints(O,M)}O=O||12;var A=[];var J,u,r,c,E;var B,y,N,v,P,w,a,x,b,I,D,H,G;for(J=0,u=this.actions.length;J<u;J++){r=this.actions[J];c=r.action;E=r.args;switch(c){case THREE.PathActions.MOVE_TO:A.push(new THREE.Vector2(E[0],E[1]));break;case THREE.PathActions.LINE_TO:A.push(new THREE.Vector2(E[0],E[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:B=E[2];y=E[3];P=E[0];w=E[1];if(A.length>0){b=A[A.length-1];a=b.x;x=b.y}else{b=this.actions[J-1].args;a=b[b.length-2];x=b[b.length-1]}for(I=1;I<=O;I++){D=I/O;H=THREE.Shape.Utils.b2(D,a,P,B);G=THREE.Shape.Utils.b2(D,x,w,y);A.push(new THREE.Vector2(H,G))}break;case THREE.PathActions.BEZIER_CURVE_TO:B=E[4];y=E[5];P=E[0];w=E[1];N=E[2];v=E[3];if(A.length>0){b=A[A.length-1];a=b.x;x=b.y}else{b=this.actions[J-1].args;a=b[b.length-2];x=b[b.length-1]}for(I=1;I<=O;I++){D=I/O;H=THREE.Shape.Utils.b3(D,a,P,N,B);G=THREE.Shape.Utils.b3(D,x,w,v,y);A.push(new THREE.Vector2(H,G))}break;case THREE.PathActions.CSPLINE_THRU:b=this.actions[J-1].args;var k=new THREE.Vector2(b[b.length-2],b[b.length-1]);var f=[k];var F=O*E[0].length;f=f.concat(E[0]);var L=new THREE.SplineCurve(f);for(I=1;I<=F;I++){A.push(L.getPointAt(I/F))}break;case THREE.PathActions.ARC:var o=E[0],m=E[1],p=E[2],K=E[3],C=E[4],h=!!E[5];var z=C-K;var l;var d=O*2;for(I=1;I<=d;I++){D=I/d;if(!h){D=1-D}l=K+D*z;H=o+p*Math.cos(l);G=m+p*Math.sin(l);A.push(new THREE.Vector2(H,G))}break;case THREE.PathActions.ELLIPSE:var o=E[0],m=E[1],q=E[2],s=E[3],K=E[4],C=E[5],h=!!E[6];var z=C-K;var l;var d=O*2;for(I=1;I<=d;I++){D=I/d;if(!h){D=1-D}l=K+D*z;H=o+q*Math.cos(l);G=m+s*Math.sin(l);A.push(new THREE.Vector2(H,G))}break}}var e=A[A.length-1];var g=1e-10;if(Math.abs(e.x-A[0].x)<g&&Math.abs(e.y-A[0].y)<g){A.splice(A.length-1,1)}if(M){A.push(A[0])}return A};THREE.Path.prototype.toShapes=function(){var c,f,j,b,d;var e=[],h=new THREE.Path();for(c=0,f=this.actions.length;c<f;c++){j=this.actions[c];d=j.args;b=j.action;if(b==THREE.PathActions.MOVE_TO){if(h.actions.length!=0){e.push(h);h=new THREE.Path()}}h[b].apply(h,d)}if(h.actions.length!=0){e.push(h)}if(e.length==0){return[]}var l,k,a=[];var g=!THREE.Shape.Utils.isClockWise(e[0].getPoints());if(e.length==1){l=e[0];k=new THREE.Shape();k.actions=l.actions;k.curves=l.curves;a.push(k);return a}if(g){k=new THREE.Shape();for(c=0,f=e.length;c<f;c++){l=e[c];if(THREE.Shape.Utils.isClockWise(l.getPoints())){k.actions=l.actions;k.curves=l.curves;a.push(k);k=new THREE.Shape()}else{k.holes.push(l)}}}else{for(c=0,f=e.length;c<f;c++){l=e[c];if(THREE.Shape.Utils.isClockWise(l.getPoints())){if(k){a.push(k)}k=new THREE.Shape();k.actions=l.actions;k.curves=l.curves}else{k.holes.push(l)}}a.push(k)}return a};THREE.Shape=function(){THREE.Path.apply(this,arguments);this.holes=[]};THREE.Shape.prototype=Object.create(THREE.Path.prototype);THREE.Shape.prototype.extrude=function(b){var a=new THREE.ExtrudeGeometry(this,b);return a};THREE.Shape.prototype.makeGeometry=function(a){var b=new THREE.ShapeGeometry(this,a);return b};THREE.Shape.prototype.getPointsHoles=function(c){var b,a=this.holes.length,d=[];for(b=0;b<a;b++){d[b]=this.holes[b].getTransformedPoints(c,this.bends)}return d};THREE.Shape.prototype.getSpacedPointsHoles=function(c){var b,a=this.holes.length,d=[];for(b=0;b<a;b++){d[b]=this.holes[b].getTransformedSpacedPoints(c,this.bends)}return d};THREE.Shape.prototype.extractAllPoints=function(a){return{shape:this.getTransformedPoints(a),holes:this.getPointsHoles(a)}};THREE.Shape.prototype.extractPoints=function(a){if(this.useSpacedPoints){return this.extractAllSpacedPoints(a)}return this.extractAllPoints(a)};THREE.Shape.prototype.extractAllSpacedPoints=function(a){return{shape:this.getTransformedSpacedPoints(a),holes:this.getSpacedPointsHoles(a)}};THREE.Shape.Utils={removeHoles:function(C,m){var k=C.concat();var A=k.concat();var x,c,t,L,z,u,B,i,J,s,r,q,M,D,o,n,O,N,b,a,I=[];for(J=0;J<m.length;J++){r=m[J];Array.prototype.push.apply(A,r);q=Number.POSITIVE_INFINITY;for(s=0;s<r.length;s++){o=r[s];var e=[];for(D=0;D<k.length;D++){n=k[D];M=o.distanceToSquared(n);e.push(M);if(M<q){q=M;z=s;u=D}}}x=(u-1)>=0?u-1:k.length-1;t=(z-1)>=0?z-1:r.length-1;var f=[r[z],k[u],k[x]];var H=THREE.FontUtils.Triangulate.area(f);var y=[r[z],r[t],k[u]];var G=THREE.FontUtils.Triangulate.area(y);var l=1;var E=-1;var v=u,F=z;u+=l;z+=E;if(u<0){u+=k.length}u%=k.length;if(z<0){z+=r.length}z%=r.length;x=(u-1)>=0?u-1:k.length-1;t=(z-1)>=0?z-1:r.length-1;f=[r[z],k[u],k[x]];var K=THREE.FontUtils.Triangulate.area(f);y=[r[z],r[t],k[u]];var w=THREE.FontUtils.Triangulate.area(y);if((H+G)>(K+w)){u=v;z=F;if(u<0){u+=k.length}u%=k.length;if(z<0){z+=r.length}z%=r.length;x=(u-1)>=0?u-1:k.length-1;t=(z-1)>=0?z-1:r.length-1}else{}O=k.slice(0,u);N=k.slice(u);b=r.slice(z);a=r.slice(0,z);var j=[r[z],k[u],k[x]];var g=[r[z],r[t],k[u]];I.push(j);I.push(g);k=O.concat(b).concat(a).concat(N)}return{shape:k,isolatedPts:I,allpoints:A}},triangulateShape:function(d,c){var h=THREE.Shape.Utils.removeHoles(d,c);var l=h.shape,a=h.allpoints,o=h.isolatedPts;var b=THREE.FontUtils.Triangulate(l,false);var e,n,k,m,p,j,g={},q={};for(e=0,n=a.length;e<n;e++){p=a[e].x+":"+a[e].y;if(g[p]!==undefined){console.log("Duplicate point",p)}g[p]=e}for(e=0,n=b.length;e<n;e++){m=b[e];for(k=0;k<3;k++){p=m[k].x+":"+m[k].y;j=g[p];if(j!==undefined){m[k]=j}}}for(e=0,n=o.length;e<n;e++){m=o[e];for(k=0;k<3;k++){p=m[k].x+":"+m[k].y;j=g[p];if(j!==undefined){m[k]=j}}}return b.concat(o)},isClockWise:function(a){return THREE.FontUtils.Triangulate.area(a)<0},b2p0:function(b,c){var a=1-b;return a*a*c},b2p1:function(a,b){return 2*(1-a)*a*b},b2p2:function(a,b){return a*a*b},b2:function(a,d,c,b){return this.b2p0(a,d)+this.b2p1(a,c)+this.b2p2(a,b)},b3p0:function(b,c){var a=1-b;return a*a*a*c},b3p1:function(b,c){var a=1-b;return 3*a*a*b*c},b3p2:function(b,c){var a=1-b;return 3*a*b*b*c},b3p3:function(a,b){return a*a*a*b},b3:function(a,e,d,c,b){return this.b3p0(a,e)+this.b3p1(a,d)+this.b3p2(a,c)+this.b3p3(a,b)}};THREE.AnimationHandler=(function(){var c=[];var b={};var d={};d.update=function(g){for(var f=0;f<c.length;f++){c[f].update(g)}};d.addToUpdate=function(f){if(c.indexOf(f)===-1){c.push(f)}};d.removeFromUpdate=function(g){var f=c.indexOf(g);if(f!==-1){c.splice(f,1)}};d.add=function(f){if(b[f.name]!==undefined){console.log("THREE.AnimationHandler.add: Warning! "+f.name+" already exists in library. Overwriting.")}b[f.name]=f;a(f)};d.get=function(f){if(typeof f==="string"){if(b[f]){return b[f]}else{console.log("THREE.AnimationHandler.get: Couldn't find animation "+f);return null}}else{}};d.parse=function(g){var h=[];if(g instanceof THREE.SkinnedMesh){for(var f=0;f<g.bones.length;f++){h.push(g.bones[f])}}else{e(g,h)}return h};var e=function(f,g){g.push(f);for(var h=0;h<f.children.length;h++){e(f.children[h],g)}};var a=function(j){if(j.initialized===true){return}for(var l=0;l<j.hierarchy.length;l++){for(var i=0;i<j.hierarchy[l].keys.length;i++){if(j.hierarchy[l].keys[i].time<0){j.hierarchy[l].keys[i].time=0}if(j.hierarchy[l].keys[i].rot!==undefined&&!(j.hierarchy[l].keys[i].rot instanceof THREE.Quaternion)){var f=j.hierarchy[l].keys[i].rot;j.hierarchy[l].keys[i].rot=new THREE.Quaternion(f[0],f[1],f[2],f[3])}}if(j.hierarchy[l].keys.length&&j.hierarchy[l].keys[0].morphTargets!==undefined){var p={};for(var i=0;i<j.hierarchy[l].keys.length;i++){for(var g=0;g<j.hierarchy[l].keys[i].morphTargets.length;g++){var n=j.hierarchy[l].keys[i].morphTargets[g];p[n]=-1}}j.hierarchy[l].usedMorphTargets=p;for(var i=0;i<j.hierarchy[l].keys.length;i++){var o={};for(var n in p){for(var g=0;g<j.hierarchy[l].keys[i].morphTargets.length;g++){if(j.hierarchy[l].keys[i].morphTargets[g]===n){o[n]=j.hierarchy[l].keys[i].morphTargetsInfluences[g];break}}if(g===j.hierarchy[l].keys[i].morphTargets.length){o[n]=0}}j.hierarchy[l].keys[i].morphTargetsInfluences=o}}for(var i=1;i<j.hierarchy[l].keys.length;i++){if(j.hierarchy[l].keys[i].time===j.hierarchy[l].keys[i-1].time){j.hierarchy[l].keys.splice(i,1);i--}}for(var i=0;i<j.hierarchy[l].keys.length;i++){j.hierarchy[l].keys[i].index=i}}var q=parseInt(j.length*j.fps,10);j.JIT={};j.JIT.hierarchy=[];for(var l=0;l<j.hierarchy.length;l++){j.JIT.hierarchy.push(new Array(q))}j.initialized=true};d.LINEAR=0;d.CATMULLROM=1;d.CATMULLROM_FORWARD=2;return d}());THREE.Animation=function(a,b,c){this.root=a;this.data=THREE.AnimationHandler.get(b);this.hierarchy=THREE.AnimationHandler.parse(a);this.currentTime=0;this.timeScale=1;this.isPlaying=false;this.isPaused=true;this.loop=true;this.interpolationType=c!==undefined?c:THREE.AnimationHandler.LINEAR;this.points=[];this.target=new THREE.Vector3()};THREE.Animation.prototype.play=function(d,c){if(this.isPlaying===false){this.isPlaying=true;this.loop=d!==undefined?d:true;this.currentTime=c!==undefined?c:0;var g,b=this.hierarchy.length,e;for(g=0;g<b;g++){e=this.hierarchy[g];if(this.interpolationType!==THREE.AnimationHandler.CATMULLROM_FORWARD){e.useQuaternion=true}e.matrixAutoUpdate=true;if(e.animationCache===undefined){e.animationCache={};e.animationCache.prevKey={pos:0,rot:0,scl:0};e.animationCache.nextKey={pos:0,rot:0,scl:0};e.animationCache.originalMatrix=e instanceof THREE.Bone?e.skinMatrix:e.matrix}var f=e.animationCache.prevKey;var a=e.animationCache.nextKey;f.pos=this.data.hierarchy[g].keys[0];f.rot=this.data.hierarchy[g].keys[0];f.scl=this.data.hierarchy[g].keys[0];a.pos=this.getNextKeyWith("pos",g,1);a.rot=this.getNextKeyWith("rot",g,1);a.scl=this.getNextKeyWith("scl",g,1)}this.update(0)}this.isPaused=false;THREE.AnimationHandler.addToUpdate(this)};THREE.Animation.prototype.pause=function(){if(this.isPaused===true){THREE.AnimationHandler.addToUpdate(this)}else{THREE.AnimationHandler.removeFromUpdate(this)}this.isPaused=!this.isPaused};THREE.Animation.prototype.stop=function(){this.isPlaying=false;this.isPaused=false;THREE.AnimationHandler.removeFromUpdate(this)};THREE.Animation.prototype.update=function(l){if(this.isPlaying===false){return}var g=["pos","rot","scl"];var d;var v;var b;var m,c;var s,e;var u;var k;var j;var r=this.data.JIT.hierarchy;var o,q;var f,w,p;this.currentTime+=l*this.timeScale;q=this.currentTime;o=this.currentTime=this.currentTime%this.data.length;j=parseInt(Math.min(o*this.data.fps,this.data.length*this.data.fps),10);for(var n=0,a=this.hierarchy.length;n<a;n++){u=this.hierarchy[n];k=u.animationCache;for(var i=0;i<3;i++){d=g[i];s=k.prevKey[d];e=k.nextKey[d];if(e.time<=q){if(o<q){if(this.loop){s=this.data.hierarchy[n].keys[0];e=this.getNextKeyWith(d,n,1);while(e.time<o){s=e;e=this.getNextKeyWith(d,n,e.index+1)}}else{this.stop();return}}else{do{s=e;e=this.getNextKeyWith(d,n,e.index+1)}while(e.time<o)}k.prevKey[d]=s;k.nextKey[d]=e}u.matrixAutoUpdate=true;u.matrixWorldNeedsUpdate=true;v=(o-s.time)/(e.time-s.time);m=s[d];c=e[d];if(v<0||v>1){console.log("THREE.Animation.update: Warning! Scale out of bounds:"+v+" on bone "+n);v=v<0?0:1}if(d==="pos"){b=u.position;if(this.interpolationType===THREE.AnimationHandler.LINEAR){b.x=m[0]+(c[0]-m[0])*v;b.y=m[1]+(c[1]-m[1])*v;b.z=m[2]+(c[2]-m[2])*v}else{if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){this.points[0]=this.getPrevKeyWith("pos",n,s.index-1)["pos"];this.points[1]=m;this.points[2]=c;this.points[3]=this.getNextKeyWith("pos",n,e.index+1)["pos"];v=v*0.33+0.33;f=this.interpolateCatmullRom(this.points,v);b.x=f[0];b.y=f[1];b.z=f[2];if(this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){w=this.interpolateCatmullRom(this.points,v*1.01);this.target.set(w[0],w[1],w[2]);this.target.sub(b);this.target.y=0;this.target.normalize();p=Math.atan2(this.target.x,this.target.z);u.rotation.set(0,p,0)}}}}else{if(d==="rot"){THREE.Quaternion.slerp(m,c,u.quaternion,v)}else{if(d==="scl"){b=u.scale;b.x=m[0]+(c[0]-m[0])*v;b.y=m[1]+(c[1]-m[1])*v;b.z=m[2]+(c[2]-m[2])*v}}}}}};THREE.Animation.prototype.interpolateCatmullRom=function(n,b){var h=[],j=[],m,a,f,e,d,l,k,i,g;m=(n.length-1)*b;a=Math.floor(m);f=m-a;h[0]=a===0?a:a-1;h[1]=a;h[2]=a>n.length-2?a:a+1;h[3]=a>n.length-3?a:a+2;l=n[h[0]];k=n[h[1]];i=n[h[2]];g=n[h[3]];e=f*f;d=f*e;j[0]=this.interpolate(l[0],k[0],i[0],g[0],f,e,d);j[1]=this.interpolate(l[1],k[1],i[1],g[1],f,e,d);j[2]=this.interpolate(l[2],k[2],i[2],g[2],f,e,d);return j};THREE.Animation.prototype.interpolate=function(h,g,e,d,i,b,a){var f=(e-h)*0.5,c=(d-g)*0.5;return(2*(g-e)+f+c)*a+(-3*(g-e)-2*f-c)*b+f*i+g};THREE.Animation.prototype.getNextKeyWith=function(c,b,a){var d=this.data.hierarchy[b].keys;if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){a=a<d.length-1?a:d.length-1}else{a=a%d.length}for(;a<d.length;a++){if(d[a][c]!==undefined){return d[a]}}return this.data.hierarchy[b].keys[0]};THREE.Animation.prototype.getPrevKeyWith=function(c,b,a){var d=this.data.hierarchy[b].keys;if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){a=a>0?a:0}else{a=a>=0?a:a+d.length}for(;a>=0;a--){if(d[a][c]!==undefined){return d[a]}}return this.data.hierarchy[b].keys[d.length-1]};THREE.KeyFrameAnimation=function(j,e,i){this.root=j;this.data=THREE.AnimationHandler.get(e);this.hierarchy=THREE.AnimationHandler.parse(j);this.currentTime=0;this.timeScale=0.001;this.isPlaying=false;this.isPaused=true;this.loop=true;this.JITCompile=i!==undefined?i:true;for(var g=0,c=this.hierarchy.length;g<c;g++){var k=this.data.hierarchy[g].keys,a=this.data.hierarchy[g].sids,d=this.hierarchy[g];if(k.length&&a){for(var l=0;l<a.length;l++){var b=a[l],f=this.getNextKeyWith(b,g,0);if(f){f.apply(b)}}d.matrixAutoUpdate=false;this.data.hierarchy[g].node.updateMatrix();d.matrixWorldNeedsUpdate=true}}};THREE.KeyFrameAnimation.prototype.play=function(c,b){if(!this.isPlaying){this.isPlaying=true;this.loop=c!==undefined?c:true;this.currentTime=b!==undefined?b:0;this.startTimeMs=b;this.startTime=10000000;this.endTime=-this.startTime;var e,a=this.hierarchy.length,d,g;for(e=0;e<a;e++){d=this.hierarchy[e];g=this.data.hierarchy[e];d.useQuaternion=true;if(g.animationCache===undefined){g.animationCache={};g.animationCache.prevKey=null;g.animationCache.nextKey=null;g.animationCache.originalMatrix=d instanceof THREE.Bone?d.skinMatrix:d.matrix}var f=this.data.hierarchy[e].keys;if(f.length){g.animationCache.prevKey=f[0];g.animationCache.nextKey=f[1];this.startTime=Math.min(f[0].time,this.startTime);this.endTime=Math.max(f[f.length-1].time,this.endTime)}}this.update(0)}this.isPaused=false;THREE.AnimationHandler.addToUpdate(this)};THREE.KeyFrameAnimation.prototype.pause=function(){if(this.isPaused){THREE.AnimationHandler.addToUpdate(this)}else{THREE.AnimationHandler.removeFromUpdate(this)}this.isPaused=!this.isPaused};THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=false;this.isPaused=false;THREE.AnimationHandler.removeFromUpdate(this);for(var b=0;b<this.data.hierarchy.length;b++){var d=this.hierarchy[b];var c=this.data.hierarchy[b];if(c.animationCache!==undefined){var a=c.animationCache.originalMatrix;if(d instanceof THREE.Bone){a.copy(d.skinMatrix);d.skinMatrix=a}else{a.copy(d.matrix);d.matrix=a}delete c.animationCache}}};THREE.KeyFrameAnimation.prototype.update=function(n){if(!this.isPlaying){return}var v,d;var w;var l;var g;var u=this.data.JIT.hierarchy;var q,t;var e;this.currentTime+=n*this.timeScale;t=this.currentTime;q=this.currentTime=this.currentTime%this.data.length;if(q<this.startTimeMs){q=this.currentTime=this.startTimeMs+q}g=parseInt(Math.min(q*this.data.fps,this.data.length*this.data.fps),10);e=q<t;if(e&&!this.loop){for(var o=0,a=this.hierarchy.length;o<a;o++){var j=this.data.hierarchy[o].keys,r=this.data.hierarchy[o].sids,b=j.length-1,f=this.hierarchy[o];if(j.length){for(var i=0;i<r.length;i++){var c=r[i],k=this.getPrevKeyWith(c,o,b);if(k){k.apply(c)}}this.data.hierarchy[o].node.updateMatrix();f.matrixWorldNeedsUpdate=true}}this.stop();return}if(q<this.startTime){return}for(var o=0,a=this.hierarchy.length;o<a;o++){w=this.hierarchy[o];l=this.data.hierarchy[o];var j=l.keys,m=l.animationCache;if(this.JITCompile&&u[o][g]!==undefined){if(w instanceof THREE.Bone){w.skinMatrix=u[o][g];w.matrixWorldNeedsUpdate=false}else{w.matrix=u[o][g];w.matrixWorldNeedsUpdate=true}}else{if(j.length){if(this.JITCompile&&m){if(w instanceof THREE.Bone){w.skinMatrix=m.originalMatrix}else{w.matrix=m.originalMatrix}}v=m.prevKey;d=m.nextKey;if(v&&d){if(d.time<=t){if(e&&this.loop){v=j[0];d=j[1];while(d.time<q){v=d;d=j[v.index+1]}}else{if(!e){var p=j.length-1;while(d.time<q&&d.index!==p){v=d;d=j[v.index+1]}}}m.prevKey=v;m.nextKey=d}if(d.time>=q){v.interpolate(d,q)}else{v.interpolate(d,d.time)}}this.data.hierarchy[o].node.updateMatrix();w.matrixWorldNeedsUpdate=true}}}if(this.JITCompile){if(u[0][g]===undefined){this.hierarchy[0].updateMatrixWorld(true);for(var o=0;o<this.hierarchy.length;o++){if(this.hierarchy[o] instanceof THREE.Bone){u[o][g]=this.hierarchy[o].skinMatrix.clone()}else{u[o][g]=this.hierarchy[o].matrix.clone()}}}}};THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(a,c,b){var d=this.data.hierarchy[c].keys;b=b%d.length;for(;b<d.length;b++){if(d[b].hasTarget(a)){return d[b]}}return d[0]};THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(a,c,b){var d=this.data.hierarchy[c].keys;b=b>=0?b:b+d.length;for(;b>=0;b--){if(d[b].hasTarget(a)){return d[b]}}return d[d.length-1]};THREE.CubeCamera=function(f,e,g){THREE.Object3D.call(this);var d=90,b=1;var c=new THREE.PerspectiveCamera(d,b,f,e);c.up.set(0,-1,0);c.lookAt(new THREE.Vector3(1,0,0));this.add(c);var j=new THREE.PerspectiveCamera(d,b,f,e);j.up.set(0,-1,0);j.lookAt(new THREE.Vector3(-1,0,0));this.add(j);var a=new THREE.PerspectiveCamera(d,b,f,e);a.up.set(0,0,1);a.lookAt(new THREE.Vector3(0,1,0));this.add(a);var i=new THREE.PerspectiveCamera(d,b,f,e);i.up.set(0,0,-1);i.lookAt(new THREE.Vector3(0,-1,0));this.add(i);var k=new THREE.PerspectiveCamera(d,b,f,e);k.up.set(0,-1,0);k.lookAt(new THREE.Vector3(0,0,1));this.add(k);var h=new THREE.PerspectiveCamera(d,b,f,e);h.up.set(0,-1,0);h.lookAt(new THREE.Vector3(0,0,-1));this.add(h);this.renderTarget=new THREE.WebGLRenderTargetCube(g,g,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter});this.updateCubeMap=function(n,o){var m=this.renderTarget;var l=m.generateMipmaps;m.generateMipmaps=false;m.activeCubeFace=0;n.render(o,c,m);m.activeCubeFace=1;n.render(o,j,m);m.activeCubeFace=2;n.render(o,a,m);m.activeCubeFace=3;n.render(o,i,m);m.activeCubeFace=4;n.render(o,k,m);m.generateMipmaps=l;m.activeCubeFace=5;n.render(o,h,m)}};THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype);THREE.CombinedCamera=function(h,a,e,g,b,f,d){THREE.Camera.call(this);this.fov=e;this.left=-h/2;this.right=h/2;this.top=a/2;this.bottom=-a/2;this.cameraO=new THREE.OrthographicCamera(h/-2,h/2,a/2,a/-2,f,d);this.cameraP=new THREE.PerspectiveCamera(e,h/a,g,b);this.zoom=1;this.toPerspective();var c=h/a};THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype);THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near;this.far=this.cameraP.far;this.cameraP.fov=this.fov/this.zoom;this.cameraP.updateProjectionMatrix();this.projectionMatrix=this.cameraP.projectionMatrix;this.inPerspectiveMode=true;this.inOrthographicMode=false};THREE.CombinedCamera.prototype.toOrthographic=function(){var d=this.fov;var b=this.cameraP.aspect;var f=this.cameraP.near;var e=this.cameraP.far;var g=(f+e)/2;var h=Math.tan(d/2)*g;var a=2*h;var i=a*b;var c=i/2;h/=this.zoom;c/=this.zoom;this.cameraO.left=-c;this.cameraO.right=c;this.cameraO.top=h;this.cameraO.bottom=-h;this.cameraO.updateProjectionMatrix();this.near=this.cameraO.near;this.far=this.cameraO.far;this.projectionMatrix=this.cameraO.projectionMatrix;this.inPerspectiveMode=false;this.inOrthographicMode=true};THREE.CombinedCamera.prototype.setSize=function(b,a){this.cameraP.aspect=b/a;this.left=-b/2;this.right=b/2;this.top=a/2;this.bottom=-a/2};THREE.CombinedCamera.prototype.setFov=function(a){this.fov=a;if(this.inPerspectiveMode){this.toPerspective()}else{this.toOrthographic()}};THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){if(this.inPerspectiveMode){this.toPerspective()}else{this.toPerspective();this.toOrthographic()}};THREE.CombinedCamera.prototype.setLens=function(c,b){if(b===undefined){b=24}var a=2*THREE.Math.radToDeg(Math.atan(b/(c*2)));this.setFov(a);return a};THREE.CombinedCamera.prototype.setZoom=function(a){this.zoom=a;if(this.inPerspectiveMode){this.toPerspective()}else{this.toOrthographic()}};THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0;this.rotation.y=Math.PI;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0;this.rotation.y=-Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0;this.rotation.y=Math.PI/2;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2;this.rotation.y=0;this.rotation.z=0;this.rotationAutoUpdate=false};THREE.CircleGeometry=function(k,g,d,b){THREE.Geometry.call(this);k=k||50;d=d!==undefined?d:0;b=b!==undefined?b:Math.PI*2;g=g!==undefined?Math.max(3,g):8;var f,e=[],a=new THREE.Vector3(),o=new THREE.Vector2(0.5,0.5);this.vertices.push(a);e.push(o);for(f=0;f<=g;f++){var j=new THREE.Vector3();var h=d+f/g*b;j.x=k*Math.cos(h);j.y=k*Math.sin(h);this.vertices.push(j);e.push(new THREE.Vector2((j.x/k+1)/2,(j.y/k+1)/2))}var c=new THREE.Vector3(0,0,1);for(f=1;f<=g;f++){var p=f;var m=f+1;var l=0;this.faces.push(new THREE.Face3(p,m,l,[c,c,c]));this.faceVertexUvs[0].push([e[f],e[f+1],o])}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),k)};THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CubeGeometry=function(a,i,e,b,h,d){THREE.Geometry.call(this);var k=this;this.width=a;this.height=i;this.depth=e;this.widthSegments=b||1;this.heightSegments=h||1;this.depthSegments=d||1;var j=this.width/2;var g=this.height/2;var c=this.depth/2;f("z","y",-1,-1,this.depth,this.height,j,0);f("z","y",1,-1,this.depth,this.height,-j,1);f("x","z",1,1,this.width,this.depth,g,2);f("x","z",1,-1,this.width,this.depth,-g,3);f("x","y",1,-1,this.width,this.height,c,4);f("x","y",-1,-1,this.width,this.height,-c,5);function f(B,A,l,s,D,C,O,x){var z,q,p,F=k.widthSegments,E=k.heightSegments,r=D/2,o=C/2,t=k.vertices.length;if((B==="x"&&A==="y")||(B==="y"&&A==="x")){z="z"}else{if((B==="x"&&A==="z")||(B==="z"&&A==="x")){z="y";E=k.depthSegments}else{if((B==="z"&&A==="y")||(B==="y"&&A==="z")){z="x";F=k.depthSegments}}}var G=F+1,n=E+1,N=D/F,I=C/E,M=new THREE.Vector3();M[z]=O>0?1:-1;for(p=0;p<n;p++){for(q=0;q<G;q++){var m=new THREE.Vector3();m[B]=(q*N-r)*l;m[A]=(p*I-o)*s;m[z]=O;k.vertices.push(m)}}for(p=0;p<E;p++){for(q=0;q<F;q++){var L=q+G*p;var K=q+G*(p+1);var J=(q+1)+G*(p+1);var H=(q+1)+G*p;var y=new THREE.Face4(L+t,K+t,J+t,H+t);y.normal.copy(M);y.vertexNormals.push(M.clone(),M.clone(),M.clone(),M.clone());y.materialIndex=x;k.faces.push(y);k.faceVertexUvs[0].push([new THREE.Vector2(q/F,1-p/E),new THREE.Vector2(q/F,1-(p+1)/E),new THREE.Vector2((q+1)/F,1-(p+1)/E),new THREE.Vector2((q+1)/F,1-p/E)])}}}this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.CylinderGeometry=function(j,J,w,A,s,G){THREE.Geometry.call(this);this.radiusTop=j=j!==undefined?j:20;this.radiusBottom=J=J!==undefined?J:20;this.height=w=w!==undefined?w:100;this.radiusSegments=A=A||8;this.heightSegments=s=s||1;this.openEnded=G=G!==undefined?G:false;var z=w/2;var o,n,f=[],p=[];for(n=0;n<=s;n++){var t=[];var I=[];var q=n/s;var e=q*(J-j)+j;for(o=0;o<=A;o++){var r=o/A;var E=new THREE.Vector3();E.x=e*Math.sin(r*Math.PI*2);E.y=-q*w+z;E.z=e*Math.cos(r*Math.PI*2);this.vertices.push(E);t.push(this.vertices.length-1);I.push(new THREE.Vector2(r,1-q))}f.push(t);p.push(I)}var C=(J-j)/w;var l,i;for(o=0;o<A;o++){if(j!==0){l=this.vertices[f[0][o]].clone();i=this.vertices[f[0][o+1]].clone()}else{l=this.vertices[f[1][o]].clone();i=this.vertices[f[1][o+1]].clone()}l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*C).normalize();i.setY(Math.sqrt(i.x*i.x+i.z*i.z)*C).normalize();for(n=0;n<s;n++){var d=f[n][o];var c=f[n+1][o];var b=f[n+1][o+1];var a=f[n][o+1];var m=l.clone();var k=l.clone();var h=i.clone();var g=i.clone();var H=p[n][o].clone();var F=p[n+1][o].clone();var D=p[n+1][o+1].clone();var B=p[n][o+1].clone();this.faces.push(new THREE.Face4(d,c,b,a,[m,k,h,g]));this.faceVertexUvs[0].push([H,F,D,B])}}if(G===false&&j>0){this.vertices.push(new THREE.Vector3(0,z,0));for(o=0;o<A;o++){var d=f[0][o];var c=f[0][o+1];var b=this.vertices.length-1;var m=new THREE.Vector3(0,1,0);var k=new THREE.Vector3(0,1,0);var h=new THREE.Vector3(0,1,0);var H=p[0][o].clone();var F=p[0][o+1].clone();var D=new THREE.Vector2(F.u,0);this.faces.push(new THREE.Face3(d,c,b,[m,k,h]));this.faceVertexUvs[0].push([H,F,D])}}if(G===false&&J>0){this.vertices.push(new THREE.Vector3(0,-z,0));for(o=0;o<A;o++){var d=f[n][o+1];var c=f[n][o];var b=this.vertices.length-1;var m=new THREE.Vector3(0,-1,0);var k=new THREE.Vector3(0,-1,0);var h=new THREE.Vector3(0,-1,0);var H=p[n][o+1].clone();var F=p[n][o].clone();var D=new THREE.Vector2(F.u,1);this.faces.push(new THREE.Face3(d,c,b,[m,k,h]));this.faceVertexUvs[0].push([H,F,D])}}this.computeCentroids();this.computeFaceNormals()};THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry=function(a,b){if(typeof(a)==="undefined"){a=[];return}THREE.Geometry.call(this);a=a instanceof Array?a:[a];this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ExtrudeGeometry.prototype.addShapeList=function(b,d){var a=b.length;for(var e=0;e<a;e++){var c=b[e];this.addShape(c,d)}};THREE.ExtrudeGeometry.prototype.addShape=function(E,N){var g=N.amount!==undefined?N.amount:100;var f=N.bevelThickness!==undefined?N.bevelThickness:6;var O=N.bevelSize!==undefined?N.bevelSize:f-2;var B=N.bevelSegments!==undefined?N.bevelSegments:3;var a=N.bevelEnabled!==undefined?N.bevelEnabled:true;var M=N.curveSegments!==undefined?N.curveSegments:12;var X=N.steps!==undefined?N.steps:1;var r=N.extrudePath;var S,u=false;var ak=N.material;var o=N.extrudeMaterial;var D=N.UVGenerator!==undefined?N.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;var W=this.shapebb;var x,aa,ae,at;if(r){S=r.getSpacedPoints(X);u=true;a=false;x=N.frames!==undefined?N.frames:new THREE.TubeGeometry.FrenetFrames(r,X,false);aa=new THREE.Vector3();ae=new THREE.Vector3();at=new THREE.Vector3()}if(!a){B=0;f=0;O=0}var aw,aq,ar;var Y=this;var K=[];var U=this.vertices.length;var C=E.extractPoints(M);var d=C.shape;var I=C.holes;var ag=!THREE.Shape.Utils.isClockWise(d);if(ag){d=d.reverse();for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];if(THREE.Shape.Utils.isClockWise(aw)){I[aq]=aw.reverse()}}ag=false}var q=THREE.Shape.Utils.triangulateShape(d,I);var aj=d;for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];d=d.concat(aw)}function P(i,h,b){if(!h){console.log("die")}return h.clone().multiplyScalar(b).add(i)}var av,ah,ad,Z,w,ai=d.length,p,n=q.length,V,c=aj.length;var T=180/Math.PI;function G(i,h,b){return y(i,h,b)}function A(j,i,h){var t=Math.atan2(i.y-j.y,i.x-j.x);var s=Math.atan2(h.y-j.y,h.x-j.x);if(t>s){s+=Math.PI*2}var k=(t+s)/2;var z=-Math.cos(k);var v=-Math.sin(k);var b=new THREE.Vector2(z,v);return b}function y(ax,z,t){var aC=THREE.ExtrudeGeometry.__v1,az=THREE.ExtrudeGeometry.__v2,aB=THREE.ExtrudeGeometry.__v3,ay=THREE.ExtrudeGeometry.__v4,j=THREE.ExtrudeGeometry.__v5,i=THREE.ExtrudeGeometry.__v6,aE,aD,k,aA,aF,h;aC.set(ax.x-z.x,ax.y-z.y);az.set(ax.x-t.x,ax.y-t.y);aE=aC.normalize();aD=az.normalize();aB.set(-aE.y,aE.x);ay.set(aD.y,-aD.x);j.copy(ax).add(aB);i.copy(ax).add(ay);if(j.equals(i)){return ay.clone()}j.copy(z).add(aB);i.copy(t).add(ay);k=aE.dot(ay);aA=i.sub(j).dot(ay);if(k===0){console.log("Either infinite or no solutions!");if(aA===0){console.log("Its finite solutions.")}else{console.log("Too bad, no solutions.")}}aF=aA/k;if(aF<0){return A(ax,z,t)}h=aE.multiplyScalar(aF).add(j);return h.sub(ax).clone()}var an=[];for(var ap=0,R=aj.length,am=R-1,al=ap+1;ap<R;ap++,am++,al++){if(am===R){am=0}if(al===R){al=0}var J=aj[ap];var H=aj[am];var F=aj[al];an[ap]=G(aj[ap],aj[am],aj[al])}var Q=[],ac,e=an.concat();for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];ac=[];for(ap=0,R=aw.length,am=R-1,al=ap+1;ap<R;ap++,am++,al++){if(am===R){am=0}if(al===R){al=0}ac[ap]=G(aw[ap],aw[am],aw[al])}Q.push(ac);e=e.concat(ac)}for(av=0;av<B;av++){ad=av/B;Z=f*(1-ad);ah=O*(Math.sin(ad*Math.PI/2));for(ap=0,R=aj.length;ap<R;ap++){w=P(aj[ap],an[ap],ah);ab(w.x,w.y,-Z)}for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];ac=Q[aq];for(ap=0,R=aw.length;ap<R;ap++){w=P(aw[ap],ac[ap],ah);ab(w.x,w.y,-Z)}}}ah=O;for(ap=0;ap<ai;ap++){w=a?P(d[ap],e[ap],ah):d[ap];if(!u){ab(w.x,w.y,0)}else{ae.copy(x.normals[0]).multiplyScalar(w.x);aa.copy(x.binormals[0]).multiplyScalar(w.y);at.copy(S[0]).add(ae).add(aa);ab(at.x,at.y,at.z)}}var af;for(af=1;af<=X;af++){for(ap=0;ap<ai;ap++){w=a?P(d[ap],e[ap],ah):d[ap];if(!u){ab(w.x,w.y,g/X*af)}else{ae.copy(x.normals[af]).multiplyScalar(w.x);aa.copy(x.binormals[af]).multiplyScalar(w.y);at.copy(S[af]).add(ae).add(aa);ab(at.x,at.y,at.z)}}}for(av=B-1;av>=0;av--){ad=av/B;Z=f*(1-ad);ah=O*Math.sin(ad*Math.PI/2);for(ap=0,R=aj.length;ap<R;ap++){w=P(aj[ap],an[ap],ah);ab(w.x,w.y,g+Z)}for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];ac=Q[aq];for(ap=0,R=aw.length;ap<R;ap++){w=P(aw[ap],ac[ap],ah);if(!u){ab(w.x,w.y,g+Z)}else{ab(w.x,w.y+S[X-1].y,S[X-1].x+Z)}}}}L();au();function L(){if(a){var b=0;var h=ai*b;for(ap=0;ap<n;ap++){p=q[ap];m(p[2]+h,p[1]+h,p[0]+h,true)}b=X+B*2;h=ai*b;for(ap=0;ap<n;ap++){p=q[ap];m(p[0]+h,p[1]+h,p[2]+h,false)}}else{for(ap=0;ap<n;ap++){p=q[ap];m(p[2],p[1],p[0],true)}for(ap=0;ap<n;ap++){p=q[ap];m(p[0]+ai*X,p[1]+ai*X,p[2]+ai*X,false)}}}function au(){var b=0;ao(aj,b);b+=aj.length;for(aq=0,ar=I.length;aq<ar;aq++){aw=I[aq];ao(aw,b);b+=aw.length}}function ao(ay,h){var z,v;ap=ay.length;while(--ap>=0){z=ap;v=ap-1;if(v<0){v=ay.length-1}var aD=0,i=X+B*2;for(aD=0;aD<i;aD++){var ax=ai*aD;var t=ai*(aD+1);var aC=h+z+ax,aB=h+v+ax,aA=h+v+t,az=h+z+t;l(aC,aB,aA,az,ay,aD,i,z,v)}}}function ab(b,i,h){Y.vertices.push(new THREE.Vector3(b,i,h))}function m(i,h,s,k){i+=U;h+=U;s+=U;Y.faces.push(new THREE.Face3(i,h,s,null,null,ak));var j=k?D.generateBottomUV(Y,E,N,i,h,s):D.generateTopUV(Y,E,N,i,h,s);Y.faceVertexUvs[0].push(j)}function l(ax,z,t,s,h,j,ay,v,k){ax+=U;z+=U;t+=U;s+=U;Y.faces.push(new THREE.Face4(ax,z,t,s,null,null,o));var i=D.generateSideWallUV(Y,E,h,N,ax,z,t,s,j,ay,v,k);Y.faceVertexUvs[0].push(i)}};THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(g,h,d,k,j,i){var a=g.vertices[k].x,l=g.vertices[k].y,f=g.vertices[j].x,e=g.vertices[j].y,c=g.vertices[i].x,b=g.vertices[i].y;return[new THREE.Vector2(a,l),new THREE.Vector2(f,e),new THREE.Vector2(c,b)]},generateBottomUV:function(f,c,a,e,d,b){return this.generateTopUV(f,c,a,e,d,b)},generateSideWallUV:function(f,m,b,t,x,w,v,u,a,n,s,r){var k=f.vertices[x].x,i=f.vertices[x].y,g=f.vertices[x].z,q=f.vertices[w].x,p=f.vertices[w].y,o=f.vertices[w].z,e=f.vertices[v].x,d=f.vertices[v].y,c=f.vertices[v].z,l=f.vertices[u].x,j=f.vertices[u].y,h=f.vertices[u].z;if(Math.abs(i-p)<0.01){return[new THREE.Vector2(k,1-g),new THREE.Vector2(q,1-o),new THREE.Vector2(e,1-c),new THREE.Vector2(l,1-h)]}else{return[new THREE.Vector2(i,1-g),new THREE.Vector2(p,1-o),new THREE.Vector2(d,1-c),new THREE.Vector2(j,1-h)]}}};THREE.ExtrudeGeometry.__v1=new THREE.Vector2();THREE.ExtrudeGeometry.__v2=new THREE.Vector2();THREE.ExtrudeGeometry.__v3=new THREE.Vector2();THREE.ExtrudeGeometry.__v4=new THREE.Vector2();THREE.ExtrudeGeometry.__v5=new THREE.Vector2();THREE.ExtrudeGeometry.__v6=new THREE.Vector2();THREE.ShapeGeometry=function(a,b){THREE.Geometry.call(this);if(a instanceof Array===false){a=[a]}this.shapebb=a[a.length-1].getBoundingBox();this.addShapeList(a,b);this.computeCentroids();this.computeFaceNormals()};THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ShapeGeometry.prototype.addShapeList=function(b,c){for(var d=0,a=b.length;d<a;d++){this.addShape(b[d],c)}return this};THREE.ShapeGeometry.prototype.addShape=function(e,h){if(h===undefined){h={}}var d=h.curveSegments!==undefined?h.curveSegments:12;var q=h.material;var A=h.UVGenerator===undefined?THREE.ExtrudeGeometry.WorldUVGenerator:h.UVGenerator;var r=this.shapebb;var y,x,t,v;var p=this.vertices.length;var B=e.extractPoints(d);var j=B.shape;var m=B.holes;var o=!THREE.Shape.Utils.isClockWise(j);if(o){j=j.reverse();for(y=0,x=m.length;y<x;y++){t=m[y];if(THREE.Shape.Utils.isClockWise(t)){m[y]=t.reverse()}}o=false}var f=THREE.Shape.Utils.triangulateShape(j,m);var w=j;for(y=0,x=m.length;y<x;y++){t=m[y];j=j.concat(t)}var z,k=j.length;var n,F=f.length;var g,u=w.length;for(y=0;y<k;y++){z=j[y];this.vertices.push(new THREE.Vector3(z.x,z.y,0))}for(y=0;y<F;y++){n=f[y];var E=n[0]+p;var D=n[1]+p;var C=n[2]+p;this.faces.push(new THREE.Face3(E,D,C,null,null,q));this.faceVertexUvs[0].push(A.generateBottomUV(this,e,h,E,D,C))}};THREE.LatheGeometry=function(t,q,n,p){THREE.Geometry.call(this);q=q||12;n=n||0;p=p||2*Math.PI;var A=1/(t.length-1);var z=1/q;for(var u=0,l=q;u<=l;u++){var g=n+u*z*p;var C=Math.cos(g),m=Math.sin(g);for(var r=0,w=t.length;r<w;r++){var o=t[r];var y=new THREE.Vector3();y.x=C*o.x-m*o.y;y.y=m*o.x+C*o.y;y.z=o.z;this.vertices.push(y)}}var e=t.length;for(var u=0,l=q;u<l;u++){for(var r=0,w=t.length-1;r<w;r++){var k=r+e*u;var E=k;var D=k+e;var C=k+1+e;var B=k+1;this.faces.push(new THREE.Face4(E,D,C,B));var x=u*z;var h=r*A;var v=x+z;var f=h+A;this.faceVertexUvs[0].push([new THREE.Vector2(x,h),new THREE.Vector2(v,h),new THREE.Vector2(v,f),new THREE.Vector2(x,f)])}}this.mergeVertices();this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.PlaneGeometry=function(p,o,e,n){THREE.Geometry.call(this);this.width=p;this.height=o;this.widthSegments=e||1;this.heightSegments=n||1;var h,f;var i=p/2;var g=o/2;var r=this.widthSegments;var q=this.heightSegments;var s=r+1;var m=q+1;var B=this.width/r;var u=this.height/q;var A=new THREE.Vector3(0,0,1);for(f=0;f<m;f++){for(h=0;h<s;h++){var l=h*B-i;var k=f*u-g;this.vertices.push(new THREE.Vector3(l,-k,0))}}for(f=0;f<q;f++){for(h=0;h<r;h++){var z=h+s*f;var w=h+s*(f+1);var v=(h+1)+s*(f+1);var t=(h+1)+s*f;var j=new THREE.Face4(z,w,v,t);j.normal.copy(A);j.vertexNormals.push(A.clone(),A.clone(),A.clone(),A.clone());this.faces.push(j);this.faceVertexUvs[0].push([new THREE.Vector2(h/r,1-f/q),new THREE.Vector2(h/r,1-(f+1)/q),new THREE.Vector2((h+1)/r,1-(f+1)/q),new THREE.Vector2((h+1)/r,1-f/q)])}}this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.RingGeometry=function(k,r,g,s,h,p){THREE.Geometry.call(this);k=k||0;r=r||50;h=h!==undefined?h:0;p=p!==undefined?p:Math.PI*2;g=g!==undefined?Math.max(3,g):8;s=s!==undefined?Math.max(3,s):8;var t,m,l=[],f=k,j=((r-k)/s);for(t=0;t<=s;t++){for(m=0;m<=g;m++){var u=new THREE.Vector3();var c=h+m/g*p;u.x=f*Math.cos(c);u.y=f*Math.sin(c);this.vertices.push(u);l.push(new THREE.Vector2((u.x/f+1)/2,-(u.y/f+1)/2+1))}f+=j}var q=new THREE.Vector3(0,0,1);for(t=0;t<s;t++){var a=t*g;for(m=0;m<=g;m++){var c=m+a;var e=c+t;var d=c+g+t;var b=c+g+1+t;this.faces.push(new THREE.Face3(e,d,b,[q,q,q]));this.faceVertexUvs[0].push([l[e],l[d],l[b]]);e=c+t;d=c+g+1+t;b=c+1+t;this.faces.push(new THREE.Face3(e,d,b,[q,q,q]));this.faceVertexUvs[0].push([l[e],l[d],l[b]])}}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),f)};THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.SphereGeometry=function(f,e,r,t,z,g,w){THREE.Geometry.call(this);this.radius=f=f||50;this.widthSegments=e=Math.max(3,Math.floor(e)||8);this.heightSegments=r=Math.max(2,Math.floor(r)||6);this.phiStart=t=t!==undefined?t:0;this.phiLength=z=z!==undefined?z:Math.PI*2;this.thetaStart=g=g!==undefined?g:0;this.thetaLength=w=w!==undefined?w:Math.PI;var n,m,h=[],o=[];for(m=0;m<=r;m++){var s=[];var F=[];for(n=0;n<=e;n++){var q=n/e;var p=m/r;var C=new THREE.Vector3();C.x=-f*Math.cos(t+q*z)*Math.sin(g+p*w);C.y=f*Math.cos(g+p*w);C.z=f*Math.sin(t+q*z)*Math.sin(g+p*w);this.vertices.push(C);s.push(this.vertices.length-1);F.push(new THREE.Vector2(q,1-p))}h.push(s);o.push(F)}for(m=0;m<this.heightSegments;m++){for(n=0;n<this.widthSegments;n++){var d=h[m][n+1];var c=h[m][n];var b=h[m+1][n];var a=h[m+1][n+1];var l=this.vertices[d].clone().normalize();var k=this.vertices[c].clone().normalize();var j=this.vertices[b].clone().normalize();var i=this.vertices[a].clone().normalize();var E=o[m][n+1].clone();var D=o[m][n].clone();var B=o[m+1][n].clone();var A=o[m+1][n+1].clone();if(Math.abs(this.vertices[d].y)===this.radius){this.faces.push(new THREE.Face3(d,b,a,[l,j,i]));this.faceVertexUvs[0].push([E,B,A])}else{if(Math.abs(this.vertices[b].y)===this.radius){this.faces.push(new THREE.Face3(d,c,b,[l,k,j]));this.faceVertexUvs[0].push([E,D,B])}else{this.faces.push(new THREE.Face4(d,c,b,a,[l,k,j,i]));this.faceVertexUvs[0].push([E,D,B,A])}}}}this.computeCentroids();this.computeFaceNormals();this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),f)};THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TextGeometry=function(b,a){a=a||{};var c=THREE.FontUtils.generateShapes(b,a);a.amount=a.height!==undefined?a.height:50;if(a.bevelThickness===undefined){a.bevelThickness=10}if(a.bevelSize===undefined){a.bevelSize=8}if(a.bevelEnabled===undefined){a.bevelEnabled=false}THREE.ExtrudeGeometry.call(this,c,a)};THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype);THREE.TorusGeometry=function(h,g,f,m,k){THREE.Geometry.call(this);var e=this;this.radius=h||100;this.tube=g||40;this.radialSegments=f||8;this.tubularSegments=m||6;this.arc=k||Math.PI*2;var z=new THREE.Vector3(),n=[],q=[];for(var r=0;r<=this.radialSegments;r++){for(var s=0;s<=this.tubularSegments;s++){var p=s/this.tubularSegments*this.arc;var o=r/this.radialSegments*Math.PI*2;z.x=this.radius*Math.cos(p);z.y=this.radius*Math.sin(p);var t=new THREE.Vector3();t.x=(this.radius+this.tube*Math.cos(o))*Math.cos(p);t.y=(this.radius+this.tube*Math.cos(o))*Math.sin(p);t.z=this.tube*Math.sin(o);this.vertices.push(t);n.push(new THREE.Vector2(s/this.tubularSegments,r/this.radialSegments));q.push(t.clone().sub(z).normalize())}}for(var r=1;r<=this.radialSegments;r++){for(var s=1;s<=this.tubularSegments;s++){var A=(this.tubularSegments+1)*r+s-1;var y=(this.tubularSegments+1)*(r-1)+s-1;var x=(this.tubularSegments+1)*(r-1)+s;var w=(this.tubularSegments+1)*r+s;var l=new THREE.Face4(A,y,x,w,[q[A],q[y],q[x],q[w]]);l.normal.add(q[A]);l.normal.add(q[y]);l.normal.add(q[x]);l.normal.add(q[w]);l.normal.normalize();this.faces.push(l);this.faceVertexUvs[0].push([n[A].clone(),n[y].clone(),n[x].clone(),n[w].clone()])}}this.computeCentroids()};THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TorusKnotGeometry=function(s,r,m,w,A,z,e){THREE.Geometry.call(this);var g=this;this.radius=s||100;this.tube=r||40;this.radialSegments=m||64;this.tubularSegments=w||8;this.p=A||2;this.q=z||3;this.heightScale=e||1;this.grid=new Array(this.radialSegments);var o=new THREE.Vector3();var B=new THREE.Vector3();var P=new THREE.Vector3();for(var F=0;F<this.radialSegments;++F){this.grid[F]=new Array(this.tubularSegments);for(var D=0;D<this.tubularSegments;++D){var y=F/this.radialSegments*2*this.p*Math.PI;var x=D/this.tubularSegments*2*Math.PI;var h=G(y,x,this.q,this.p,this.radius,this.heightScale);var f=G(y+0.01,x,this.q,this.p,this.radius,this.heightScale);var l,k;o.subVectors(f,h);B.addVectors(f,h);P.crossVectors(o,B);B.crossVectors(P,o);P.normalize();B.normalize();l=-this.tube*Math.cos(x);k=this.tube*Math.sin(x);h.x+=l*B.x+k*P.x;h.y+=l*B.y+k*P.y;h.z+=l*B.z+k*P.z;this.grid[F][D]=H(h.x,h.y,h.z)}}for(var F=0;F<this.radialSegments;++F){for(var D=0;D<this.tubularSegments;++D){var t=(F+1)%this.radialSegments;var C=(D+1)%this.tubularSegments;var O=this.grid[F][D];var N=this.grid[t][D];var M=this.grid[t][C];var L=this.grid[F][C];var K=new THREE.Vector2(F/this.radialSegments,D/this.tubularSegments);var J=new THREE.Vector2((F+1)/this.radialSegments,D/this.tubularSegments);var I=new THREE.Vector2((F+1)/this.radialSegments,(D+1)/this.tubularSegments);var E=new THREE.Vector2(F/this.radialSegments,(D+1)/this.tubularSegments);this.faces.push(new THREE.Face4(O,N,M,L));this.faceVertexUvs[0].push([K,J,I,E])}}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals();function H(a,c,b){return g.vertices.push(new THREE.Vector3(a,c,b))-1}function G(U,S,q,R,Q,a){var n=Math.cos(U);var j=Math.cos(S);var T=Math.sin(U);var i=q/R*U;var p=Math.cos(i);var d=Q*(2+p)*0.5*n;var c=Q*(2+p)*T*0.5;var b=a*Q*Math.sin(i)*0.5;return new THREE.Vector3(d,c,b)}};THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry=function(K,h,J,T,I,q){THREE.Geometry.call(this);this.path=K;this.segments=h||64;this.radius=J||1;this.radiusSegments=T||8;this.closed=I||false;if(q){this.debug=new THREE.Object3D()}this.grid=[];var w=this,D,H,A,e=this.segments+1,E,C,B,N,M,L,G,F,o,n,t,f=new THREE.Vector3(),P,O,s,g,Y,X,W,V,U,S,R,Q;var p=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed),r=p.tangents,m=p.normals,l=p.binormals;this.tangents=r;this.normals=m;this.binormals=l;function k(a,c,b){return w.vertices.push(new THREE.Vector3(a,c,b))-1}for(P=0;P<e;P++){this.grid[P]=[];G=P/(e-1);t=K.getPointAt(G);D=r[P];H=m[P];A=l[P];if(this.debug){this.debug.add(new THREE.ArrowHelper(D,t,J,255));this.debug.add(new THREE.ArrowHelper(H,t,J,16711680));this.debug.add(new THREE.ArrowHelper(A,t,J,65280))}for(O=0;O<this.radiusSegments;O++){F=O/this.radiusSegments*2*Math.PI;o=-this.radius*Math.cos(F);n=this.radius*Math.sin(F);f.copy(t);f.x+=o*H.x+n*A.x;f.y+=o*H.y+n*A.y;f.z+=o*H.z+n*A.z;this.grid[P][O]=k(f.x,f.y,f.z)}}for(P=0;P<this.segments;P++){for(O=0;O<this.radiusSegments;O++){s=(this.closed)?(P+1)%this.segments:P+1;g=(O+1)%this.radiusSegments;Y=this.grid[P][O];X=this.grid[s][O];W=this.grid[s][g];V=this.grid[P][g];U=new THREE.Vector2(P/this.segments,O/this.radiusSegments);S=new THREE.Vector2((P+1)/this.segments,O/this.radiusSegments);R=new THREE.Vector2((P+1)/this.segments,(O+1)/this.radiusSegments);Q=new THREE.Vector2(P/this.segments,(O+1)/this.radiusSegments);this.faces.push(new THREE.Face4(Y,X,W,V));this.faceVertexUvs[0].push([U,S,R,Q])}}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TubeGeometry.FrenetFrames=function(o,r,c){var f=new THREE.Vector3(),z=new THREE.Vector3(),p=new THREE.Vector3(),q=[],n=[],d=[],m=new THREE.Vector3(),t=new THREE.Matrix4(),b=r+1,e,A=0.0001,a,y,x,w,s,j,g;this.tangents=q;this.normals=n;this.binormals=d;for(s=0;s<b;s++){j=s/(b-1);q[s]=o.getTangentAt(j);q[s].normalize()}h();function l(i){n[0]=new THREE.Vector3();d[0]=new THREE.Vector3();if(i===undefined){i=new THREE.Vector3(0,0,1)}n[0].crossVectors(i,q[0]).normalize();d[0].crossVectors(q[0],n[0]).normalize()}function k(){var i=o.getTangentAt(A);n[0]=new THREE.Vector3().subVectors(i,q[0]).normalize();d[0]=new THREE.Vector3().crossVectors(q[0],n[0]);n[0].crossVectors(d[0],q[0]).normalize();d[0].crossVectors(q[0],n[0]).normalize()}function h(){n[0]=new THREE.Vector3();d[0]=new THREE.Vector3();a=Number.MAX_VALUE;y=Math.abs(q[0].x);x=Math.abs(q[0].y);w=Math.abs(q[0].z);if(y<=a){a=y;z.set(1,0,0)}if(x<=a){a=x;z.set(0,1,0)}if(w<=a){z.set(0,0,1)}m.crossVectors(q[0],z).normalize();n[0].crossVectors(q[0],m);d[0].crossVectors(q[0],n[0])}for(s=1;s<b;s++){n[s]=n[s-1].clone();d[s]=d[s-1].clone();m.crossVectors(q[s-1],q[s]);if(m.length()>A){m.normalize();e=Math.acos(q[s-1].dot(q[s]));n[s].applyMatrix4(t.makeRotationAxis(m,e))}d[s].crossVectors(q[s],n[s])}if(c){e=Math.acos(n[0].dot(n[b-1]));e/=(b-1);if(q[0].dot(m.crossVectors(n[0],n[b-1]))>0){e=-e}for(s=1;s<b;s++){n[s].applyMatrix4(t.makeRotationAxis(q[s],e*s));d[s].crossVectors(q[s],n[s])}}};THREE.PolyhedronGeometry=function(m,c,k,C){THREE.Geometry.call(this);k=k||1;C=C||0;var n=this;for(var w=0,u=m.length;w<u;w++){e(new THREE.Vector3(m[w][0],m[w][1],m[w][2]))}var s=[],r=this.vertices;var A=[];for(var w=0,u=c.length;w<u;w++){var h=r[c[w][0]];var g=r[c[w][1]];var b=r[c[w][2]];A[w]=new THREE.Face3(h.index,g.index,b.index,[h.clone(),g.clone(),b.clone()])}for(var w=0,u=A.length;w<u;w++){o(A[w],C)}for(var w=0,u=this.faceVertexUvs[0].length;w<u;w++){var q=this.faceVertexUvs[0][w];var B=q[0].x;var z=q[1].x;var y=q[2].x;var v=Math.max(B,Math.max(z,y));var t=Math.min(B,Math.min(z,y));if(v>0.9&&t<0.1){if(B<0.2){q[0].x+=1}if(z<0.2){q[1].x+=1}if(y<0.2){q[2].x+=1}}}this.mergeVertices();for(var w=0,u=this.vertices.length;w<u;w++){this.vertices[w].multiplyScalar(k)}function e(f){var p=f.normalize().clone();p.index=n.vertices.push(p)-1;var l=x(f)/2/Math.PI+0.5;var i=d(f)/Math.PI+0.5;p.uv=new THREE.Vector2(l,1-i);return p}function j(D,p,l){var i=new THREE.Face3(D.index,p.index,l.index,[D.clone(),p.clone(),l.clone()]);i.centroid.add(D).add(p).add(l).divideScalar(3);i.normal.copy(i.centroid).normalize();n.faces.push(i);var f=x(i.centroid);n.faceVertexUvs[0].push([a(D.uv,D,f),a(p.uv,p,f),a(l.uv,l,f)])}function o(G,E){var I=Math.pow(2,E);var M=Math.pow(4,E);var K=e(n.vertices[G.a]);var J=e(n.vertices[G.b]);var H=e(n.vertices[G.c]);var L=[];for(var D=0;D<=I;D++){L[D]=[];var F=e(K.clone().lerp(H,D/I));var f=e(J.clone().lerp(H,D/I));var N=I-D;for(var p=0;p<=N;p++){if(p==0&&D==I){L[D][p]=F}else{L[D][p]=e(F.clone().lerp(f,p/N))}}}for(var D=0;D<I;D++){for(var p=0;p<2*(I-D)-1;p++){var l=Math.floor(p/2);if(p%2==0){j(L[D][l+1],L[D+1][l],L[D][l])}else{j(L[D][l+1],L[D+1][l+1],L[D+1][l])}}}}function x(f){return Math.atan2(f.z,-f.x)}function d(f){return Math.atan2(-f.y,Math.sqrt((f.x*f.x)+(f.z*f.z)))}function a(i,f,l){if((l<0)&&(i.x===1)){i=new THREE.Vector2(i.x-1,i.y)}if((f.x===0)&&(f.z===0)){i=new THREE.Vector2(l/2/Math.PI+0.5,i.y)}return i.clone()}this.computeCentroids();this.boundingSphere=new THREE.Sphere(new THREE.Vector3(),k)};THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.IcosahedronGeometry=function(b,e){this.radius=b;this.detail=e;var d=(1+Math.sqrt(5))/2;var c=[[-1,d,0],[1,d,0],[-1,-d,0],[1,-d,0],[0,-1,d],[0,1,d],[0,-1,-d],[0,1,-d],[d,0,-1],[d,0,1],[-d,0,-1],[-d,0,1]];var a=[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]];THREE.PolyhedronGeometry.call(this,c,a,b,e)};THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.OctahedronGeometry=function(b,d){var c=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]];var a=[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]];THREE.PolyhedronGeometry.call(this,c,a,b,d)};THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.TetrahedronGeometry=function(b,d){var c=[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]];var a=[[2,1,0],[0,3,2],[1,3,0],[2,3,1]];THREE.PolyhedronGeometry.call(this,c,a,b,d)};THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometry=function(g,f,B,w){THREE.Geometry.call(this);var F=this.vertices;var e=this.faces;var k=this.faceVertexUvs[0];w=(w===undefined)?false:w;var s,h,q,o;var m,l;var n=B+1;var E=f+1;for(s=0;s<=B;s++){l=s/B;for(q=0;q<=f;q++){m=q/f;o=g(m,l);F.push(o)}}var D,C,A,z;var y,x,t,r;for(s=0;s<B;s++){for(q=0;q<f;q++){D=s*E+q;C=s*E+q+1;A=(s+1)*E+q;z=(s+1)*E+q+1;y=new THREE.Vector2(q/f,s/B);x=new THREE.Vector2((q+1)/f,s/B);t=new THREE.Vector2(q/f,(s+1)/B);r=new THREE.Vector2((q+1)/f,(s+1)/B);if(w){e.push(new THREE.Face3(D,C,A));e.push(new THREE.Face3(C,z,A));k.push([y,x,t]);k.push([x,r,t])}else{e.push(new THREE.Face4(D,C,z,A));k.push([y,x,r,t])}}}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ConvexGeometry=function(k){THREE.Geometry.call(this);var d=[[0,1,2],[0,2,1]];for(var g=3;g<k.length;g++){b(g)}function b(v){var s=k[v].clone();var r=s.length();s.x+=r*n();s.y+=r*n();s.z+=r*n();var i=[];for(var t=0;t<d.length;){var w=d[t];if(e(w,s)){for(var u=0;u<3;u++){var p=[w[u],w[(u+1)%3]];var j=true;for(var q=0;q<i.length;q++){if(o(i[q],p)){i[q]=i[i.length-1];i.pop();j=false;break}}if(j){i.push(p)}}d[t]=d[d.length-1];d.pop()}else{t++}}for(var q=0;q<i.length;q++){d.push([i[q][0],i[q][1],v])}}function e(r,q){var p=k[r[0]];var j=k[r[1]];var i=k[r[2]];var t=h(p,j,i);var s=t.dot(p);return t.dot(q)>=s}function h(q,p,j){var i=new THREE.Vector3();var r=new THREE.Vector3();i.subVectors(j,p);r.subVectors(q,p);i.cross(r);i.normalize();return i}function o(j,i){return j[0]===i[1]&&j[1]===i[0]}function n(){return(Math.random()-0.5)*2*0.000001}function m(j){var i=j.length();return new THREE.Vector2(j.x/i,j.y/i)}var a=0;var c=new Array(k.length);for(var g=0;g<d.length;g++){var l=d[g];for(var f=0;f<3;f++){if(c[l[f]]===undefined){c[l[f]]=a++;this.vertices.push(k[l[f]])}l[f]=c[l[f]]}}for(var g=0;g<d.length;g++){this.faces.push(new THREE.Face3(d[g][0],d[g][1],d[g][2]))}for(var g=0;g<this.faces.length;g++){var l=this.faces[g];this.faceVertexUvs[0].push([m(this.vertices[l.a]),m(this.vertices[l.b]),m(this.vertices[l.c])])}this.computeCentroids();this.computeFaceNormals();this.computeVertexNormals()};THREE.ConvexGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.AxisHelper=function(a){a=a||1;var c=new THREE.Geometry();c.vertices.push(new THREE.Vector3(),new THREE.Vector3(a,0,0),new THREE.Vector3(),new THREE.Vector3(0,a,0),new THREE.Vector3(),new THREE.Vector3(0,0,a));c.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var b=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,c,b,THREE.LinePieces)};THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype);THREE.ArrowHelper=function(c,b,f,e){THREE.Object3D.call(this);if(e===undefined){e=16776960}if(f===undefined){f=1}this.position=b;this.useQuaternion=true;var a=new THREE.Geometry();a.vertices.push(new THREE.Vector3(0,0,0));a.vertices.push(new THREE.Vector3(0,1,0));this.line=new THREE.Line(a,new THREE.LineBasicMaterial({color:e}));this.line.matrixAutoUpdate=false;this.add(this.line);var d=new THREE.CylinderGeometry(0,0.05,0.25,5,1);d.applyMatrix(new THREE.Matrix4().makeTranslation(0,0.875,0));this.cone=new THREE.Mesh(d,new THREE.MeshBasicMaterial({color:e}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(c);this.setLength(f)};THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.ArrowHelper.prototype.setDirection=function(){var a=new THREE.Vector3();var b;return function(c){if(c.y>0.999){this.quaternion.set(0,0,0,1)}else{if(c.y<-0.999){this.quaternion.set(1,0,0,0)}else{a.set(c.z,0,-c.x).normalize();b=Math.acos(c.y);this.quaternion.setFromAxisAngle(a,b)}}}}();THREE.ArrowHelper.prototype.setLength=function(a){this.scale.set(a,a,a)};THREE.ArrowHelper.prototype.setColor=function(a){this.line.material.color.setHex(a);this.cone.material.color.setHex(a)};THREE.BoxHelper=function(b){b=b||1;var c=new THREE.Geometry();var a=[new THREE.Vector3(b,b,b),new THREE.Vector3(-b,b,b),new THREE.Vector3(-b,-b,b),new THREE.Vector3(b,-b,b),new THREE.Vector3(b,b,-b),new THREE.Vector3(-b,b,-b),new THREE.Vector3(-b,-b,-b),new THREE.Vector3(b,-b,-b)];c.vertices.push(a[0],a[1],a[1],a[2],a[2],a[3],a[3],a[0],a[4],a[5],a[5],a[6],a[6],a[7],a[7],a[4],a[0],a[4],a[1],a[5],a[2],a[6],a[3],a[7]);this.vertices=a;THREE.Line.call(this,c,new THREE.LineBasicMaterial(),THREE.LinePieces)};THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype);THREE.BoxHelper.prototype.update=function(c){var e=c.geometry;if(e.boundingBox===null){e.computeBoundingBox()}var d=e.boundingBox.min;var a=e.boundingBox.max;var b=this.vertices;b[0].set(a.x,a.y,a.z);b[1].set(d.x,a.y,a.z);b[2].set(d.x,d.y,a.z);b[3].set(a.x,d.y,a.z);b[4].set(a.x,a.y,d.z);b[5].set(d.x,a.y,d.z);b[6].set(d.x,d.y,d.z);b[7].set(a.x,d.y,d.z);this.geometry.computeBoundingSphere();this.geometry.verticesNeedUpdate=true;this.matrixAutoUpdate=false;this.matrixWorld=c.matrixWorld};THREE.CameraHelper=function(e){THREE.Line.call(this);var h=new THREE.Geometry();var f=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors});var g={};var d=16755200;var k=16711680;var b=43775;var i=16777215;var c=3355443;j("n1","n2",d);j("n2","n4",d);j("n4","n3",d);j("n3","n1",d);j("f1","f2",d);j("f2","f4",d);j("f4","f3",d);j("f3","f1",d);j("n1","f1",d);j("n2","f2",d);j("n3","f3",d);j("n4","f4",d);j("p","n1",k);j("p","n2",k);j("p","n3",k);j("p","n4",k);j("u1","u2",b);j("u2","u3",b);j("u3","u1",b);j("c","t",i);j("p","c",c);j("cn1","cn2",c);j("cn3","cn4",c);j("cf1","cf2",c);j("cf3","cf4",c);function j(m,l,n){a(m,n);a(l,n)}function a(m,l){h.vertices.push(new THREE.Vector3());h.colors.push(new THREE.Color(l));if(g[m]===undefined){g[m]=[]}g[m].push(h.vertices.length-1)}THREE.Line.call(this,h,f,THREE.LinePieces);this.camera=e;this.matrixWorld=e.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=g;this.update()};THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype);THREE.CameraHelper.prototype.update=function(){var a=new THREE.Vector3();var b=new THREE.Camera();var c=new THREE.Projector();return function(){var g=this;var d=1,f=1;b.projectionMatrix.copy(this.camera.projectionMatrix);e("c",0,0,-1);e("t",0,0,1);e("n1",-d,-f,-1);e("n2",d,-f,-1);e("n3",-d,f,-1);e("n4",d,f,-1);e("f1",-d,-f,1);e("f2",d,-f,1);e("f3",-d,f,1);e("f4",d,f,1);e("u1",d*0.7,f*1.1,-1);e("u2",-d*0.7,f*1.1,-1);e("u3",0,f*2,-1);e("cf1",-d,0,1);e("cf2",d,0,1);e("cf3",0,-f,1);e("cf4",0,f,1);e("cn1",-d,0,-1);e("cn2",d,0,-1);e("cn3",0,-f,-1);e("cn4",0,f,-1);function e(j,h,o,n){a.set(h,o,n);c.unprojectVector(a,b);var m=g.pointMap[j];if(m!==undefined){for(var l=0,k=m.length;l<k;l++){g.geometry.vertices[m[l]].copy(a)}}}this.geometry.verticesNeedUpdate=true}}();THREE.DirectionalLightHelper=function(a,d){THREE.Object3D.call(this);this.matrixAutoUpdate=false;this.light=a;var c=new THREE.SphereGeometry(d,4,2);var b=new THREE.MeshBasicMaterial({fog:false,wireframe:true});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightSphere=new THREE.Mesh(c,b);this.lightSphere.matrixWorld=this.light.matrixWorld;this.lightSphere.matrixAutoUpdate=false;this.add(this.lightSphere);c=new THREE.Geometry();c.vertices.push(this.light.position);c.vertices.push(this.light.target.position);c.computeLineDistances();b=new THREE.LineDashedMaterial({dashSize:4,gapSize:4,opacity:0.75,transparent:true,fog:false});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine=new THREE.Line(c,b);this.add(this.targetLine)};THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.DirectionalLightHelper.prototype.update=function(){this.lightSphere.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.targetLine.geometry.computeLineDistances();this.targetLine.geometry.verticesNeedUpdate=true;this.targetLine.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.GridHelper=function(e,g){var h=new THREE.Geometry();var f=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});var b=new THREE.Color(4473924),a=new THREE.Color(8947848);for(var d=-e;d<=e;d+=g){h.vertices.push(new THREE.Vector3(-e,0,d));h.vertices.push(new THREE.Vector3(e,0,d));h.vertices.push(new THREE.Vector3(d,0,-e));h.vertices.push(new THREE.Vector3(d,0,e));var c=d===0?b:a;h.colors.push(c,c,c,c)}THREE.Line.call(this,h,f,THREE.LinePieces)};THREE.GridHelper.prototype=Object.create(THREE.Line.prototype);THREE.HemisphereLightHelper=function(e,b,g,c){THREE.Object3D.call(this);this.light=e;var h=new THREE.SphereGeometry(b,4,2);h.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI/2));for(var f=0,j=8;f<j;f++){h.faces[f].materialIndex=f<4?0:1}var d=new THREE.MeshBasicMaterial({fog:false,wireframe:true});d.color.copy(e.color).multiplyScalar(e.intensity);var a=new THREE.MeshBasicMaterial({fog:false,wireframe:true});a.color.copy(e.groundColor).multiplyScalar(e.intensity);this.lightSphere=new THREE.Mesh(h,new THREE.MeshFaceMaterial([d,a]));this.lightSphere.position=e.position;this.lightSphere.lookAt(new THREE.Vector3());this.add(this.lightSphere)};THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.HemisphereLightHelper.prototype.update=function(){this.lightSphere.lookAt(new THREE.Vector3());this.lightSphere.material.materials[0].color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightSphere.material.materials[1].color.copy(this.light.groundColor).multiplyScalar(this.light.intensity)};THREE.PointLightHelper=function(a,d){THREE.Object3D.call(this);this.matrixAutoUpdate=false;this.light=a;var c=new THREE.SphereGeometry(d,4,2);var b=new THREE.MeshBasicMaterial({fog:false,wireframe:true});b.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightSphere=new THREE.Mesh(c,b);this.lightSphere.matrixWorld=this.light.matrixWorld;this.lightSphere.matrixAutoUpdate=false;this.add(this.lightSphere)};THREE.PointLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.PointLightHelper.prototype.update=function(){this.lightSphere.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.SpotLightHelper=function(b,f){THREE.Object3D.call(this);this.matrixAutoUpdate=false;this.light=b;var e=new THREE.SphereGeometry(f,4,2);var d=new THREE.MeshBasicMaterial({fog:false,wireframe:true});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightSphere=new THREE.Mesh(e,d);this.lightSphere.matrixWorld=this.light.matrixWorld;this.lightSphere.matrixAutoUpdate=false;this.add(this.lightSphere);e=new THREE.CylinderGeometry(0.0001,1,1,8,1,true);e.applyMatrix(new THREE.Matrix4().makeTranslation(0,-0.5,0));e.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI/2));d=new THREE.MeshBasicMaterial({fog:false,wireframe:true,opacity:0.3,transparent:true});d.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightCone=new THREE.Mesh(e,d);this.lightCone.position=this.light.position;var a=b.distance?b.distance:10000;var c=a*Math.tan(b.angle);this.lightCone.scale.set(c,c,a);this.lightCone.lookAt(this.light.target.position);this.add(this.lightCone)};THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype);THREE.SpotLightHelper.prototype.update=function(){var a=this.light.distance?this.light.distance:10000;var b=a*Math.tan(this.light.angle);this.lightCone.scale.set(b,b,a);this.lightCone.lookAt(this.light.target.position);this.lightSphere.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);this.lightCone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare=function(d,b,e,c,a){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3();this.customUpdateCallback=undefined;if(d!==undefined){this.add(d,b,e,c,a)}};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);THREE.LensFlare.prototype.add=function(e,c,f,d,a,b){if(c===undefined){c=-1}if(f===undefined){f=0}if(b===undefined){b=1}if(a===undefined){a=new THREE.Color(16777215)}if(d===undefined){d=THREE.NormalBlending}f=Math.min(f,Math.max(0,f));this.lensFlares.push({texture:e,size:c,distance:f,x:0,y:0,z:0,scale:1,rotation:1,opacity:b,color:a,blending:d})};THREE.LensFlare.prototype.updateLensFlares=function(){var d,c=this.lensFlares.length;var b;var a=-this.positionScreen.x*2;var e=-this.positionScreen.y*2;for(d=0;d<c;d++){b=this.lensFlares[d];b.x=this.positionScreen.x+a*b.distance;b.y=this.positionScreen.y+e*b.distance;b.wantedRotation=b.x*Math.PI*0.25;b.rotation+=(b.wantedRotation-b.rotation)*0.25}};THREE.MorphBlendMesh=function(g,d){THREE.Mesh.call(this,g,d);this.animationsMap={};this.animationsList=[];var f=this.geometry.morphTargets.length;var b="__default";var c=0;var a=f-1;var e=f/1;this.createAnimation(b,c,a,e);this.setAnimationWeight(b,1)};THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.MorphBlendMesh.prototype.createAnimation=function(b,e,a,d){var c={startFrame:e,endFrame:a,length:a-e+1,fps:d,duration:(a-e)/d,lastFrame:0,currentFrame:0,active:false,time:0,direction:1,weight:1,directionBackwards:false,mirroredLoop:false};this.animationsMap[b]=c;this.animationsList.push(c)};THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(c){var j=/([a-z]+)(\d+)/;var b,g={};var k=this.geometry;for(var d=0,l=k.morphTargets.length;d<l;d++){var m=k.morphTargets[d];var h=m.name.match(j);if(h&&h.length>1){var a=h[1];var f=h[2];if(!g[a]){g[a]={start:Infinity,end:-Infinity}}var e=g[a];if(d<e.start){e.start=d}if(d>e.end){e.end=d}if(!b){b=a}}}for(var a in g){var e=g[a];this.createAnimation(a,e.start,e.end,c)}this.firstAnimation=b};THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(a){var b=this.animationsMap[a];if(b){b.direction=1;b.directionBackwards=false}};THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(a){var b=this.animationsMap[a];if(b){b.direction=-1;b.directionBackwards=true}};THREE.MorphBlendMesh.prototype.setAnimationFPS=function(a,c){var b=this.animationsMap[a];if(b){b.fps=c;b.duration=(b.end-b.start)/b.fps}};THREE.MorphBlendMesh.prototype.setAnimationDuration=function(a,c){var b=this.animationsMap[a];if(b){b.duration=c;b.fps=(b.end-b.start)/b.duration}};THREE.MorphBlendMesh.prototype.setAnimationWeight=function(a,c){var b=this.animationsMap[a];if(b){b.weight=c}};THREE.MorphBlendMesh.prototype.setAnimationTime=function(a,c){var b=this.animationsMap[a];if(b){b.time=c}};THREE.MorphBlendMesh.prototype.getAnimationTime=function(a){var c=0;var b=this.animationsMap[a];if(b){c=b.time}return c};THREE.MorphBlendMesh.prototype.getAnimationDuration=function(a){var c=-1;var b=this.animationsMap[a];if(b){c=b.duration}return c};THREE.MorphBlendMesh.prototype.playAnimation=function(a){var b=this.animationsMap[a];if(b){b.time=0;b.active=true}else{console.warn("animation["+a+"] undefined")}};THREE.MorphBlendMesh.prototype.stopAnimation=function(a){var b=this.animationsMap[a];if(b){b.active=false}};THREE.MorphBlendMesh.prototype.update=function(h){for(var c=0,a=this.animationsList.length;c<a;c++){var g=this.animationsList[c];if(!g.active){continue}var e=g.duration/g.length;g.time+=g.direction*h;if(g.mirroredLoop){if(g.time>g.duration||g.time<0){g.direction*=-1;if(g.time>g.duration){g.time=g.duration;g.directionBackwards=true}if(g.time<0){g.time=0;g.directionBackwards=false}}}else{g.time=g.time%g.duration;if(g.time<0){g.time+=g.duration}}var b=g.startFrame+THREE.Math.clamp(Math.floor(g.time/e),0,g.length-1);var f=g.weight;if(b!==g.currentFrame){this.morphTargetInfluences[g.lastFrame]=0;this.morphTargetInfluences[g.currentFrame]=1*f;this.morphTargetInfluences[b]=0;g.lastFrame=g.currentFrame;g.currentFrame=b}var d=(g.time%e)/e;if(g.directionBackwards){d=1-d}this.morphTargetInfluences[g.currentFrame]=d*f;this.morphTargetInfluences[g.lastFrame]=(1-d)*f}};THREE.LensFlarePlugin=function(){var c,d,a,e={};this.init=function(g){c=g.context;d=g;a=g.getPrecision();e.vertices=new Float32Array(8+8);e.faces=new Uint16Array(6);var f=0;e.vertices[f++]=-1;e.vertices[f++]=-1;e.vertices[f++]=0;e.vertices[f++]=0;e.vertices[f++]=1;e.vertices[f++]=-1;e.vertices[f++]=1;e.vertices[f++]=0;e.vertices[f++]=1;e.vertices[f++]=1;e.vertices[f++]=1;e.vertices[f++]=1;e.vertices[f++]=-1;e.vertices[f++]=1;e.vertices[f++]=0;e.vertices[f++]=1;f=0;e.faces[f++]=0;e.faces[f++]=1;e.faces[f++]=2;e.faces[f++]=0;e.faces[f++]=2;e.faces[f++]=3;e.vertexBuffer=c.createBuffer();e.elementBuffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,e.vertices,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.elementBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,e.faces,c.STATIC_DRAW);e.tempTexture=c.createTexture();e.occlusionTexture=c.createTexture();c.bindTexture(c.TEXTURE_2D,e.tempTexture);c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.bindTexture(c.TEXTURE_2D,e.occlusionTexture);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);if(c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0){e.hasVertexTexture=false;e.program=b(THREE.ShaderFlares.lensFlare,a)}else{e.hasVertexTexture=true;e.program=b(THREE.ShaderFlares.lensFlareVertexTexture,a)}e.attributes={};e.uniforms={};e.attributes.vertex=c.getAttribLocation(e.program,"position");e.attributes.uv=c.getAttribLocation(e.program,"uv");e.uniforms.renderType=c.getUniformLocation(e.program,"renderType");e.uniforms.map=c.getUniformLocation(e.program,"map");e.uniforms.occlusionMap=c.getUniformLocation(e.program,"occlusionMap");e.uniforms.opacity=c.getUniformLocation(e.program,"opacity");e.uniforms.color=c.getUniformLocation(e.program,"color");e.uniforms.scale=c.getUniformLocation(e.program,"scale");e.uniforms.rotation=c.getUniformLocation(e.program,"rotation");e.uniforms.screenPosition=c.getUniformLocation(e.program,"screenPosition")};this.render=function(y,v,r,f){var n=y.__webglFlares,A=n.length;if(!A){return}var w=new THREE.Vector3();var h=f/r,x=r*0.5,q=f*0.5;var o=16/f,B=new THREE.Vector2(o*h,o);var m=new THREE.Vector3(1,1,0),l=new THREE.Vector2(1,1);var z=e.uniforms,k=e.attributes;c.useProgram(e.program);c.enableVertexAttribArray(e.attributes.vertex);c.enableVertexAttribArray(e.attributes.uv);c.uniform1i(z.occlusionMap,0);c.uniform1i(z.map,1);c.bindBuffer(c.ARRAY_BUFFER,e.vertexBuffer);c.vertexAttribPointer(k.vertex,2,c.FLOAT,false,2*8,0);c.vertexAttribPointer(k.uv,2,c.FLOAT,false,2*8,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.elementBuffer);c.disable(c.CULL_FACE);c.depthMask(false);var t,s,u,g,p;for(t=0;t<A;t++){o=16/f;B.set(o*h,o);g=n[t];w.set(g.matrixWorld.elements[12],g.matrixWorld.elements[13],g.matrixWorld.elements[14]);w.applyMatrix4(v.matrixWorldInverse);w.applyProjection(v.projectionMatrix);m.copy(w);l.x=m.x*x+x;l.y=m.y*q+q;if(e.hasVertexTexture||(l.x>0&&l.x<r&&l.y>0&&l.y<f)){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,e.tempTexture);c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,l.x-8,l.y-8,16,16,0);c.uniform1i(z.renderType,0);c.uniform2f(z.scale,B.x,B.y);c.uniform3f(z.screenPosition,m.x,m.y,m.z);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,e.occlusionTexture);c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,l.x-8,l.y-8,16,16,0);c.uniform1i(z.renderType,1);c.disable(c.DEPTH_TEST);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,e.tempTexture);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0);g.positionScreen.copy(m);if(g.customUpdateCallback){g.customUpdateCallback(g)}else{g.updateLensFlares()}c.uniform1i(z.renderType,2);c.enable(c.BLEND);for(s=0,u=g.lensFlares.length;s<u;s++){p=g.lensFlares[s];if(p.opacity>0.001&&p.scale>0.001){m.x=p.x;m.y=p.y;m.z=p.z;o=p.size*p.scale/f;B.x=o*h;B.y=o;c.uniform3f(z.screenPosition,m.x,m.y,m.z);c.uniform2f(z.scale,B.x,B.y);c.uniform1f(z.rotation,p.rotation);c.uniform1f(z.opacity,p.opacity);c.uniform3f(z.color,p.color.r,p.color.g,p.color.b);d.setBlending(p.blending,p.blendEquation,p.blendSrc,p.blendDst);d.setTexture(p.texture,1);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}}}}c.enable(c.CULL_FACE);c.enable(c.DEPTH_TEST);c.depthMask(true)};function b(i,g){var h=c.createProgram();var f=c.createShader(c.FRAGMENT_SHADER);var k=c.createShader(c.VERTEX_SHADER);var j="precision "+g+" float;\n";c.shaderSource(f,j+i.fragmentShader);c.shaderSource(k,j+i.vertexShader);c.compileShader(f);c.compileShader(k);c.attachShader(h,f);c.attachShader(h,k);c.linkProgram(h);return h}};THREE.ShadowMapPlugin=function(){var a,k,n,e,b,l,m=new THREE.Frustum(),c=new THREE.Matrix4(),h=new THREE.Vector3(),o=new THREE.Vector3(),j=new THREE.Vector3();this.init=function(r){a=r.context;k=r;var p=THREE.ShaderLib.depthRGBA;var q=THREE.UniformsUtils.clone(p.uniforms);n=new THREE.ShaderMaterial({fragmentShader:p.fragmentShader,vertexShader:p.vertexShader,uniforms:q});e=new THREE.ShaderMaterial({fragmentShader:p.fragmentShader,vertexShader:p.vertexShader,uniforms:q,morphTargets:true});b=new THREE.ShaderMaterial({fragmentShader:p.fragmentShader,vertexShader:p.vertexShader,uniforms:q,skinning:true});l=new THREE.ShaderMaterial({fragmentShader:p.fragmentShader,vertexShader:p.vertexShader,uniforms:q,morphTargets:true,skinning:true});n._shadowPass=true;e._shadowPass=true;b._shadowPass=true;l._shadowPass=true};this.render=function(q,p){if(!(k.shadowMapEnabled&&k.shadowMapAutoUpdate)){return}this.update(q,p)};this.update=function(N,L){var K,y,J,M,E,t,O,Q,x,I,B,q,R,v,z,P=[],H=0,p=null;a.clearColor(1,1,1,1);a.disable(a.BLEND);a.enable(a.CULL_FACE);a.frontFace(a.CCW);if(k.shadowMapCullFace===THREE.CullFaceFront){a.cullFace(a.FRONT)}else{a.cullFace(a.BACK)}k.setDepthTest(true);for(K=0,y=N.__lights.length;K<y;K++){v=N.__lights[K];if(!v.castShadow){continue}if((v instanceof THREE.DirectionalLight)&&v.shadowCascade){for(E=0;E<v.shadowCascadeCount;E++){var u;if(!v.shadowCascadeArray[E]){u=d(v,E);u.originalCamera=L;var G=new THREE.Gyroscope();G.position=v.shadowCascadeOffset;G.add(u);G.add(u.target);L.add(G);v.shadowCascadeArray[E]=u;console.log("Created virtualLight",u)}else{u=v.shadowCascadeArray[E]}g(v,E);P[H]=u;H++}}else{P[H]=v;H++}}for(K=0,y=P.length;K<y;K++){v=P[K];if(!v.shadowMap){var D=THREE.LinearFilter;if(k.shadowMapType===THREE.PCFSoftShadowMap){D=THREE.NearestFilter}var F={minFilter:D,magFilter:D,format:THREE.RGBAFormat};v.shadowMap=new THREE.WebGLRenderTarget(v.shadowMapWidth,v.shadowMapHeight,F);v.shadowMapSize=new THREE.Vector2(v.shadowMapWidth,v.shadowMapHeight);v.shadowMatrix=new THREE.Matrix4()}if(!v.shadowCamera){if(v instanceof THREE.SpotLight){v.shadowCamera=new THREE.PerspectiveCamera(v.shadowCameraFov,v.shadowMapWidth/v.shadowMapHeight,v.shadowCameraNear,v.shadowCameraFar)}else{if(v instanceof THREE.DirectionalLight){v.shadowCamera=new THREE.OrthographicCamera(v.shadowCameraLeft,v.shadowCameraRight,v.shadowCameraTop,v.shadowCameraBottom,v.shadowCameraNear,v.shadowCameraFar)}else{console.error("Unsupported light type for shadow");continue}}N.add(v.shadowCamera);if(N.autoUpdate===true){N.updateMatrixWorld()}}if(v.shadowCameraVisible&&!v.cameraHelper){v.cameraHelper=new THREE.CameraHelper(v.shadowCamera);v.shadowCamera.add(v.cameraHelper)}if(v.isVirtual&&u.originalCamera==L){i(L,v)}t=v.shadowMap;O=v.shadowMatrix;Q=v.shadowCamera;Q.position.getPositionFromMatrix(v.matrixWorld);j.getPositionFromMatrix(v.target.matrixWorld);Q.lookAt(j);Q.updateMatrixWorld();Q.matrixWorldInverse.getInverse(Q.matrixWorld);if(v.cameraHelper){v.cameraHelper.visible=v.shadowCameraVisible}if(v.shadowCameraVisible){v.cameraHelper.update()}O.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);O.multiply(Q.projectionMatrix);O.multiply(Q.matrixWorldInverse);c.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse);m.setFromMatrix(c);k.setRenderTarget(t);k.clear();z=N.__webglObjects;for(J=0,M=z.length;J<M;J++){q=z[J];R=q.object;q.render=false;if(R.visible&&R.castShadow){if(!(R instanceof THREE.Mesh||R instanceof THREE.ParticleSystem)||!(R.frustumCulled)||m.intersectsObject(R)){R._modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,R.matrixWorld);q.render=true}}}var s,w,A;for(J=0,M=z.length;J<M;J++){q=z[J];if(q.render){R=q.object;I=q.buffer;s=f(R);w=R.geometry.morphTargets.length>0&&s.morphTargets;A=R instanceof THREE.SkinnedMesh&&s.skinning;if(R.customDepthMaterial){B=R.customDepthMaterial}else{if(A){B=w?l:b}else{if(w){B=e}else{B=n}}}if(I instanceof THREE.BufferGeometry){k.renderBufferDirect(Q,N.__lights,p,B,I,R)}else{k.renderBuffer(Q,N.__lights,p,B,I,R)}}}z=N.__webglObjectsImmediate;for(J=0,M=z.length;J<M;J++){q=z[J];R=q.object;if(R.visible&&R.castShadow){R._modelViewMatrix.multiplyMatrices(Q.matrixWorldInverse,R.matrixWorld);k.renderImmediateObject(Q,N.__lights,p,n,R)}}}var r=k.getClearColor(),C=k.getClearAlpha();a.clearColor(r.r,r.g,r.b,C);a.enable(a.BLEND);if(k.shadowMapCullFace===THREE.CullFaceFront){a.cullFace(a.BACK)}};function d(q,s){var p=new THREE.DirectionalLight();p.isVirtual=true;p.onlyShadow=true;p.castShadow=true;p.shadowCameraNear=q.shadowCameraNear;p.shadowCameraFar=q.shadowCameraFar;p.shadowCameraLeft=q.shadowCameraLeft;p.shadowCameraRight=q.shadowCameraRight;p.shadowCameraBottom=q.shadowCameraBottom;p.shadowCameraTop=q.shadowCameraTop;p.shadowCameraVisible=q.shadowCameraVisible;p.shadowDarkness=q.shadowDarkness;p.shadowBias=q.shadowCascadeBias[s];p.shadowMapWidth=q.shadowCascadeWidth[s];p.shadowMapHeight=q.shadowCascadeHeight[s];p.pointsWorld=[];p.pointsFrustum=[];var v=p.pointsWorld,r=p.pointsFrustum;for(var u=0;u<8;u++){v[u]=new THREE.Vector3();r[u]=new THREE.Vector3()}var w=q.shadowCascadeNearZ[s];var t=q.shadowCascadeFarZ[s];r[0].set(-1,-1,w);r[1].set(1,-1,w);r[2].set(-1,1,w);r[3].set(1,1,w);r[4].set(-1,-1,t);r[5].set(1,-1,t);r[6].set(-1,1,t);r[7].set(1,1,t);return p}function g(q,s){var p=q.shadowCascadeArray[s];p.position.copy(q.position);p.target.position.copy(q.target.position);p.lookAt(p.target);p.shadowCameraVisible=q.shadowCameraVisible;p.shadowDarkness=q.shadowDarkness;p.shadowBias=q.shadowCascadeBias[s];var u=q.shadowCascadeNearZ[s];var t=q.shadowCascadeFarZ[s];var r=p.pointsFrustum;r[0].z=u;r[1].z=u;r[2].z=u;r[3].z=u;r[4].z=t;r[5].z=t;r[6].z=t;r[7].z=t}function i(t,q){var v=q.shadowCamera,r=q.pointsFrustum,u=q.pointsWorld;h.set(Infinity,Infinity,Infinity);o.set(-Infinity,-Infinity,-Infinity);for(var s=0;s<8;s++){var w=u[s];w.copy(r[s]);THREE.ShadowMapPlugin.__projector.unprojectVector(w,t);w.applyMatrix4(v.matrixWorldInverse);if(w.x<h.x){h.x=w.x}if(w.x>o.x){o.x=w.x}if(w.y<h.y){h.y=w.y}if(w.y>o.y){o.y=w.y}if(w.z<h.z){h.z=w.z}if(w.z>o.z){o.z=w.z}}v.left=h.x;v.right=o.x;v.top=o.y;v.bottom=h.y;v.updateProjectionMatrix()}function f(p){return p.material instanceof THREE.MeshFaceMaterial?p.material.materials[0]:p.material}};THREE.ShadowMapPlugin.__projector=new THREE.Projector();THREE.SpritePlugin=function(){var c,f,a,e={};this.init=function(h){c=h.context;f=h;a=h.getPrecision();e.vertices=new Float32Array(8+8);e.faces=new Uint16Array(6);var g=0;e.vertices[g++]=-1;e.vertices[g++]=-1;e.vertices[g++]=0;e.vertices[g++]=0;e.vertices[g++]=1;e.vertices[g++]=-1;e.vertices[g++]=1;e.vertices[g++]=0;e.vertices[g++]=1;e.vertices[g++]=1;e.vertices[g++]=1;e.vertices[g++]=1;e.vertices[g++]=-1;e.vertices[g++]=1;e.vertices[g++]=0;e.vertices[g++]=1;g=0;e.faces[g++]=0;e.faces[g++]=1;e.faces[g++]=2;e.faces[g++]=0;e.faces[g++]=2;e.faces[g++]=3;e.vertexBuffer=c.createBuffer();e.elementBuffer=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e.vertexBuffer);c.bufferData(c.ARRAY_BUFFER,e.vertices,c.STATIC_DRAW);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.elementBuffer);c.bufferData(c.ELEMENT_ARRAY_BUFFER,e.faces,c.STATIC_DRAW);e.program=b(THREE.ShaderSprite.sprite,a);e.attributes={};e.uniforms={};e.attributes.position=c.getAttribLocation(e.program,"position");e.attributes.uv=c.getAttribLocation(e.program,"uv");e.uniforms.uvOffset=c.getUniformLocation(e.program,"uvOffset");e.uniforms.uvScale=c.getUniformLocation(e.program,"uvScale");e.uniforms.rotation=c.getUniformLocation(e.program,"rotation");e.uniforms.scale=c.getUniformLocation(e.program,"scale");e.uniforms.alignment=c.getUniformLocation(e.program,"alignment");e.uniforms.color=c.getUniformLocation(e.program,"color");e.uniforms.map=c.getUniformLocation(e.program,"map");e.uniforms.opacity=c.getUniformLocation(e.program,"opacity");e.uniforms.useScreenCoordinates=c.getUniformLocation(e.program,"useScreenCoordinates");e.uniforms.sizeAttenuation=c.getUniformLocation(e.program,"sizeAttenuation");e.uniforms.screenPosition=c.getUniformLocation(e.program,"screenPosition");e.uniforms.modelViewMatrix=c.getUniformLocation(e.program,"modelViewMatrix");e.uniforms.projectionMatrix=c.getUniformLocation(e.program,"projectionMatrix");e.uniforms.fogType=c.getUniformLocation(e.program,"fogType");e.uniforms.fogDensity=c.getUniformLocation(e.program,"fogDensity");e.uniforms.fogNear=c.getUniformLocation(e.program,"fogNear");e.uniforms.fogFar=c.getUniformLocation(e.program,"fogFar");e.uniforms.fogColor=c.getUniformLocation(e.program,"fogColor");e.uniforms.alphaTest=c.getUniformLocation(e.program,"alphaTest")};this.render=function(y,w,u,j){var l=y.__webglSprites,m=l.length;if(!m){return}var n=e.attributes,A=e.uniforms;var k=j/u;var x=u*0.5,t=j*0.5;c.useProgram(e.program);c.enableVertexAttribArray(n.position);c.enableVertexAttribArray(n.uv);c.disable(c.CULL_FACE);c.enable(c.BLEND);c.bindBuffer(c.ARRAY_BUFFER,e.vertexBuffer);c.vertexAttribPointer(n.position,2,c.FLOAT,false,2*8,0);c.vertexAttribPointer(n.uv,2,c.FLOAT,false,2*8,8);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,e.elementBuffer);c.uniformMatrix4fv(A.projectionMatrix,false,w.projectionMatrix.elements);c.activeTexture(c.TEXTURE0);c.uniform1i(A.map,0);var z=0;var q=0;var h=y.fog;if(h){c.uniform3f(A.fogColor,h.color.r,h.color.g,h.color.b);if(h instanceof THREE.Fog){c.uniform1f(A.fogNear,h.near);c.uniform1f(A.fogFar,h.far);c.uniform1i(A.fogType,1);z=1;q=1}else{if(h instanceof THREE.FogExp2){c.uniform1f(A.fogDensity,h.density);c.uniform1i(A.fogType,2);z=2;q=2}}}else{c.uniform1i(A.fogType,0);z=0;q=0}var v,s,p,o,r,g,B=[];for(v=0;v<m;v++){s=l[v];p=s.material;if(!s.visible||p.opacity===0){continue}if(!p.useScreenCoordinates){s._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,s.matrixWorld);s.z=-s._modelViewMatrix.elements[14]}else{s.z=-s.position.z}}l.sort(d);for(v=0;v<m;v++){s=l[v];p=s.material;if(!s.visible||p.opacity===0){continue}if(p.map&&p.map.image&&p.map.image.width){c.uniform1f(A.alphaTest,p.alphaTest);if(p.useScreenCoordinates===true){c.uniform1i(A.useScreenCoordinates,1);c.uniform3f(A.screenPosition,((s.position.x*f.devicePixelRatio)-x)/x,(t-(s.position.y*f.devicePixelRatio))/t,Math.max(0,Math.min(1,s.position.z)));B[0]=f.devicePixelRatio;B[1]=f.devicePixelRatio}else{c.uniform1i(A.useScreenCoordinates,0);c.uniform1i(A.sizeAttenuation,p.sizeAttenuation?1:0);c.uniformMatrix4fv(A.modelViewMatrix,false,s._modelViewMatrix.elements);B[0]=1;B[1]=1}if(y.fog&&p.fog){g=q}else{g=0}if(z!==g){c.uniform1i(A.fogType,g);z=g}r=1/(p.scaleByViewport?j:1);B[0]*=r*k*s.scale.x;B[1]*=r*s.scale.y;c.uniform2f(A.uvScale,p.uvScale.x,p.uvScale.y);c.uniform2f(A.uvOffset,p.uvOffset.x,p.uvOffset.y);c.uniform2f(A.alignment,p.alignment.x,p.alignment.y);c.uniform1f(A.opacity,p.opacity);c.uniform3f(A.color,p.color.r,p.color.g,p.color.b);c.uniform1f(A.rotation,s.rotation);c.uniform2fv(A.scale,B);f.setBlending(p.blending,p.blendEquation,p.blendSrc,p.blendDst);f.setDepthTest(p.depthTest);f.setDepthWrite(p.depthWrite);f.setTexture(p.map,0);c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)}}c.enable(c.CULL_FACE)};function b(j,h){var i=c.createProgram();var g=c.createShader(c.FRAGMENT_SHADER);var l=c.createShader(c.VERTEX_SHADER);var k="precision "+h+" float;\n";c.shaderSource(g,k+j.fragmentShader);c.shaderSource(l,k+j.vertexShader);c.compileShader(g);c.compileShader(l);c.attachShader(i,g);c.attachShader(i,l);c.linkProgram(i);return i}function d(h,g){if(h.z!==g.z){return g.z-h.z}else{return g.id-h.id}}};THREE.DepthPassPlugin=function(){this.enabled=false;this.renderTarget=null;var a,f,i,d,b,g,h=new THREE.Frustum(),c=new THREE.Matrix4();this.init=function(l){a=l.context;f=l;var j=THREE.ShaderLib.depthRGBA;var k=THREE.UniformsUtils.clone(j.uniforms);i=new THREE.ShaderMaterial({fragmentShader:j.fragmentShader,vertexShader:j.vertexShader,uniforms:k});d=new THREE.ShaderMaterial({fragmentShader:j.fragmentShader,vertexShader:j.vertexShader,uniforms:k,morphTargets:true});b=new THREE.ShaderMaterial({fragmentShader:j.fragmentShader,vertexShader:j.vertexShader,uniforms:k,skinning:true});g=new THREE.ShaderMaterial({fragmentShader:j.fragmentShader,vertexShader:j.vertexShader,uniforms:k,morphTargets:true,skinning:true});i._shadowPass=true;d._shadowPass=true;b._shadowPass=true;g._shadowPass=true};this.render=function(k,j){if(!this.enabled){return}this.update(k,j)};this.update=function(D,B){var A,s,z,C,x,r,y,v,l,E,p,t,k=null;a.clearColor(1,1,1,1);a.disable(a.BLEND);f.setDepthTest(true);if(D.autoUpdate===true){D.updateMatrixWorld()}B.matrixWorldInverse.getInverse(B.matrixWorld);c.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse);h.setFromMatrix(c);f.setRenderTarget(this.renderTarget);f.clear();t=D.__webglObjects;for(z=0,C=t.length;z<C;z++){l=t[z];E=l.object;l.render=false;if(E.visible){if(!(E instanceof THREE.Mesh||E instanceof THREE.ParticleSystem)||!(E.frustumCulled)||h.intersectsObject(E)){E._modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,E.matrixWorld);l.render=true}}}var o,q,u;for(z=0,C=t.length;z<C;z++){l=t[z];if(l.render){E=l.object;y=l.buffer;if(E instanceof THREE.ParticleSystem&&!E.customDepthMaterial){continue}o=e(E);if(o){f.setMaterialFaces(E.material)}q=E.geometry.morphTargets.length>0&&o.morphTargets;u=E instanceof THREE.SkinnedMesh&&o.skinning;if(E.customDepthMaterial){v=E.customDepthMaterial}else{if(u){v=q?g:b}else{if(q){v=d}else{v=i}}}if(y instanceof THREE.BufferGeometry){f.renderBufferDirect(B,D.__lights,k,v,y,E)}else{f.renderBuffer(B,D.__lights,k,v,y,E)}}}t=D.__webglObjectsImmediate;for(z=0,C=t.length;z<C;z++){l=t[z];E=l.object;if(E.visible){E._modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,E.matrixWorld);f.renderImmediateObject(B,D.__lights,k,i,E)}}var m=f.getClearColor(),w=f.getClearAlpha();a.clearColor(m.r,m.g,m.b,w);a.enable(a.BLEND)};function e(j){return j.material instanceof THREE.MeshFaceMaterial?j.material.materials[0]:j.material}};THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.1 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ) +","texture2D( occlusionMap, vec2( 0.9, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.1, 0.9 ) ) +","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ) +","texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility = (       visibility.r / 9.0 ) *","( 1.0 - visibility.g / 9.0 ) *","(       visibility.b / 9.0 ) *","( 1.0 - visibility.a / 9.0 );","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a +","texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a +","texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a +","texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}};THREE.ShaderSprite={sprite:{vertexShader:["uniform int useScreenCoordinates;","uniform int sizeAttenuation;","uniform vec3 screenPosition;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position + alignment;","vec2 rotatedPosition;","rotatedPosition.x = ( cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y ) * scale.x;","rotatedPosition.y = ( sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y ) * scale.y;","vec4 finalPosition;","if( useScreenCoordinates != 0 ) {","finalPosition = vec4( screenPosition.xy + rotatedPosition, screenPosition.z, 1.0 );","} else {","finalPosition = projectionMatrix * modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition * ( sizeAttenuation == 1 ? 1.0 : finalPosition.z );","}","gl_Position = finalPosition;","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")}};var THREEx=THREEx||{};THREEx.WindowResize=function(b,a){var c=function(){b.setSize(window.innerWidth,window.innerHeight);a.aspect=window.innerWidth/window.innerHeight;a.updateProjectionMatrix()};window.addEventListener("resize",c,false);return{stop:function(){window.removeEventListener("resize",c)}}};this.createjs=this.createjs||{};(function(){var a=function(){throw"UID cannot be instantiated"};a._nextID=0;a.get=function(){return a._nextID++};createjs.UID=a})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},a=d.prototype;d.initialize=function(b){b.addEventListener=a.addEventListener;b.removeEventListener=a.removeEventListener;b.removeAllEventListeners=a.removeAllEventListeners;b.hasEventListener=a.hasEventListener;b.dispatchEvent=a.dispatchEvent};a._listeners=null;a.initialize=function(){};a.addEventListener=function(f,e){var c=this._listeners;c?this.removeEventListener(f,e):c=this._listeners={};var g=c[f];g||(g=c[f]=[]);g.push(e);return e};a.removeEventListener=function(h,g){var f=this._listeners;if(f){var j=f[h];if(j){for(var i=0,k=j.length;i<k;i++){if(j[i]==g){1==k?delete f[h]:j.splice(i,1);break}}}}};a.removeAllEventListeners=function(b){b?this._listeners&&delete this._listeners[b]:this._listeners=null};a.dispatchEvent=function(i,g){var e=!1,l=this._listeners;if(i&&l){"string"==typeof i&&(i={type:i});i.target=g||this;l=l[i.type];if(!l){return e}for(var l=l.slice(),n=0,k=l.length;n<k;n++){var j=l[n];j instanceof Function?e=e||j.apply(null,[i]):j.handleEvent&&(e=e||j.handleEvent(i))}}return !!e};a.hasEventListener=function(c){var b=this._listeners;return !(!b||!b[c])};a.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=d})();this.createjs=this.createjs||{};(function(){var d=function(){throw"Ticker cannot be instantiated."};d.useRAF=!1;d.addEventListener=null;d.removeEventListener=null;d.removeAllEventListeners=null;d.dispatchEvent=null;d.hasEventListener=null;d._listeners=null;createjs.EventDispatcher.initialize(d);d._listeners=null;d._pauseable=null;d._paused=!1;d._inited=!1;d._startTime=0;d._pausedTime=0;d._ticks=0;d._pausedTicks=0;d._interval=50;d._lastTime=0;d._times=null;d._tickTimes=null;d._rafActive=!1;d._timeoutID=null;d.addListener=function(c,b){null!=c&&(d.removeListener(c),d._pauseable[d._listeners.length]=null==b?!0:b,d._listeners.push(c))};d.init=function(){d._inited=!0;d._times=[];d._tickTimes=[];d._pauseable=[];d._listeners=[];d._times.push(d._lastTime=d._startTime=d._getTime());d.setInterval(d._interval)};d.removeListener=function(c){var b=d._listeners;b&&(c=b.indexOf(c),-1!=c&&(b.splice(c,1),d._pauseable.splice(c,1)))};d.removeAllListeners=function(){d._listeners=[];d._pauseable=[]};d.setInterval=function(b){d._interval=b;d._inited&&d._setupTick()};d.getInterval=function(){return d._interval};d.setFPS=function(b){d.setInterval(1000/b)};d.getFPS=function(){return 1000/d._interval};d.getMeasuredFPS=function(b){if(2>d._times.length){return -1}null==b&&(b=d.getFPS()|0);b=Math.min(d._times.length-1,b);return 1000/((d._times[0]-d._times[b])/b)};d.setPaused=function(b){d._paused=b};d.getPaused=function(){return d._paused};d.getTime=function(b){return d._getTime()-d._startTime-(b?d._pausedTime:0)};d.getTicks=function(b){return d._ticks-(b?d._pausedTicks:0)};d._handleAF=function(){d._rafActive=!1;d._setupTick();d._getTime()-d._lastTime>=0.97*(d._interval-1)&&d._tick()};d._handleTimeout=function(){d.timeoutID=null;d._setupTick();d._tick()};d._setupTick=function(){if(!(d._rafActive||null!=d.timeoutID)){if(d.useRAF){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(b){b(d._handleAF);d._rafActive=!0;return}}d.timeoutID=setTimeout(d._handleTimeout,d._interval)}};d._tick=function(){var i=d._getTime();d._ticks++;var g=i-d._lastTime,c=d._paused;c&&(d._pausedTicks++,d._pausedTime+=g);d._lastTime=i;for(var p=d._pauseable,o=d._listeners.slice(),n=o?o.length:0,l=0;l<n;l++){var k=o[l];null==k||c&&p[l]||(k.tick?k.tick(g,c):k instanceof Function&&k(g,c))}d.dispatchEvent({type:"tick",paused:c,delta:g,time:i,runTime:i-d._pausedTime});for(d._tickTimes.unshift(d._getTime()-i);100<d._tickTimes.length;){d._tickTimes.pop()}for(d._times.unshift(i);100<d._times.length;){d._times.pop()}};var a=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);d._getTime=function(){return a&&a.call(performance)||(new Date).getTime()};d.init();createjs.Ticker=d})();this.createjs=this.createjs||{};(function(){var d=function(r,e,q,o,p,n,l,i,g){this.initialize(r,e,q,o,p,n,l,i,g)},a=d.prototype;a.stageX=0;a.stageY=0;a.rawX=0;a.rawY=0;a.type=null;a.nativeEvent=null;a.onMouseMove=null;a.onMouseUp=null;a.target=null;a.pointerID=0;a.primary=!1;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a.initialize=function(r,e,q,o,p,n,l,i,g){this.type=r;this.stageX=e;this.stageY=q;this.target=o;this.nativeEvent=p;this.pointerID=n;this.primary=l;this.rawX=null==i?e:i;this.rawY=null==g?q:g};a.clone=function(){return new d(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)};a.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};createjs.MouseEvent=d})();this.createjs=this.createjs||{};(function(){var d=function(h,g,e,j,k,i){this.initialize(h,g,e,j,k,i)},a=d.prototype;d.identity=null;d.DEG_TO_RAD=Math.PI/180;a.a=1;a.b=0;a.c=0;a.d=1;a.tx=0;a.ty=0;a.alpha=1;a.shadow=null;a.compositeOperation=null;a.initialize=function(h,e,i,k,l,j){null!=h&&(this.a=h);this.b=e||0;this.c=i||0;null!=k&&(this.d=k);this.tx=l||0;this.ty=j||0;return this};a.prepend=function(r,q,m,o,p,n){var l=this.tx;if(1!=r||0!=q||0!=m||1!=o){var i=this.a,e=this.c;this.a=i*r+this.b*m;this.b=i*q+this.b*o;this.c=e*r+this.d*m;this.d=e*q+this.d*o}this.tx=l*r+this.ty*m+p;this.ty=l*q+this.ty*o+n;return this};a.append=function(t,s,o,q,r,p){var n=this.a,m=this.b,i=this.c,e=this.d;this.a=t*n+s*i;this.b=t*m+s*e;this.c=o*n+q*i;this.d=o*m+q*e;this.tx=r*n+p*i+this.tx;this.ty=r*m+p*e+this.ty;return this};a.prependMatrix=function(b){this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty);this.prependProperties(b.alpha,b.shadow,b.compositeOperation);return this};a.appendMatrix=function(b){this.append(b.a,b.b,b.c,b.d,b.tx,b.ty);this.appendProperties(b.alpha,b.shadow,b.compositeOperation);return this};a.prependTransform=function(t,s,o,r,q,p,n,m,i){if(q%360){var c=q*d.DEG_TO_RAD;q=Math.cos(c);c=Math.sin(c)}else{q=1,c=0}if(m||i){this.tx-=m,this.ty-=i}p||n?(p*=d.DEG_TO_RAD,n*=d.DEG_TO_RAD,this.prepend(q*o,c*o,-c*r,q*r,0,0),this.prepend(Math.cos(n),Math.sin(n),-Math.sin(p),Math.cos(p),t,s)):this.prepend(q*o,c*o,-c*r,q*r,t,s);return this};a.appendTransform=function(t,s,o,r,q,p,n,m,i){if(q%360){var c=q*d.DEG_TO_RAD;q=Math.cos(c);c=Math.sin(c)}else{q=1,c=0}p||n?(p*=d.DEG_TO_RAD,n*=d.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(p),Math.cos(p),t,s),this.append(q*o,c*o,-c*r,q*r,0,0)):this.append(q*o,c*o,-c*r,q*r,t,s);if(m||i){this.tx-=m*this.a+i*this.c,this.ty-=m*this.b+i*this.d}return this};a.rotate=function(f){var e=Math.cos(f);f=Math.sin(f);var h=this.a,i=this.c,j=this.tx;this.a=h*e-this.b*f;this.b=h*f+this.b*e;this.c=i*e-this.d*f;this.d=i*f+this.d*e;this.tx=j*e-this.ty*f;this.ty=j*f+this.ty*e;return this};a.skew=function(e,c){e*=d.DEG_TO_RAD;c*=d.DEG_TO_RAD;this.append(Math.cos(c),Math.sin(c),-Math.sin(e),Math.cos(e),0,0);return this};a.scale=function(e,c){this.a*=e;this.d*=c;this.tx*=e;this.ty*=c;return this};a.translate=function(e,c){this.tx+=e;this.ty+=c;return this};a.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null;return this};a.invert=function(){var h=this.a,e=this.b,i=this.c,k=this.d,l=this.tx,j=h*k-e*i;this.a=k/j;this.b=-e/j;this.c=-i/j;this.d=h/j;this.tx=(i*this.ty-k*l)/j;this.ty=-(h*this.ty-e*l)/j;return this};a.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d};a.decompose=function(e){null==e&&(e={});e.x=this.tx;e.y=this.ty;e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),f=Math.atan2(this.b,this.a);c==f?(e.rotation=f/d.DEG_TO_RAD,0>this.a&&0<=this.d&&(e.rotation+=0>=e.rotation?180:-180),e.skewX=e.skewY=0):(e.skewX=c/d.DEG_TO_RAD,e.skewY=f/d.DEG_TO_RAD);return e};a.reinitialize=function(r,q,m,o,p,n,l,i,e){this.initialize(r,q,m,o,p,n);this.alpha=l||1;this.shadow=i;this.compositeOperation=e;return this};a.appendProperties=function(e,c,f){this.alpha*=e;this.shadow=c||this.shadow;this.compositeOperation=f||this.compositeOperation;return this};a.prependProperties=function(e,c,f){this.alpha*=e;this.shadow=this.shadow||c;this.compositeOperation=this.compositeOperation||f;return this};a.clone=function(){var b=new d(this.a,this.b,this.c,this.d,this.tx,this.ty);b.shadow=this.shadow;b.alpha=this.alpha;b.compositeOperation=this.compositeOperation;return b};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};d.identity=new d(1,0,0,1,0,0);createjs.Matrix2D=d})();this.createjs=this.createjs||{};(function(){var d=function(e,c){this.initialize(e,c)},a=d.prototype;a.x=0;a.y=0;a.initialize=function(e,c){this.x=null==e?0:e;this.y=null==c?0:c};a.clone=function(){return new d(this.x,this.y)};a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};createjs.Point=d})();this.createjs=this.createjs||{};(function(){var d=function(e,c,f,h){this.initialize(e,c,f,h)},a=d.prototype;a.x=0;a.y=0;a.width=0;a.height=0;a.initialize=function(e,c,f,h){this.x=null==e?0:e;this.y=null==c?0:c;this.width=null==f?0:f;this.height=null==h?0:h};a.clone=function(){return new d(this.x,this.y,this.width,this.height)};a.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};createjs.Rectangle=d})();this.createjs=this.createjs||{};(function(){var d=function(i,e,k,m,n,l,j){this.initialize(i,e,k,m,n,l,j)},a=d.prototype;a.target=null;a.overLabel=null;a.outLabel=null;a.downLabel=null;a.play=!1;a._isPressed=!1;a._isOver=!1;a.initialize=function(i,e,k,m,n,l,j){i.addEventListener&&(this.target=i,i.cursor="pointer",this.overLabel=null==k?"over":k,this.outLabel=null==e?"out":e,this.downLabel=null==m?"down":m,this.play=n,this.setEnabled(!0),this.handleEvent({}),l&&(j&&(l.actionsEnabled=!1,l.gotoAndStop&&l.gotoAndStop(j)),i.hitArea=l))};a.setEnabled=function(e){var c=this.target;e?(c.addEventListener("mouseover",this),c.addEventListener("mouseout",this),c.addEventListener("mousedown",this)):(c.removeEventListener("mouseover",this),c.removeEventListener("mouseout",this),c.removeEventListener("mousedown",this))};a.toString=function(){return"[ButtonHelper]"};a.handleEvent=function(e){var c=this.target,f=e.type;"mousedown"==f?(e.addEventListener("mouseup",this),this._isPressed=!0,e=this.downLabel):"mouseup"==f?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"mouseover"==f?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel);this.play?c.gotoAndPlay&&c.gotoAndPlay(e):c.gotoAndStop&&c.gotoAndStop(e)};createjs.ButtonHelper=d})();this.createjs=this.createjs||{};(function(){var d=function(e,c,f,h){this.initialize(e,c,f,h)},a=d.prototype;d.identity=null;a.color=null;a.offsetX=0;a.offsetY=0;a.blur=0;a.initialize=function(e,c,f,h){this.color=e;this.offsetX=c;this.offsetY=f;this.blur=h};a.toString=function(){return"[Shadow]"};a.clone=function(){return new d(this.color,this.offsetX,this.offsetY,this.blur)};d.identity=new d("transparent",0,0,0);createjs.Shadow=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype;a.complete=!0;a.onComplete=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._animations=null;a._frames=null;a._images=null;a._data=null;a._loadCount=0;a._frameHeight=0;a._frameWidth=0;a._numFrames=0;a._regX=0;a._regY=0;a.initialize=function(i){var e,k,m;if(null!=i){if(i.images&&0<(k=i.images.length)){m=this._images=[];for(e=0;e<k;e++){var n=i.images[e];if("string"==typeof n){var l=n,n=new Image;n.src=l}m.push(n);!n.getContext&&!n.complete&&(this._loadCount++,this.complete=!1,function(b){n.onload=function(){b._handleImageLoad()}}(this))}}if(null!=i.frames){if(i.frames instanceof Array){this._frames=[];m=i.frames;e=0;for(k=m.length;e<k;e++){l=m[e],this._frames.push({image:this._images[l[4]?l[4]:0],rect:new createjs.Rectangle(l[0],l[1],l[2],l[3]),regX:l[5]||0,regY:l[6]||0})}}else{k=i.frames,this._frameWidth=k.width,this._frameHeight=k.height,this._regX=k.regX||0,this._regY=k.regY||0,this._numFrames=k.count,0==this._loadCount&&this._calculateFrames()}}if(null!=(k=i.animations)){this._animations=[];this._data={};for(var j in k){i={name:j};l=k[j];if("number"==typeof l){m=i.frames=[l]}else{if(l instanceof Array){if(1==l.length){i.frames=[l[0]]}else{i.frequency=l[3];i.next=l[2];m=i.frames=[];for(e=l[0];e<=l[1];e++){m.push(e)}}}else{i.frequency=l.frequency,i.next=l.next,e=l.frames,m=i.frames="number"==typeof e?[e]:e.slice(0)}}i.next=2>m.length||!1==i.next?null:null==i.next||!0==i.next?j:i.next;i.frequency||(i.frequency=1);this._animations.push(j);this._data[j]=i}}}};a.getNumFrames=function(b){if(null==b){return this._frames?this._frames.length:this._numFrames}b=this._data[b];return null==b?0:b.frames.length};a.getAnimations=function(){return this._animations.slice(0)};a.getAnimation=function(b){return this._data[b]};a.getFrame=function(e){var c;return this.complete&&this._frames&&(c=this._frames[e])?c:null};a.getFrameBounds=function(b){return(b=this.getFrame(b))?new createjs.Rectangle(-b.regX,-b.regY,b.rect.width,b.rect.height):null};a.toString=function(){return"[SpriteSheet]"};a.clone=function(){var b=new d;b.complete=this.complete;b._animations=this._animations;b._frames=this._frames;b._images=this._images;b._data=this._data;b._frameHeight=this._frameHeight;b._frameWidth=this._frameWidth;b._numFrames=this._numFrames;b._loadCount=this._loadCount;return b};a._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))};a._calculateFrames=function(){if(!(this._frames||0==this._frameWidth)){this._frames=[];for(var r=0,q=this._frameWidth,m=this._frameHeight,o=0,p=this._images;o<p.length;o++){for(var n=p[o],l=(n.width+1)/q|0,i=(n.height+1)/m|0,i=0<this._numFrames?Math.min(this._numFrames-r,l*i):l*i,e=0;e<i;e++){this._frames.push({image:n,rect:new createjs.Rectangle(e%l*q,(e/l|0)*m,q,m),regX:this._regX,regY:this._regY})}r+=i}this._numFrames=r}};createjs.SpriteSheet=d})();this.createjs=this.createjs||{};(function(){function f(g,c,h){this.f=g;this.params=c;this.path=null==h?!0:h}f.prototype.exec=function(b){this.f.apply(b,this.params)};var d=function(){this.initialize()},e=d.prototype;d.getRGB=function(h,g,i,j){null!=h&&null==i&&(j=g,i=h&255,g=h>>8&255,h=h>>16&255);return null==j?""+h+","+g+","+i+")":"rgba("+h+","+g+","+i+","+j+")"};d.getHSL=function(h,g,i,j){return null==j?"hsl("+h%360+","+g+"%,"+i+"%)":"hsla("+h%360+","+g+"%,"+i+"%,"+j+")"};d.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"0":52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};d.STROKE_CAPS_MAP=["butt","round","square"];d.STROKE_JOINTS_MAP=["miter","round","bevel"];d._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d");d.beginCmd=new f(d._ctx.beginPath,[],!1);d.fillCmd=new f(d._ctx.fill,[],!1);d.strokeCmd=new f(d._ctx.stroke,[],!1);e._strokeInstructions=null;e._strokeStyleInstructions=null;e._ignoreScaleStroke=!1;e._fillInstructions=null;e._instructions=null;e._oldInstructions=null;e._activeInstructions=null;e._active=!1;e._dirty=!1;e.initialize=function(){this.clear();this._ctx=d._ctx};e.isEmpty=function(){return !(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)};e.draw=function(h){this._dirty&&this._updateInstructions();for(var g=this._instructions,i=0,j=g.length;i<j;i++){g[i].exec(h)}};e.drawAsPath=function(h){this._dirty&&this._updateInstructions();for(var g,j=this._instructions,k=0,i=j.length;k<i;k++){((g=j[k]).path||0==k)&&g.exec(h)}};e.moveTo=function(g,c){this._activeInstructions.push(new f(this._ctx.moveTo,[g,c]));return this};e.lineTo=function(g,c){this._dirty=this._active=!0;this._activeInstructions.push(new f(this._ctx.lineTo,[g,c]));return this};e.arcTo=function(g,c,j,i,h){this._dirty=this._active=!0;this._activeInstructions.push(new f(this._ctx.arcTo,[g,c,j,i,h]));return this};e.arc=function(g,c,l,k,j,i){this._dirty=this._active=!0;null==i&&(i=!1);this._activeInstructions.push(new f(this._ctx.arc,[g,c,l,k,j,i]));return this};e.quadraticCurveTo=function(g,c,i,h){this._dirty=this._active=!0;this._activeInstructions.push(new f(this._ctx.quadraticCurveTo,[g,c,i,h]));return this};e.bezierCurveTo=function(g,c,l,k,j,i){this._dirty=this._active=!0;this._activeInstructions.push(new f(this._ctx.bezierCurveTo,[g,c,l,k,j,i]));return this};e.rect=function(g,c,i,h){this._dirty=this._active=!0;this._activeInstructions.push(new f(this._ctx.rect,[g,c,i,h]));return this};e.closePath=function(){this._active&&(this._dirty=!0,this._activeInstructions.push(new f(this._ctx.closePath,[])));return this};e.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=!1;return this};e.beginFill=function(b){this._active&&this._newPath();this._fillInstructions=b?[new f(this._setProp,["fillStyle",b],!1),d.fillCmd]:null;return this};e.beginLinearGradientFill=function(b,i,l,k,j,c){this._active&&this._newPath();l=this._ctx.createLinearGradient(l,k,j,c);k=0;for(j=b.length;k<j;k++){l.addColorStop(i[k],b[k])}this._fillInstructions=[new f(this._setProp,["fillStyle",l],!1),d.fillCmd];return this};e.beginRadialGradientFill=function(b,m,p,o,n,l,i,c){this._active&&this._newPath();p=this._ctx.createRadialGradient(p,o,n,l,i,c);o=0;for(n=b.length;o<n;o++){p.addColorStop(m[o],b[o])}this._fillInstructions=[new f(this._setProp,["fillStyle",p],!1),d.fillCmd];return this};e.beginBitmapFill=function(b,c,h){this._active&&this._newPath();b=this._ctx.createPattern(b,c||"");b=new f(this._setProp,["fillStyle",b],!1);this._fillInstructions=h?[b,new f(this._ctx.save,[],!1),new f(this._ctx.transform,[h.a,h.b,h.c,h.d,h.tx,h.ty],!1),d.fillCmd,new f(this._ctx.restore,[],!1)]:[b,d.fillCmd];return this};e.endFill=function(){return this.beginFill()};e.setStrokeStyle=function(b,c,j,i,h){this._active&&this._newPath();this._strokeStyleInstructions=[new f(this._setProp,["lineWidth",null==b?"1":b],!1),new f(this._setProp,["lineCap",null==c?"butt":isNaN(c)?c:d.STROKE_CAPS_MAP[c]],!1),new f(this._setProp,["lineJoin",null==j?"miter":isNaN(j)?j:d.STROKE_JOINTS_MAP[j]],!1),new f(this._setProp,["miterLimit",null==i?"10":i],!1)];this._ignoreScaleStroke=h;return this};e.beginStroke=function(b){this._active&&this._newPath();this._strokeInstructions=b?[new f(this._setProp,["strokeStyle",b],!1)]:null;return this};e.beginLinearGradientStroke=function(g,c,l,k,j,i){this._active&&this._newPath();l=this._ctx.createLinearGradient(l,k,j,i);k=0;for(j=g.length;k<j;k++){l.addColorStop(c[k],g[k])}this._strokeInstructions=[new f(this._setProp,["strokeStyle",l],!1)];return this};e.beginRadialGradientStroke=function(g,c,p,o,n,m,l,i){this._active&&this._newPath();p=this._ctx.createRadialGradient(p,o,n,m,l,i);o=0;for(n=g.length;o<n;o++){p.addColorStop(c[o],g[o])}this._strokeInstructions=[new f(this._setProp,["strokeStyle",p],!1)];return this};e.beginBitmapStroke=function(g,c){this._active&&this._newPath();var h=this._ctx.createPattern(g,c||"");this._strokeInstructions=[new f(this._setProp,["strokeStyle",h],!1)];return this};e.endStroke=function(){this.beginStroke();return this};e.curveTo=e.quadraticCurveTo;e.drawRect=e.rect;e.drawRoundRect=function(h,g,j,k,i){this.drawRoundRectComplex(h,g,j,k,i,i,i,i);return this};e.drawRoundRectComplex=function(A,z,y,x,w,v,u,t){var o=(y<x?y:x)/2,m=0,i=0,g=0,B=0;0>w&&(w*=m=-1);w>o&&(w=o);0>v&&(v*=i=-1);v>o&&(v=o);0>u&&(u*=g=-1);u>o&&(u=o);0>t&&(t*=B=-1);t>o&&(t=o);this._dirty=this._active=!0;var o=this._ctx.arcTo,c=this._ctx.lineTo;this._activeInstructions.push(new f(this._ctx.moveTo,[A+y-v,z]),new f(o,[A+y+v*i,z-v*i,A+y,z+v,v]),new f(c,[A+y,z+x-u]),new f(o,[A+y+u*g,z+x+u*g,A+y-u,z+x,u]),new f(c,[A+t,z+x]),new f(o,[A-t*B,z+x+t*B,A,z+x-t,t]),new f(c,[A,z+w]),new f(o,[A-w*m,z-w*m,A+w,z,w]),new f(this._ctx.closePath));return this};e.drawCircle=function(g,c,h){this.arc(g,c,h,0,2*Math.PI);return this};e.drawEllipse=function(g,c,p,o){this._dirty=this._active=!0;var n=0.5522848*(p/2),m=0.5522848*(o/2),l=g+p,i=c+o;p=g+p/2;o=c+o/2;this._activeInstructions.push(new f(this._ctx.moveTo,[g,o]),new f(this._ctx.bezierCurveTo,[g,o-m,p-n,c,p,c]),new f(this._ctx.bezierCurveTo,[p+n,c,l,o-m,l,o]),new f(this._ctx.bezierCurveTo,[l,o+m,p+n,i,p,i]),new f(this._ctx.bezierCurveTo,[p-n,i,g,o+m,g,o]));return this};e.drawPolyStar=function(g,c,p,o,n,m){this._dirty=this._active=!0;null==n&&(n=0);n=1-n;m=null==m?0:m/(180/Math.PI);var l=Math.PI/o;this._activeInstructions.push(new f(this._ctx.moveTo,[g+Math.cos(m)*p,c+Math.sin(m)*p]));for(var i=0;i<o;i++){m+=l,1!=n&&this._activeInstructions.push(new f(this._ctx.lineTo,[g+Math.cos(m)*p*n,c+Math.sin(m)*p*n])),m+=l,this._activeInstructions.push(new f(this._ctx.lineTo,[g+Math.cos(m)*p,c+Math.sin(m)*p]))}return this};e.decodePath=function(C){for(var y=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],A=[2,2,4,6,0],B=0,z=C.length,x=[],w=0,v=0,t=d.BASE_64;B<z;){var o=C.charAt(B),m=t[o],i=m>>3,E=y[i];if(!E||m&3){throw"bad path data (@"+B+"): "+o}o=A[i];i||(w=v=0);x.length=0;B++;m=(m>>2&1)+2;for(i=0;i<o;i++){var b=t[C.charAt(B)],D=b>>5?-1:1,b=(b&31)<<6|t[C.charAt(B+1)];3==m&&(b=b<<6|t[C.charAt(B+2)]);b=D*b/10;i%2?w=b+=w:v=b+=v;x[i]=b;B+=m}E.apply(this,x)}return this};e.clone=function(){var b=new d;b._instructions=this._instructions.slice();b._activeInstructions=this._activeInstructions.slice();b._oldInstructions=this._oldInstructions.slice();this._fillInstructions&&(b._fillInstructions=this._fillInstructions.slice());this._strokeInstructions&&(b._strokeInstructions=this._strokeInstructions.slice());this._strokeStyleInstructions&&(b._strokeStyleInstructions=this._strokeStyleInstructions.slice());b._active=this._active;b._dirty=this._dirty;return b};e.toString=function(){return"[Graphics]"};e.mt=e.moveTo;e.lt=e.lineTo;e.at=e.arcTo;e.bt=e.bezierCurveTo;e.qt=e.quadraticCurveTo;e.a=e.arc;e.r=e.rect;e.cp=e.closePath;e.c=e.clear;e.f=e.beginFill;e.lf=e.beginLinearGradientFill;e.rf=e.beginRadialGradientFill;e.bf=e.beginBitmapFill;e.ef=e.endFill;e.ss=e.setStrokeStyle;e.s=e.beginStroke;e.ls=e.beginLinearGradientStroke;e.rs=e.beginRadialGradientStroke;e.bs=e.beginBitmapStroke;e.es=e.endStroke;e.dr=e.drawRect;e.rr=e.drawRoundRect;e.rc=e.drawRoundRectComplex;e.dc=e.drawCircle;e.de=e.drawEllipse;e.dp=e.drawPolyStar;e.p=e.decodePath;e._updateInstructions=function(){this._instructions=this._oldInstructions.slice();this._instructions.push(d.beginCmd);this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new f(this._ctx.save,[],!1),new f(this._ctx.setTransform,[1,0,0,1,0,0],!1),d.strokeCmd,new f(this._ctx.restore,[],!1)):this._instructions.push(d.strokeCmd))};e._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=!1};e._setProp=function(g,c){this[g]=c};createjs.Graphics=d})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},a=d.prototype;d.suppressCrossDomainErrors=!1;d._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");d._hitTestCanvas.width=d._hitTestCanvas.height=1;d._hitTestContext=d._hitTestCanvas.getContext("2d");d._nextCacheID=1;a.alpha=1;a.cacheCanvas=null;a.id=-1;a.mouseEnabled=!0;a.name=null;a.parent=null;a.regX=0;a.regY=0;a.rotation=0;a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.shadow=null;a.visible=!0;a.x=0;a.y=0;a.compositeOperation=null;a.snapToPixel=!1;a.onPress=null;a.onClick=null;a.onDoubleClick=null;a.onMouseOver=null;a.onMouseOut=null;a.onTick=null;a.filters=null;a.cacheID=0;a.mask=null;a.hitArea=null;a.cursor=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._cacheOffsetX=0;a._cacheOffsetY=0;a._cacheScale=1;a._cacheDataURLID=0;a._cacheDataURL=null;a._matrix=null;a.initialize=function(){this.id=createjs.UID.get();this._matrix=new createjs.Matrix2D};a.isVisible=function(){return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY))};a.draw=function(f,e){var h=this.cacheCanvas;if(e||!h){return !1}var g=this._cacheScale;f.drawImage(h,this._cacheOffsetX,this._cacheOffsetY,h.width/g,h.height/g);return !0};a.updateContext=function(f){var e,g=this.mask;g&&(g.graphics&&!g.graphics.isEmpty())&&(e=g.getMatrix(g._matrix),f.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),g.graphics.drawAsPath(f),f.clip(),e.invert(),f.transform(e.a,e.b,e.c,e.d,e.tx,e.ty));e=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);createjs.Stage._snapToPixelEnabled&&this.snapToPixel?f.transform(e.a,e.b,e.c,e.d,e.tx+0.5|0,e.ty+0.5|0):f.transform(e.a,e.b,e.c,e.d,e.tx,e.ty);f.globalAlpha*=this.alpha;this.compositeOperation&&(f.globalCompositeOperation=this.compositeOperation);this.shadow&&this._applyShadow(f,this.shadow)};a.cache=function(g,f,j,i,h){h=h||1;this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));this.cacheCanvas.width=Math.ceil(j*h);this.cacheCanvas.height=Math.ceil(i*h);this._cacheOffsetX=g;this._cacheOffsetY=f;this._cacheScale=h||1;this.updateCache()};a.updateCache=function(h){var c=this.cacheCanvas,i=this._cacheScale,l=this._cacheOffsetX*i,k=this._cacheOffsetY*i;if(!c){throw"cache() must be called before updateCache()"}var j=c.getContext("2d");j.save();h||j.clearRect(0,0,c.width,c.height);j.globalCompositeOperation=h;j.setTransform(i,0,0,i,-l,-k);this.draw(j,!0);this._applyFilters();j.restore();this.cacheID=d._nextCacheID++};a.uncache=function(){this._cacheDataURL=this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0;this._cacheScale=1};a.getCacheDataURL=function(){if(!this.cacheCanvas){return null}this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL());return this._cacheDataURL};a.getStage=function(){for(var b=this;b.parent;){b=b.parent}return b instanceof createjs.Stage?b:null};a.localToGlobal=function(f,e){var g=this.getConcatenatedMatrix(this._matrix);if(null==g){return null}g.append(1,0,0,1,f,e);return new createjs.Point(g.tx,g.ty)};a.globalToLocal=function(f,e){var g=this.getConcatenatedMatrix(this._matrix);if(null==g){return null}g.invert();g.append(1,0,0,1,f,e);return new createjs.Point(g.tx,g.ty)};a.localToLocal=function(f,e,g){f=this.localToGlobal(f,e);return g.globalToLocal(f.x,f.y)};a.setTransform=function(r,q,p,o,n,m,l,i,g){this.x=r||0;this.y=q||0;this.scaleX=null==p?1:p;this.scaleY=null==o?1:o;this.rotation=n||0;this.skewX=m||0;this.skewY=l||0;this.regX=i||0;this.regY=g||0;return this};a.getMatrix=function(b){return(b?b.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)};a.getConcatenatedMatrix=function(e){e?e.identity():e=new createjs.Matrix2D;for(var c=this;null!=c;){e.prependTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY).prependProperties(c.alpha,c.shadow,c.compositeOperation),c=c.parent}return e};a.hitTest=function(e,c){var f=d._hitTestContext,h=d._hitTestCanvas;f.setTransform(1,0,0,1,-e,-c);this.draw(f);f=this._testHit(f);h.width=0;h.width=1;return f};a.set=function(e){for(var c in e){this[c]=e[c]}return this};a.clone=function(){var b=new d;this.cloneProps(b);return b};a.toString=function(){return"[DisplayObject (name="+this.name+")]"};a.cloneProps=function(b){b.alpha=this.alpha;b.name=this.name;b.regX=this.regX;b.regY=this.regY;b.rotation=this.rotation;b.scaleX=this.scaleX;b.scaleY=this.scaleY;b.shadow=this.shadow;b.skewX=this.skewX;b.skewY=this.skewY;b.visible=this.visible;b.x=this.x;b.y=this.y;b.mouseEnabled=this.mouseEnabled;b.compositeOperation=this.compositeOperation;this.cacheCanvas&&(b.cacheCanvas=this.cacheCanvas.cloneNode(!0),b.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))};a._applyShadow=function(e,c){c=c||Shadow.identity;e.shadowColor=c.color;e.shadowOffsetX=c.offsetX;e.shadowOffsetY=c.offsetY;e.shadowBlur=c.blur};a._tick=function(e){this.onTick&&this.onTick.apply(this,e);var c=this._listeners;c&&c.tick&&this.dispatchEvent({type:"tick",params:e})};a._testHit=function(e){try{var c=1<e.getImageData(0,0,1,1).data[3]}catch(f){if(!d.suppressCrossDomainErrors){throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}}return c};a._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas){for(var g=this.filters.length,f=this.cacheCanvas.getContext("2d"),j=this.cacheCanvas.width,i=this.cacheCanvas.height,h=0;h<g;h++){this.filters[h].applyFilter(f,0,0,j,i)}}};a._hasMouseHandler=function(e){var c=this._listeners;return !!(e&1&&(this.onPress||this.onClick||this.onDoubleClick||c&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||e&2&&(this.onMouseOver||this.onMouseOut||this.cursor||c&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))};createjs.DisplayObject=d})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},a=d.prototype=new createjs.DisplayObject;a.children=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(){this.DisplayObject_initialize();this.children=[]};a.isVisible=function(){var b=this.cacheCanvas||this.children.length;return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&b))};a.DisplayObject_draw=a.draw;a.draw=function(h,g){if(this.DisplayObject_draw(h,g)){return !0}for(var l=this.children.slice(0),k=0,j=l.length;k<j;k++){var i=l[k];i.isVisible()&&(h.save(),i.updateContext(h),i.draw(h),h.restore())}return !0};a.addChild=function(f){if(null==f){return f}var e=arguments.length;if(1<e){for(var g=0;g<e;g++){this.addChild(arguments[g])}return arguments[e-1]}f.parent&&f.parent.removeChild(f);f.parent=this;this.children.push(f);return f};a.addChildAt=function(g,f){var j=arguments.length,i=arguments[j-1];if(0>i||i>this.children.length){return arguments[j-2]}if(2<j){for(var h=0;h<j-1;h++){this.addChildAt(arguments[h],i+h)}return arguments[j-2]}g.parent&&g.parent.removeChild(g);g.parent=this;this.children.splice(f,0,g);return g};a.removeChild=function(f){var e=arguments.length;if(1<e){for(var h=!0,g=0;g<e;g++){h=h&&this.removeChild(arguments[g])}return h}return this.removeChildAt(this.children.indexOf(f))};a.removeChildAt=function(g){var f=arguments.length;if(1<f){for(var j=[],i=0;i<f;i++){j[i]=arguments[i]}j.sort(function(e,c){return c-e});for(var h=!0,i=0;i<f;i++){h=h&&this.removeChildAt(j[i])}return h}if(0>g||g>this.children.length-1){return !1}if(f=this.children[g]){f.parent=null}this.children.splice(g,1);return !0};a.removeAllChildren=function(){for(var b=this.children;b.length;){b.pop().parent=null}};a.getChildAt=function(b){return this.children[b]};a.getChildByName=function(f){for(var e=this.children,h=0,g=e.length;h<g;h++){if(e[h].name==f){return e[h]}}return null};a.sortChildren=function(b){this.children.sort(b)};a.getChildIndex=function(b){return this.children.indexOf(b)};a.getNumChildren=function(){return this.children.length};a.swapChildrenAt=function(g,f){var j=this.children,i=j[g],h=j[f];i&&h&&(j[g]=h,j[f]=i)};a.swapChildren=function(i,g){for(var n=this.children,m,l,k=0,j=n.length;k<j&&!(n[k]==i&&(m=k),n[k]==g&&(l=k),null!=m&&null!=l);k++){}k!=j&&(n[m]=g,n[l]=i)};a.setChildIndex=function(g,f){var j=this.children,i=j.length;if(!(g.parent!=this||0>f||f>=i)){for(var h=0;h<i&&j[h]!=g;h++){}h==i||h==f||(j.splice(h,1),f<h&&f--,j.splice(f,0,g))}};a.contains=function(b){for(;b;){if(b==this){return !0}b=b.parent}return !1};a.hitTest=function(e,c){return null!=this.getObjectUnderPoint(e,c)};a.getObjectsUnderPoint=function(f,e){var h=[],g=this.localToGlobal(f,e);this._getObjectsUnderPoint(g.x,g.y,h);return h};a.getObjectUnderPoint=function(f,e){var g=this.localToGlobal(f,e);return this._getObjectsUnderPoint(g.x,g.y)};a.clone=function(h){var c=new d;this.cloneProps(c);if(h){for(var i=c.children=[],l=0,k=this.children.length;l<k;l++){var j=this.children[l].clone(h);j.parent=c;i.push(j)}}return c};a.toString=function(){return"[Container (name="+this.name+")]"};a.DisplayObject__tick=a._tick;a._tick=function(f){for(var e=this.children.length-1;0<=e;e--){var g=this.children[e];g._tick&&g._tick(f)}this.DisplayObject__tick(f)};a._getObjectsUnderPoint=function(x,w,s,v){var u=createjs.DisplayObject._hitTestContext,t=createjs.DisplayObject._hitTestCanvas,r=this._matrix,q=this._hasMouseHandler(v);if(!this.hitArea&&(this.cacheCanvas&&q)&&(this.getConcatenatedMatrix(r),u.setTransform(r.a,r.b,r.c,r.d,r.tx-x,r.ty-w),u.globalAlpha=r.alpha,this.draw(u),this._testHit(u))){return t.width=0,t.width=1,this}for(var o=this.children.length-1;0<=o;o--){var m=this.children[o],i=m.hitArea;if(m.visible&&!(!i&&!m.isVisible()||v&&!m.mouseEnabled)){var c=v&&m._hasMouseHandler(v);if(m instanceof d&&(!i||!c)){if(q){if(m=m._getObjectsUnderPoint(x,w)){return this}}else{if(m=m._getObjectsUnderPoint(x,w,s,v),!s&&m){return m}}}else{if(!v||q||c){if(m.getConcatenatedMatrix(r),i&&(r.appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY),r.alpha=i.alpha),u.globalAlpha=r.alpha,u.setTransform(r.a,r.b,r.c,r.d,r.tx-x,r.ty-w),(i||m).draw(u),this._testHit(u)){t.width=0;t.width=1;if(q){return this}if(s){s.push(m)}else{return m}}}}}}return null};createjs.Container=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype=new createjs.Container;d._snapToPixelEnabled=!1;a.autoClear=!0;a.canvas=null;a.mouseX=0;a.mouseY=0;a.onMouseMove=null;a.onMouseUp=null;a.onMouseDown=null;a.snapToPixelEnabled=!1;a.mouseInBounds=!1;a.tickOnUpdate=!0;a.mouseMoveOutside=!1;a._pointerData=null;a._pointerCount=0;a._primaryPointerID=null;a._mouseOverIntervalID=null;a.Container_initialize=a.initialize;a.initialize=function(b){this.Container_initialize();this.canvas="string"==typeof b?document.getElementById(b):b;this._pointerData={};this.enableDOMEvents(!0)};a.update=function(){if(this.canvas){this.autoClear&&this.clear();d._snapToPixelEnabled=this.snapToPixelEnabled;this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var b=this.canvas.getContext("2d");b.save();var c=this.updateContext(b);var f=this.draw(b,!1);var e=b.restore()}else{console.log("didnt update")}};a.tick=a.update;a.handleEvent=function(b){"tick"==b.type&&this.update(b)};a.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.canvas.width,this.canvas.height)}};a.toDataURL=function(i,g){g||(g="image/png");var p=this.canvas.getContext("2d"),o=this.canvas.width,n=this.canvas.height,m;if(i){m=p.getImageData(0,0,o,n);var l=p.globalCompositeOperation;p.globalCompositeOperation="destination-over";p.fillStyle=i;p.fillRect(0,0,o,n)}var k=this.canvas.toDataURL(g);i&&(p.clearRect(0,0,o,n),p.putImageData(m,0,0),p.globalCompositeOperation=l);return k};a.enableMouseOver=function(e){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null);if(null==e){e=20}else{if(0>=e){return}}var c=this;this._mouseOverIntervalID=setInterval(function(){c._testMouseOver()},1000/Math.min(50,e))};a.enableDOMEvents=function(f){null==f&&(f=!0);var e,h=this._eventListeners;if(!f&&h){for(e in h){f=h[e],f.t.removeEventListener(e,f.f)}this._eventListeners=null}else{if(f&&!h){f=window.addEventListener?window:document;var g=this,h=this._eventListeners={};h.mouseup={t:f,f:function(b){g._handleMouseUp(b)}};h.mousemove={t:f,f:function(b){g._handleMouseMove(b)}};h.dblclick={t:f,f:function(b){g._handleDoubleClick(b)}};(f=this.canvas)&&(h.mousedown={t:f,f:function(b){g._handleMouseDown(b)}});for(e in h){f=h[e],f.t.addEventListener(e,f.f)}}}};a.clone=function(){var b=new d(null);this.cloneProps(b);return b};a.toString=function(){return"[Stage (name="+this.name+")]"};a._getPointerData=function(e){var c=this._pointerData[e];c||(c=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=e));return c};a._handleMouseMove=function(b){b||(b=window.event);this._handlePointerMove(-1,b,b.pageX,b.pageY)};a._handlePointerMove=function(h,g,l,k){if(this.canvas){var j=this._getPointerData(h),i=j.inBounds;this._updatePointerPosition(h,l,k);if(i||j.inBounds||this.mouseMoveOutside){if(this.onMouseMove||this.hasEventListener("stagemousemove")){l=new createjs.MouseEvent("stagemousemove",j.x,j.y,this,g,h,h==this._primaryPointerID,j.rawX,j.rawY),this.onMouseMove&&this.onMouseMove(l),this.dispatchEvent(l)}if((k=j.event)&&(k.onMouseMove||k.hasEventListener("mousemove"))){l=new createjs.MouseEvent("mousemove",j.x,j.y,k.target,g,h,h==this._primaryPointerID,j.rawX,j.rawY),k.onMouseMove&&k.onMouseMove(l),k.dispatchEvent(l,k.target)}}}};a._updatePointerPosition=function(h,g,l){var k=this._getElementRect(this.canvas);g-=k.left;l-=k.top;var j=this.canvas.width,i=this.canvas.height;g/=(k.right-k.left)/j;l/=(k.bottom-k.top)/i;k=this._getPointerData(h);(k.inBounds=0<=g&&0<=l&&g<=j-1&&l<=i-1)?(k.x=g,k.y=l):this.mouseMoveOutside&&(k.x=0>g?0:g>j-1?j-1:g,k.y=0>l?0:l>i-1?i-1:l);k.rawX=g;k.rawY=l;h==this._primaryPointerID&&(this.mouseX=k.x,this.mouseY=k.y,this.mouseInBounds=k.inBounds)};a._getElementRect=function(i){var g;try{g=i.getBoundingClientRect()}catch(p){g={top:i.offsetTop,left:i.offsetLeft,width:i.offsetWidth,height:i.offsetHeight}}var o=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),m=window.getComputedStyle?getComputedStyle(i):i.currentStyle;i=parseInt(m.paddingLeft)+parseInt(m.borderLeftWidth);var l=parseInt(m.paddingTop)+parseInt(m.borderTopWidth),k=parseInt(m.paddingRight)+parseInt(m.borderRightWidth),m=parseInt(m.paddingBottom)+parseInt(m.borderBottomWidth);return{left:g.left+o+i,right:g.right+o-k,top:g.top+n+l,bottom:g.bottom+n-m}};a._handleMouseUp=function(b){this._handlePointerUp(-1,b,!1)};a._handlePointerUp=function(h,g,l){var k=this._getPointerData(h),j;if(this.onMouseMove||this.hasEventListener("stagemouseup")){j=new createjs.MouseEvent("stagemouseup",k.x,k.y,this,g,h,h==this._primaryPointerID,k.rawX,k.rawY),this.onMouseUp&&this.onMouseUp(j),this.dispatchEvent(j)}var i=k.event;if(i&&(i.onMouseUp||i.hasEventListener("mouseup"))){j=new createjs.MouseEvent("mouseup",k.x,k.y,i.target,g,h,h==this._primaryPointerID,k.rawX,k.rawY),i.onMouseUp&&i.onMouseUp(j),i.dispatchEvent(j,i.target)}if((i=k.target)&&(i.onClick||i.hasEventListener("click"))&&this._getObjectsUnderPoint(k.x,k.y,null,!0,this._mouseOverIntervalID?3:1)==i){j=new createjs.MouseEvent("click",k.x,k.y,i,g,h,h==this._primaryPointerID,k.rawX,k.rawY),i.onClick&&i.onClick(j),i.dispatchEvent(j)}l?(h==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[h]):k.event=k.target=null};a._handleMouseDown=function(b){this._handlePointerDown(-1,b,!1)};a._handlePointerDown=function(g,f,j,i){var h=this._getPointerData(g);null!=i&&this._updatePointerPosition(g,j,i);if(this.onMouseDown||this.hasEventListener("stagemousedown")){j=new createjs.MouseEvent("stagemousedown",h.x,h.y,this,f,g,g==this._primaryPointerID,h.rawX,h.rawY),this.onMouseDown&&this.onMouseDown(j),this.dispatchEvent(j)}if(i=this._getObjectsUnderPoint(h.x,h.y,null,this._mouseOverIntervalID?3:1)){if(h.target=i,i.onPress||i.hasEventListener("mousedown")){if(j=new createjs.MouseEvent("mousedown",h.x,h.y,i,f,g,g==this._primaryPointerID,h.rawX,h.rawY),i.onPress&&i.onPress(j),i.dispatchEvent(j),j.onMouseMove||j.onMouseUp||j.hasEventListener("mousemove")||j.hasEventListener("mouseup")){h.event=j}}}};a._testMouseOver=function(){if(-1==this._primaryPointerID&&!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var f=null;this.mouseInBounds&&(f=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var e=this._mouseOverTarget;if(e!=f){var h=this._getPointerData(-1);if(e&&(e.onMouseOut||e.hasEventListener("mouseout"))){var g=new createjs.MouseEvent("mouseout",h.x,h.y,e,null,-1,h.rawX,h.rawY);e.onMouseOut&&e.onMouseOut(g);e.dispatchEvent(g)}e&&(this.canvas.style.cursor="");if(f&&(f.onMouseOver||f.hasEventListener("mouseover"))){g=new createjs.MouseEvent("mouseover",h.x,h.y,f,null,-1,h.rawX,h.rawY),f.onMouseOver&&f.onMouseOver(g),f.dispatchEvent(g)}f&&(this.canvas.style.cursor=f.cursor||"");this._mouseOverTarget=f}}};a._handleDoubleClick=function(f){var e=this._getPointerData(-1),g=this._getObjectsUnderPoint(e.x,e.y,null,this._mouseOverIntervalID?3:1);if(g&&(g.onDoubleClick||g.hasEventListener("dblclick"))){evt=new createjs.MouseEvent("dblclick",e.x,e.y,g,f,-1,!0,e.rawX,e.rawY),g.onDoubleClick&&g.onDoubleClick(evt),g.dispatchEvent(evt)}};createjs.Stage=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype=new createjs.DisplayObject;a.image=null;a.snapToPixel=!0;a.sourceRect=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();"string"==typeof b?(this.image=new Image,this.image.src=b):this.image=b};a.isVisible=function(){var b=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState);return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&b))};a.DisplayObject_draw=a.draw;a.draw=function(f,e){if(this.DisplayObject_draw(f,e)){return !0}var g=this.sourceRect;g?f.drawImage(this.image,g.x,g.y,g.width,g.height,0,0,g.width,g.height):f.drawImage(this.image,0,0);return !0};a.clone=function(){var b=new d(this.image);this.sourceRect&&(b.sourceRect=this.sourceRect.clone());this.cloneProps(b);return b};a.toString=function(){return"[Bitmap (name="+this.name+")]"};createjs.Bitmap=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype=new createjs.DisplayObject;a.onAnimationEnd=null;a.currentFrame=-1;a.currentAnimation=null;a.paused=!0;a.spriteSheet=null;a.snapToPixel=!0;a.offset=0;a.currentAnimationFrame=0;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._advanceCount=0;a._animation=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.spriteSheet=b};a.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet.complete&&0<=this.currentFrame;return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&b))};a.DisplayObject_draw=a.draw;a.draw=function(f,e){if(this.DisplayObject_draw(f,e)){return !0}this._normalizeFrame();var h=this.spriteSheet.getFrame(this.currentFrame);if(h){var g=h.rect;f.drawImage(h.image,g.x,g.y,g.width,g.height,-h.regX,-h.regY,g.width,g.height);return !0}};a.play=function(){this.paused=!1};a.stop=function(){this.paused=!0};a.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};a.gotoAndStop=function(b){this.paused=!0;this._goto(b)};a.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++;this._normalizeFrame()};a.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)};a.clone=function(){var b=new d(this.spriteSheet);this.cloneProps(b);return b};a.toString=function(){return"[BitmapAnimation (name="+this.name+")]"};a.DisplayObject__tick=a._tick;a._tick=function(e){var c=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%c&&this.advance();this.DisplayObject__tick(e)};a._normalizeFrame=function(){var g=this._animation,f=this.currentFrame,j=this.paused,i;if(g){if(i=g.frames.length,this.currentAnimationFrame>=i){var h=g.next;this._dispatchAnimationEnd(g,f,j,h,i-1)||(h?this._goto(h):(this.paused=!0,this.currentAnimationFrame=g.frames.length-1,this.currentFrame=g.frames[this.currentAnimationFrame]))}else{this.currentFrame=g.frames[this.currentAnimationFrame]}}else{i=this.spriteSheet.getNumFrames(),f>=i&&!this._dispatchAnimationEnd(g,f,j,i-1)&&(this.currentFrame=0)}};a._dispatchAnimationEnd=function(h,g,l,k,j){var i=h?h.name:null;this.onAnimationEnd&&this.onAnimationEnd(this,i,k);this.dispatchEvent({type:"animationend",name:i,next:k});!l&&this.paused&&(this.currentAnimationFrame=j);return this.paused!=l||this._animation!=h||this.currentFrame!=g};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);b.onAnimationEnd=this.onAnimationEnd;b.currentFrame=this.currentFrame;b.currentAnimation=this.currentAnimation;b.paused=this.paused;b.offset=this.offset;b._animation=this._animation;b.currentAnimationFrame=this.currentAnimationFrame};a._goto=function(e){if(isNaN(e)){var c=this.spriteSheet.getAnimation(e);c&&(this.currentAnimationFrame=0,this._animation=c,this.currentAnimation=e,this._normalizeFrame())}else{this.currentAnimation=this._animation=null,this.currentFrame=e}};createjs.BitmapAnimation=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype=new createjs.DisplayObject;a.graphics=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){this.DisplayObject_initialize();this.graphics=b?b:new createjs.Graphics};a.isVisible=function(){var b=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&b))};a.DisplayObject_draw=a.draw;a.draw=function(e,c){if(this.DisplayObject_draw(e,c)){return !0}this.graphics.draw(e);return !0};a.clone=function(b){b=new d(b&&this.graphics?this.graphics.clone():this.graphics);this.cloneProps(b);return b};a.toString=function(){return"[Shape (name="+this.name+")]"};createjs.Shape=d})();this.createjs=this.createjs||{};(function(){var d=function(f,e,g){this.initialize(f,e,g)},a=d.prototype=new createjs.DisplayObject;d._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d");a.text="";a.font=null;a.color="#000";a.textAlign="left";a.textBaseline="top";a.maxWidth=null;a.outline=!1;a.lineHeight=0;a.lineWidth=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(f,e,g){this.DisplayObject_initialize();this.text=f;this.font=e;this.color=g?g:"#000"};a.isVisible=function(){var b=this.cacheCanvas||null!=this.text&&""!==this.text;return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&b))};a.DisplayObject_draw=a.draw;a.draw=function(e,c){if(this.DisplayObject_draw(e,c)){return !0}this.outline?e.strokeStyle=this.color:e.fillStyle=this.color;e.font=this.font;e.textAlign=this.textAlign||"start";e.textBaseline=this.textBaseline||"alphabetic";this._drawText(e);return !0};a.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};a.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width};a.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())};a.clone=function(){var b=new d(this.text,this.font,this.color);this.cloneProps(b);return b};a.toString=function(){return"[Text (text="+(20<this.text.length?this.text.substr(0,17)+"...":this.text)+")]"};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(b){this.DisplayObject_cloneProps(b);b.textAlign=this.textAlign;b.textBaseline=this.textBaseline;b.maxWidth=this.maxWidth;b.outline=this.outline;b.lineHeight=this.lineHeight;b.lineWidth=this.lineWidth};a._getWorkingContext=function(){var b=d._workingContext;b.font=this.font;b.textAlign=this.textAlign||"start";b.textBaseline=this.textBaseline||"alphabetic";return b};a._drawText=function(v){var u=!!v;u||(v=this._getWorkingContext());for(var t=String(this.text).split(/(?:\r\n|\r|\n)/),s=this.lineHeight||this.getMeasuredLineHeight(),r=0,q=0,p=t.length;q<p;q++){var o=v.measureText(t[q]).width;if(null==this.lineWidth||o<this.lineWidth){u&&this._drawTextLine(v,t[q],r*s)}else{for(var o=t[q].split(/(\s)/),m=o[0],i=1,g=o.length;i<g;i+=2){v.measureText(m+o[i]+o[i+1]).width>this.lineWidth?(u&&this._drawTextLine(v,m,r*s),r++,m=o[i+1]):m+=o[i]+o[i+1]}u&&this._drawTextLine(v,m,r*s)}r++}return r};a._drawTextLine=function(f,e,g){this.outline?f.strokeText(e,0,g,this.maxWidth||65535):f.fillText(e,0,g,this.maxWidth||65535)};createjs.Text=d})();this.createjs=this.createjs||{};(function(){var a=function(){throw"SpriteSheetUtils cannot be instantiated"};a._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");a._workingContext=a._workingCanvas.getContext("2d");a.addFlippedFrames=function(e,f,c,h){if(f||c||h){var i=0;f&&a._flip(e,++i,!0,!1);c&&a._flip(e,++i,!1,!0);h&&a._flip(e,++i,!0,!0)}};a.extractFrame=function(e,f){isNaN(f)&&(f=e.getAnimation(f).frames[0]);var c=e.getFrame(f);if(!c){return null}var h=c.rect,i=a._workingCanvas;i.width=h.width;i.height=h.height;a._workingContext.drawImage(c.image,h.x,h.y,h.width,h.height,0,0,h.width,h.height);c=new Image;c.src=i.toDataURL("image/png");return c};a.mergeAlpha=function(d,e,h){h||(h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));h.width=Math.max(e.width,d.width);h.height=Math.max(e.height,d.height);var f=h.getContext("2d");f.save();f.drawImage(d,0,0);f.globalCompositeOperation="destination-in";f.drawImage(e,0,0);f.restore();return h};a._flip=function(y,z,o,u){for(var x=y._images,w=a._workingCanvas,v=a._workingContext,t=x.length/z,s=0;s<t;s++){var r=x[s];r.__tmp=s;w.width=0;w.width=r.width;w.height=r.height;v.setTransform(o?-1:1,0,0,u?-1:1,o?r.width:0,u?r.height:0);v.drawImage(r,0,0);var q=new Image;q.src=w.toDataURL("image/png");q.width=r.width;q.height=r.height;x.push(q)}v=y._frames;w=v.length/z;for(s=0;s<w;s++){var r=v[s],i=r.rect.clone(),q=x[r.image.__tmp+t*z],c={image:q,rect:i,regX:r.regX,regY:r.regY};o&&(i.x=q.width-i.x-i.width,c.regX=i.width-r.regX);u&&(i.y=q.height-i.y-i.height,c.regY=i.height-r.regY);v.push(c)}o="_"+(o?"h":"")+(u?"v":"");u=y._animations;y=y._data;x=u.length/z;for(s=0;s<x;s++){v=u[s];r=y[v];t={name:v+o,frequency:r.frequency,next:r.next,frames:[]};r.next&&(t.next+=o);v=r.frames;r=0;for(q=v.length;r<q;r++){t.frames.push(v[r]+w*z)}y[t.name]=t;u.push(t.name)}};createjs.SpriteSheetUtils=a})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},a=d.prototype;d.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";d.ERR_RUNNING="a build is already running";a.maxWidth=2048;a.maxHeight=2048;a.spriteSheet=null;a.scale=1;a.padding=1;a.timeSlice=0.3;a.progress=-1;a.onComplete=null;a.onProgress=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._frames=null;a._animations=null;a._data=null;a._nextFrameIndex=0;a._index=0;a._timerID=null;a._scale=1;a.initialize=function(){this._frames=[];this._animations={}};a.addFrame=function(h,c,i,l,k,j){if(this._data){throw d.ERR_RUNNING}c=c||h.bounds||h.nominalBounds;!c&&h.getBounds&&(c=h.getBounds());if(!c){return null}i=i||1;return this._frames.push({source:h,sourceRect:c,scale:i,funct:l,params:k,scope:j,index:this._frames.length,height:c.height*i})-1};a.addAnimation=function(e,c,f,h){if(this._data){throw d.ERR_RUNNING}this._animations[e]={frames:c,next:f,frequency:h}};a.addMovieClip=function(r,q,m){if(this._data){throw d.ERR_RUNNING}var p=r.frameBounds,o=q||r.bounds||r.nominalBounds;!o&&r.getBounds&&(o=r.getBounds());if(!o&&!p){return null}q=this._frames.length;for(var n=r.timeline.duration,l=0;l<n;l++){this.addFrame(r,p&&p[l]?p[l]:o,m,function(f){var e=this.actionsEnabled;this.actionsEnabled=!1;this.gotoAndStop(f);this.actionsEnabled=e},[l],r)}l=r.timeline._labels;r=[];for(var i in l){r.push({index:l[i],label:i})}if(r.length){r.sort(function(f,e){return f.index-e.index});l=0;for(i=r.length;l<i;l++){m=r[l].label;for(var p=q+(l==i-1?n:r[l+1].index),o=[],c=q+r[l].index;c<p;c++){o.push(c)}this.addAnimation(m,o,!0)}}};a.build=function(){if(this._data){throw d.ERR_RUNNING}for(this._startBuild();this._drawNext();){}this._endBuild();return this.spriteSheet};a.buildAsync=function(e){if(this._data){throw d.ERR_RUNNING}this.timeSlice=e;this._startBuild();var c=this;this._timerID=setTimeout(function(){c._run()},50-50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)))};a.stopAsync=function(){clearTimeout(this._timerID);this._data=null};a.clone=function(){throw"SpriteSheetBuilder cannot be cloned."};a.toString=function(){return"[SpriteSheetBuilder]"};a._startBuild=function(){var i=this.padding||0;this.progress=0;this.spriteSheet=null;this._index=0;this._scale=this.scale;var c=[];this._data={images:[],frames:c,animations:this._animations};var m=this._frames.slice();m.sort(function(f,e){return f.height<=e.height?-1:1});if(m[m.length-1].height+2*i>this.maxHeight){throw d.ERR_DIMENSIONS}for(var p=0,o=0,n=0;m.length;){var l=this._fillRow(m,p,n,c,i);l.w>o&&(o=l.w);p+=l.h;if(!l.h||!m.length){var k=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");k.width=this._getSize(o,this.maxWidth);k.height=this._getSize(p,this.maxHeight);this._data.images[n]=k;l.h||(o=p=0,n++)}}};a._getSize=function(f,e){for(var g=4;Math.pow(2,++g)<f;){}return Math.min(e,Math.pow(2,g))};a._fillRow=function(E,D,z,C,B){var A=this.maxWidth,y=this.maxHeight;D+=B;for(var y=y-D,x=B,w=0,v=E.length-1;0<=v;v--){var o=E[v],m=this._scale*o.scale,i=o.sourceRect,H=o.source,c=Math.floor(m*i.x-B),F=Math.floor(m*i.y-B),G=Math.ceil(m*i.height+2*B),i=Math.ceil(m*i.width+2*B);if(i>A){throw d.ERR_DIMENSIONS}G>y||x+i>A||(o.img=z,o.rect=new createjs.Rectangle(x,D,i,G),w=w||G,E.splice(v,1),C[o.index]=[x,D,i,G,z,Math.round(-c+m*H.regX-B),Math.round(-F+m*H.regY-B)],x+=i)}return{w:x,h:w}};a._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data);this._data=null;this.progress=1;this.onComplete&&this.onComplete(this);this.dispatchEvent("complete")};a._run=function(){for(var f=50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)),e=(new Date).getTime()+f,h=!1;e>(new Date).getTime();){if(!this._drawNext()){h=!0;break}}if(h){this._endBuild()}else{var g=this;this._timerID=setTimeout(function(){g._run()},50-f)}f=this.progress=this._index/this._frames.length;this.onProgress&&this.onProgress(this,f);this.dispatchEvent({type:"progress",progress:f})};a._drawNext=function(){var g=this._frames[this._index],f=g.scale*this._scale,j=g.rect,i=g.sourceRect,h=this._data.images[g.img].getContext("2d");g.funct&&g.funct.apply(g.scope,g.params);h.save();h.beginPath();h.rect(j.x,j.y,j.width,j.height);h.clip();h.translate(Math.ceil(j.x-i.x*f),Math.ceil(j.y-i.y*f));h.scale(f,f);g.source.draw(h);h.restore();return ++this._index<this._frames.length};createjs.SpriteSheetBuilder=d})();this.createjs=this.createjs||{};(function(){var d=function(b){this.initialize(b)},a=d.prototype=new createjs.DisplayObject;a.htmlElement=null;a._oldMtx=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b){"string"==typeof b&&(b=document.getElementById(b));this.DisplayObject_initialize();this.mouseEnabled=!1;this.htmlElement=b;b=b.style;b.position="absolute";b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin="0% 0%"};a.isVisible=function(){return null!=this.htmlElement};a.draw=function(){if(null!=this.htmlElement){var f=this.getConcatenatedMatrix(this._matrix),e=this.htmlElement.style;if(this.visible){e.visibility="visible"}else{return !0}var g=this._oldMtx||{};g.alpha!=f.alpha&&(e.opacity=""+f.alpha,g.alpha=f.alpha);if(g.tx!=f.tx||g.ty!=f.ty||g.a!=f.a||g.b!=f.b||g.c!=f.c||g.d!=f.d){e.transform=e.WebkitTransform=e.OTransform=e.msTransform=["matrix("+f.a,f.b,f.c,f.d,f.tx+0.5|0,(f.ty+0.5|0)+")"].join(),e.MozTransform=["matrix("+f.a,f.b,f.c,f.d,(f.tx+0.5|0)+"px",(f.ty+0.5|0)+"px)"].join(),this._oldMtx=f.clone()}return !0}};a.cache=function(){};a.uncache=function(){};a.updateCache=function(){};a.hitTest=function(){};a.localToGlobal=function(){};a.globalToLocal=function(){};a.localToLocal=function(){};a.clone=function(){throw"DOMElement cannot be cloned."};a.toString=function(){return"[DOMElement (name="+this.name+")]"};a.DisplayObject__tick=a._tick;a._tick=function(b){this.htmlElement.style.visibility="hidden";this.DisplayObject__tick(b)};createjs.DOMElement=d})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},a=d.prototype;a.initialize=function(){};a.getBounds=function(){return new createjs.Rectangle(0,0,0,0)};a.applyFilter=function(){};a.toString=function(){return"[Filter]"};a.clone=function(){return new d};createjs.Filter=d})();this.createjs=this.createjs||{};(function(){var a=function(){throw"Touch cannot be instantiated"};a.isSupported=function(){return"ontouchstart" in window||window.navigator.msPointerEnabled};a.enable=function(d,e,c){if(!d||!d.canvas||!a.isSupported()){return !1}d.__touch={pointers:{},multitouch:!e,preventDefault:!c,count:0};"ontouchstart" in window?a._IOS_enable(d):window.navigator.msPointerEnabled&&a._IE_enable(d);return !0};a.disable=function(c){c&&("ontouchstart" in window?a._IOS_disable(c):window.navigator.msPointerEnabled&&a._IE_disable(c))};a._IOS_enable=function(d){var e=d.canvas,c=d.__touch.f=function(b){a._IOS_handleEvent(d,b)};e.addEventListener("touchstart",c,!1);e.addEventListener("touchmove",c,!1);e.addEventListener("touchend",c,!1);e.addEventListener("touchcancel",c,!1)};a._IOS_disable=function(c){var d=c.canvas;d&&(c=c.__touch.f,d.removeEventListener("touchstart",c,!1),d.removeEventListener("touchmove",c,!1),d.removeEventListener("touchend",c,!1),d.removeEventListener("touchcancel",c,!1))};a._IOS_handleEvent=function(i,j){if(i){i.__touch.preventDefault&&j.preventDefault&&j.preventDefault();for(var p=j.changedTouches,l=j.type,o=0,n=p.length;o<n;o++){var m=p[o],k=m.identifier;m.target==i.canvas&&("touchstart"==l?this._handleStart(i,k,j,m.pageX,m.pageY):"touchmove"==l?this._handleMove(i,k,j,m.pageX,m.pageY):("touchend"==l||"touchcancel"==l)&&this._handleEnd(i,k,j))}}};a._IE_enable=function(d){var e=d.canvas,c=d.__touch.f=function(b){a._IE_handleEvent(d,b)};e.addEventListener("MSPointerDown",c,!1);window.addEventListener("MSPointerMove",c,!1);window.addEventListener("MSPointerUp",c,!1);window.addEventListener("MSPointerCancel",c,!1);d.__touch.preventDefault&&(e.style.msTouchAction="none");d.__touch.activeIDs={}};a._IE_disable=function(c){var d=c.__touch.f;window.removeEventListener("MSPointerMove",d,!1);window.removeEventListener("MSPointerUp",d,!1);window.removeEventListener("MSPointerCancel",d,!1);c.canvas&&c.canvas.removeEventListener("MSPointerDown",d,!1)};a._IE_handleEvent=function(e,f){if(e){e.__touch.preventDefault&&f.preventDefault&&f.preventDefault();var j=f.type,h=f.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==j){f.srcElement==e.canvas&&(i[h]=!0,this._handleStart(e,h,f,f.pageX,f.pageY))}else{if(i[h]){if("MSPointerMove"==j){this._handleMove(e,h,f,f.pageX,f.pageY)}else{if("MSPointerUp"==j||"MSPointerCancel"==j){delete i[h],this._handleEnd(e,h,f)}}}}}};a._handleStart=function(h,i,n,j,m){var l=h.__touch;if(l.multitouch||!l.count){var k=l.pointers;k[i]||(k[i]=!0,l.count++,h._handlePointerDown(i,n,j,m))}};a._handleMove=function(e,f,j,h,i){e.__touch.pointers[f]&&e._handlePointerMove(f,j,h,i)};a._handleEnd=function(e,f,j){var h=e.__touch,i=h.pointers;i[f]&&(h.count--,e._handlePointerUp(f,j,!0),delete i[f])};createjs.Touch=a})();(function(){var a=this.createjs=this.createjs||{},a=a.EaselJS=a.EaselJS||{};a.version="0.6.0";a.buildDate="Tue, 12 Feb 2013 21:12:22 GMT"})();this.createjs=this.createjs||{};(function(){var c=function(){this.initialize()},d=c.prototype;c.initialize=function(a){a.addEventListener=d.addEventListener;a.removeEventListener=d.removeEventListener;a.removeAllEventListeners=d.removeAllEventListeners;a.hasEventListener=d.hasEventListener;a.dispatchEvent=d.dispatchEvent};d._listeners=null;d.initialize=function(){};d.addEventListener=function(g,f){var h=this._listeners;h?this.removeEventListener(g,f):h=this._listeners={};var e=h[g];e||(e=h[g]=[]);e.push(f);return f};d.removeEventListener=function(k,h){var l=this._listeners;if(l){var e=l[k];if(e){for(var j=0,i=e.length;j<i;j++){if(e[j]==h){1==i?delete l[k]:e.splice(j,1);break}}}}};d.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null};d.dispatchEvent=function(m,h){var o=!1,e=this._listeners;if(m&&e){"string"==typeof m&&(m={type:m});m.target=h||this;e=e[m.type];if(!e){return o}for(var e=e.slice(),l=0,k=e.length;l<k;l++){var i=e[l];i instanceof Function?o=o||i.apply(null,[m]):i.handleEvent&&(o=o||i.handleEvent(m))}}return !!o};d.hasEventListener=function(e){var b=this._listeners;return !(!b||!b[e])};d.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=c})();this.createjs=this.createjs||{};(function(){var c=function(e,b,f){this.initialize(e,b,f)},d=c.prototype;c.NONE=0;c.LOOP=1;c.REVERSE=2;c.IGNORE={};c._tweens=[];c._plugins={};c.get=function(g,b,h,f){f&&c.removeTweens(g);return new c(g,b,h)};c.tick=function(i,b){for(var j=c._tweens.slice(),h=j.length-1;0<=h;h--){var g=j[h];b&&!g.ignoreGlobalPause||g._paused||g.tick(g._useTicks?1:i)}};createjs.Ticker&&createjs.Ticker.addListener(c,!1);c.removeTweens=function(e){if(e.tweenjs_count){for(var b=c._tweens,f=b.length-1;0<=f;f--){b[f]._target==e&&(b[f]._paused=!0,b.splice(f,1))}e.tweenjs_count=0}};c.hasActiveTweens=function(a){return a?a.tweenjs_count:c._tweens&&c._tweens.length};c.installPlugin=function(s,u){var t=s.priority;null==t&&(s.priority=t=0);for(var r=0,q=u.length,o=c._plugins;r<q;r++){var m=u[r];if(o[m]){for(var h=o[m],i=0,b=h.length;i<b&&!(t<h[i].priority);i++){}o[m].splice(i,0,s)}else{o[m]=[s]}}};c._register=function(e,b){var f=e._target;b?(f&&(f.tweenjs_count=f.tweenjs_count?f.tweenjs_count+1:1),c._tweens.push(e)):(f&&f.tweenjs_count--,f=c._tweens.indexOf(e),-1!=f&&c._tweens.splice(f,1))};d.addEventListener=null;d.removeEventListener=null;d.removeAllEventListeners=null;d.dispatchEvent=null;d.hasEventListener=null;d._listeners=null;createjs.EventDispatcher.initialize(d);d.ignoreGlobalPause=!1;d.loop=!1;d.duration=0;d.pluginData=null;d.onChange=null;d.change=null;d.target=null;d.position=null;d._paused=!1;d._curQueueProps=null;d._initQueueProps=null;d._steps=null;d._actions=null;d._prevPosition=0;d._stepPosition=0;d._prevPos=-1;d._target=null;d._useTicks=!1;d.initialize=function(e,b,f){this.target=this._target=e;b&&(this._useTicks=b.useTicks,this.ignoreGlobalPause=b.ignoreGlobalPause,this.loop=b.loop,this.onChange=b.onChange,b.override&&c.removeTweens(e));this.pluginData=f||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];b&&b.paused?this._paused=!0:c._register(this,!0);b&&null!=b.position&&this.setPosition(b.position,c.NONE)};d.wait=function(f){if(null==f||0>=f){return this}var e=this._cloneProps(this._curQueueProps);return this._addStep({d:f,p0:e,e:this._linearEase,p1:e})};d.to=function(f,e,g){if(isNaN(e)||0>e){e=0}return this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:g,p1:this._cloneProps(this._appendQueueProps(f))})};d.call=function(f,e,g){return this._addAction({f:f,p:e?e:[this],o:g?g:this._target})};d.set=function(f,e){return this._addAction({f:this._set,o:this,p:[f,e?e:this._target]})};d.play=function(b){return this.call(b.setPaused,[!1],b)};d.pause=function(b){b||(b=this);return this.call(b.setPaused,[!0],b)};d.setPosition=function(i,h){0>i&&(i=0);null==h&&(h=1);var p=i,o=!1;p>=this.duration&&(this.loop?p%=this.duration:(p=this.duration,o=!0));if(p==this._prevPos){return o}var m=this._prevPos;this.position=this._prevPos=p;this._prevPosition=i;if(this._target){if(o){this._updateTargetProps(null,1)}else{if(0<this._steps.length){for(var l=0,k=this._steps.length;l<k&&!(this._steps[l].t>p);l++){}l=this._steps[l-1];this._updateTargetProps(l,(this._stepPosition=p-l.t)/l.d)}}}0!=h&&0<this._actions.length&&(this._useTicks?this._runActions(p,p):1==h&&p<m?(m!=this.duration&&this._runActions(m,this.duration),this._runActions(0,p,!0)):this._runActions(m,p));o&&this.setPaused(!0);this.onChange&&this.onChange(this);this.dispatchEvent("change");return o};d.tick=function(b){this._paused||this.setPosition(this._prevPosition+b)};d.setPaused=function(b){this._paused=!!b;c._register(this,!b);return this};d.w=d.wait;d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned."};d._updateTargetProps=function(v,q){var u,t,s,r;!v&&1==q?u=t=this._curQueueProps:(v.e&&(q=v.e(q,0,1,1)),u=v.p0,t=v.p1);for(n in this._initQueueProps){if(null==(s=u[n])){u[n]=s=this._initQueueProps[n]}if(null==(r=t[n])){t[n]=r=s}s=s==r||0==q||1==q||"number"!=typeof s?1==q?r:s:s+(r-s)*q;var o=!1;if(r=c._plugins[n]){for(var i=0,m=r.length;i<m;i++){var b=r[i].tween(this,n,s,u,t,q,!!v&&u==t,!v);b==c.IGNORE?o=!0:s=b}}o||(this._target[n]=s)}};d._runActions=function(t,s,r){var q=t,p=s,o=-1,m=this._actions.length,h=1;t>s&&(q=s,p=t,o=m,m=h=-1);for(;(o+=h)!=m;){s=this._actions[o];var i=s.t;(i==p||i>q&&i<p||r&&i==t)&&s.f.apply(s.o,s.p)}};d._appendQueueProps=function(b){var k,p,o,m,l,i;for(i in b){if(void 0===this._initQueueProps[i]){p=this._target[i];if(k=c._plugins[i]){o=0;for(m=k.length;o<m;o++){p=k[o].init(this,i,p)}}this._initQueueProps[i]=void 0===p?null:p}else{p=this._curQueueProps[i]}if(k=c._plugins[i]){l=l||{};o=0;for(m=k.length;o<m;o++){k[o].step&&k[o].step(this,i,p,b[i],l)}}this._curQueueProps[i]=b[i]}l&&this._appendQueueProps(l);return this._curQueueProps};d._cloneProps=function(f){var e={},g;for(g in f){e[g]=f[g]}return e};d._addStep=function(b){0<b.d&&(this._steps.push(b),b.t=this.duration,this.duration+=b.d);return this};d._addAction=function(b){b.t=this.duration;this._actions.push(b);return this};d._set=function(f,e){for(var g in f){e[g]=f[g]}};createjs.Tween=c})();this.createjs=this.createjs||{};(function(){var c=function(f,e,g){this.initialize(f,e,g)},d=c.prototype;d.ignoreGlobalPause=!1;d.duration=0;d.loop=!1;d.onChange=null;d.position=null;d._paused=!1;d._tweens=null;d._labels=null;d._prevPosition=0;d._prevPos=-1;d._useTicks=!1;d.initialize=function(f,e,g){this._tweens=[];g&&(this._useTicks=g.useTicks,this.loop=g.loop,this.ignoreGlobalPause=g.ignoreGlobalPause,this.onChange=g.onChange);f&&this.addTween.apply(this,f);this.setLabels(e);g&&g.paused?this._paused=!0:createjs.Tween._register(this,!0);g&&null!=g.position&&this.setPosition(g.position,createjs.Tween.NONE)};d.addTween=function(f){var e=arguments.length;if(1<e){for(var g=0;g<e;g++){this.addTween(arguments[g])}return arguments[0]}if(0==e){return null}this.removeTween(f);this._tweens.push(f);f.setPaused(!0);f._paused=!1;f._useTicks=this._useTicks;f.duration>this.duration&&(this.duration=f.duration);0<=this._prevPos&&f.setPosition(this._prevPos,createjs.Tween.NONE);return f};d.removeTween=function(g){var f=arguments.length;if(1<f){for(var i=!0,h=0;h<f;h++){i=i&&this.removeTween(arguments[h])}return i}if(0==f){return !1}f=this._tweens.indexOf(g);return -1!=f?(this._tweens.splice(f,1),g.duration>=this.duration&&this.updateDuration(),!0):!1};d.addLabel=function(f,e){this._labels[f]=e};d.setLabels=function(b){this._labels=b?b:{}};d.gotoAndPlay=function(b){this.setPaused(!1);this._goto(b)};d.gotoAndStop=function(b){this.setPaused(!0);this._goto(b)};d.setPosition=function(i,h){0>i&&(i=0);var m=this.loop?i%this.duration:i,l=!this.loop&&i>=this.duration;if(m==this._prevPos){return l}this._prevPosition=i;this.position=this._prevPos=m;for(var k=0,j=this._tweens.length;k<j;k++){if(this._tweens[k].setPosition(m,h),m!=this._prevPos){return !1}}l&&this.setPaused(!0);this.onChange&&this.onChange(this);return l};d.setPaused=function(b){this._paused=!!b;createjs.Tween._register(this,!b)};d.updateDuration=function(){for(var f=this.duration=0,e=this._tweens.length;f<e;f++){tween=this._tweens[f],tween.duration>this.duration&&(this.duration=tween.duration)}};d.tick=function(b){this.setPosition(this._prevPosition+b)};d.resolve=function(f){var e=parseFloat(f);isNaN(e)&&(e=this._labels[f]);return e};d.toString=function(){return"[Timeline]"};d.clone=function(){throw"Timeline can not be cloned."};d._goto=function(b){b=this.resolve(b);null!=b&&this.setPosition(b)};createjs.Timeline=c})();this.createjs=this.createjs||{};(function(){var a=function(){throw"Ease cannot be instantiated."};a.linear=function(b){return b};a.none=a.linear;a.get=function(b){-1>b&&(b=-1);1<b&&(b=1);return function(c){return 0==b?c:0>b?c*(c*-b+1+b):c*((2-c)*b+(1-b))}};a.getPowIn=function(b){return function(c){return Math.pow(c,b)}};a.getPowOut=function(b){return function(c){return 1-Math.pow(1-c,b)}};a.getPowInOut=function(b){return function(c){return 1>(c*=2)?0.5*Math.pow(c,b):1-0.5*Math.abs(Math.pow(2-c,b))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)};a.sineOut=function(b){return Math.sin(b*Math.PI/2)};a.sineInOut=function(b){return -0.5*(Math.cos(Math.PI*b)-1)};a.getBackIn=function(b){return function(c){return c*c*((b+1)*c-b)}};a.backIn=a.getBackIn(1.7);a.getBackOut=function(b){return function(c){return --c*c*((b+1)*c+b)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(b){b*=1.525;return function(c){return 1>(c*=2)?0.5*c*c*((b+1)*c-b):0.5*((c-=2)*c*((b+1)*c+b)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(b){return -(Math.sqrt(1-b*b)-1)};a.circOut=function(b){return Math.sqrt(1- --b*b)};a.circInOut=function(b){return 1>(b*=2)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};a.bounceIn=function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};a.bounceInOut=function(b){return 0.5>b?0.5*a.bounceIn(2*b):0.5*a.bounceOut(2*b-1)+0.5};a.getElasticIn=function(d,c){var e=2*Math.PI;return function(f){if(0==f||1==f){return f}var b=c/e*Math.asin(1/d);return -(d*Math.pow(2,10*(f-=1))*Math.sin((f-b)*e/c))}};a.elasticIn=a.getElasticIn(1,0.3);a.getElasticOut=function(d,c){var e=2*Math.PI;return function(f){if(0==f||1==f){return f}var b=c/e*Math.asin(1/d);return d*Math.pow(2,-10*f)*Math.sin((f-b)*e/c)+1}};a.elasticOut=a.getElasticOut(1,0.3);a.getElasticInOut=function(d,c){var e=2*Math.PI;return function(f){var b=c/e*Math.asin(1/d);return 1>(f*=2)?-0.5*d*Math.pow(2,10*(f-=1))*Math.sin((f-b)*e/c):0.5*d*Math.pow(2,-10*(f-=1))*Math.sin((f-b)*e/c)+1}};a.elasticInOut=a.getElasticInOut(1,0.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};(function(){var a=function(){throw"MotionGuidePlugin cannot be instantiated."};a.priority=0;a.install=function(){createjs.Tween.installPlugin(a,["guide","x","y","rotation"]);return createjs.Tween.IGNORE};a.init=function(d,c,e){d=d.target;d.hasOwnProperty("x")||(d.x=0);d.hasOwnProperty("y")||(d.y=0);d.hasOwnProperty("rotation")||(d.rotation=0);return"guide"==c?null:e};a.step=function(O,M,I,N,L){if("guide"!=M){return N}var K;N.hasOwnProperty("path")||(N.path=[]);O=N.path;N.hasOwnProperty("end")||(N.end=1);N.hasOwnProperty("start")||(N.start=I&&I.hasOwnProperty("end")&&I.path===O?I.end:0);if(N.hasOwnProperty("_segments")&&N._length){return N}I=O.length;if(6<=I&&0==(I-2)%4){N._segments=[];N._length=0;for(M=2;M<I;M+=4){for(var J=O[M-2],H=O[M-1],F=O[M+0],G=O[M+1],D=O[M+2],b=O[M+3],o=J,i=H,A,E,B=0,z=[],y=1;10>=y;y++){E=y/10;var C=1-E;A=C*C*J+2*C*E*F+E*E*D;E=C*C*H+2*C*E*G+E*E*b;B+=z[z.push(Math.sqrt((K=A-o)*K+(K=E-i)*K))-1];o=A;i=E}N._segments.push(B);N._segments.push(z);N._length+=B}}else{throw"invalid 'path' data, please see documentation for valid paths"}K=N.orient;N.orient=!1;a.calc(N,N.end,L);N.orient=K;return N};a.tween=function(b,m,i,o,l,k,j){l=l.guide;if(void 0==l||l===o.guide){return i}l.lastRatio!=k&&(a.calc(l,(l.end-l.start)*(j?l.end:k)+l.start,b.target),l.orient&&(b.target.rotation+=o.rotation||0),l.lastRatio=k);return !l.orient&&"rotation"==m?i:b.target[m]};a.calc=function(b,p,k){void 0==b._segments&&a.validate(b);void 0==k&&(k={x:0,y:0,rotation:0});var q=b._segments,o=b.path,m=b._length*p,l=q.length-2;for(p=0;m>q[p]&&p<l;){m-=q[p],p+=2}for(var q=q[p+1],i=0,l=q.length-1;m>q[i]&&i<l;){m-=q[i],i++}m=i/++l+m/(l*q[i]);p=2*p+2;l=1-m;k.x=l*l*o[p-2]+2*l*m*o[p+0]+m*m*o[p+2];k.y=l*l*o[p-1]+2*l*m*o[p+1]+m*m*o[p+3];b.orient&&(k.rotation=57.2957795*Math.atan2((o[p+1]-o[p-1])*l+(o[p+3]-o[p+1])*m,(o[p+0]-o[p-2])*l+(o[p+2]-o[p+0])*m));return k};createjs.MotionGuidePlugin=a})();(function(){var a=this.createjs=this.createjs||{},a=a.TweenJS=a.TweenJS||{};a.version="0.4.0";a.buildDate="Tue, 12 Feb 2013 21:09:02 GMT"})();this.createjs=this.createjs||{};(function(){var e=function(d,g,i,h){this.initialize(d,g,i,h)},b=e.prototype=new createjs.Container;e.INDEPENDENT="independent";e.SINGLE_FRAME="single";e.SYNCHED="synched";b.startPosition=0;b.loop=!0;b.currentFrame=0;b.timeline=null;b.paused=!1;b.actionsEnabled=!0;b.autoReset=!0;b._synchOffset=0;b._prevPos=-1;b._prevPosition=0;b.Container_initialize=b.initialize;b.initialize=function(d,g,i,h){this.mode=d||e.INDEPENDENT;this.startPosition=g||0;this.loop=i;props={paused:!0,position:g,useTicks:!0};this.Container_initialize();this.timeline=new createjs.Timeline(null,h,props);this._managed={}};b.isVisible=function(){return !(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY))};b.Container_draw=b.draw;b.draw=function(d,f,g){if(this.DisplayObject_draw(d,f)){return !0}this._updateTimeline();this.Container_draw(d,f,g)};b.play=function(){this.paused=!1};b.stop=function(){this.paused=!0};b.gotoAndPlay=function(a){this.paused=!1;this._goto(a)};b.gotoAndStop=function(a){this.paused=!0;this._goto(a)};b.clone=function(){throw"MovieClip cannot be cloned."};b.toString=function(){return"[MovieClip (name="+this.name+")]"};b.Container__tick=b._tick;b._tick=function(a){!this.paused&&this.mode==e.INDEPENDENT&&(this._prevPosition=0>this._prevPos?0:this._prevPosition+1);this.Container__tick(a)};b._goto=function(a){a=this.timeline.resolve(a);null!=a&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=a,this._updateTimeline())};b._reset=function(){this._prevPos=-1;this.currentFrame=0};b._updateTimeline=function(){var d=this.timeline,g=d._tweens,j=this.children,h=this.mode!=e.INDEPENDENT;d.loop=null==this.loop?!0:this.loop;h?d.setPosition(this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):d.setPosition(0>this._prevPos?0:this._prevPosition,this.actionsEnabled?null:createjs.Tween.NONE);this._prevPosition=d._prevPosition;if(this._prevPos!=d._prevPos){this.currentFrame=this._prevPos=d._prevPos;for(var i in this._managed){this._managed[i]=1}for(d=g.length-1;0<=d;d--){i=g[d],h=i._target,h!=this&&(i=i._stepPosition,h instanceof createjs.DisplayObject?this._addManagedChild(h,i):this._setState(h.state,i))}for(d=j.length-1;0<=d;d--){g=j[d].id,1==this._managed[g]&&(this.removeChildAt(d),delete this._managed[g])}}};b._setState=function(h,i){if(h){for(var n=0,k=h.length;n<k;n++){var l=h[n],m=l.t,l=l.p,j;for(j in l){m[j]=l[j]}this._addManagedChild(m,i)}}};b._addManagedChild=function(d,f){d._off||(this.addChild(d),d instanceof e&&(d._synchOffset=f,d.mode==e.INDEPENDENT&&(d.autoReset&&!this._managed[d.id])&&d._reset()),this._managed[d.id]=2)};createjs.MovieClip=e;var c=function(){throw"MovieClipPlugin cannot be instantiated."};c.priority=100;c.install=function(){createjs.Tween.installPlugin(c,["startPosition"])};c.init=function(d,f,g){return g};c.step=function(){};c.tween=function(d,h,l,j,k,i){return !(d.target instanceof e)?l:1==i?k[h]:j[h]};c.install()})();this.createjs=this.createjs||{};(function(){var a=function(){throw ("CSSPlugin cannot be instantiated.")};a.cssSuffixMap={top:"px",left:"px",bottom:"px",right:"px",width:"px",height:"px",opacity:""};a.priority=-100;a.install=function(){var b=[],c=a.cssSuffixMap;for(var d in c){b.push(d)}createjs.Tween.installPlugin(a,b)};a.init=function(k,b,j){var f,e,d,c=a.cssSuffixMap;if((f=c[b])==null||!(d=k.target.style)){return j}var h=d[b];if(!h){return 0}var g=h.length-f.length;if((e=h.substr(g))!=f){throw ("CSSPlugin Error: Suffixes do not match. ("+f+":"+e+")")}else{return parseInt(h.substr(0,g))}};a.step=function(e,f,d,c,b){};a.tween=function(k,d,j,e,f,i,h,g){var c,b=a.cssSuffixMap;if(b[d]==null||!(c=k.target.style)){return j}c[d]=j+b[d];return createjs.Tween.IGNORE};createjs.CSSPlugin=a}());this.createjs=this.createjs||{};(function(){var a=function(){throw"Ease cannot be instantiated."};a.linear=function(b){return b};a.none=a.linear;a.get=function(b){if(b<-1){b=-1}if(b>1){b=1}return function(c){if(b==0){return c}if(b<0){return c*(c*-b+1+b)}return c*((2-c)*b+(1-b))}};a.getPowIn=function(b){return function(c){return Math.pow(c,b)}};a.getPowOut=function(b){return function(c){return 1-Math.pow(1-c,b)}};a.getPowInOut=function(b){return function(c){if((c*=2)<1){return 0.5*Math.pow(c,b)}return 1-0.5*Math.abs(Math.pow(2-c,b))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)};a.sineOut=function(b){return Math.sin(b*Math.PI/2)};a.sineInOut=function(b){return -0.5*(Math.cos(Math.PI*b)-1)};a.getBackIn=function(b){return function(c){return c*c*((b+1)*c-b)}};a.backIn=a.getBackIn(1.7);a.getBackOut=function(b){return function(c){return(--c*c*((b+1)*c+b)+1)}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(b){b*=1.525;return function(c){if((c*=2)<1){return 0.5*(c*c*((b+1)*c-b))}return 0.5*((c-=2)*c*((b+1)*c+b)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(b){return -(Math.sqrt(1-b*b)-1)};a.circOut=function(b){return Math.sqrt(1-(--b)*b)};a.circInOut=function(b){if((b*=2)<1){return -0.5*(Math.sqrt(1-b*b)-1)}return 0.5*(Math.sqrt(1-(b-=2)*b)+1)};a.bounceIn=function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(b){if(b<1/2.75){return(7.5625*b*b)}else{if(b<2/2.75){return(7.5625*(b-=1.5/2.75)*b+0.75)}else{if(b<2.5/2.75){return(7.5625*(b-=2.25/2.75)*b+0.9375)}else{return(7.5625*(b-=2.625/2.75)*b+0.984375)}}}};a.bounceInOut=function(b){if(b<0.5){return a.bounceIn(b*2)*0.5}return a.bounceOut(b*2-1)*0.5+0.5};a.getElasticIn=function(b,d){var c=Math.PI*2;return function(e){if(e==0||e==1){return e}var f=d/c*Math.asin(1/b);return -(b*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/d))}};a.elasticIn=a.getElasticIn(1,0.3);a.getElasticOut=function(b,d){var c=Math.PI*2;return function(e){if(e==0||e==1){return e}var f=d/c*Math.asin(1/b);return(b*Math.pow(2,-10*e)*Math.sin((e-f)*c/d)+1)}};a.elasticOut=a.getElasticOut(1,0.3);a.getElasticInOut=function(b,d){var c=Math.PI*2;return function(e){var f=d/c*Math.asin(1/b);if((e*=2)<1){return -0.5*(b*Math.pow(2,10*(e-=1))*Math.sin((e-f)*c/d))}return b*Math.pow(2,-10*(e-=1))*Math.sin((e-f)*c/d)*0.5+1}};a.elasticInOut=a.getElasticInOut(1,0.3*1.5);createjs.Ease=a}());(function(){var a=this.createjs=this.createjs||{},a=a.PreloadJS=a.PreloadJS||{};a.version="0.3.0";a.buildDate="Tue, 12 Feb 2013 21:12:02 GMT"})();this.createjs=this.createjs||{};(function(){var d=function(){this.initialize()},b=d.prototype;d.initialize=function(a){a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent};b._listeners=null;b.initialize=function(){};b.addEventListener=function(e,c){var h=this._listeners;h?this.removeEventListener(e,c):h=this._listeners={};var j=h[e];j||(j=h[e]=[]);j.push(c);return c};b.removeEventListener=function(j,h){var k=this._listeners;if(k){var m=k[j];if(m){for(var n=0,o=m.length;n<o;n++){if(m[n]==h){o==1?delete k[j]:m.splice(n,1);break}}}}};b.removeAllEventListeners=function(c){c?this._listeners&&delete this._listeners[c]:this._listeners=null};b.dispatchEvent=function(k,j){var n=false,o=this._listeners;if(k&&o){typeof k=="string"&&(k={type:k});k.target=j||this;o=o[k.type];if(!o){return n}for(var o=o.slice(),p=0,q=o.length;p<q;p++){var m=o[p];m instanceof Function?n=n||m.apply(null,[k]):m.handleEvent&&(n=n||m.handleEvent(k))}}return !!n};b.hasEventListener=function(e){var c=this._listeners;return !(!c||!c[e])};b.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=d})();this.createjs=this.createjs||{};(function(){var d=function(){this.init()};d.prototype={};var b=d.prototype;d.FILE_PATTERN=/(\w+:\/{2})?((?:\w+\.){2}\w+)?(\/?[\S]+\/|\/)?([\w\-%\.]+)(?:\.)(\w+)?(\?\S+)?/i;b.loaded=false;b.canceled=false;b.progress=0;b._item=null;b.onProgress=null;b.onLoadStart=null;b.onComplete=null;b.onError=null;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b.getItem=function(){return this._item};b.init=function(){};b.load=function(){};b.close=function(){};b._sendLoadStart=function(){this._isCanceled()||(this.onLoadStart&&this.onLoadStart({target:this}),this.dispatchEvent("loadStart"))};b._sendProgress=function(e){if(!this._isCanceled()){var c=null;if(typeof e=="number"){this.progress=e,c={loaded:this.progress,total:1}}else{if(c=e,this.progress=e.loaded/e.total,isNaN(this.progress)||this.progress==Infinity){this.progress=0}}c.target=this;c.type="progress";this.onProgress&&this.onProgress(c);this.dispatchEvent(c)}};b._sendComplete=function(){this._isCanceled()||(this.onComplete&&this.onComplete({target:this}),this.dispatchEvent("complete"))};b._sendError=function(c){if(!this._isCanceled()){c==null&&(c={}),c.target=this,c.type="error",this.onError&&this.onError(c),this.dispatchEvent(c)}};b._isCanceled=function(){return window.createjs==null||this.canceled?true:false};b._parseURI=function(c){return !c?null:c.match(d.FILE_PATTERN)};b.toString=function(){return"[PreloadJS AbstractLoader]"};createjs.AbstractLoader=d})();this.createjs=this.createjs||{};(function(){var f=function(a){this.init(a)},b=f.prototype=new createjs.AbstractLoader;f.LOAD_TIMEOUT=8000;f.BINARY="binary";f.CSS="css";f.IMAGE="image";f.JAVASCRIPT="javascript";f.JSON="json";f.SOUND="sound";f.SVG="svg";f.TEXT="text";f.XML="xml";b.useXHR=true;b.stopOnError=false;b.maintainScriptOrder=true;b.next=null;b.onFileLoad=null;b.onFileProgress=null;b._typeCallbacks=null;b._extensionCallbacks=null;b._loadStartWasDispatched=false;b._maxConnections=1;b._currentlyLoadingScript=null;b._currentLoads=null;b._loadQueue=null;b._loadQueueBackup=null;b._loadItemsById=null;b._loadItemsBySrc=null;b._loadedResults=null;b._loadedRawResults=null;b._numItems=0;b._numItemsLoaded=0;b._scriptOrder=null;b._loadedScripts=null;b.init=function(a){this._numItems=this._numItemsLoaded=0;this._loadStartWasDispatched=this._paused=false;this._currentLoads=[];this._loadQueue=[];this._loadQueueBackup=[];this._scriptOrder=[];this._loadedScripts=[];this._loadItemsById={};this._loadItemsBySrc={};this._loadedResults={};this._loadedRawResults={};this._typeCallbacks={};this._extensionCallbacks={};this.setUseXHR(a)};b.setUseXHR=function(a){return this.useXHR=a!=false&&window.XMLHttpRequest!=null};b.removeAll=function(){this.remove()};b.remove=function(g){var j=null;g&&!(g instanceof Array)?j=[g]:g&&(j=g);g=false;if(j){for(;j.length;){for(var n=j.pop(),m=this.getResult(n),o=this._loadQueue.length-1;o>=0;o--){if(k=this._loadQueue[o].getItem(),k.id==n||k.src==n){this._loadQueue.splice(o,1)[0].cancel();break}}for(o=this._loadQueueBackup.length-1;o>=0;o--){if(k=this._loadQueueBackup[o].getItem(),k.id==n||k.src==n){this._loadQueueBackup.splice(o,1)[0].cancel();break}}if(m){delete this._loadItemsById[m.id],delete this._loadItemsBySrc[m.src],this._disposeItem(m)}else{for(var o=this._currentLoads.length-1;o>=0;o--){var k=this._currentLoads[o].getItem();if(k.id==n||k.src==n){this._currentLoads.splice(o,1)[0].cancel();g=true;break}}}}g&&this._loadNext()}else{this.close();for(n in this._loadItemsById){this._disposeItem(this._loadItemsById[n])}this.initialize(this.useXHR)}};b.reset=function(){this.close();for(var a in this._loadItemsById){this._disposeItem(this._loadItemsById[a])}a=[];for(i=0,l=this._loadQueueBackup.length;i<l;i++){a.push(this._loadQueueBackup[i].getItem())}this.loadManifest(a,false)};f.isBinary=function(a){switch(a){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return true;default:return false}};b.installPlugin=function(c){if(!(c==null||c.getPreloadHandlers==null)){c=c.getPreloadHandlers();if(c.types!=null){for(var g=0,h=c.types.length;g<h;g++){this._typeCallbacks[c.types[g]]=c.callback}}if(c.extensions!=null){for(g=0,h=c.extensions.length;g<h;g++){this._extensionCallbacks[c.extensions[g]]=c.callback}}}};b.setMaxConnections=function(a){this._maxConnections=a;this._paused||this._loadNext()};b.loadFile=function(c,d){c==null?this._sendError({text:"PRELOAD_NO_FILE"}):(this._addItem(c),d!==false&&this.setPaused(false))};b.loadManifest=function(g,h){var k=null;if(g instanceof Array){if(g.length==0){this._sendError({text:"PRELOAD_MANIFEST_EMPTY"});return}k=g}else{if(g==null){this._sendError({text:"PRELOAD_MANIFEST_NULL"});return}k=[g]}for(var m=0,j=k.length;m<j;m++){this._addItem(k[m])}h!==false&&this.setPaused(false)};b.load=function(){this.setPaused(false)};b.getItem=function(a){return this._loadItemsById[a]||this._loadItemsBySrc[a]};b.getResult=function(c,g){var h=this._loadItemsById[c]||this._loadItemsBySrc[c];if(h==null){return null}h=h.id;return g&&this._loadedRawResults[h]?this._loadedRawResults[h]:this._loadedResults[h]};b.setPaused=function(a){(this._paused=a)||this._loadNext()};b.close=function(){for(;this._currentLoads.length;){this._currentLoads.pop().cancel()}this._scriptOrder.length=0;this._loadedScripts.length=0;this.loadStartWasDispatched=false};b._addItem=function(c){c=this._createLoadItem(c);if(c!=null){var d=this._createLoader(c);d!=null&&(this._loadQueue.push(d),this._loadQueueBackup.push(d),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&c.type==createjs.LoadQueue.JAVASCRIPT&&d instanceof createjs.XHRLoader&&(this._scriptOrder.push(c),this._loadedScripts.push(null)))}};b._createLoadItem=function(c){var d=null;switch(typeof c){case"string":d={src:c};break;case"object":d=window.HTMLAudioElement&&c instanceof HTMLAudioElement?{tag:c,src:d.tag.src,type:createjs.LoadQueue.SOUND}:c}c=this._parseURI(d.src);if(c!=null){d.ext=c[5]}if(d.type==null){d.type=this._getTypeByExtension(d.ext)}if(d.tag==null){d.tag=this._createTag(d.type)}if(d.id==null||d.id==""){d.id=d.src}if(c=this._typeCallbacks[d.type]||this._extensionCallbacks[d.ext]){c=c(d.src,d.type,d.id,d.data);if(c===false){return null}else{if(c!==true){if(c.src!=null){d.src=c.src}if(c.id!=null){d.id=c.id}if(c.tag!=null&&c.tag.load instanceof Function){d.tag=c.tag}if(c.completeHandler!=null){d.completeHandler=c.completeHandler}}}if(c.type){d.type=c.type}c=this._parseURI(d.src);if(c!=null){d.ext=c[5]}}this._loadItemsById[d.id]=d;return this._loadItemsBySrc[d.src]=d};b._createLoader=function(c){var g=this.useXHR;switch(c.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:g=true;break;case createjs.LoadQueue.SOUND:g=false}return g?new createjs.XHRLoader(c):new createjs.TagLoader(c)};b._loadNext=function(){if(!this._paused){if(!this._loadStartWasDispatched){this._sendLoadStart(),this._loadStartWasDispatched=true}if(this._numItems==this._numItemsLoaded){this.loaded=true,this._sendComplete(),this.next&&this.next.load&&this.next.load()}for(var g=0,h=this._loadQueue.length;g<h;g++){if(this._currentLoads.length>=this._maxConnections){break}var j=this._loadQueue[g];if(this.maintainScriptOrder&&j instanceof createjs.TagLoader&&j.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript){continue}this._currentlyLoadingScript=true}this._loadQueue.splice(g,1);this._loadItem(j);g--;h--}}};b._loadItem=function(c){c.addEventListener("progress",createjs.proxy(this._handleProgress,this));c.addEventListener("complete",createjs.proxy(this._handleFileComplete,this));c.addEventListener("error",createjs.proxy(this._handleFileError,this));this._currentLoads.push(c);c.load()};b._handleFileError=function(c){var g=c.target;this._numItemsLoaded++;this._updateProgress();c={item:g.getItem()};this._sendError(c);this.stopOnError||(this._removeLoadItem(g),this._loadNext())};b._handleFileComplete=function(c){var c=c.target,g=c.getItem();this._loadedResults[g.id]=c.getResult();c instanceof createjs.XHRLoader&&(this._loadedRawResults[g.id]=c.getResult(true));this._removeLoadItem(c);if(this.maintainScriptOrder&&g.type==createjs.LoadQueue.JAVASCRIPT){if(c instanceof createjs.TagLoader){this._currentlyLoadingScript=false}else{this._loadedScripts[this._scriptOrder.indexOf(g)]=g;this._checkScriptLoadOrder(c);return}}this._processFinishedLoad(g)};b._processFinishedLoad=function(c){this._numItemsLoaded++;this._updateProgress();this._sendFileComplete(c);this._loadNext()};b._checkScriptLoadOrder=function(){for(var g=this._loadedScripts.length,h=0;h<g;h++){var j=this._loadedScripts[h];if(j===null){break}j!==true&&(this._processFinishedLoad(j),this._loadedScripts[h]=true,h--,g--)}};b._removeLoadItem=function(g){for(var h=this._currentLoads.length,j=0;j<h;j++){if(this._currentLoads[j]==g){this._currentLoads.splice(j,1);break}}};b._handleProgress=function(c){c=c.target;this._sendFileProgress(c.getItem(),c.progress);this._updateProgress()};b._updateProgress=function(){var g=this._numItemsLoaded/this._numItems,k=this._numItems-this._numItemsLoaded;if(k>0){for(var m=0,h=0,j=this._currentLoads.length;h<j;h++){m+=this._currentLoads[h].progress}g+=m/k*(k/this._numItems)}this._sendProgress(g)};b._disposeItem=function(c){delete this._loadedResults[c.id];delete this._loadedRawResults[c.id];delete this._loadItemsById[c.id];delete this._loadItemsBySrc[c.src]};b._createTag=function(c){var g=null;switch(c){case createjs.LoadQueue.IMAGE:return document.createElement("img");case createjs.LoadQueue.SOUND:return g=document.createElement("audio"),g.autoplay=false,g;case createjs.LoadQueue.JAVASCRIPT:return g=document.createElement("script"),g.type="text/javascript",g;case createjs.LoadQueue.CSS:return g=this.useXHR?document.createElement("style"):document.createElement("link"),g.rel="stylesheet",g.type="text/css",g;case createjs.LoadQueue.SVG:return this.useXHR?g=document.createElement("svg"):(g=document.createElement("object"),g.type="image/svg+xml"),g}return null};b._getTypeByExtension=function(c){switch(c){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}};b._sendFileProgress=function(g,h){if(this._isCanceled()){this._cleanUp()}else{var j={target:this,type:"fileprogress",progress:h,loaded:h,total:1,item:g};this.onFileProgress&&this.onFileProgress(j);this.dispatchEvent(j)}};b._sendFileComplete=function(c){if(!this._isCanceled()){var g={target:this,type:"fileload",item:c,result:this._loadedResults[c.id],rawResult:this._loadedRawResults[c.id]};c.completeHandler&&c.completeHandler(g);this.onFileLoad&&this.onFileLoad(g);this.dispatchEvent(g)}};b.toString=function(){return"[PreloadJS LoadQueue]"};createjs.proxy=function(c,g){return function(){return c.apply(g,arguments)}};createjs.LoadQueue=f;if(!createjs.proxy){createjs.proxy=function(g,h){var j=Array.prototype.slice.call(arguments,2);return function(){return g.apply(h,Array.prototype.slice.call(arguments,0).concat(j))}}}var e=function(){};e.init=function(){var c=navigator.userAgent;e.isFirefox=c.indexOf("Firefox")>-1;e.isOpera=window.opera!=null;e.isChrome=c.indexOf("Chrome")>-1;e.isIOS=c.indexOf("iPod")>-1||c.indexOf("iPhone")>-1||c.indexOf("iPad")>-1};e.init();createjs.LoadQueue.BrowserDetect=e;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(g){if(this==null){throw new TypeError}var j=Object(this),k=j.length>>>0;if(k===0){return -1}var h=0;arguments.length>1&&(h=Number(arguments[1]),h!=h?h=0:h!=0&&h!=Infinity&&h!=-Infinity&&(h=(h>0||-1)*Math.floor(Math.abs(h))));if(h>=k){return -1}for(h=h>=0?h:Math.max(k-Math.abs(h),0);h<k;h++){if(h in j&&j[h]===g){return h}}return -1}}})();this.createjs=this.createjs||{};(function(){var d=function(c){this.init(c)},b=d.prototype=new createjs.AbstractLoader;b._loadTimeout=null;b._tagCompleteProxy=null;b._isAudio=false;b._tag=null;b.init=function(c){this._item=c;this._tag=c.tag;this._isAudio=window.HTMLAudioElement&&c.tag instanceof HTMLAudioElement;this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)};b.getResult=function(){return this._tag};b.cancel=function(){this.canceled=true;this._clean();this.getItem()};b.load=function(){var e=this._item,c=this._tag;clearTimeout(this._loadTimeout);this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT);if(this._isAudio){c.src=null,c.preload="auto"}c.onerror=createjs.proxy(this._handleError,this);this._isAudio?(c.onstalled=createjs.proxy(this._handleStalled,this),c.addEventListener("canplaythrough",this._tagCompleteProxy,false)):(c.onload=createjs.proxy(this._handleLoad,this),c.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));switch(e.type){case createjs.LoadQueue.CSS:c.href=e.src;break;case createjs.LoadQueue.SVG:c.data=e.src;break;default:c.src=e.src}if(e.type==createjs.LoadQueue.SVG||e.type==createjs.LoadQueue.JAVASCRIPT||e.type==createjs.LoadQueue.CSS){(document.body||document.getElementsByTagName("body")[0]).appendChild(c)}c.load!=null&&c.load()};b._handleTimeout=function(){this._clean();this._sendError({reason:"PRELOAD_TIMEOUT"})};b._handleStalled=function(){};b._handleError=function(){this._clean();this._sendError()};b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);this.getItem().tag.readyState=="loaded"&&this._handleLoad()};b._handleLoad=function(){if(!this._isCanceled()){var e=this.getItem(),c=e.tag;if(!(this.loaded||this.isAudio&&c.readyState!==4)){this.loaded=true,e.type==createjs.LoadQueue.SVG&&(document.body||document.getElementsByTagName("body")[0]).removeChild(c),this._clean(),this._sendComplete()}}};b._clean=function(){clearTimeout(this._loadTimeout);var c=this.getItem().tag;c.onload=null;c.removeEventListener&&c.removeEventListener("canplaythrough",this._tagCompleteProxy,false);c.onstalled=null;c.onprogress=null;c.onerror=null;c.parentNode&&c.parentNode.removeChild(c)};b.toString=function(){return"[PreloadJS TagLoader]"};createjs.TagLoader=d})();this.createjs=this.createjs||{};(function(){var d=function(c){this.init(c)},b=d.prototype=new createjs.AbstractLoader;b._request=null;b._loadTimeout=null;b._xhrLevel=1;b._response=null;b._rawResponse=null;b.init=function(c){this._item=c;this._createXHR(c)};b.getResult=function(c){return c&&this._rawResponse?this._rawResponse:this._response};b.cancel=function(){this.canceled=true;this._clean();this._request.abort()};b.load=function(){if(this._request==null){this._handleError()}else{this._request.onloadstart=createjs.proxy(this._handleLoadStart,this);this._request.onprogress=createjs.proxy(this._handleProgress,this);this._request.onabort=createjs.proxy(this._handleAbort,this);this._request.onerror=createjs.proxy(this._handleError,this);this._request.ontimeout=createjs.proxy(this._handleTimeout,this);if(this._xhrLevel==1){this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT)}this._request.onload=createjs.proxy(this._handleLoad,this);if(this._request.onreadystatechange){this._request.onreadystatechange=this._handleReadyStateChange(this)}try{this._request.send()}catch(c){this._sendError({source:c})}}};b._handleProgress=function(c){c.loaded>0&&c.total==0||this._sendProgress({loaded:c.loaded,total:c.total})};b._handleLoadStart=function(){clearTimeout(this._loadTimeout);this._sendLoadStart()};b._handleAbort=function(){this._clean();this._sendError()};b._handleError=function(){this._clean();this._sendError()};b._handleReadyStateChange=function(){this._request.readyState==4&&this._handleLoad()};b._handleLoad=function(){if(!this.loaded){this.loaded=true,this._checkError()?(this._response=this._getResponse(),this._clean(),this._generateTag()&&this._sendComplete()):this._handleError()}};b._handleTimeout=function(){this._clean();this._sendError({reason:"PRELOAD_TIMEOUT"})};b._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return false}return true};b._getResponse=function(){if(this._response!=null){return this._response}if(this._request.response!=null){return this._request.response}try{if(this._request.responseText!=null){return this._request.responseText}}catch(e){}try{if(this._request.responseXML!=null){return this._request.responseXML}}catch(c){}return null};b._createXHR=function(h){var g=document.createElement("a");g.href=h.src;var n=document.createElement("a");n.href=location.href;g=g.hostname!=""&&(g.port!=n.port||g.protocol!=n.protocol||g.hostname!=n.hostname);n=null;if(g&&window.XDomainRequest){n=new XDomainRequest}else{if(window.XMLHttpRequest){n=new XMLHttpRequest}else{try{n=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(j){try{n=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(k){try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){return false}}}}}h.type==createjs.LoadQueue.TEXT&&n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined");this._xhrLevel=typeof n.responseType==="string"?2:1;n.open("GET",h.src,true);g&&n instanceof XMLHttpRequest&&this._xhrLevel==1&&n.setRequestHeader("Origin",location.origin);if(createjs.LoadQueue.isBinary(h.type)){n.responseType="arraybuffer"}this._request=n;return true};b._clean=function(){clearTimeout(this._loadTimeout);var c=this._request;c.onloadstart=null;c.onprogress=null;c.onabort=null;c.onerror=null;c.onload=null;c.ontimeout=null;c.onloadend=null;c.onreadystatechange=null};b._generateTag=function(){var f=this._item.tag;switch(this._item.type){case createjs.LoadQueue.IMAGE:return f.onload=createjs.proxy(this._handleTagReady,this),f.src=this._item.src,this._rawResponse=this._response,this._response=f,false;case createjs.LoadQueue.JAVASCRIPT:f=document.createElement("script");this._rawResponse=f.text=this._response;this._response=f;break;case createjs.LoadQueue.CSS:document.getElementsByTagName("head")[0].appendChild(f);if(f.styleSheet){f.styleSheet.cssText=this._response}else{var e=document.createTextNode(this._response);f.appendChild(e)}this._rawResponse=this._response;this._response=f;break;case createjs.LoadQueue.XML:this._response=e=this._parseXML(this._response,"text/xml");break;case createjs.LoadQueue.SVG:e=this._parseXML(this._response,"image/svg+xml");this._rawResponse=this._response;f.appendChild(e.documentElement);this._response=f;break;case createjs.LoadQueue.JSON:f={};try{f=JSON.parse(this._response)}catch(g){f=null}this._rawResponse=this._response;this._response=f}return true};b._parseXML=function(f,e){var g=null;window.DOMParser?g=(new DOMParser).parseFromString(f,e):(g=new ActiveXObject("Microsoft.XMLDOM"),g.async=false,g.loadXML(f));return g};b._handleTagReady=function(){this._sendComplete()};b.toString=function(){return"[PreloadJS XHRLoader]"};createjs.XHRLoader=d})();typeof JSON!=="object"&&(JSON={});(function(){function c(a){return a<10?"0"+a:a}function a(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=o[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(b,c){var g,n,m,p,q=f,k,j=c[b];j&&typeof j==="object"&&typeof j.toJSON==="function"&&(j=j.toJSON(b));typeof h==="function"&&(j=h.call(c,b,j));switch(typeof j){case"string":return a(j);case"number":return isFinite(j)?String(j):"null";case"boolean":case"null":return String(j);case"object":if(!j){return"null"}f+=e;k=[];if(Object.prototype.toString.apply(j)==="[object Array]"){p=j.length;for(g=0;g<p;g+=1){k[g]=d(g,j)||"null"}m=k.length===0?"[]":f?"[\n"+f+k.join(",\n"+f)+"\n"+q+"]":"["+k.join(",")+"]";f=q;return m}if(h&&typeof h==="object"){p=h.length;for(g=0;g<p;g+=1){typeof h[g]==="string"&&(n=h[g],(m=d(n,j))&&k.push(a(n)+(f?": ":":")+m))}}else{for(n in j){Object.prototype.hasOwnProperty.call(j,n)&&(m=d(n,j))&&k.push(a(n)+(f?": ":":")+m)}}m=k.length===0?"{}":f?"{\n"+f+k.join(",\n"+f)+"\n"+q+"}":"{"+k.join(",")+"}";f=q;return m}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,e,o={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;if(typeof JSON.stringify!=="function"){JSON.stringify=function(a,b,c){var g;e=f="";if(typeof c==="number"){for(g=0;g<c;g+=1){e+=" "}}else{typeof c==="string"&&(e=c)}if((h=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw Error("JSON.stringify")}return d("",{"":a})}}if(typeof JSON.parse!=="function"){JSON.parse=function(a,c){function d(a,b){var e,g,f=a[b];if(f&&typeof f==="object"){for(e in f){Object.prototype.hasOwnProperty.call(f,e)&&(g=d(f,e),g!==void 0?f[e]=g:delete f[e])}}return c.call(a,b,f)}var e,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return e=eval("("+a+")"),typeof c==="function"?d({"":e},""):e}throw new SyntaxError("JSON.parse")}}})();