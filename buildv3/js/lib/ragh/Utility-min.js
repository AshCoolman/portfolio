var ragh=ragh?ragh:{};ragh.chooseOne=ragh.one=function(a){return a[Math.round(a.length*Math.random()-0.5)]};ragh.createJsonMapFromImage=function(v,k,m){$("body").append('<canvas class="tempcreateJsonMapFromImage">');var b=$(".tempcreateJsonMapFromImage",$("body"));this.tcanvas=b[0];if(!this.tcanvas.getContext){setTimeout(function(c){return function(){c.createJsonMapFromImage(v,k,m)}}(this),100)}else{var t=[[[]]],j=v.width,q=v.height,d,s=this.tcanvas,n=s.getContext("2d"),r,l;n.clearRect(0,0,j,q);n.drawImage(v,0,0);r=n.getImageData(0,0,j,q);l=r.data;for(var p=0;p<l.length;p+=4){d=p/4;if(l[p+3]==255){var g=d%j;var f=Math.floor(d/j);if(!t[g]){t[g]=[]}if(!t[g][f]){t[g][f]=[]}var u=(65536*l[p+0]+256*l[p+1]+l[p+2]).toString(16);t[g][f][0]={color:"#"+u}}}maxX=j-1;maxY=q-1;maxZ=0;for(var e=0;e<t.length;e++){if(!t[e]){t[e]=[]}for(var o=0;o<t[e].length;o++){if(!t[e][o]){t[e][o]=[]}for(var a=0;a<t[e][o].length;a++){if(t[e][o][a]){k(e,o,0,t[e][o][0],maxX,maxY,0)}}}}b.remove(".temp-createJsonMapFromImage");this.$tcanvas=this.tcanvas=null;m(t,k,m)}};